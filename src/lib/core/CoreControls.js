(function () {
  /*
   Notice * This file contains works from many authors under various (but compatible) licenses. Please see legal.txt for more information. **/
  (function () {
    var n = this,
      t = n._,
      r = {},
      e = Array.prototype,
      u = Object.prototype,
      i = Function.prototype,
      a = e.push,
      o = e.slice,
      c = e.concat,
      l = u.toString,
      f = u.hasOwnProperty,
      s = e.forEach,
      p = e.map,
      h = e.reduce,
      v = e.reduceRight,
      g = e.filter,
      d = e.every,
      m = e.some,
      y = e.indexOf,
      b = e.lastIndexOf,
      x = Array.isArray,
      w = Object.keys,
      _ = i.bind,
      j = function (n) {
        return n instanceof j ? n : this instanceof j ? (this._wrapped = n, void 0) : new j(n)
      };
    "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = j), exports._ = j) :
      n._ = j, j.VERSION = "1.5.2";
    var A = j.each = j.forEach = function (n, t, e) {
      if (null != n)
        if (s && n.forEach === s) n.forEach(t, e);
        else if (n.length === +n.length)
        for (var u = 0, i = n.length; i > u; u++) {
          if (t.call(e, n[u], u, n) === r) return
        } else
          for (var a = j.keys(n), u = 0, i = a.length; i > u; u++)
            if (t.call(e, n[a[u]], a[u], n) === r) return
    };
    j.map = j.collect = function (n, t, r) {
      var e = [];
      return null == n ? e : p && n.map === p ? n.map(t, r) : (A(n, function (n, u, i) {
        e.push(t.call(r, n, u, i))
      }), e)
    };
    var E = "Reduce of empty array with no initial value";
    j.reduce = j.foldl = j.inject =
      function (n, t, r, e) {
        var u = arguments.length > 2;
        if (null == n && (n = []), h && n.reduce === h) return e && (t = j.bind(t, e)), u ? n.reduce(t, r) : n.reduce(t);
        if (A(n, function (n, i, a) {
            u ? r = t.call(e, r, n, i, a) : (r = n, u = !0)
          }), !u) throw new TypeError(E);
        return r
      }, j.reduceRight = j.foldr = function (n, t, r, e) {
        var u = arguments.length > 2;
        if (null == n && (n = []), v && n.reduceRight === v) return e && (t = j.bind(t, e)), u ? n.reduceRight(t, r) : n.reduceRight(t);
        var i = n.length;
        if (i !== +i) {
          var a = j.keys(n);
          i = a.length
        }
        if (A(n, function (o, c, l) {
            c = a ? a[--i] : --i, u ? r = t.call(e, r,
              n[c], c, l) : (r = n[c], u = !0)
          }), !u) throw new TypeError(E);
        return r
      }, j.find = j.detect = function (n, t, r) {
        var e;
        return O(n, function (n, u, i) {
          return t.call(r, n, u, i) ? (e = n, !0) : void 0
        }), e
      }, j.filter = j.select = function (n, t, r) {
        var e = [];
        return null == n ? e : g && n.filter === g ? n.filter(t, r) : (A(n, function (n, u, i) {
          t.call(r, n, u, i) && e.push(n)
        }), e)
      }, j.reject = function (n, t, r) {
        return j.filter(n, function (n, e, u) {
          return !t.call(r, n, e, u)
        }, r)
      }, j.every = j.all = function (n, t, e) {
        t || (t = j.identity);
        var u = !0;
        return null == n ? u : d && n.every === d ? n.every(t,
          e) : (A(n, function (n, i, a) {
          return (u = u && t.call(e, n, i, a)) ? void 0 : r
        }), !!u)
      };
    var O = j.some = j.any = function (n, t, e) {
      t || (t = j.identity);
      var u = !1;
      return null == n ? u : m && n.some === m ? n.some(t, e) : (A(n, function (n, i, a) {
        return u || (u = t.call(e, n, i, a)) ? r : void 0
      }), !!u)
    };
    j.contains = j.include = function (n, t) {
        return null == n ? !1 : y && n.indexOf === y ? n.indexOf(t) != -1 : O(n, function (n) {
          return n === t
        })
      }, j.invoke = function (n, t) {
        var r = o.call(arguments, 2),
          e = j.isFunction(t);
        return j.map(n, function (n) {
          return (e ? t : n[t]).apply(n, r)
        })
      }, j.pluck = function (n,
        t) {
        return j.map(n, function (n) {
          return n[t]
        })
      }, j.where = function (n, t, r) {
        return j.isEmpty(t) ? r ? void 0 : [] : j[r ? "find" : "filter"](n, function (n) {
          for (var r in t)
            if (t[r] !== n[r]) return !1;
          return !0
        })
      }, j.findWhere = function (n, t) {
        return j.where(n, t, !0)
      }, j.max = function (n, t, r) {
        if (!t && j.isArray(n) && n[0] === +n[0] && n.length < 65535) return Math.max.apply(Math, n);
        if (!t && j.isEmpty(n)) return -1 / 0;
        var e = {
          computed: -1 / 0,
          value: -1 / 0
        };
        return A(n, function (n, u, i) {
          var a = t ? t.call(r, n, u, i) : n;
          a > e.computed && (e = {
            value: n,
            computed: a
          })
        }), e.value
      },
      j.min = function (n, t, r) {
        if (!t && j.isArray(n) && n[0] === +n[0] && n.length < 65535) return Math.min.apply(Math, n);
        if (!t && j.isEmpty(n)) return 1 / 0;
        var e = {
          computed: 1 / 0,
          value: 1 / 0
        };
        return A(n, function (n, u, i) {
          var a = t ? t.call(r, n, u, i) : n;
          a < e.computed && (e = {
            value: n,
            computed: a
          })
        }), e.value
      }, j.shuffle = function (n) {
        var t, r = 0,
          e = [];
        return A(n, function (n) {
          t = j.random(r++), e[r - 1] = e[t], e[t] = n
        }), e
      }, j.sample = function (n, t, r) {
        return arguments.length < 2 || r ? n[j.random(n.length - 1)] : j.shuffle(n).slice(0, Math.max(0, t))
      };
    var k = function (n) {
      return j.isFunction(n) ?
        n : function (t) {
          return t[n]
        }
    };
    j.sortBy = function (n, t, r) {
      var e = k(t);
      return j.pluck(j.map(n, function (n, t, u) {
        return {
          value: n,
          index: t,
          criteria: e.call(r, n, t, u)
        }
      }).sort(function (n, t) {
        var r = n.criteria,
          e = t.criteria;
        if (r !== e) {
          if (r > e || r === void 0) return 1;
          if (e > r || e === void 0) return -1
        }
        return n.index - t.index
      }), "value")
    };
    var F = function (n) {
      return function (t, r, e) {
        var u = {},
          i = null == r ? j.identity : k(r);
        return A(t, function (r, a) {
          var o = i.call(e, r, a, t);
          n(u, o, r)
        }), u
      }
    };
    j.groupBy = F(function (n, t, r) {
        (j.has(n, t) ? n[t] : n[t] = []).push(r)
      }),
      j.indexBy = F(function (n, t, r) {
        n[t] = r
      }), j.countBy = F(function (n, t) {
        j.has(n, t) ? n[t]++ : n[t] = 1
      }), j.sortedIndex = function (n, t, r, e) {
        r = null == r ? j.identity : k(r);
        for (var u = r.call(e, t), i = 0, a = n.length; a > i;) {
          var o = i + a >>> 1;
          r.call(e, n[o]) < u ? i = o + 1 : a = o
        }
        return i
      }, j.toArray = function (n) {
        return n ? j.isArray(n) ? o.call(n) : n.length === +n.length ? j.map(n, j.identity) : j.values(n) : []
      }, j.size = function (n) {
        return null == n ? 0 : n.length === +n.length ? n.length : j.keys(n).length
      }, j.first = j.head = j.take = function (n, t, r) {
        return null == n ? void 0 : null ==
          t || r ? n[0] : o.call(n, 0, t)
      }, j.initial = function (n, t, r) {
        return o.call(n, 0, n.length - (null == t || r ? 1 : t))
      }, j.last = function (n, t, r) {
        return null == n ? void 0 : null == t || r ? n[n.length - 1] : o.call(n, Math.max(n.length - t, 0))
      }, j.rest = j.tail = j.drop = function (n, t, r) {
        return o.call(n, null == t || r ? 1 : t)
      }, j.compact = function (n) {
        return j.filter(n, j.identity)
      };
    var M = function (n, t, r) {
      return t && j.every(n, j.isArray) ? c.apply(r, n) : (A(n, function (n) {
        j.isArray(n) || j.isArguments(n) ? t ? a.apply(r, n) : M(n, t, r) : r.push(n)
      }), r)
    };
    j.flatten = function (n, t) {
      return M(n,
        t, [])
    }, j.without = function (n) {
      return j.difference(n, o.call(arguments, 1))
    }, j.uniq = j.unique = function (n, t, r, e) {
      j.isFunction(t) && (e = r, r = t, t = !1);
      var u = r ? j.map(n, r, e) : n,
        i = [],
        a = [];
      return A(u, function (r, e) {
        (t ? e && a[a.length - 1] === r : j.contains(a, r)) || (a.push(r), i.push(n[e]))
      }), i
    }, j.union = function () {
      return j.uniq(j.flatten(arguments, !0))
    }, j.intersection = function (n) {
      var t = o.call(arguments, 1);
      return j.filter(j.uniq(n), function (n) {
        return j.every(t, function (t) {
          return j.indexOf(t, n) >= 0
        })
      })
    }, j.difference = function (n) {
      var t =
        c.apply(e, o.call(arguments, 1));
      return j.filter(n, function (n) {
        return !j.contains(t, n)
      })
    }, j.zip = function () {
      for (var n = j.max(j.pluck(arguments, "length").concat(0)), t = new Array(n), r = 0; n > r; r++) t[r] = j.pluck(arguments, "" + r);
      return t
    }, j.object = function (n, t) {
      if (null == n) return {};
      for (var r = {}, e = 0, u = n.length; u > e; e++) t ? r[n[e]] = t[e] : r[n[e][0]] = n[e][1];
      return r
    }, j.indexOf = function (n, t, r) {
      if (null == n) return -1;
      var e = 0,
        u = n.length;
      if (r) {
        if ("number" != typeof r) return e = j.sortedIndex(n, t), n[e] === t ? e : -1;
        e = 0 > r ? Math.max(0, u +
          r) : r
      }
      if (y && n.indexOf === y) return n.indexOf(t, r);
      for (; u > e; e++)
        if (n[e] === t) return e;
      return -1
    }, j.lastIndexOf = function (n, t, r) {
      if (null == n) return -1;
      var e = null != r;
      if (b && n.lastIndexOf === b) return e ? n.lastIndexOf(t, r) : n.lastIndexOf(t);
      for (var u = e ? r : n.length; u--;)
        if (n[u] === t) return u;
      return -1
    }, j.range = function (n, t, r) {
      arguments.length <= 1 && (t = n || 0, n = 0), r = arguments[2] || 1;
      for (var e = Math.max(Math.ceil((t - n) / r), 0), u = 0, i = new Array(e); e > u;) i[u++] = n, n += r;
      return i
    };
    var R = function () {};
    j.bind = function (n, t) {
      var r, e;
      if (_ &&
        n.bind === _) return _.apply(n, o.call(arguments, 1));
      if (!j.isFunction(n)) throw new TypeError;
      return r = o.call(arguments, 2), e = function () {
        if (!(this instanceof e)) return n.apply(t, r.concat(o.call(arguments)));
        R.prototype = n.prototype;
        var u = new R;
        R.prototype = null;
        var i = n.apply(u, r.concat(o.call(arguments)));
        return Object(i) === i ? i : u
      }
    }, j.partial = function (n) {
      var t = o.call(arguments, 1);
      return function () {
        return n.apply(this, t.concat(o.call(arguments)))
      }
    }, j.bindAll = function (n) {
      var t = o.call(arguments, 1);
      if (0 === t.length) throw new Error("bindAll must be passed function names");
      return A(t, function (t) {
        n[t] = j.bind(n[t], n)
      }), n
    }, j.memoize = function (n, t) {
      var r = {};
      return t || (t = j.identity),
        function () {
          var e = t.apply(this, arguments);
          return j.has(r, e) ? r[e] : r[e] = n.apply(this, arguments)
        }
    }, j.delay = function (n, t) {
      var r = o.call(arguments, 2);
      return setTimeout(function () {
        return n.apply(null, r)
      }, t)
    }, j.defer = function (n) {
      return j.delay.apply(j, [n, 1].concat(o.call(arguments, 1)))
    }, j.throttle = function (n, t, r) {
      var e, u, i, a = null,
        o = 0;
      r || (r = {});
      var c = function () {
        o = r.leading === !1 ? 0 : new Date, a = null, i = n.apply(e,
          u)
      };
      return function () {
        var l = new Date;
        o || r.leading !== !1 || (o = l);
        var f = t - (l - o);
        return e = this, u = arguments, 0 >= f ? (clearTimeout(a), a = null, o = l, i = n.apply(e, u)) : a || r.trailing === !1 || (a = setTimeout(c, f)), i
      }
    }, j.debounce = function (n, t, r) {
      var e, u, i, a, o;
      return function () {
        i = this, u = arguments, a = new Date;
        var c = function () {
            var l = new Date - a;
            t > l ? e = setTimeout(c, t - l) : (e = null, r || (o = n.apply(i, u)))
          },
          l = r && !e;
        return e || (e = setTimeout(c, t)), l && (o = n.apply(i, u)), o
      }
    }, j.once = function (n) {
      var t, r = !1;
      return function () {
        return r ? t : (r = !0, t =
          n.apply(this, arguments), n = null, t)
      }
    }, j.wrap = function (n, t) {
      return function () {
        var r = [n];
        return a.apply(r, arguments), t.apply(this, r)
      }
    }, j.compose = function () {
      var n = arguments;
      return function () {
        for (var t = arguments, r = n.length - 1; r >= 0; r--) t = [n[r].apply(this, t)];
        return t[0]
      }
    }, j.after = function (n, t) {
      return function () {
        return --n < 1 ? t.apply(this, arguments) : void 0
      }
    }, j.keys = w || function (n) {
      if (n !== Object(n)) throw new TypeError("Invalid object");
      var t = [];
      for (var r in n) j.has(n, r) && t.push(r);
      return t
    }, j.values = function (n) {
      for (var t =
          j.keys(n), r = t.length, e = new Array(r), u = 0; r > u; u++) e[u] = n[t[u]];
      return e
    }, j.pairs = function (n) {
      for (var t = j.keys(n), r = t.length, e = new Array(r), u = 0; r > u; u++) e[u] = [t[u], n[t[u]]];
      return e
    }, j.invert = function (n) {
      for (var t = {}, r = j.keys(n), e = 0, u = r.length; u > e; e++) t[n[r[e]]] = r[e];
      return t
    }, j.functions = j.methods = function (n) {
      var t = [];
      for (var r in n) j.isFunction(n[r]) && t.push(r);
      return t.sort()
    }, j.extend = function (n) {
      return A(o.call(arguments, 1), function (t) {
        if (t)
          for (var r in t) n[r] = t[r]
      }), n
    }, j.pick = function (n) {
      var t = {},
        r = c.apply(e, o.call(arguments, 1));
      return A(r, function (r) {
        r in n && (t[r] = n[r])
      }), t
    }, j.omit = function (n) {
      var t = {},
        r = c.apply(e, o.call(arguments, 1));
      for (var u in n) j.contains(r, u) || (t[u] = n[u]);
      return t
    }, j.defaults = function (n) {
      return A(o.call(arguments, 1), function (t) {
        if (t)
          for (var r in t) n[r] === void 0 && (n[r] = t[r])
      }), n
    }, j.clone = function (n) {
      return j.isObject(n) ? j.isArray(n) ? n.slice() : j.extend({}, n) : n
    }, j.tap = function (n, t) {
      return t(n), n
    };
    var S = function (n, t, r, e) {
      if (n === t) return 0 !== n || 1 / n == 1 / t;
      if (null == n || null ==
        t) return n === t;
      n instanceof j && (n = n._wrapped), t instanceof j && (t = t._wrapped);
      var u = l.call(n);
      if (u != l.call(t)) return !1;
      switch (u) {
        case "[object String]":
          return n == String(t);
        case "[object Number]":
          return n != +n ? t != +t : 0 == n ? 1 / n == 1 / t : n == +t;
        case "[object Date]":
        case "[object Boolean]":
          return +n == +t;
        case "[object RegExp]":
          return n.source == t.source && n.global == t.global && n.multiline == t.multiline && n.ignoreCase == t.ignoreCase
      }
      if ("object" != typeof n || "object" != typeof t) return !1;
      for (var i = r.length; i--;)
        if (r[i] == n) return e[i] ==
          t;
      var a = n.constructor,
        o = t.constructor;
      if (a !== o && !(j.isFunction(a) && a instanceof a && j.isFunction(o) && o instanceof o)) return !1;
      r.push(n), e.push(t);
      var c = 0,
        f = !0;
      if ("[object Array]" == u) {
        if (c = n.length, f = c == t.length)
          for (; c-- && (f = S(n[c], t[c], r, e)););
      } else {
        for (var s in n)
          if (j.has(n, s) && (c++, !(f = j.has(t, s) && S(n[s], t[s], r, e)))) break;
        if (f) {
          for (s in t)
            if (j.has(t, s) && !c--) break;
          f = !c
        }
      }
      return r.pop(), e.pop(), f
    };
    j.isEqual = function (n, t) {
        return S(n, t, [], [])
      }, j.isEmpty = function (n) {
        if (null == n) return !0;
        if (j.isArray(n) ||
          j.isString(n)) return 0 === n.length;
        for (var t in n)
          if (j.has(n, t)) return !1;
        return !0
      }, j.isElement = function (n) {
        return !(!n || 1 !== n.nodeType)
      }, j.isArray = x || function (n) {
        return "[object Array]" == l.call(n)
      }, j.isObject = function (n) {
        return n === Object(n)
      }, A(["Arguments", "Function", "String", "Number", "Date", "RegExp"], function (n) {
        j["is" + n] = function (t) {
          return l.call(t) == "[object " + n + "]"
        }
      }), j.isArguments(arguments) || (j.isArguments = function (n) {
        return !(!n || !j.has(n, "callee"))
      }), "function" != typeof /./ && (j.isFunction = function (n) {
        return "function" ==
          typeof n
      }), j.isFinite = function (n) {
        return isFinite(n) && !isNaN(parseFloat(n))
      }, j.isNaN = function (n) {
        return j.isNumber(n) && n != +n
      }, j.isBoolean = function (n) {
        return n === !0 || n === !1 || "[object Boolean]" == l.call(n)
      }, j.isNull = function (n) {
        return null === n
      }, j.isUndefined = function (n) {
        return n === void 0
      }, j.has = function (n, t) {
        return f.call(n, t)
      }, j.noConflict = function () {
        return n._ = t, this
      }, j.identity = function (n) {
        return n
      }, j.times = function (n, t, r) {
        for (var e = Array(Math.max(0, n)), u = 0; n > u; u++) e[u] = t.call(r, u);
        return e
      }, j.random =
      function (n, t) {
        return null == t && (t = n, n = 0), n + Math.floor(Math.random() * (t - n + 1))
      };
    var I = {
      escape: {
        "&": "&amp;",
        "<": "&lt;",
        ">": "&gt;",
        '"': "&quot;",
        "'": "&#x27;"
      }
    };
    I.unescape = j.invert(I.escape);
    var T = {
      escape: new RegExp("[" + j.keys(I.escape).join("") + "]", "g"),
      unescape: new RegExp("(" + j.keys(I.unescape).join("|") + ")", "g")
    };
    j.each(["escape", "unescape"], function (n) {
      j[n] = function (t) {
        return null == t ? "" : ("" + t).replace(T[n], function (t) {
          return I[n][t]
        })
      }
    }), j.result = function (n, t) {
      if (null == n) return void 0;
      var r = n[t];
      return j.isFunction(r) ?
        r.call(n) : r
    }, j.mixin = function (n) {
      A(j.functions(n), function (t) {
        var r = j[t] = n[t];
        j.prototype[t] = function () {
          var n = [this._wrapped];
          return a.apply(n, arguments), z.call(this, r.apply(j, n))
        }
      })
    };
    var N = 0;
    j.uniqueId = function (n) {
      var t = ++N + "";
      return n ? n + t : t
    }, j.templateSettings = {
      evaluate: /<%([\s\S]+?)%>/g,
      interpolate: /<%=([\s\S]+?)%>/g,
      escape: /<%-([\s\S]+?)%>/g
    };
    var q = /(.)^/,
      B = {
        "'": "'",
        "\\": "\\",
        "\r": "r",
        "\n": "n",
        "\t": "t",
        "\u2028": "u2028",
        "\u2029": "u2029"
      },
      D = /\\|'|\r|\n|\t|\u2028|\u2029/g;
    j.template = function (n, t,
      r) {
      var e;
      r = j.defaults({}, r, j.templateSettings);
      var u = new RegExp([(r.escape || q).source, (r.interpolate || q).source, (r.evaluate || q).source].join("|") + "|$", "g"),
        i = 0,
        a = "__p+='";
      n.replace(u, function (t, r, e, u, o) {
          return a += n.slice(i, o).replace(D, function (n) {
            return "\\" + B[n]
          }), r && (a += "'+\n((__t=(" + r + "))==null?'':_.escape(__t))+\n'"), e && (a += "'+\n((__t=(" + e + "))==null?'':__t)+\n'"), u && (a += "';\n" + u + "\n__p+='"), i = o + t.length, t
        }), a += "';\n", r.variable || (a = "with(obj||{}){\n" + a + "}\n"), a = "var __t,__p='',__j=Array.prototype.join," +
        "print=function(){__p+=__j.call(arguments,'');};\n" + a + "return __p;\n";
      try {
        e = new Function(r.variable || "obj", "_", a)
      } catch (o) {
        throw o.source = a, o;
      }
      if (t) return e(t, j);
      var c = function (n) {
        return e.call(this, n, j)
      };
      return c.source = "function(" + (r.variable || "obj") + "){\n" + a + "}", c
    }, j.chain = function (n) {
      return j(n).chain()
    };
    var z = function (n) {
      return this._chain ? j(n).chain() : n
    };
    j.mixin(j), A(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], function (n) {
      var t = e[n];
      j.prototype[n] = function () {
        var r = this._wrapped;
        return t.apply(r, arguments), "shift" != n && "splice" != n || 0 !== r.length || delete r[0], z.call(this, r)
      }
    }), A(["concat", "join", "slice"], function (n) {
      var t = e[n];
      j.prototype[n] = function () {
        return z.call(this, t.apply(this._wrapped, arguments))
      }
    }), j.extend(j.prototype, {
      chain: function () {
        return this._chain = !0, this
      },
      value: function () {
        return this._wrapped
      }
    })
  }).call(this);
  (function () {
    var h = this,
      p = h.Backbone,
      e;
    e = typeof exports !== "undefined" ? exports : h.Backbone = {};
    e.VERSION = "0.5.1";
    var f = h._;
    if (!f && typeof require !== "undefined") f = require("underscore")._;
    var g = h.jQuery || h.Zepto;
    e.noConflict = function () {
      h.Backbone = p;
      return this
    };
    e.emulateHTTP = !1;
    e.emulateJSON = !1;
    e.Events = {
      bind: function (a, b) {
        var c = this._callbacks || (this._callbacks = {});
        (c[a] || (c[a] = [])).push(b);
        return this
      },
      unbind: function (a, b) {
        var c;
        if (a) {
          if (c = this._callbacks)
            if (b) {
              c = c[a];
              if (!c) return this;
              for (var d = 0, e = c.length; d <
                e; d++)
                if (b === c[d]) {
                  c[d] = null;
                  break
                }
            } else c[a] = []
        } else this._callbacks = {};
        return this
      },
      trigger: function (a) {
        var b, c, d, e, f = 2;
        if (!(c = this._callbacks)) return this;
        for (; f--;)
          if (b = f ? a : "all", b = c[b])
            for (var g = 0, h = b.length; g < h; g++)(d = b[g]) ? (e = f ? Array.prototype.slice.call(arguments, 1) : arguments, d.apply(this, e)) : (b.splice(g, 1), g--, h--);
        return this
      }
    };
    e.Model = function (a, b) {
      var c;
      a || (a = {});
      if (c = this.defaults) f.isFunction(c) && (c = c()), a = f.extend({}, c, a);
      this.attributes = {};
      this._escapedAttributes = {};
      this.cid = f.uniqueId("c");
      this.set(a, {
        silent: !0
      });
      this._changed = !1;
      this._previousAttributes = f.clone(this.attributes);
      if (b && b.collection) this.collection = b.collection;
      this.initialize(a, b)
    };
    f.extend(e.Model.prototype, e.Events, {
      _previousAttributes: null,
      _changed: !1,
      idAttribute: "id",
      initialize: function () {},
      toJSON: function () {
        return f.clone(this.attributes)
      },
      get: function (a) {
        return this.attributes[a]
      },
      escape: function (a) {
        var b;
        if (b = this._escapedAttributes[a]) return b;
        b = this.attributes[a];
        return this._escapedAttributes[a] = (b == null ? "" :
          "" + b).replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#x27").replace(/\//g, "&#x2F;")
      },
      has: function (a) {
        return this.attributes[a] != null
      },
      set: function (a, b) {
        b || (b = {});
        if (!a) return this;
        if (a.attributes) a = a.attributes;
        var c = this.attributes,
          d = this._escapedAttributes;
        if (!b.silent && this.validate && !this._performValidation(a, b)) return !1;
        if (this.idAttribute in a) this.id = a[this.idAttribute];
        var e = this._changing;
        this._changing = !0;
        for (var g in a) {
          var h = a[g];
          if (!f.isEqual(c[g], h)) c[g] = h, delete d[g], this._changed = !0, b.silent || this.trigger("change:" + g, this, h, b)
        }!e && !b.silent && this._changed && this.change(b);
        this._changing = !1;
        return this
      },
      unset: function (a, b) {
        if (!(a in this.attributes)) return this;
        b || (b = {});
        var c = {};
        c[a] = void 0;
        if (!b.silent && this.validate && !this._performValidation(c, b)) return !1;
        delete this.attributes[a];
        delete this._escapedAttributes[a];
        a == this.idAttribute && delete this.id;
        this._changed = !0;
        b.silent || (this.trigger("change:" +
          a, this, void 0, b), this.change(b));
        return this
      },
      clear: function (a) {
        a || (a = {});
        var b, c = this.attributes,
          d = {};
        for (b in c) d[b] = void 0;
        if (!a.silent && this.validate && !this._performValidation(d, a)) return !1;
        this.attributes = {};
        this._escapedAttributes = {};
        this._changed = !0;
        if (!a.silent) {
          for (b in c) this.trigger("change:" + b, this, void 0, a);
          this.change(a)
        }
        return this
      },
      fetch: function (a) {
        a || (a = {});
        var b = this,
          c = a.success;
        a.success = function (d, e, f) {
          if (!b.set(b.parse(d, f), a)) return !1;
          c && c(b, d)
        };
        a.error = i(a.error, b, a);
        return (this.sync ||
          e.sync).call(this, "read", this, a)
      },
      save: function (a, b) {
        b || (b = {});
        if (a && !this.set(a, b)) return !1;
        var c = this,
          d = b.success;
        b.success = function (a, e, f) {
          if (!c.set(c.parse(a, f), b)) return !1;
          d && d(c, a, f)
        };
        b.error = i(b.error, c, b);
        var f = this.isNew() ? "create" : "update";
        return (this.sync || e.sync).call(this, f, this, b)
      },
      destroy: function (a) {
        a || (a = {});
        if (this.isNew()) return this.trigger("destroy", this, this.collection, a);
        var b = this,
          c = a.success;
        a.success = function (d) {
          b.trigger("destroy", b, b.collection, a);
          c && c(b, d)
        };
        a.error = i(a.error,
          b, a);
        return (this.sync || e.sync).call(this, "delete", this, a)
      },
      url: function () {
        var a = k(this.collection) || this.urlRoot || l();
        if (this.isNew()) return a;
        return a + (a.charAt(a.length - 1) == "/" ? "" : "/") + encodeURIComponent(this.id)
      },
      parse: function (a) {
        return a
      },
      clone: function () {
        return new this.constructor(this)
      },
      isNew: function () {
        return this.id == null
      },
      change: function (a) {
        this.trigger("change", this, a);
        this._previousAttributes = f.clone(this.attributes);
        this._changed = !1
      },
      hasChanged: function (a) {
        if (a) return this._previousAttributes[a] !=
          this.attributes[a];
        return this._changed
      },
      changedAttributes: function (a) {
        a || (a = this.attributes);
        var b = this._previousAttributes,
          c = !1,
          d;
        for (d in a) f.isEqual(b[d], a[d]) || (c = c || {}, c[d] = a[d]);
        return c
      },
      previous: function (a) {
        if (!a || !this._previousAttributes) return null;
        return this._previousAttributes[a]
      },
      previousAttributes: function () {
        return f.clone(this._previousAttributes)
      },
      _performValidation: function (a, b) {
        var c = this.validate(a);
        if (c) return b.error ? b.error(this, c, b) : this.trigger("error", this, c, b), !1;
        return !0
      }
    });
    e.Collection = function (a, b) {
      b || (b = {});
      if (b.comparator) this.comparator = b.comparator;
      f.bindAll(this, "_onModelEvent", "_removeReference");
      this._reset();
      a && this.reset(a, {
        silent: !0
      });
      this.initialize.apply(this, arguments)
    };
    f.extend(e.Collection.prototype, e.Events, {
      model: e.Model,
      initialize: function () {},
      toJSON: function () {
        return this.map(function (a) {
          return a.toJSON()
        })
      },
      add: function (a, b) {
        if (f.isArray(a))
          for (var c = 0, d = a.length; c < d; c++) this._add(a[c], b);
        else this._add(a, b);
        return this
      },
      remove: function (a, b) {
        if (f.isArray(a))
          for (var c =
              0, d = a.length; c < d; c++) this._remove(a[c], b);
        else this._remove(a, b);
        return this
      },
      get: function (a) {
        if (a == null) return null;
        return this._byId[a.id != null ? a.id : a]
      },
      getByCid: function (a) {
        return a && this._byCid[a.cid || a]
      },
      at: function (a) {
        return this.models[a]
      },
      sort: function (a) {
        a || (a = {});
        if (!this.comparator) throw Error("Cannot sort a set without a comparator");
        this.models = this.sortBy(this.comparator);
        a.silent || this.trigger("reset", this, a);
        return this
      },
      pluck: function (a) {
        return f.map(this.models, function (b) {
          return b.get(a)
        })
      },
      reset: function (a, b) {
        a || (a = []);
        b || (b = {});
        this.each(this._removeReference);
        this._reset();
        this.add(a, {
          silent: !0
        });
        b.silent || this.trigger("reset", this, b);
        return this
      },
      fetch: function (a) {
        a || (a = {});
        var b = this,
          c = a.success;
        a.success = function (d, f, e) {
          b[a.add ? "add" : "reset"](b.parse(d, e), a);
          c && c(b, d)
        };
        a.error = i(a.error, b, a);
        return (this.sync || e.sync).call(this, "read", this, a)
      },
      create: function (a, b) {
        var c = this;
        b || (b = {});
        a = this._prepareModel(a, b);
        if (!a) return !1;
        var d = b.success;
        b.success = function (a, e, f) {
          c.add(a, b);
          d && d(a, e, f)
        };
        a.save(null, b);
        return a
      },
      parse: function (a) {
        return a
      },
      chain: function () {
        return f(this.models).chain()
      },
      _reset: function () {
        this.length = 0;
        this.models = [];
        this._byId = {};
        this._byCid = {}
      },
      _prepareModel: function (a, b) {
        if (a instanceof e.Model) {
          if (!a.collection) a.collection = this
        } else {
          var c = a;
          a = new this.model(c, {
            collection: this
          });
          a.validate && !a._performValidation(c, b) && (a = !1)
        }
        return a
      },
      _add: function (a, b) {
        b || (b = {});
        a = this._prepareModel(a, b);
        if (!a) return !1;
        var c = this.getByCid(a) || this.get(a);
        if (c) throw Error(["Can't add the same model to a set twice",
          c.id
        ]);
        this._byId[a.id] = a;
        this._byCid[a.cid] = a;
        this.models.splice(b.at != null ? b.at : this.comparator ? this.sortedIndex(a, this.comparator) : this.length, 0, a);
        a.bind("all", this._onModelEvent);
        this.length++;
        b.silent || a.trigger("add", a, this, b);
        return a
      },
      _remove: function (a, b) {
        b || (b = {});
        a = this.getByCid(a) || this.get(a);
        if (!a) return null;
        delete this._byId[a.id];
        delete this._byCid[a.cid];
        this.models.splice(this.indexOf(a), 1);
        this.length--;
        b.silent || a.trigger("remove", a, this, b);
        this._removeReference(a);
        return a
      },
      _removeReference: function (a) {
        this == a.collection && delete a.collection;
        a.unbind("all", this._onModelEvent)
      },
      _onModelEvent: function (a, b, c, d) {
        (a == "add" || a == "remove") && c != this || (a == "destroy" && this._remove(b, d), b && a === "change:" + b.idAttribute && (delete this._byId[b.previous(b.idAttribute)], this._byId[b.id] = b), this.trigger.apply(this, arguments))
      }
    });
    f.each(["forEach", "each", "map", "reduce", "reduceRight", "find", "detect", "filter", "select", "reject", "every", "all", "some", "any", "include", "contains", "invoke", "max",
      "min", "sortBy", "sortedIndex", "toArray", "size", "first", "rest", "last", "without", "indexOf", "lastIndexOf", "isEmpty"
    ], function (a) {
      e.Collection.prototype[a] = function () {
        return f[a].apply(f, [this.models].concat(f.toArray(arguments)))
      }
    });
    e.Router = function (a) {
      a || (a = {});
      if (a.routes) this.routes = a.routes;
      this._bindRoutes();
      this.initialize.apply(this, arguments)
    };
    var q = /:([\w\d]+)/g,
      r = /\*([\w\d]+)/g,
      s = /[-[\]{}()+?.,\\^$|#\s]/g;
    f.extend(e.Router.prototype, e.Events, {
      initialize: function () {},
      route: function (a, b, c) {
        e.history ||
          (e.history = new e.History);
        f.isRegExp(a) || (a = this._routeToRegExp(a));
        e.history.route(a, f.bind(function (d) {
          d = this._extractParameters(a, d);
          c.apply(this, d);
          this.trigger.apply(this, ["route:" + b].concat(d))
        }, this))
      },
      navigate: function (a, b) {
        e.history.navigate(a, b)
      },
      _bindRoutes: function () {
        if (this.routes) {
          var a = [],
            b;
          for (b in this.routes) a.unshift([b, this.routes[b]]);
          b = 0;
          for (var c = a.length; b < c; b++) this.route(a[b][0], a[b][1], this[a[b][1]])
        }
      },
      _routeToRegExp: function (a) {
        a = a.replace(s, "\\$&").replace(q, "([^/]*)").replace(r,
          "(.*?)");
        return RegExp("^" + a + "$")
      },
      _extractParameters: function (a, b) {
        return a.exec(b).slice(1)
      }
    });
    e.History = function () {
      this.handlers = [];
      f.bindAll(this, "checkUrl")
    };
    var j = /^#*/,
      t = /msie [\w.]+/,
      m = !1;
    f.extend(e.History.prototype, {
      interval: 50,
      getFragment: function (a, b) {
        if (a == null)
          if (this._hasPushState || b) {
            a = window.location.pathname;
            var c = window.location.search;
            c && (a += c);
            a.indexOf(this.options.root) == 0 && (a = a.substr(this.options.root.length))
          } else a = window.location.hash;
        return a.replace(j, "")
      },
      start: function (a) {
        if (m) throw Error("Backbone.history has already been started");
        this.options = f.extend({}, {
          root: "/"
        }, this.options, a);
        this._wantsPushState = !!this.options.pushState;
        this._hasPushState = !(!this.options.pushState || !window.history || !window.history.pushState);
        a = this.getFragment();
        var b = document.documentMode;
        if (b = t.exec(navigator.userAgent.toLowerCase()) && (!b || b <= 7)) this.iframe = g('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow, this.navigate(a);
        this._hasPushState ? g(window).bind("popstate", this.checkUrl) : "onhashchange" in window && !b ?
          g(window).bind("hashchange", this.checkUrl) : setInterval(this.checkUrl, this.interval);
        this.fragment = a;
        m = !0;
        a = window.location;
        b = a.pathname == this.options.root;
        if (this._wantsPushState && !this._hasPushState && !b) this.fragment = this.getFragment(null, !0), window.location.replace(this.options.root + "#" + this.fragment);
        else if (this._wantsPushState && this._hasPushState && b && a.hash) this.fragment = a.hash.replace(j, ""), window.history.replaceState({}, document.title, a.protocol + "//" + a.host + this.options.root + this.fragment);
        return this.loadUrl()
      },
      route: function (a, b) {
        this.handlers.unshift({
          route: a,
          callback: b
        })
      },
      checkUrl: function () {
        var a = this.getFragment();
        a == this.fragment && this.iframe && (a = this.getFragment(this.iframe.location.hash));
        if (a == this.fragment || a == decodeURIComponent(this.fragment)) return !1;
        this.iframe && this.navigate(a);
        this.loadUrl() || this.loadUrl(window.location.hash)
      },
      loadUrl: function (a) {
        var b = this.fragment = this.getFragment(a);
        return f.any(this.handlers, function (a) {
          if (a.route.test(b)) return a.callback(b), !0
        })
      },
      navigate: function (a, b) {
        var c = (a || "").replace(j, "");
        if (!(this.fragment == c || this.fragment == decodeURIComponent(c))) {
          if (this._hasPushState) {
            var d = window.location;
            c.indexOf(this.options.root) != 0 && (c = this.options.root + c);
            this.fragment = c;
            window.history.pushState({}, document.title, d.protocol + "//" + d.host + c)
          } else if (window.location.hash = this.fragment = c, this.iframe && c != this.getFragment(this.iframe.location.hash)) this.iframe.document.open().close(), this.iframe.location.hash = c;
          b && this.loadUrl(a)
        }
      }
    });
    e.View = function (a) {
      this.cid =
        f.uniqueId("view");
      this._configure(a || {});
      this._ensureElement();
      this.delegateEvents();
      this.initialize.apply(this, arguments)
    };
    var u = /^(\S+)\s*(.*)$/,
      n = ["model", "collection", "el", "id", "attributes", "className", "tagName"];
    f.extend(e.View.prototype, e.Events, {
      tagName: "div",
      $: function (a) {
        return g(a, this.el)
      },
      initialize: function () {},
      render: function () {
        return this
      },
      remove: function () {
        g(this.el).remove();
        return this
      },
      make: function (a, b, c) {
        a = document.createElement(a);
        b && g(a).attr(b);
        c && g(a).html(c);
        return a
      },
      delegateEvents: function (a) {
        if (a ||
          (a = this.events))
          for (var b in g(this.el).unbind(".delegateEvents" + this.cid), a) {
            var c = this[a[b]];
            if (!c) throw Error('Event "' + a[b] + '" does not exist');
            var d = b.match(u),
              e = d[1];
            d = d[2];
            c = f.bind(c, this);
            e += ".delegateEvents" + this.cid;
            d === "" ? g(this.el).bind(e, c) : g(this.el).delegate(d, e, c)
          }
      },
      _configure: function (a) {
        this.options && (a = f.extend({}, this.options, a));
        for (var b = 0, c = n.length; b < c; b++) {
          var d = n[b];
          a[d] && (this[d] = a[d])
        }
        this.options = a
      },
      _ensureElement: function () {
        if (this.el) {
          if (f.isString(this.el)) this.el =
            g(this.el).get(0)
        } else {
          var a = this.attributes || {};
          if (this.id) a.id = this.id;
          if (this.className) a["class"] = this.className;
          this.el = this.make(this.tagName, a)
        }
      }
    });
    e.Model.extend = e.Collection.extend = e.Router.extend = e.View.extend = function (a, b) {
      var c = v(this, a, b);
      c.extend = this.extend;
      return c
    };
    var w = {
      create: "POST",
      update: "PUT",
      "delete": "DELETE",
      read: "GET"
    };
    e.sync = function (a, b, c) {
      var d = w[a];
      c = f.extend({
        type: d,
        dataType: "json",
        processData: !1
      }, c);
      if (!c.url) c.url = k(b) || l();
      if (!c.data && b && (a == "create" || a == "update")) c.contentType =
        "application/json", c.data = JSON.stringify(b.toJSON());
      if (e.emulateJSON) c.contentType = "application/x-www-form-urlencoded", c.processData = !0, c.data = c.data ? {
        model: c.data
      } : {};
      if (e.emulateHTTP && (d === "PUT" || d === "DELETE")) {
        if (e.emulateJSON) c.data._method = d;
        c.type = "POST";
        c.beforeSend = function (a) {
          a.setRequestHeader("X-HTTP-Method-Override", d)
        }
      }
      return g.ajax(c)
    };
    var o = function () {},
      v = function (a, b, c) {
        var d;
        d = b && b.hasOwnProperty("constructor") ? b.constructor : function () {
          return a.apply(this, arguments)
        };
        f.extend(d,
          a);
        o.prototype = a.prototype;
        d.prototype = new o;
        b && f.extend(d.prototype, b);
        c && f.extend(d, c);
        d.prototype.constructor = d;
        d.__super__ = a.prototype;
        return d
      },
      k = function (a) {
        if (!a || !a.url) return null;
        return f.isFunction(a.url) ? a.url() : a.url
      },
      l = function () {
        throw Error('A "url" property or function must be specified');
      },
      i = function (a, b, c) {
        return function (d) {
          a ? a(b, d, c) : b.trigger("error", b, d, c)
        }
      }
  }).call(this);
  var fakeworker = function (global) {
    function extend(dest, src) {
      for (var i in src) dest[i] = src[i]
    }
    var userAgent = navigator.userAgent.toLowerCase();
    var browser = {
      version: (userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/) || [])[1],
      safari: /webkit/.test(userAgent),
      opera: /opera/.test(userAgent),
      msie: /msie/.test(userAgent) && !/opera/.test(userAgent),
      mozilla: /mozilla/.test(userAgent) && !/(compatible|webkit)/.test(userAgent)
    };

    function httpSuccess(xhr) {
      try {
        return !xhr.status && location.protocol == "file:" || xhr.status >= 200 &&
          xhr.status < 300 || xhr.status == 304 || xhr.status == 1223 || browser.safari && xhr.status == undefined
      } catch (e) {}
      return false
    }

    function __syncXhrGet(url, fn) {
      var xhr = window.ActiveXObject ? new ActiveXObject("Microsoft.XMLHTTP") : new XMLHttpRequest;
      xhr.open("GET", url, false);
      xhr.send("");
      if (httpSuccess(xhr)) fn(xhr);
      else throw new Error("Could not load resource(" + url + ") result=" + xhr.status + ":" + xhr.statusText);
    }

    function parseUri(str) {
      var o = parseUri.options,
        m = o.parser[o.strictMode ? "strict" : "loose"].exec(str),
        uri = {},
        i = 14;
      while (i--) uri[o.key[i]] = m[i] || "";
      uri[o.q.name] = {};
      uri[o.key[12]].replace(o.q.parser, function ($0, $1, $2) {
        if ($1) uri[o.q.name][$1] = $2
      });
      return uri
    }
    parseUri.options = {
      strictMode: false,
      key: ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"],
      q: {
        name: "queryKey",
        parser: /(?:^|&)([^&=]*)=?([^&]*)/g
      },
      parser: {
        strict: /^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
        loose: /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/
      }
    };

    function absolutePath(path) {
      var e = document.createElement("span");
      e.innerHTML = '<a href="' + path + '" />';
      return e.firstChild.href
    }

    function FakeMessageEvent(worker) {
      extend(this, Event);
      Event.constructor.call(this);
      this.currentTarget = worker;
      this.srcElement = worker;
      this.target = worker;
      this.timestamp = (new Date).getTime()
    }
    FakeMessageEvent.prototype = {
      initMessageEvent: function (type, canBubble, cancelable, data, origin, lastEventId, source, ports) {
        this.initMessageEventNS("", type, canBubble, cancelable, data, origin, lastEventId, source, ports)
      },
      initMessageEventNS: function (namespaceURI, type, canBubble, cancelable, data, origin, lastEventId, source, ports) {
        this.namespaceURI = namespaceURI;
        this.type = type;
        this.canBubble = canBubble;
        this.cancelable = cancelable;
        this.data = data;
        this.origin = origin;
        this.lastEventId = lastEventId;
        this.source = source;
        this.ports =
          ports
      }
    };

    function FakeErrorEvent(worker) {
      extend(this, Event);
      Event.constructor.call(this);
      this.currentTarget = worker;
      this.srcElement = worker;
      this.target = worker;
      this.timestamp = (new Date).getTime()
    }
    FakeErrorEvent.prototype = {
      initErrorEvent: function (type, canBubble, cancelable, message, filename, lineno) {
        this.initErrorEventNS("", type, canBubble, cancelable, message, filename, lineno)
      },
      initErrorEventNS: function (namespaceURI, type, canBubble, cancelable, message, filename, lineno) {
        this.namespaceURI = namespaceURI;
        this.type =
          type;
        this.canBubble = canBubble;
        this.cancelable = cancelable;
        this.message = message;
        this.filename = filename;
        this.lineno = lineno
      }
    };
    var nativeWorker = global["Worker"];
    var FakeWorker = function (url) {
      var self = this;
      this._listenerNamespaces = {};
      this._eventQueues = {};
      __syncXhrGet(url, function (xhr) {
        try {
          self._workerContext = new FakeWorkerContext(url, xhr.responseText, self)
        } catch (e) {
          throw e;
        }
      })
    };
    FakeWorker.prototype = {
      isFake: true,
      addEventListener: function (type, listener, useCapture) {
        this.addEventListenerNS("", type, listener,
          useCapture)
      },
      addEventListenerNS: function (namespaceURI, type, listener, useCapture) {
        var namespace = this._listenerNamespaces[namespaceURI];
        if (!namespace) this._listenerNamespaces[namespaceURI] = namespace = {};
        var listeners = namespace[type];
        if (!listeners) namespace[type] = listeners = [];
        listeners.push(listener)
      },
      removeEventListener: function (type, listener, useCapture) {
        this.removeEventListener("", type, listener, useCapture)
      },
      removeEventListenerNS: function (namespaceURI, eventName, fn, useCapture) {
        var namespace = this._listenerNamespaces[namespaceURI];
        if (namespace) {
          var listeners = namespace[type];
          if (listeners)
            for (var i = 0; i < listeners.length; i++)
              if (listeners[i] === listener) delete listeners[i]
        }
      },
      dispatchEvent: function (event) {
        if (typeof this["on" + event.type] == "function") this["on" + event.type].call(this, event);
        var namespace = this._listenerNamespaces[event.namespaceURI];
        if (namespace) {
          var listeners = namespace[event.type];
          if (listeners)
            for (var i = 0; i < listeners.length; i++) listeners[i].call(this, event)
        }
        return true
      },
      postMessage: function (msg) {
        var self = this;
        var workerContext =
          this._workerContext;
        if (typeof workerContext.onmessage == "function") {
          var event = new FakeMessageEvent(self);
          event.initMessageEvent("message", false, false, msg, "", "", null, null);
          setTimeout(function () {
            try {
              workerContext.onmessage.call(workerContext, event)
            } catch (e) {
              var errorEvent = new FakeErrorEvent(self);
              var lineno = e.line || e.lineNumber;
              errorEvent.initErrorEvent("error", false, false, e.message, workerContext.location.filename, lineno);
              self.dispatchEvent(errorEvent);
              throw e;
            }
          }, 0)
        }
      },
      terminate: function () {
        this._workerContext.close()
      }
    };

    function FakeWorkerLocation(url) {
      var absolute = absolutePath(url);
      var parsed = parseUri(absolute);
      this.href = absolute;
      this.protocol = parsed.protocol + ":";
      this.host = parsed.port ? parsed.host + ":" + parsed.port : parsed.host;
      this.hostname = parsed.host;
      this.port = parsed.port;
      this.pathname = parsed.path;
      this.search = parsed.query ? "?" + parsed.query : "";
      this.hash = parsed.anchor ? "#" + parsed.anchor : "";
      this.filename = parsed.file
    }
    FakeWorkerLocation.prototype = {
      toString: function () {
        return this.href
      }
    };

    function FakeWorkerContext(url, source,
      worker) {
      var postMessage = this.postMessage = function (msg) {
        var event = new FakeMessageEvent(worker);
        event.initMessageEvent("message", false, false, msg, "", "", null, null);
        setTimeout(function () {
          worker.dispatchEvent(event)
        }, 0)
      };
      var setTimeout = this.setTimeout = global.setTimeout;
      var clearTimeout = this.clearTimeout = global.clearTimeout;
      var setInterval = this.setInterval = global.setInterval;
      var clearInterval = this.clearInterval = global.clearInterval;
      var XMLHttpRequest = this.XMLHttpRequest = global.XMLHttpRequest;
      var openDatabase =
        this.openDatabase = global.openDatabase;
      var openDatabaseSync = this.openDatabaseSync = global.openDatabaseSync;
      var WebSocket = this.WebSocket = global.WebSocket;
      var EventSource = this.EventSource = global.EventSource;
      var MessageChannel = this.MessageChannel = global.MessageChannel;
      var Worker = this.Worker = FakeWorker;
      var location = this.location = new FakeWorkerLocation(url);
      var close = this.close = function () {
        this.closing = true
      };
      var navigator = this.navigator = global.navigator;
      var self = this.self = this;
      var importScripts = this.importScripts =
        function () {
          for (var i = 0; i < arguments.length; i++) __syncXhrGet(arguments[i], function (xhr) {
            eval(xhr.responseText)
          })
        };
      eval(source);
      try {
        if (typeof onmessage == "function") this.onmessage = onmessage
      } catch (e) {}
    }
    var ret = {
      nativeWorker: nativeWorker,
      install: function () {
        global["Worker"] = FakeWorker
      },
      uninstall: function () {
        global["Worker"] = nativeWorker
      }
    };
    if (typeof Worker === "undefined" || browser.opera) ret.install();
    return ret
  }(this);
  (function (exports) {
    exports.utils = exports.utils || {};
    if (!String.fromCodePoint)(function () {
      var defineProperty = function () {
        var result;
        try {
          var object = {};
          var $defineProperty = Object.defineProperty;
          result = $defineProperty(object, object, object) && $defineProperty
        } catch (error) {}
        return result
      }();
      var stringFromCharCode = String.fromCharCode;
      var floor = Math.floor;
      var fromCodePoint = function () {
        var MAX_SIZE = 16384;
        var codeUnits = [];
        var highSurrogate;
        var lowSurrogate;
        var index = -1;
        var length = arguments.length;
        if (!length) return "";
        var result = "";
        while (++index < length) {
          var codePoint = Number(arguments[index]);
          if (!isFinite(codePoint) || codePoint < 0 || codePoint > 1114111 || floor(codePoint) !== codePoint) throw RangeError("Invalid code point: " + codePoint);
          if (codePoint <= 65535) codeUnits.push(codePoint);
          else {
            codePoint -= 65536;
            highSurrogate = (codePoint >> 10) + 55296;
            lowSurrogate = codePoint % 1024 + 56320;
            codeUnits.push(highSurrogate, lowSurrogate)
          }
          if (index + 1 === length || codeUnits.length > MAX_SIZE) {
            result += stringFromCharCode.apply(null, codeUnits);
            codeUnits.length =
              0
          }
        }
        return result
      };
      if (defineProperty) defineProperty(String, "fromCodePoint", {
        "value": fromCodePoint,
        "configurable": true,
        "writable": true
      });
      else String.fromCodePoint = fromCodePoint
    })();
    if (!Element.prototype.scrollIntoViewIfNeeded) Element.prototype.scrollIntoViewIfNeeded = function (centerIfNeeded) {
      function withinBounds(value, min, max, extent) {
        if (centerIfNeeded === false || max <= value + extent && value <= min + extent) return Math.min(max, Math.max(min, value));
        return (min + max) / 2
      }

      function makeArea(left, top, width, height) {
        return {
          "left": left,
          "top": top,
          "width": width,
          "height": height,
          "right": left + width,
          "bottom": top + height,
          "translate": function (x, y) {
            return makeArea(x + left, y + top, width, height)
          },
          "relativeFromTo": function (lhs, rhs) {
            var newLeft = left,
              newTop = top;
            lhs = lhs.offsetParent;
            rhs = rhs.offsetParent;
            if (lhs === rhs) return area;
            for (; lhs; lhs = lhs.offsetParent) {
              newLeft += lhs.offsetLeft + lhs.clientLeft;
              newTop += lhs.offsetTop + lhs.clientTop
            }
            for (; rhs; rhs = rhs.offsetParent) {
              newLeft -= rhs.offsetLeft + rhs.clientLeft;
              newTop -= rhs.offsetTop + rhs.clientTop
            }
            return makeArea(newLeft,
              newTop, width, height)
          }
        }
      }
      var parent, elem = this,
        area = makeArea(this.offsetLeft, this.offsetTop, this.offsetWidth, this.offsetHeight);
      while ((parent = elem.parentNode) instanceof HTMLElement) {
        var clientLeft = parent.offsetLeft + parent.clientLeft;
        var clientTop = parent.offsetTop + parent.clientTop;
        area = area.relativeFromTo(elem, parent).translate(-clientLeft, -clientTop);
        parent.scrollLeft = withinBounds(parent.scrollLeft, area.right - parent.clientWidth, area.left, parent.clientWidth);
        parent.scrollTop = withinBounds(parent.scrollTop,
          area.bottom - parent.clientHeight, area.top, parent.clientHeight);
        area = area.translate(clientLeft - parent.scrollLeft, clientTop - parent.scrollTop);
        elem = parent
      }
    };
    if (window.NodeList && !NodeList.prototype.forEach) NodeList.prototype.forEach = function (callback, thisArg) {
      thisArg = thisArg || window;
      for (var i = 0; i < this.length; i++) callback.call(thisArg, this[i], i, this)
    };
    exports.console = exports.console || {
      log: function () {},
      warn: function () {},
      error: function () {},
      assert: function () {}
    };
    if (!String.prototype.startsWith) String.prototype.startsWith =
      function (search, pos) {
        return this.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search
      };
    if (!String.prototype.endsWith) String.prototype.endsWith = function (search, thisLen) {
      if (thisLen === undefined || thisLen > this.length) thisLen = this.length;
      return this.substring(thisLen - search.length, thisLen) === search
    };
    console.assert = function (condition, message) {
      if (!condition)
        if (exports._trnDebugMode) throw new Error("Assertion failed: " + message);
        else console.warn("Assertion failed: " + message)
    };
    exports.$log = exports.$out = function () {
      Array.prototype.forEach.call(arguments,
        function (e) {
          console.log(e)
        })
    };
    var ie = function () {
      var ua = navigator.userAgent.toLowerCase();
      var match = /(msie) ([\w.]+)/.exec(ua) || /(trident)(?:.*? rv:([\w.]+)|)/.exec(ua);
      return match ? parseInt(match[2], 10) : match
    }();
    exports.utils.ie = ie;
    exports.utils.windowsApp = window.location.href.indexOf("ms-appx-web://") === 0;
    exports.utils.isEdge = !!navigator.userAgent.match(/Edge/i);
    exports.utils.isMobileDevice = function () {
      return !!(!ie && (navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/webOS/i) || navigator.userAgent.match(/iPhone/i) ||
        navigator.userAgent.match(/iPod/i) || navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/Touch/i) || navigator.userAgent.match(/IEMobile/i) || navigator.userAgent.match(/Silk/i)))
    }();
    exports.busyLoop = function (step, finished, sync) {
      var start = Date.now();

      function nextSlice() {
        while (step())
          if (Date.now() - start > 100 && !sync) {
            start = Date.now();
            setTimeout(nextSlice, 0);
            return
          } finished()
      }
      nextSlice()
    };
    exports.utils.mouseUpEventBug = !!navigator.userAgent.match(/(iPad|iPhone|iPod)/i);
    exports.utils.isChrome = function () {
      var opera =
        window.navigator.userAgent.match(/OPR/);
      var maxthon = window.navigator.userAgent.match(/Maxthon/);
      var edge = window.navigator.userAgent.match(/Edge/);
      return window.navigator.userAgent.match(/Chrome\/(.*?) /) && !opera && !maxthon && !edge
    }();
    var chromeVersion = function () {
      var match = window.navigator.userAgent.match(/Chrome\/(.*?) /);
      return match ? parseInt(match[1], 10) : match
    }();
    exports.utils.chromeHasSubzero = exports.utils.isChrome && chromeVersion >= 56;
    exports.utils.isSafari = window.navigator.userAgent.match(/Safari/) &&
      !exports.utils.isChrome;
    exports.utils.isIOS = window.navigator.userAgent.match(/(iPad|iPhone|iPod)/i);
    exports.utils.isFirefox = window.navigator.userAgent.match(/Firefox/);
    exports.utils.disableFormCharacterProcessing = window.navigator.userAgent.indexOf("Android") > -1;
    var multiplierOverride;
    var getCanvasMultiplier = function () {
      return function () {
        if (!_.isUndefined(multiplierOverride)) return multiplierOverride;
        return Math.min(window.devicePixelRatio, 2) || 1
      }
    }();
    exports.utils.getCanvasMultiplier = getCanvasMultiplier;
    exports.utils.setCanvasMultiplier = function (value) {
      multiplierOverride = value
    };
    exports.utils.unsetCanvasMultiplier = function () {
      multiplierOverride = undefined
    };
    exports.utils.canvasFontMultiplier = function () {
      var canvas = document.createElement("canvas");
      var ctx = canvas.getContext("2d");
      var testSize = 20;
      ctx.font = testSize + "px f0";
      return parseFloat(ctx.font) / testSize
    }();
    if (window.CanvasPixelArray) window.CanvasPixelArray.prototype.set = function (arr) {
      var l = this.length,
        i = 0;
      for (; i < l; i += 4) {
        this[i] = arr[i];
        this[i + 1] = arr[i +
          1];
        this[i + 2] = arr[i + 2];
        this[i + 3] = 255
      }
    };
    if (!window.Uint8ClampedArray) window.Uint8ClampedArray = window.Uint8Array;
    var canvasClipBug = function () {
      function basicClipIssue() {
        var canvas = document.createElement("canvas");
        canvas.style.width = "1px";
        canvas.style.height = "1px";
        var ctx = canvas.getContext("2d");
        ctx.fillStyle = "#FFFFFF";
        ctx.fillRect(0, 0, 1, 1);
        ctx.beginPath();
        ctx.rect(0, 0, 1, 1);
        ctx.clip();
        ctx.fillStyle = "#000000";
        ctx.fillRect(0, 0, 1, 1);
        var val = ctx.getImageData(0, 0, 1, 1).data[0];
        return val === 255
      }

      function nonIntegerValueIssue() {
        var canvas =
          document.createElement("canvas");
        canvas.style.width = "5px";
        canvas.style.height = "5px";
        var ctx = canvas.getContext("2d");
        ctx.rect(0, 0, 4.5, 4.5);
        ctx.clip();
        ctx.fillStyle = "#FFFFFF";
        ctx.fillRect(0, 0, 5, 5);
        ctx.clearRect(0, 0, 5, 5);
        var val = ctx.getImageData(1, 1, 1, 1).data[3];
        return val !== 0
      }
      return basicClipIssue() || nonIntegerValueIssue()
    }();
    exports.utils.canvasClipBug = canvasClipBug;
    var typedArrayApply = function () {
      if (exports.Uint8Array) try {
        var testArray = new exports.Uint8Array(new ArrayBuffer(1));
        String.fromCharCode.apply(null,
          testArray);
        return true
      } catch (e) {
        return false
      } else return false
    }();
    exports.utils.typedArrayApply = typedArrayApply;
    exports.utils.hasObjectURL = !!(exports.URL && exports.URL.createObjectURL);
    if (!Document.prototype.createAttributeNS) Document.prototype.createAttributeNS = function (namespaceURI, qualifiedName) {
      var dummy = this.createElement("dummy");
      dummy.setAttributeNS(namespaceURI, qualifiedName, "");
      var attr = dummy.attributes[0];
      dummy.removeAttributeNode(attr);
      return attr
    };
    if (!Element.prototype.setAttributeNodeNS) Element.prototype.setAttributeNodeNS =
      Element.prototype.setAttributeNode;
    exports.utils.xmlSerializerNamespaceSupported = function () {
      var body = document.createElementNS("http://www.w3.org/1999/xhtml", "body");
      var attr = document.createAttributeNS("http://www.xfa.org/schema/xfa-data/1.0/", "xfa:spec");
      attr.nodeValue = "2.0.2";
      body.setAttributeNodeNS(attr);
      attr = document.createAttributeNS("http://www.xfa.org/schema/xfa-data/1.0/", "xfa:APIVersion");
      attr.nodeValue = "Acrobat:10.1.3";
      body.setAttributeNodeNS(attr);
      var serializer = new XMLSerializer;
      var annotstr =
        serializer.serializeToString(body);

      function passTest(actual) {
        return actual.indexOf(' xmlns="http://www.w3.org/1999/xhtml"') > 0 && actual.indexOf(' xfa:spec="2.0.2"') > 0 && actual.indexOf(' xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0/"') > 0 && actual.indexOf(' xfa:APIVersion="Acrobat:10.1.3"') > 0
      }
      var result = passTest(annotstr);
      var $body = $("<body>").attr({
        "xmlns": "http://www.w3.org/1999/xhtml",
        "xmlns:xfa": "http://www.xfa.org/schema/xfa-data/1.0/",
        "xfa:APIVersion": "Acrobat:10.1.3",
        "xfa:spec": "2.0.2"
      });
      annotstr =
        serializer.serializeToString($body[0]);
      exports.utils.xmlSerializerJQueryNamespaceSupported = passTest(annotstr);
      return result
    }();
    window.matchMedia || (window.matchMedia = function () {
      var styleMedia = window.styleMedia || window.media;
      if (!styleMedia) {
        var style = document.createElement("style"),
          script = document.getElementsByTagName("script")[0],
          info = null;
        style.type = "text/css";
        style.id = "matchmediajs-test";
        script.parentNode.insertBefore(style, script);
        info = "getComputedStyle" in window && window.getComputedStyle(style,
          null) || style.currentStyle;
        styleMedia = {
          matchMedium: function (media) {
            var text = "@media " + media + "{ #matchmediajs-test { width: 1px; } }";
            if (style.styleSheet) style.styleSheet.cssText = text;
            else style.textContent = text;
            return info.width === "1px"
          }
        }
      }
      return function (media) {
        return {
          matches: styleMedia.matchMedium(media || "all"),
          media: media || "all"
        }
      }
    }());
    (function () {
      if (window.matchMedia && window.matchMedia("all").addListener) return false;
      var localMatchMedia = window.matchMedia,
        hasMediaQueries = localMatchMedia("only all").matches,
        isListening = false,
        timeoutID = 0,
        queries = [],
        handleChange = function () {
          clearTimeout(timeoutID);
          timeoutID = setTimeout(function () {
            for (var i = 0, il = queries.length; i < il; i++) {
              var mql = queries[i].mql,
                listeners = queries[i].listeners || [],
                matches = localMatchMedia(mql.media).matches;
              if (matches !== mql.matches) {
                mql.matches = matches;
                for (var j = 0, jl = listeners.length; j < jl; j++) listeners[j].call(window, mql)
              }
            }
          }, 30)
        };
      window.matchMedia = function (media) {
        var mql = localMatchMedia(media),
          listeners = [],
          index = 0;
        mql.addListener = function (listener) {
          if (!hasMediaQueries) return;
          if (!isListening) {
            isListening = true;
            window.addEventListener("resize", handleChange, true)
          }
          if (index === 0) index = queries.push({
            mql: mql,
            listeners: listeners
          });
          listeners.push(listener)
        };
        mql.removeListener = function (listener) {
          for (var i = 0, il = listeners.length; i < il; i++)
            if (listeners[i] === listener) listeners.splice(i, 1)
        };
        return mql
      }
    })();
    exports.utils.specialBlendSupportedTest = function () {
      var canvas = document.createElement("canvas");
      canvas.width = 1;
      canvas.height = 1;
      var ctx = canvas.getContext("2d");
      ctx.fillStyle = "#000";
      ctx.fillRect(0,
        0, 1, 1);
      ctx.globalCompositeOperation = "multiply";
      ctx.fillStyle = "#fff";
      ctx.fillRect(0, 0, 1, 1);
      var result = ctx.getImageData(0, 0, 1, 1).data[0] === 0;
      exports.utils.specialBlendSupported = result;
      return result
    }();
    exports.utils.supportsImageDataConstructor = function () {
      try {
        new ImageData(1, 1);
        return true
      } catch (e) {
        return false
      }
    }();
    var vendors = ["webkit", "moz"];
    for (var i = 0; i < vendors.length && !window.requestAnimationFrame; ++i) {
      var vp = vendors[i];
      window.requestAnimationFrame = window[vp + "RequestAnimationFrame"];
      window.cancelAnimationFrame =
        window[vp + "CancelAnimationFrame"] || window[vp + "CancelRequestAnimationFrame"]
    }
    if (/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent) || !window.requestAnimationFrame || !window.cancelAnimationFrame) {
      var lastTime = 0;
      window.requestAnimationFrame = function (callback) {
        var now = Date.now();
        var nextTime = Math.max(lastTime + 16, now);
        return setTimeout(function () {
          callback(lastTime = nextTime)
        }, nextTime - now)
      };
      window.cancelAnimationFrame = clearTimeout
    }
    exports.utils.hasClass = function (element, cls) {
      return (" " + element.className +
        " ").indexOf(" " + cls + " ") > -1
    };
    exports.utils.eventHandler = {
      on: function () {
        this.applyWithArgs($(this).on, arguments);
        return this
      },
      off: function () {
        this.applyWithArgs($(this).off, arguments);
        return this
      },
      trigger: function () {
        this.applyWithArgs($(this).triggerHandler, arguments);
        return this
      },
      applyWithArgs: function (func, args) {
        func.apply($(this), Array.prototype.slice.call(args))
      },
      one: function () {
        this.applyWithArgs($(this).one, arguments);
        return this
      }
    };
    exports.utils.isEditableElement = function (ele) {
      return ele.is("input:text") ||
        ele.is("textarea")
    };
    if (!exports.server) exports.server = {
      log: function () {},
      error: function () {},
      capture: function () {}
    };
    var arrprint = function (array, msg) {
      var str = "[";
      for (var i = 0; i < array.length; i++) {
        str += array[i];
        if (i >= array.length - 1) break;
        str += ", "
      }
      str += "]";
      if (!_.isUndefined(msg)) str += " " + msg;
      console.log(str)
    };
    exports.utils.arrprint = arrprint;
    var logvar = function (varname, variable) {
      if (_.isArray(varname) && _.isArray(variable) && varname.length === variable.length) {
        var varlist = "";
        for (var i = 0; i < varname.length; i++) varlist =
          varlist + varname[i] + ": " + variable[i] + " ";
        console.log(varlist)
      } else console.log(varname + ": " + variable)
    };
    exports.utils.logvar = logvar;
    var fCmp = function (f1, f2) {
      var eps = 1E-6;
      return Math.abs(f1 - f2) < eps
    };
    exports.utils.fCmp = fCmp;
    var documentReady = function (callback) {
      if (document.readyState === "complete") callback();
      else if (document.addEventListener) exports.addEventListener("load", function () {
        callback()
      }, false);
      else if (document.attachEvent) exports.attachEvent("onload", function () {
        callback()
      })
    };
    exports.utils.documentReady =
      documentReady;
    exports.runEval = function (str, c, t) {
      c.clo = undefined;
      t.clo = undefined;
      eval(str);
      str = null
    };
    if (typeof Object.defineProperties === "undefined") {
      Object.defineProperty = function (prototype, name, property) {
        if (property.get) prototype.__defineGetter__(name, property.get);
        if (property.set) prototype.__defineSetter__(name, property.set)
      };
      Object.defineProperties = function (prototype, properties) {
        for (var name in properties)
          if (properties.hasOwnProperty(name)) {
            var property = properties[name];
            Object.defineProperty(prototype,
              name, property)
          }
      }
    }
    var canvasProto = CanvasRenderingContext2D.prototype;
    Object.defineProperties(canvasProto, {
      w: {
        set: function (val) {
          this.lineWidth = val
        }
      },
      c: {
        set: function (val) {
          this.lineCap = val
        }
      },
      s: {
        set: function (val) {
          this.strokeStyle = val
        }
      },
      f: {
        set: function (val) {
          this.fillStyle = val
        }
      },
      a: {
        set: function (val) {
          this.globalAlpha = val
        }
      },
      n: {
        set: function (val) {
          this.font = val
        }
      },
      i: {
        set: function (val) {
          this.miterLimit = val
        }
      },
      j: {
        set: function (val) {
          this.lineJoin = val
        }
      },
      g: {
        set: function (val) {
          this.globalCompositeOperation = val
        }
      }
    });
    _(canvasProto).extend({
      S: function () {
        if (typeof this.saves ===
          "undefined") this.saves = 0;
        this.saves++;
        this.save()
      },
      r: function () {
        this.saves--;
        this.restore()
      },
      t: canvasProto.transform,
      T: canvasProto.translate,
      ro: canvasProto.rotate,
      L: canvasProto.createLinearGradient,
      R: canvasProto.createRadialGradient,
      P: canvasProto.createPattern,
      b: canvasProto.beginPath,
      z: canvasProto.closePath,
      F: canvasProto.fill,
      X: canvasProto.stroke,
      C: canvasProto.clip,
      M: canvasProto.moveTo,
      m: canvasProto.measureText,
      l: canvasProto.lineTo,
      q: canvasProto.quadraticCurveTo,
      B: canvasProto.bezierCurveTo,
      x: canvasProto.fillText,
      fillTextCustom: function (text, x, y) {},
      xc: function (text, x, y) {},
      tm: function (mapping) {},
      cgb: function () {},
      cge: function () {},
      xw: function (text, x, y, skipLast) {
        this.fillText(text, x, y)
      },
      xcw: function (text, x, y, skipLast) {},
      I: function (img) {
        if (typeof img !== "undefined") this.drawImage.apply(this, arguments)
      },
      Z: canvasProto.setTransform,
      d: canvasProto.getImageData,
      D: canvasProto.putImageData,
      e: canvasProto.scale,
      cr: function (x, y, w, h) {
        this.beginPath();
        this.rect(x, y, w, h);
        this.clip()
      },
      createCanvas: function () {
        return document.createElement("canvas")
      }
    });
    Object.defineProperty(TextMetrics.prototype, "W", {
      get: function () {
        return this.width
      }
    });
    var CanvasGradientPrototype;
    if (typeof exports.CanvasGradient === "undefined") CanvasGradientPrototype = document.createElement("canvas").getContext("2d").createLinearGradient(0, 0, 0, 0).__proto__;
    else CanvasGradientPrototype = CanvasGradient.prototype;
    _(CanvasGradientPrototype).extend({
      A: CanvasGradientPrototype.addColorStop
    });
    exports.utils.isRectIntersecting = function (rect1, rect2) {
      if (rect1.x1 <= rect2.x2 && rect1.x2 >= rect2.x1 &&
        rect1.y1 <= rect2.y2 && rect1.y2 >= rect2.y1) return true;
      return false
    };
    exports.utils.containsRect = function (rect1, rect2) {
      if (rect1.x1 <= rect2.x1 && rect1.x2 >= rect2.x2 && rect1.y1 <= rect2.y1 && rect1.y2 >= rect2.y2) return true;
      return false
    };
    exports.utils.getRectIntersection = function (rect1, rect2) {
      var rect = {
        x1: 0,
        y1: 0,
        x2: 0,
        y2: 0
      };
      if (exports.utils.isRectIntersecting(rect1, rect2) === true) {
        rect.x1 = Math.max(rect1.x1, rect2.x1);
        rect.y1 = Math.max(rect1.y1, rect2.y1);
        rect.x2 = Math.min(rect1.x2, rect2.x2);
        rect.y2 = Math.min(rect1.y2, rect2.y2)
      }
      return rect
    };
    exports.utils.normalizeRect = function (pt1, pt2) {
      var x1 = pt1.x;
      var x2 = pt2.x;
      var y1 = pt1.y;
      var y2 = pt2.y;
      if (pt1.x > pt2.x) {
        x2 = pt1.x;
        x1 = pt2.x
      }
      if (pt1.y > pt2.y) {
        y2 = pt1.y;
        y1 = pt2.y
      }
      return {
        x1: x1,
        y1: y1,
        x2: x2,
        y2: y2
      }
    };
    exports.utils.getRotationOffsets = function (rotation, w, h) {
      var dx = 0,
        dy = 0;
      rotation = Number(rotation);
      switch (rotation) {
        case 90:
          dy = w;
          break;
        case 180:
          dx = w;
          dy = h;
          break;
        case 270:
          dx = h;
          break
      }
      return {
        dx: dx,
        dy: dy
      }
    };
    exports.json2xml = function (o, tab) {
      var toXml = function (v, name, ind) {
          var xml = "";
          if (v instanceof Array)
            for (var i =
                0, n = v.length; i < n; i++) xml += ind + toXml(v[i], name, ind + "\t") + "\n";
          else if (typeof v === "object") {
            var hasChild = false;
            xml += ind + "<" + name;
            for (var m in v)
              if (m.charAt(0) == "@") xml += " " + m.substr(1) + '="' + v[m].toString() + '"';
              else hasChild = true;
            xml += hasChild ? ">" : "/>";
            if (hasChild) {
              for (var m in v)
                if (m == "#text") xml += v[m];
                else if (m == "#cdata") xml += "<![CDATA[" + v[m] + "]]\x3e";
              else if (m.charAt(0) != "@") xml += toXml(v[m], m, ind + "\t");
              xml += (xml.charAt(xml.length - 1) == "\n" ? ind : "") + "</" + name + ">"
            }
          } else xml += ind + "<" + name + ">" + v.toString() +
            "</" + name + ">";
          return xml
        },
        xml = "";
      for (var m in o) xml += toXml(o[m], m, "");
      return tab ? xml.replace(/\t/g, tab) : xml.replace(/\t|\n/g, "")
    };
    exports.roundToPrecision = function (number, precision) {
      var factor = Math.pow(10, precision);
      var tempNumber = number * factor;
      var roundedTempNumber = Math.round(tempNumber);
      return roundedTempNumber / factor
    };
    if (!Array.prototype.fill) Object.defineProperty(Array.prototype, "fill", {
      value: function (value) {
        if (this == null) throw new TypeError("this is null or not defined");
        var O = Object(this);
        var len =
          O.length >>> 0;
        var start = arguments[1];
        var relativeStart = start >> 0;
        var k = relativeStart < 0 ? Math.max(len + relativeStart, 0) : Math.min(relativeStart, len);
        var end = arguments[2];
        var relativeEnd = end === undefined ? len : end >> 0;
        var final = relativeEnd < 0 ? Math.max(len + relativeEnd, 0) : Math.min(relativeEnd, len);
        while (k < final) {
          O[k] = value;
          k++
        }
        return O
      }
    });
    exports.utils.utf8_decode = function (utftext) {
      var string = "";
      var i = 0;
      var c1 = 0,
        c2 = 0,
        c3 = 0;
      while (i < utftext.length) {
        c1 = utftext.charCodeAt(i);
        if (c1 < 128) {
          string += String.fromCharCode(c1);
          i++
        } else if (c1 > 191 && c1 < 224) {
          c2 = utftext.charCodeAt(i + 1);
          string += String.fromCharCode((c1 & 31) << 6 | c2 & 63);
          i += 2
        } else {
          c2 = utftext.charCodeAt(i + 1);
          c3 = utftext.charCodeAt(i + 2);
          string += String.fromCharCode((c1 & 15) << 12 | (c2 & 63) << 6 | c3 & 63);
          i += 3
        }
      }
      return string
    }
  })(window);

  function XMLWriter(a, b) {
    if (a) this.encoding = a;
    if (b) this.version = b
  }
  (function () {
    XMLWriter.prototype = {
      encoding: "ISO-8859-1",
      version: "1.0",
      formatting: "indented",
      indentChar: "\t",
      indentation: 1,
      newLine: "\n",
      writeStartDocument: function (a) {
        this.close();
        this.stack = [];
        this.standalone = a
      },
      writeEndDocument: function () {
        this.active = this.root;
        this.stack = []
      },
      writeDocType: function (a) {
        this.doctype = a
      },
      writeStartElement: function (c, d) {
        if (d) c = d + ":" + c;
        var a = this,
          b = a.active,
          e = {
            n: c,
            a: {},
            c: []
          };
        if (b) {
          b.c.push(e);
          this.stack.push(b)
        } else a.root = e;
        a.active = e
      },
      writeEndElement: function () {
        this.active =
          this.stack.pop() || this.root
      },
      writeAttributeString: function (a, b) {
        if (this.active) this.active.a[a] = b
      },
      writeString: function (a) {
        if (this.active) this.active.c.push(a)
      },
      writeElementString: function (a, b, c) {
        this.writeStartElement(a, c);
        this.writeString(b);
        this.writeEndElement()
      },
      writeCDATA: function (a) {
        this.writeString("<![CDATA[" + a + "]]\x3e")
      },
      writeComment: function (a) {
        this.writeString("\x3c!-- " + a + " --\x3e")
      },
      flush: function () {
        var a = this,
          b = "",
          c = "",
          d = a.indentation,
          e = a.formatting.toLowerCase() == "indented",
          f = '<?xml version="' +
          a.version + '" encoding="' + a.encoding + '"';
        if (a.stack && a.stack[0]) a.writeEndDocument();
        if (a.standalone !== undefined) f += ' standalone="' + !!a.standalone + '"';
        f += " ?>";
        f = [f];
        if (a.doctype && a.root) f.push("<!DOCTYPE " + a.root.n + " " + a.doctype + ">");
        if (e)
          while (d--) b += a.indentChar;
        if (a.root) k(a.root, c, b, f);
        return f.join(e ? a.newLine : "")
      },
      close: function () {
        var a = this;
        if (a.root) j(a.root);
        a.active = a.root = a.stack = null
      },
      getDocument: function () {
        return (new DOMParser).parseFromString(this.flush(), "text/xml")
      }
    };

    function j(a) {
      var l =
        a.c.length;
      while (l--)
        if (typeof a.c[l] == "object") j(a.c[l]);
      a.n = a.a = a.c = null
    }

    function k(a, b, c, d) {
      var e = b + "<" + a.n,
        f = a.c.length,
        g, h, i = 0;
      for (g in a.a) e += " " + g + '="' + a.a[g] + '"';
      e += f ? ">" : " />";
      d.push(e);
      if (f) {
        do {
          h = a.c[i++];
          if (typeof h == "string")
            if (f == 1) return d.push(d.pop() + h + "</" + a.n + ">");
            else d.push(b + c + h);
          else if (typeof h == "object") k(h, b + c, c, d)
        } while (i < f);
        d.push(b + "</" + a.n + ">")
      }
    }
  })();
  var idbModules = {};
  (function (idbModules) {
    function callback(fn, context, event, func) {
      event.target = context;
      typeof context[fn] === "function" && context[fn].apply(context, [event]);
      typeof func === "function" && func()
    }

    function throwDOMException(name, message, error) {
      var e = new DOMException.constructor(0, message);
      e.name = name;
      e.message = message;
      e.stack = arguments.callee.caller;
      idbModules.DEBUG && console.log(name, message, error, e);
      throw e;
    }
    var StringList = function () {
      this.length = 0;
      this._items = []
    };
    StringList.prototype = {
      contains: function (str) {
        return -1 !== this._items.indexOf(str)
      },
      item: function (key) {
        return this._items[key]
      },
      indexOf: function (str) {
        return this._items.indexOf(str)
      },
      push: function (item) {
        this._items.push(item);
        this.length += 1
      },
      splice: function () {
        this._items.splice.apply(this._items, arguments);
        this.length = this._items.length
      }
    };
    idbModules.util = {
      "throwDOMException": throwDOMException,
      "callback": callback,
      "quote": function (arg) {
        return "'" + arg + "'"
      },
      "StringList": StringList
    }
  })(idbModules);
  (function (idbModules) {
    var Sca = function () {
      return {
        "encode": function (val) {
          return JSON.stringify(val)
        },
        "decode": function (val) {
          return JSON.parse(val)
        }
      }
    }();
    idbModules.Sca = Sca
  })(idbModules);
  (function (idbModules) {
    var collations = ["", "number", "string", "boolean", "object", "undefined"];
    var getGenericEncoder = function () {
      return {
        "encode": function (key) {
          return collations.indexOf(typeof key) + "-" + JSON.stringify(key)
        },
        "decode": function (key) {
          if (typeof key === "undefined") return undefined;
          else return JSON.parse(key.substring(2))
        }
      }
    };
    var types = {
      "number": getGenericEncoder("number"),
      "boolean": getGenericEncoder(),
      "object": getGenericEncoder(),
      "string": {
        "encode": function (key) {
          return collations.indexOf("string") +
            "-" + key
        },
        "decode": function (key) {
          return "" + key.substring(2)
        }
      },
      "undefined": {
        "encode": function (key) {
          return collations.indexOf("undefined") + "-undefined"
        },
        "decode": function (key) {
          return undefined
        }
      }
    };
    var Key = function () {
      return {
        encode: function (key) {
          return types[typeof key].encode(key)
        },
        decode: function (key) {
          return types[collations[key.substring(0, 1)]].decode(key)
        }
      }
    }();
    idbModules.Key = Key
  })(idbModules);
  (function (idbModules, undefined) {
    var Event = function (type, debug) {
      return {
        "type": type,
        debug: debug,
        bubbles: false,
        cancelable: false,
        eventPhase: 0,
        timeStamp: new Date
      }
    };
    idbModules.Event = Event
  })(idbModules);
  (function (idbModules) {
    var IDBRequest = function () {
      this.onsuccess = this.onerror = this.result = this.error = this.source = this.transaction = null;
      this.readyState = "pending"
    };
    var IDBOpenRequest = function () {
      this.onblocked = this.onupgradeneeded = null
    };
    IDBOpenRequest.prototype = IDBRequest;
    idbModules.IDBRequest = IDBRequest;
    idbModules.IDBOpenRequest = IDBOpenRequest
  })(idbModules);
  (function (idbModules, undefined) {
    var IDBKeyRange = function (lower, upper, lowerOpen, upperOpen) {
      this.lower = lower;
      this.upper = upper;
      this.lowerOpen = lowerOpen;
      this.upperOpen = upperOpen
    };
    IDBKeyRange.only = function (value) {
      return new IDBKeyRange(value, value, true, true)
    };
    IDBKeyRange.lowerBound = function (value, open) {
      return new IDBKeyRange(value, undefined, open, undefined)
    };
    IDBKeyRange.upperBound = function (value) {
      return new IDBKeyRange(undefined, value, undefined, open)
    };
    IDBKeyRange.bound = function (lower, upper, lowerOpen, upperOpen) {
      return new IDBKeyRange(lower,
        upper, lowerOpen, upperOpen)
    };
    idbModules.IDBKeyRange = IDBKeyRange
  })(idbModules);
  (function (idbModules, undefined) {
    function IDBCursor(range, direction, idbObjectStore, cursorRequest, keyColumnName, valueColumnName) {
      this.__range = range;
      this.source = this.__idbObjectStore = idbObjectStore;
      this.__req = cursorRequest;
      this.key = undefined;
      this.direction = direction;
      this.__keyColumnName = keyColumnName;
      this.__valueColumnName = valueColumnName;
      if (!this.source.transaction.__active) idbModules.util.throwDOMException("TransactionInactiveError - The transaction this IDBObjectStore belongs to is not active.");
      this.__offset = -1;
      this.__lastKeyContinued = undefined;
      this["continue"]()
    }
    IDBCursor.prototype.__find = function (key, tx, success, error) {
      var me = this;
      var sql = ["SELECT * FROM ", idbModules.util.quote(me.__idbObjectStore.name)];
      var sqlValues = [];
      sql.push("WHERE ", me.__keyColumnName, " NOT NULL");
      if (me.__range && (me.__range.lower || me.__range.upper)) {
        sql.push("AND");
        if (me.__range.lower) {
          sql.push(me.__keyColumnName + (me.__range.lowerOpen ? " >=" : " >") + " ?");
          sqlValues.push(idbModules.Key.encode(me.__range.lower))
        }
        me.__range.lower && me.__range.upper &&
          sql.push("AND");
        if (me.__range.upper) {
          sql.push(me.__keyColumnName + (me.__range.upperOpen ? " <= " : " < ") + " ?");
          sqlValues.push(idbModules.Key.encode(me.__range.upper))
        }
      }
      if (typeof key !== "undefined") {
        me.__lastKeyContinued = key;
        me.__offset = 0
      }
      if (me.__lastKeyContinued !== undefined) {
        sql.push("AND " + me.__keyColumnName + " >= ?");
        sqlValues.push(idbModules.Key.encode(me.__lastKeyContinued))
      }
      sql.push("ORDER BY ", me.__keyColumnName);
      sql.push("LIMIT 1 OFFSET " + me.__offset);
      idbModules.DEBUG && console.log(sql.join(" "),
        sqlValues);
      tx.executeSql(sql.join(" "), sqlValues, function (tx, data) {
        if (data.rows.length === 1) {
          var key = idbModules.Key.decode(data.rows.item(0)[me.__keyColumnName]);
          var val = me.__valueColumnName === "value" ? idbModules.Sca.decode(data.rows.item(0)[me.__valueColumnName]) : idbModules.Key.decode(data.rows.item(0)[me.__valueColumnName]);
          success(key, val)
        } else {
          idbModules.DEBUG && console.log("Reached end of cursors");
          success(undefined, undefined)
        }
      }, function (tx, data) {
        idbModules.DEBUG && console.log("Could not execute Cursor.continue");
        error(data)
      })
    };
    IDBCursor.prototype["continue"] = function (key) {
      var me = this;
      this.__idbObjectStore.transaction.__addToTransactionQueue(function (tx, args, success, error) {
        me.__offset++;
        me.__find(key, tx, function (key, val) {
          me.key = key;
          me.value = val;
          success(typeof me.key !== "undefined" ? me : undefined, me.__req)
        }, function (data) {
          error(data)
        })
      })
    };
    IDBCursor.prototype.advance = function (count) {
      if (count <= 0) idbModules.util.throwDOMException("Type Error - Count is invalid - 0 or negative", count);
      var me = this;
      this.__idbObjectStore.transaction.__addToTransactionQueue(function (tx,
        args, success, error) {
        me.__offset += count;
        me.__find(undefined, tx, function (key, value) {
          me.key = key;
          me.value = value;
          success(typeof me.key !== "undefined" ? me : undefined, me.__req)
        }, function (data) {
          error(data)
        })
      })
    };
    IDBCursor.prototype.update = function (valueToUpdate) {
      var me = this;
      return this.__idbObjectStore.transaction.__addToTransactionQueue(function (tx, args, success, error) {
        me.__find(undefined, tx, function (key, value) {
          var sql = "UPDATE " + idbModules.util.quote(me.__idbObjectStore.name) + " SET value = ? WHERE key = ?";
          idbModules.DEBUG &&
            console.log(sql, valueToUpdate, key);
          tx.executeSql(sql, [idbModules.Sca.encode(valueToUpdate), idbModules.Key.encode(key)], function (tx, data) {
            if (data.rowsAffected === 1) success(key);
            else error("No rowns with key found" + key)
          }, function (tx, data) {
            error(data)
          })
        }, function (data) {
          error(data)
        })
      })
    };
    IDBCursor.prototype["delete"] = function () {
      var me = this;
      return this.__idbObjectStore.transaction.__addToTransactionQueue(function (tx, args, success, error) {
        me.__find(undefined, tx, function (key, value) {
          var sql = "DELETE FROM  " + idbModules.util.quote(me.__idbObjectStore.name) +
            " WHERE key = ?";
          idbModules.DEBUG && console.log(sql, key);
          tx.executeSql(sql, [idbModules.Key.encode(key)], function (tx, data) {
            if (data.rowsAffected === 1) success(undefined);
            else error("No rowns with key found" + key)
          }, function (tx, data) {
            error(data)
          })
        }, function (data) {
          error(data)
        })
      })
    };
    idbModules.IDBCursor = IDBCursor
  })(idbModules);
  (function (idbModules, undefined) {
    function IDBIndex(indexName, idbObjectStore) {
      this.indexName = indexName;
      this.__idbObjectStore = this.source = idbObjectStore
    }
    IDBIndex.prototype.__createIndex = function (indexName, keyPath, optionalParameters) {
      var me = this;
      var transaction = me.__idbObjectStore.transaction;
      transaction.__addToTransactionQueue(function (tx, args, success, failure) {
        me.__idbObjectStore.__getStoreProps(tx, function () {
          function error() {
            idbModules.util.throwDOMException(0, "Could not create new index", arguments)
          }
          if (transaction.mode !== 2) idbModules.util.throwDOMException(0, "Invalid State error, not a version transaction", me.transaction);
          var idxList = JSON.parse(me.__idbObjectStore.__storeProps.indexList);
          if (typeof idxList[indexName] !== "undefined") idbModules.util.throwDOMException(0, "Index already exists on store", idxList);
          var columnName = indexName;
          idxList[indexName] = {
            "columnName": columnName,
            "keyPath": keyPath,
            "optionalParams": optionalParameters
          };
          me.__idbObjectStore.__storeProps.indexList = JSON.stringify(idxList);
          var sql = ["ALTER TABLE", idbModules.util.quote(me.__idbObjectStore.name), "ADD", columnName, "BLOB"].join(" ");
          idbModules.DEBUG && console.log(sql);
          tx.executeSql(sql, [], function (tx, data) {
            tx.executeSql("SELECT * FROM " + idbModules.util.quote(me.__idbObjectStore.name), [], function (tx, data) {
                (function initIndexForRow(i) {
                  if (i < data.rows.length) try {
                    var value = idbModules.Sca.decode(data.rows.item(i).value);
                    var indexKey = eval("value['" + keyPath + "']");
                    tx.executeSql("UPDATE " + idbModules.util.quote(me.__idbObjectStore.name) +
                      " set " + columnName + " = ? where key = ?", [idbModules.Key.encode(indexKey), data.rows.item(i).key],
                      function (tx, data) {
                        initIndexForRow(i + 1)
                      }, error)
                  } catch (e) {
                    initIndexForRow(i + 1)
                  } else {
                    idbModules.DEBUG && console.log("Updating the indexes in table", me.__idbObjectStore.__storeProps);
                    tx.executeSql("UPDATE __sys__ set indexList = ? where name = ?", [me.__idbObjectStore.__storeProps.indexList, me.__idbObjectStore.name], function () {
                      me.__idbObjectStore.__setReadyState("createIndex", true);
                      success(me)
                    }, error)
                  }
                })(0)
              },
              error)
          }, error)
        }, "createObjectStore")
      })
    };
    IDBIndex.prototype.openCursor = function (range, direction) {
      var cursorRequest = new idbModules.IDBRequest;
      var cursor = new idbModules.IDBCursor(range, direction, this.source, cursorRequest, this.indexName, "value");
      return cursorRequest
    };
    IDBIndex.prototype.openKeyCursor = function (range, direction) {
      var cursorRequest = new idbModules.IDBRequest;
      var cursor = new idbModules.IDBCursor(range, direction, this.source, cursorRequest, this.indexName, "key");
      return cursorRequest
    };
    IDBIndex.prototype.__fetchIndexData =
      function (key, opType) {
        var me = this;
        return me.__idbObjectStore.transaction.__addToTransactionQueue(function (tx, args, success, error) {
          var sql = ["SELECT * FROM ", idbModules.util.quote(me.__idbObjectStore.name), " WHERE", me.indexName, "NOT NULL"];
          var sqlValues = [];
          if (typeof key !== "undefined") {
            sql.push("AND", me.indexName, " = ?");
            sqlValues.push(idbModules.Key.encode(key))
          }
          idbModules.DEBUG && console.log("Trying to fetch data for Index", sql.join(" "), sqlValues);
          tx.executeSql(sql.join(" "), sqlValues, function (tx, data) {
            var d;
            if (typeof opType === "count") d = data.rows.length;
            else if (data.rows.length === 0) d = undefined;
            else if (opType === "key") d = idbModules.Key.decode(data.rows.item(0).key);
            else d = idbModules.Sca.decode(data.rows.item(0).value);
            success(d)
          }, error)
        })
      };
    IDBIndex.prototype.get = function (key) {
      return this.__fetchIndexData(key, "value")
    };
    IDBIndex.prototype.getKey = function (key) {
      return this.__fetchIndexData(key, "key")
    };
    IDBIndex.prototype.count = function (key) {
      return this.__fetchIndexData(key, "count")
    };
    idbModules.IDBIndex = IDBIndex
  })(idbModules);
  (function (idbModules) {
    var IDBObjectStore = function (name, idbTransaction, ready) {
      this.name = name;
      this.transaction = idbTransaction;
      this.__ready = {};
      this.__setReadyState("createObjectStore", typeof ready === "undefined" ? true : ready);
      this.indexNames = new idbModules.util.StringList
    };
    IDBObjectStore.prototype.__setReadyState = function (key, val) {
      this.__ready[key] = val
    };
    IDBObjectStore.prototype.__waitForReady = function (callback, key) {
      var ready = true;
      if (typeof key !== "undefined") ready = typeof this.__ready[key] === "undefined" ?
        true : this.__ready[key];
      else
        for (var x in this.__ready)
          if (!this.__ready[x]) ready = false;
      if (ready) callback();
      else {
        idbModules.DEBUG && console.log("Waiting for to be ready", key);
        var me = this;
        window.setTimeout(function () {
          me.__waitForReady(callback, key)
        }, 100)
      }
    };
    IDBObjectStore.prototype.__getStoreProps = function (tx, callback, waitOnProperty) {
      var me = this;
      this.__waitForReady(function () {
        if (me.__storeProps) {
          idbModules.DEBUG && console.log("Store properties - cached", me.__storeProps);
          callback(me.__storeProps)
        } else tx.executeSql("SELECT * FROM __sys__ where name = ?",
          [me.name],
          function (tx, data) {
            if (data.rows.length !== 1) callback();
            else {
              me.__storeProps = {
                "name": data.rows.item(0).name,
                "indexList": data.rows.item(0).indexList,
                "autoInc": data.rows.item(0).autoInc,
                "keyPath": data.rows.item(0).keyPath
              };
              idbModules.DEBUG && console.log("Store properties", me.__storeProps);
              callback(me.__storeProps)
            }
          },
          function () {
            callback()
          })
      }, waitOnProperty)
    };
    IDBObjectStore.prototype.__deriveKey = function (tx, value, key, callback) {
      function getNextAutoIncKey() {
        tx.executeSql("SELECT * FROM sqlite_sequence where name like ?",
          [me.name],
          function (tx, data) {
            if (data.rows.length !== 1) callback(0);
            else callback(data.rows.item(0).seq)
          },
          function (tx, error) {
            idbModules.util.throwDOMException(0, "Data Error - Could not get the auto increment value for key", error)
          })
      }
      var me = this;
      me.__getStoreProps(tx, function (props) {
        if (!props) idbModules.util.throwDOMException(0, "Data Error - Could not locate defination for this table", props);
        if (props.keyPath) {
          if (typeof key !== "undefined") idbModules.util.throwDOMException(0, "Data Error - The object store uses in-line keys and the key parameter was provided",
            props);
          if (value) try {
            var primaryKey = eval("value['" + props.keyPath + "']");
            if (!primaryKey)
              if (props.autoInc === "true") getNextAutoIncKey();
              else idbModules.util.throwDOMException(0, "Data Error - Could not eval key from keyPath");
            else callback(primaryKey)
          } catch (e) {
            idbModules.util.throwDOMException(0, "Data Error - Could not eval key from keyPath", e)
          } else idbModules.util.throwDOMException(0, "Data Error - KeyPath was specified, but value was not")
        } else if (typeof key !== "undefined") callback(key);
        else if (props.autoInc ===
          "false") idbModules.util.throwDOMException(0, "Data Error - The object store uses out-of-line keys and has no key generator and the key parameter was not provided. ", props);
        else getNextAutoIncKey()
      })
    };
    IDBObjectStore.prototype.__insertData = function (tx, value, primaryKey, success, error) {
      var paramMap = {};
      if (typeof primaryKey !== "undefined") paramMap.key = idbModules.Key.encode(primaryKey);
      var indexes = JSON.parse(this.__storeProps.indexList);
      for (var key in indexes) try {
        paramMap[indexes[key].columnName] = idbModules.Key.encode(eval("value['" +
          indexes[key].keyPath + "']"))
      } catch (e) {
        error(e)
      }
      var sqlStart = ["INSERT INTO ", idbModules.util.quote(this.name), "("];
      var sqlEnd = [" VALUES ("];
      var sqlValues = [];
      for (key in paramMap) {
        sqlStart.push(key + ",");
        sqlEnd.push("?,");
        sqlValues.push(paramMap[key])
      }
      sqlStart.push("value )");
      sqlEnd.push("?)");
      sqlValues.push(idbModules.Sca.encode(value));
      var sql = sqlStart.join(" ") + sqlEnd.join(" ");
      idbModules.DEBUG && console.log("SQL for adding", sql, sqlValues);
      tx.executeSql(sql, sqlValues, function (tx, data) {
          success(primaryKey)
        },
        function (tx, err) {
          error(err)
        })
    };
    IDBObjectStore.prototype.add = function (value, key) {
      var me = this;
      return me.transaction.__addToTransactionQueue(function (tx, args, success, error) {
        me.__deriveKey(tx, value, key, function (primaryKey) {
          me.__insertData(tx, value, primaryKey, success, error)
        })
      })
    };
    IDBObjectStore.prototype.put = function (value, key) {
      var me = this;
      return me.transaction.__addToTransactionQueue(function (tx, args, success, error) {
        me.__deriveKey(tx, value, key, function (primaryKey) {
          var sql = "DELETE FROM " + idbModules.util.quote(me.name) +
            " where key = ?";
          tx.executeSql(sql, [idbModules.Key.encode(primaryKey)], function (tx, data) {
            idbModules.DEBUG && console.log("Did the row with the", primaryKey, "exist? ", data.rowsAffected);
            me.__insertData(tx, value, primaryKey, success, error)
          }, function (tx, err) {
            error(err)
          })
        })
      })
    };
    IDBObjectStore.prototype.get = function (key) {
      var me = this;
      return me.transaction.__addToTransactionQueue(function (tx, args, success, error) {
        me.__waitForReady(function () {
          var primaryKey = idbModules.Key.encode(key);
          idbModules.DEBUG && console.log("Fetching",
            me.name, primaryKey);
          tx.executeSql("SELECT * FROM " + idbModules.util.quote(me.name) + " where key = ?", [primaryKey], function (tx, data) {
            idbModules.DEBUG && console.log("Fetched data", data);
            try {
              if (0 === data.rows.length) return success();
              success(idbModules.Sca.decode(data.rows.item(0).value))
            } catch (e) {
              idbModules.DEBUG && console.log(e);
              success(undefined)
            }
          }, function (tx, err) {
            error(err)
          })
        })
      })
    };
    IDBObjectStore.prototype["delete"] = function (key) {
      var me = this;
      return me.transaction.__addToTransactionQueue(function (tx, args,
        success, error) {
        me.__waitForReady(function () {
          var primaryKey = idbModules.Key.encode(key);
          idbModules.DEBUG && console.log("Fetching", me.name, primaryKey);
          tx.executeSql("DELETE FROM " + idbModules.util.quote(me.name) + " where key = ?", [primaryKey], function (tx, data) {
            idbModules.DEBUG && console.log("Deleted from database", data.rowsAffected);
            success()
          }, function (tx, err) {
            error(err)
          })
        })
      })
    };
    IDBObjectStore.prototype.clear = function () {
      var me = this;
      return me.transaction.__addToTransactionQueue(function (tx, args, success, error) {
        me.__waitForReady(function () {
          tx.executeSql("DELETE FROM " +
            idbModules.util.quote(me.name), [],
            function (tx, data) {
              idbModules.DEBUG && console.log("Cleared all records from database", data.rowsAffected);
              success()
            },
            function (tx, err) {
              error(err)
            })
        })
      })
    };
    IDBObjectStore.prototype.count = function (key) {
      var me = this;
      return me.transaction.__addToTransactionQueue(function (tx, args, success, error) {
        me.__waitForReady(function () {
          var sql = "SELECT * FROM " + idbModules.util.quote(me.name) + (typeof key !== "undefined" ? " WHERE key = ?" : "");
          var sqlValues = [];
          typeof key !== "undefined" && sqlValues.push(idbModules.Key.encode(key));
          tx.executeSql(sql, sqlValues, function (tx, data) {
            success(data.rows.length)
          }, function (tx, err) {
            error(err)
          })
        })
      })
    };
    IDBObjectStore.prototype.openCursor = function (range, direction) {
      var cursorRequest = new idbModules.IDBRequest;
      var cursor = new idbModules.IDBCursor(range, direction, this, cursorRequest, "key", "value");
      return cursorRequest
    };
    IDBObjectStore.prototype.index = function (indexName) {
      var index = new idbModules.IDBIndex(indexName, this);
      return index
    };
    IDBObjectStore.prototype.createIndex = function (indexName, keyPath,
      optionalParameters) {
      var me = this;
      optionalParameters = optionalParameters || {};
      me.__setReadyState("createIndex", false);
      var result = new idbModules.IDBIndex(indexName, me);
      me.__waitForReady(function () {
        result.__createIndex(indexName, keyPath, optionalParameters)
      }, "createObjectStore");
      me.indexNames.push(indexName);
      return result
    };
    IDBObjectStore.prototype.deleteIndex = function (indexName) {
      var result = new idbModules.IDBIndex(indexName, this, false);
      result.__deleteIndex(indexName);
      return result
    };
    idbModules.IDBObjectStore =
      IDBObjectStore
  })(idbModules);
  (function (idbModules) {
    var READ = 0;
    var READ_WRITE = 1;
    var VERSION_TRANSACTION = 2;
    var IDBTransaction = function (storeNames, mode, db) {
      if (typeof mode === "number") {
        this.mode = mode;
        mode !== 2 && idbModules.DEBUG && console.log("Mode should be a string, but was specified as ", mode)
      } else if (typeof mode === "string") switch (mode) {
        case "readonly":
          this.mode = READ_WRITE;
          break;
        case "readwrite":
          this.mode = READ;
          break;
        default:
          this.mode = READ;
          break
      }
      this.storeNames = typeof storeNames === "string" ? [storeNames] : storeNames;
      for (var i = 0; i < this.storeNames.length; i++)
        if (!db.objectStoreNames.contains(this.storeNames[i])) idbModules.util.throwDOMException(0,
          "The operation failed because the requested database object could not be found. For example, an object store did not exist but was being opened.", this.storeNames[i]);
      this.__active = true;
      this.__running = false;
      this.__requests = [];
      this.__aborted = false;
      this.db = db;
      this.error = null;
      this.onabort = this.onerror = this.oncomplete = null;
      var me = this
    };
    IDBTransaction.prototype.__executeRequests = function () {
      if (this.__running && this.mode !== VERSION_TRANSACTION) {
        idbModules.DEBUG && console.log("Looks like the request set is already running",
          this.mode);
        return
      }
      this.__running = true;
      var me = this;
      window.setTimeout(function () {
        if (me.mode !== 2 && !me.__active) idbModules.util.throwDOMException(0, "A request was placed against a transaction which is currently not active, or which is finished", me.__active);
        me.db.__db.transaction(function (tx) {
            me.__tx = tx;
            var q = null,
              i = 0;

            function success(result, req) {
              if (req) q.req = req;
              q.req.readyState = "done";
              q.req.result = result;
              delete q.req.error;
              var e = idbModules.Event("success");
              idbModules.util.callback("onsuccess", q.req,
                e);
              i++;
              executeRequest()
            }

            function error(errorVal) {
              q.req.readyState = "done";
              q.req.error = "DOMError";
              var e = idbModules.Event("error", arguments);
              idbModules.util.callback("onerror", q.req, e);
              i++;
              executeRequest()
            }
            try {
              function executeRequest() {
                if (i >= me.__requests.length) {
                  me.__active = false;
                  me.__requests = [];
                  return
                }
                q = me.__requests[i];
                q.op(tx, q.args, success, error)
              }
              executeRequest()
            } catch (e) {
              idbModules.DEBUG && console.log("An exception occured in transaction", arguments);
              typeof me.onerror === "function" && me.onerror()
            }
          },
          function () {
            idbModules.DEBUG && console.log("An error in transaction", arguments);
            typeof me.onerror === "function" && me.onerror()
          },
          function () {
            idbModules.DEBUG && console.log("Transaction completed", arguments);
            typeof me.oncomplete === "function" && me.oncomplete()
          })
      }, 1)
    };
    IDBTransaction.prototype.__addToTransactionQueue = function (callback, args) {
      if (!this.__active && this.mode !== VERSION_TRANSACTION) idbModules.util.throwDOMException(0, "A request was placed against a transaction which is currently not active, or which is finished.",
        this.__mode);
      var request = new idbModules.IDBRequest;
      request.source = this.db;
      this.__requests.push({
        "op": callback,
        "args": args,
        "req": request
      });
      this.__executeRequests();
      return request
    };
    IDBTransaction.prototype.objectStore = function (objectStoreName) {
      return new idbModules.IDBObjectStore(objectStoreName, this)
    };
    IDBTransaction.prototype.abort = function () {
      !this.__active && idbModules.util.throwDOMException(0, "A request was placed against a transaction which is currently not active, or which is finished", this.__active)
    };
    IDBTransaction.prototype.READ_ONLY = 0;
    IDBTransaction.prototype.READ_WRITE = 1;
    IDBTransaction.prototype.VERSION_CHANGE = 2;
    idbModules.IDBTransaction = IDBTransaction
  })(idbModules);
  (function (idbModules) {
    var IDBDatabase = function (db, name, version, storeProperties) {
      this.__db = db;
      this.version = version;
      this.__storeProperties = storeProperties;
      this.objectStoreNames = new idbModules.util.StringList;
      for (var i = 0; i < storeProperties.rows.length; i++) this.objectStoreNames.push(storeProperties.rows.item(i).name);
      this.name = name;
      this.onabort = this.onerror = this.onversionchange = null
    };
    IDBDatabase.prototype.createObjectStore = function (storeName, createOptions) {
      var me = this;
      createOptions = createOptions || {};
      createOptions.keyPath =
        createOptions.keyPath || null;
      var result = new idbModules.IDBObjectStore(storeName, me.__versionTransaction, false);
      var transaction = me.__versionTransaction;
      transaction.__addToTransactionQueue(function (tx, args, success, failure) {
        function error() {
          idbModules.util.throwDOMException(0, "Could not create new object store", arguments)
        }
        if (!me.__versionTransaction) idbModules.util.throwDOMException(0, "Invalid State error", me.transaction);
        var sql = ["CREATE TABLE", idbModules.util.quote(storeName), "(key BLOB", createOptions.autoIncrement ?
          ", inc INTEGER PRIMARY KEY AUTOINCREMENT" : "PRIMARY KEY", ", value BLOB)"
        ].join(" ");
        idbModules.DEBUG && console.log(sql);
        tx.executeSql(sql, [], function (tx, data) {
          tx.executeSql("INSERT INTO __sys__ VALUES (?,?,?,?)", [storeName, createOptions.keyPath, createOptions.autoIncrement ? true : false, "{}"], function () {
            result.__setReadyState("createObjectStore", true);
            success(result)
          }, error)
        }, error)
      });
      me.objectStoreNames.push(storeName);
      return result
    };
    IDBDatabase.prototype.deleteObjectStore = function (storeName) {
      var error =
        function () {
          idbModules.util.throwDOMException(0, "Could not delete ObjectStore", arguments)
        };
      var me = this;
      !me.objectStoreNames.contains(storeName) && error("Object Store does not exist");
      me.objectStoreNames.splice(me.objectStoreNames.indexOf(storeName), 1);
      var transaction = me.__versionTransaction;
      transaction.__addToTransactionQueue(function (tx, args, success, failure) {
        if (!me.__versionTransaction) idbModules.util.throwDOMException(0, "Invalid State error", me.transaction);
        me.__db.transaction(function (tx) {
          tx.executeSql("SELECT * FROM __sys__ where name = ?",
            [storeName],
            function (tx, data) {
              if (data.rows.length > 0) tx.executeSql("DROP TABLE " + idbModules.util.quote(storeName), [], function () {
                tx.executeSql("DELETE FROM __sys__ WHERE name = ?", [storeName], function () {}, error)
              }, error)
            })
        })
      })
    };
    IDBDatabase.prototype.close = function () {};
    IDBDatabase.prototype.transaction = function (storeNames, mode) {
      var transaction = new idbModules.IDBTransaction(storeNames, mode || 1, this);
      return transaction
    };
    idbModules.IDBDatabase = IDBDatabase
  })(idbModules);
  (function (idbModules) {
    var DEFAULT_DB_SIZE = 4 * 1024 * 1024;
    if (!window.openDatabase) return;
    try {
      var sysdb = window.openDatabase("__sysdb__", 1, "System Database", DEFAULT_DB_SIZE)
    } catch (err) {
      window.openDatabase = undefined;
      return
    }
    sysdb.transaction(function (tx) {
        tx.executeSql("SELECT * FROM dbVersions", [], function (t, data) {}, function () {
          sysdb.transaction(function (tx) {
            tx.executeSql("CREATE TABLE IF NOT EXISTS dbVersions (name VARCHAR(255), version INT);", [], function () {}, function () {
              idbModules.util.throwDOMException("Could not create table __sysdb__ to save DB versions")
            })
          })
        })
      },
      function () {
        idbModules.DEBUG && console.log("Error in sysdb transaction - when selecting from dbVersions", arguments)
      });
    var shimIndexedDB = {
      open: function (name, version) {
        try {
          window.openDatabase("__test__", 1, "Test Database", 26 * 1024 * 1024)
        } catch (err) {
          return
        }
        var req = new idbModules.IDBOpenRequest;
        var calledDbCreateError = false;

        function dbCreateError() {
          if (calledDbCreateError) return;
          var e = idbModules.Event("error", arguments);
          req.readyState = "done";
          req.error = "DOMError";
          idbModules.util.callback("onerror", req, e);
          calledDbCreateError =
            true
        }

        function openDB(oldVersion) {
          var db = window.openDatabase(name, 1, name, DEFAULT_DB_SIZE);
          req.readyState = "done";
          if (typeof version === "undefined") version = oldVersion || 1;
          if (version <= 0 || oldVersion > version) idbModules.util.throwDOMException(0, "An attempt was made to open a database using a lower version than the existing version.", version);
          db.transaction(function (tx) {
            tx.executeSql("CREATE TABLE IF NOT EXISTS __sys__ (name VARCHAR(255), keyPath VARCHAR(255), autoInc BOOLEAN, indexList BLOB)", [], function () {
              tx.executeSql("SELECT * FROM __sys__",
                [],
                function (tx, data) {
                  var e = idbModules.Event("success");
                  req.source = req.result = new idbModules.IDBDatabase(db, name, version, data);
                  if (oldVersion < version) sysdb.transaction(function (systx) {
                    systx.executeSql("UPDATE dbVersions set version = ? where name = ?", [version, name], function () {
                      var e = idbModules.Event("upgradeneeded");
                      e.oldVersion = oldVersion;
                      e.newVersion = version;
                      req.transaction = req.result.__versionTransaction = new idbModules.IDBTransaction([], 2, req.source);
                      idbModules.util.callback("onupgradeneeded", req,
                        e,
                        function () {
                          var e = idbModules.Event("success");
                          idbModules.util.callback("onsuccess", req, e)
                        })
                    }, dbCreateError)
                  }, dbCreateError);
                  else idbModules.util.callback("onsuccess", req, e)
                }, dbCreateError)
            }, dbCreateError)
          }, dbCreateError)
        }
        sysdb.transaction(function (tx) {
          tx.executeSql("SELECT * FROM dbVersions where name = ?", [name], function (tx, data) {
              if (data.rows.length === 0) tx.executeSql("INSERT INTO dbVersions VALUES (?,?)", [name, version || 1], function () {
                openDB(0)
              }, dbCreateError);
              else openDB(data.rows.item(0).version)
            },
            dbCreateError)
        }, dbCreateError);
        return req
      },
      "deleteDatabase": function (name) {
        var req = new idbModules.IDBOpenRequest;
        var calledDBError = false;

        function dbError(msg) {
          if (calledDBError) return;
          req.readyState = "done";
          req.error = "DOMError";
          var e = idbModules.Event("error");
          e.message = msg;
          e.debug = arguments;
          idbModules.util.callback("onerror", req, e);
          calledDBError = true
        }
        var version = null;

        function deleteFromDbVersions() {
          sysdb.transaction(function (systx) {
            systx.executeSql("DELETE FROM dbVersions where name = ? ", [name], function () {
              req.result =
                undefined;
              var e = idbModules.Event("success");
              e.newVersion = null;
              e.oldVersion = version;
              idbModules.util.callback("onsuccess", req, e)
            }, dbError)
          }, dbError)
        }
        sysdb.transaction(function (systx) {
          systx.executeSql("SELECT * FROM dbVersions where name = ?", [name], function (tx, data) {
            if (data.rows.length === 0) {
              req.result = undefined;
              var e = idbModules.Event("success");
              e.newVersion = null;
              e.oldVersion = version;
              idbModules.util.callback("onsuccess", req, e);
              return
            }
            version = data.rows.item(0).version;
            var db = window.openDatabase(name,
              1, name, DEFAULT_DB_SIZE);
            db.transaction(function (tx) {
              tx.executeSql("SELECT * FROM __sys__", [], function (tx, data) {
                var tables = data.rows;
                (function deleteTables(i) {
                  if (i >= tables.length) tx.executeSql("DROP TABLE __sys__", [], function () {
                    deleteFromDbVersions()
                  }, dbError);
                  else tx.executeSql("DROP TABLE " + idbModules.util.quote(tables.item(i).name), [], function () {
                    deleteTables(i + 1)
                  }, function () {
                    deleteTables(i + 1)
                  })
                })(0)
              }, function (e) {
                deleteFromDbVersions()
              })
            }, dbError)
          })
        }, dbError);
        return req
      },
      "cmp": function (key1, key2) {
        return idbModules.Key.encode(key1) >
          idbModules.Key.encode(key2) ? 1 : key1 === key2 ? 0 : -1
      }
    };
    idbModules.shimIndexedDB = shimIndexedDB
  })(idbModules);
  (function (window, idbModules) {
    if (typeof window.openDatabase !== "undefined") {
      window.shimIndexedDB = idbModules.shimIndexedDB;
      if (window.shimIndexedDB) {
        window.shimIndexedDB.__useShim = function () {
          window._indexedDB = idbModules.shimIndexedDB;
          window._IDBDatabase = idbModules.IDBDatabase;
          window._IDBTransaction = idbModules.IDBTransaction;
          window._IDBCursor = idbModules.IDBCursor;
          window._IDBKeyRange = idbModules.IDBKeyRange
        };
        window.shimIndexedDB.__debug = function (val) {
          idbModules.DEBUG = val
        }
      }
    }
    try {
      window.indexedDB = window.indexedDB ||
        window.webkitIndexedDB || window.mozIndexedDB || window.oIndexedDB || window.msIndexedDB;
      if ((typeof window.indexedDB === "undefined" || window.indexedDB === null) && typeof window.openDatabase !== "undefined") window.shimIndexedDB.__useShim();
      else if (typeof window.openDatabase !== "undefined") {
        window.IDBDatabase = window.IDBDatabase || window.webkitIDBDatabase;
        window.IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction;
        window.IDBCursor = window.IDBCursor || window.webkitIDBCursor;
        window.IDBKeyRange = window.IDBKeyRange ||
          window.webkitIDBKeyRange;
        if (!window.IDBTransaction) window.IDBTransaction = {};
        window.IDBTransaction.READ_ONLY = window.IDBTransaction.READ_ONLY || "readonly";
        window.IDBTransaction.READ_WRITE = window.IDBTransaction.READ_WRITE || "readwrite"
      }
    } catch (error) {
      console.warn("No access to IndexedDB")
    }
  })(window, idbModules);
  (function (global) {
    global.createPromiseCapability = function () {
      var promiseCapability = {};
      var promise = new Promise(function (resolve, reject) {
        promiseCapability.resolve = resolve;
        promiseCapability.reject = reject
      });
      promiseCapability.promise = promise;
      return promiseCapability
    };
    var NativePromise = global["Promise"];
    var nativePromiseSupported = NativePromise && "resolve" in NativePromise && "reject" in NativePromise && "all" in NativePromise && "race" in NativePromise && function () {
      var resolve;
      new NativePromise(function (r) {
        resolve =
          r
      });
      return typeof resolve === "function"
    }();
    if (typeof exports !== "undefined" && exports) {
      exports.Promise = nativePromiseSupported ? NativePromise : Promise;
      exports.Polyfill = Promise
    } else if (typeof define == "function" && define.amd) define(function () {
      return nativePromiseSupported ? NativePromise : Promise
    });
    else if (!nativePromiseSupported) global["Promise"] = Promise;
    var PENDING = "pending";
    var SEALED = "sealed";
    var FULFILLED = "fulfilled";
    var REJECTED = "rejected";
    var NOOP = function () {};

    function isArray(value) {
      return Object.prototype.toString.call(value) ===
        "[object Array]"
    }
    var asyncSetTimer = typeof setImmediate !== "undefined" ? setImmediate : setTimeout;
    var asyncQueue = [];
    var asyncTimer;

    function asyncFlush() {
      for (var i = 0; i < asyncQueue.length; i++) asyncQueue[i][0](asyncQueue[i][1]);
      asyncQueue = [];
      asyncTimer = false
    }

    function asyncCall(callback, arg) {
      asyncQueue.push([callback, arg]);
      if (!asyncTimer) {
        asyncTimer = true;
        asyncSetTimer(asyncFlush, 0)
      }
    }

    function invokeResolver(resolver, promise) {
      function resolvePromise(value) {
        resolve(promise, value)
      }

      function rejectPromise(reason) {
        reject(promise,
          reason)
      }
      try {
        resolver(resolvePromise, rejectPromise)
      } catch (e) {
        rejectPromise(e)
      }
    }

    function invokeCallback(subscriber) {
      var owner = subscriber.owner;
      var settled = owner.state_;
      var value = owner.data_;
      var callback = subscriber[settled];
      var promise = subscriber.then;
      if (typeof callback === "function") {
        settled = FULFILLED;
        try {
          value = callback(value)
        } catch (e) {
          reject(promise, e)
        }
      }
      if (!handleThenable(promise, value)) {
        if (settled === FULFILLED) resolve(promise, value);
        if (settled === REJECTED) reject(promise, value)
      }
    }

    function handleThenable(promise,
      value) {
      var resolved;
      try {
        if (promise === value) throw new TypeError("A promises callback cannot return that same promise.");
        if (value && (typeof value === "function" || typeof value === "object")) {
          var then = value.then;
          if (typeof then === "function") {
            then.call(value, function (val) {
              if (!resolved) {
                resolved = true;
                if (value !== val) resolve(promise, val);
                else fulfill(promise, val)
              }
            }, function (reason) {
              if (!resolved) {
                resolved = true;
                reject(promise, reason)
              }
            });
            return true
          }
        }
      } catch (e) {
        if (!resolved) reject(promise, e);
        return true
      }
      return false
    }

    function resolve(promise, value) {
      if (promise === value || !handleThenable(promise, value)) fulfill(promise, value)
    }

    function fulfill(promise, value) {
      if (promise.state_ === PENDING) {
        promise.state_ = SEALED;
        promise.data_ = value;
        asyncCall(publishFulfillment, promise)
      }
    }

    function reject(promise, reason) {
      if (promise.state_ === PENDING) {
        promise.state_ = SEALED;
        promise.data_ = reason;
        asyncCall(publishRejection, promise)
      }
    }

    function publish(promise) {
      var callbacks = promise.then_;
      promise.then_ = undefined;
      for (var i = 0; i < callbacks.length; i++) invokeCallback(callbacks[i])
    }

    function publishFulfillment(promise) {
      promise.state_ = FULFILLED;
      publish(promise)
    }

    function publishRejection(promise) {
      promise.state_ = REJECTED;
      publish(promise)
    }

    function Promise(resolver) {
      if (typeof resolver !== "function") throw new TypeError("Promise constructor takes a function argument");
      if (this instanceof Promise === false) throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
      this.then_ = [];
      invokeResolver(resolver, this)
    }
    Promise.prototype = {
      constructor: Promise,
      state_: PENDING,
      then_: null,
      data_: undefined,
      then: function (onFulfillment, onRejection) {
        var subscriber = {
          owner: this,
          then: new this.constructor(NOOP),
          fulfilled: onFulfillment,
          rejected: onRejection
        };
        if (this.state_ === FULFILLED || this.state_ === REJECTED) asyncCall(invokeCallback, subscriber);
        else this.then_.push(subscriber);
        return subscriber.then
      },
      "catch": function (onRejection) {
        return this.then(null, onRejection)
      }
    };
    Promise.all = function (promises) {
      var Class = this;
      if (!isArray(promises)) throw new TypeError("You must pass an array to Promise.all().");
      return new Class(function (resolve, reject) {
        var results = [];
        var remaining = 0;

        function resolver(index) {
          remaining++;
          return function (value) {
            results[index] = value;
            if (!--remaining) resolve(results)
          }
        }
        for (var i = 0, promise; i < promises.length; i++) {
          promise = promises[i];
          if (promise && typeof promise.then === "function") promise.then(resolver(i), reject);
          else results[i] = promise
        }
        if (!remaining) resolve(results)
      })
    };
    Promise.race = function (promises) {
      var Class = this;
      if (!isArray(promises)) throw new TypeError("You must pass an array to Promise.race().");
      return new Class(function (resolve, reject) {
        for (var i = 0, promise; i < promises.length; i++) {
          promise = promises[i];
          if (promise && typeof promise.then === "function") promise.then(resolve, reject);
          else resolve(promise)
        }
      })
    };
    Promise.resolve = function (value) {
      var Class = this;
      if (value && typeof value === "object" && value.constructor === Class) return value;
      return new Class(function (resolve) {
        resolve(value)
      })
    };
    Promise.reject = function (reason) {
      var Class = this;
      return new Class(function (resolve, reject) {
        reject(reason)
      })
    }
  })(typeof window !=
    "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : this);
  /*
   Advanced Encryption Standard (AES) Cipher-Block Chaining implementation.|This implementation is based on the public domain library 'jscrypto' which|was written by:|Emily Stark (estark@stanford.edu)|Mike Hamburg (mhamburg@stanford.edu)|Dan Boneh (dabo@cs.stanford.edu)|Parts of this code are based on the OpenSSL implementation of AES:|http://www.openssl.org|@author Dave Longley|Copyright (c) 2010-2012 Digital Bazaar, Inc.*/
  (function () {
    if (typeof window !== "undefined") {
      var forge = window.forge = window.forge || {};
      forge.aes = {}
    } else if (typeof module !== "undefined" && module.exports) {
      var forge = {
        util: require("./util")
      };
      module.exports = forge.aes = {}
    } else if (typeof self !== "undefined") {
      var forge = self.forge = self.forge || {};
      forge.aes = {}
    }
    var init = false;
    var Nb = 4;
    var sbox;
    var isbox;
    var rcon;
    var mix;
    var imix;
    var initialize = function () {
      init = true;
      rcon = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54];
      var xtime = new Array(256);
      for (var i = 0; i < 128; ++i) {
        xtime[i] = i << 1;
        xtime[i +
          128] = i + 128 << 1 ^ 283
      }
      sbox = new Array(256);
      isbox = new Array(256);
      mix = new Array(4);
      imix = new Array(4);
      for (var i = 0; i < 4; ++i) {
        mix[i] = new Array(256);
        imix[i] = new Array(256)
      }
      var e = 0,
        ei = 0,
        e2, e4, e8, sx, sx2, me, ime;
      for (var i = 0; i < 256; ++i) {
        sx = ei ^ ei << 1 ^ ei << 2 ^ ei << 3 ^ ei << 4;
        sx = sx >> 8 ^ sx & 255 ^ 99;
        sbox[e] = sx;
        isbox[sx] = e;
        sx2 = xtime[sx];
        e2 = xtime[e];
        e4 = xtime[e2];
        e8 = xtime[e4];
        me = sx2 << 24 ^ sx << 16 ^ sx << 8 ^ (sx ^ sx2);
        ime = (e2 ^ e4 ^ e8) << 24 ^ (e ^ e8) << 16 ^ (e ^ e4 ^ e8) << 8 ^ (e ^ e2 ^ e8);
        for (var n = 0; n < 4; ++n) {
          mix[n][e] = me;
          imix[n][sx] = ime;
          me = me << 24 | me >>> 8;
          ime = ime <<
            24 | ime >>> 8
        }
        if (e === 0) e = ei = 1;
        else {
          e = e2 ^ xtime[xtime[xtime[e2 ^ e8]]];
          ei ^= xtime[xtime[ei]]
        }
      }
    };
    var expandKey = function (key, decrypt) {
      var w = key.slice(0);
      var temp, iNk = 1;
      var Nk = w.length;
      var Nr1 = Nk + 6 + 1;
      var end = Nb * Nr1;
      for (var i = Nk; i < end; ++i) {
        temp = w[i - 1];
        if (i % Nk === 0) {
          temp = sbox[temp >>> 16 & 255] << 24 ^ sbox[temp >>> 8 & 255] << 16 ^ sbox[temp & 255] << 8 ^ sbox[temp >>> 24] ^ rcon[iNk] << 24;
          iNk++
        } else if (Nk > 6 && i % Nk == 4) temp = sbox[temp >>> 24] << 24 ^ sbox[temp >>> 16 & 255] << 16 ^ sbox[temp >>> 8 & 255] << 8 ^ sbox[temp & 255];
        w[i] = w[i - Nk] ^ temp
      }
      if (decrypt) {
        var tmp;
        var m0 = imix[0];
        var m1 = imix[1];
        var m2 = imix[2];
        var m3 = imix[3];
        var wnew = w.slice(0);
        var end = w.length;
        for (var i = 0, wi = end - Nb; i < end; i += Nb, wi -= Nb)
          if (i === 0 || i === end - Nb) {
            wnew[i] = w[wi];
            wnew[i + 1] = w[wi + 3];
            wnew[i + 2] = w[wi + 2];
            wnew[i + 3] = w[wi + 1]
          } else
            for (var n = 0; n < Nb; ++n) {
              tmp = w[wi + n];
              wnew[i + (3 & -n)] = m0[sbox[tmp >>> 24]] ^ m1[sbox[tmp >>> 16 & 255]] ^ m2[sbox[tmp >>> 8 & 255]] ^ m3[sbox[tmp & 255]]
            }
        w = wnew
      }
      return w
    };
    var _updateBlock = function (w, input, output, decrypt) {
      var Nr = w.length / 4 - 1;
      var m0, m1, m2, m3, sub;
      if (decrypt) {
        m0 = imix[0];
        m1 = imix[1];
        m2 = imix[2];
        m3 = imix[3];
        sub = isbox
      } else {
        m0 = mix[0];
        m1 = mix[1];
        m2 = mix[2];
        m3 = mix[3];
        sub = sbox
      }
      var a, b, c, d, a2, b2, c2;
      a = input[0] ^ w[0];
      b = input[decrypt ? 3 : 1] ^ w[1];
      c = input[2] ^ w[2];
      d = input[decrypt ? 1 : 3] ^ w[3];
      var i = 3;
      for (var round = 1; round < Nr; ++round) {
        a2 = m0[a >>> 24] ^ m1[b >>> 16 & 255] ^ m2[c >>> 8 & 255] ^ m3[d & 255] ^ w[++i];
        b2 = m0[b >>> 24] ^ m1[c >>> 16 & 255] ^ m2[d >>> 8 & 255] ^ m3[a & 255] ^ w[++i];
        c2 = m0[c >>> 24] ^ m1[d >>> 16 & 255] ^ m2[a >>> 8 & 255] ^ m3[b & 255] ^ w[++i];
        d = m0[d >>> 24] ^ m1[a >>> 16 & 255] ^ m2[b >>> 8 & 255] ^ m3[c & 255] ^ w[++i];
        a = a2;
        b = b2;
        c = c2
      }
      output[0] = sub[a >>>
        24] << 24 ^ sub[b >>> 16 & 255] << 16 ^ sub[c >>> 8 & 255] << 8 ^ sub[d & 255] ^ w[++i];
      output[decrypt ? 3 : 1] = sub[b >>> 24] << 24 ^ sub[c >>> 16 & 255] << 16 ^ sub[d >>> 8 & 255] << 8 ^ sub[a & 255] ^ w[++i];
      output[2] = sub[c >>> 24] << 24 ^ sub[d >>> 16 & 255] << 16 ^ sub[a >>> 8 & 255] << 8 ^ sub[b & 255] ^ w[++i];
      output[decrypt ? 1 : 3] = sub[d >>> 24] << 24 ^ sub[a >>> 16 & 255] << 16 ^ sub[b >>> 8 & 255] << 8 ^ sub[c & 255] ^ w[++i]
    };
    var _createCipher = function (key, iv, output, decrypt) {
      var cipher = null;
      if (!init) initialize();
      if (key.constructor == String && (key.length == 16 || key.length == 24 || key.length == 32)) key = forge.util.createBuffer(key);
      else if (key.constructor == Array && (key.length == 16 || key.length == 24 || key.length == 32)) {
        var tmp = key;
        var key = forge.util.createBuffer();
        for (var i = 0; i < tmp.length; ++i) key.putByte(tmp[i])
      }
      if (key.constructor != Array) {
        var tmp = key;
        key = [];
        var len = tmp.length();
        if (len == 16 || len == 24 || len == 32) {
          len = len >>> 2;
          for (var i = 0; i < len; ++i) key.push(tmp.getInt32())
        }
      }
      if (key.constructor == Array && (key.length == 4 || key.length == 6 || key.length == 8)) {
        var _w = expandKey(key, decrypt);
        var _blockSize = Nb << 2;
        var _input;
        var _output;
        var _inBlock;
        var _outBlock;
        var _prev;
        var _finish;
        cipher = {
          output: null
        };
        cipher.update = function (input) {
          if (!_finish) _input.putBuffer(input);
          var threshold = decrypt && !_finish ? _blockSize << 1 : _blockSize;
          while (_input.length() >= threshold) {
            if (decrypt)
              for (var i = 0; i < Nb; ++i) _inBlock[i] = _input.getInt32();
            else
              for (var i = 0; i < Nb; ++i) _inBlock[i] = _prev[i] ^ _input.getInt32();
            _updateBlock(_w, _inBlock, _outBlock, decrypt);
            if (decrypt) {
              for (var i = 0; i < Nb; ++i) _output.putInt32(_prev[i] ^ _outBlock[i]);
              _prev = _inBlock.slice(0)
            } else {
              for (var i = 0; i < Nb; ++i) _output.putInt32(_outBlock[i]);
              _prev = _outBlock
            }
          }
        };
        cipher.finish = function (pad) {
          var rval = true;
          if (!decrypt)
            if (pad) rval = pad(_blockSize, _input, decrypt);
            else {
              var padding = _input.length() == _blockSize ? _blockSize : _blockSize - _input.length();
              _input.fillWithByte(padding, padding)
            } if (rval) {
            _finish = true;
            cipher.update()
          }
          if (decrypt) {
            rval = _input.length() === 0;
            if (rval)
              if (pad) rval = pad(_blockSize, _output, decrypt);
              else {
                var len = _output.length();
                var count = _output.at(len - 1);
                if (count > Nb << 2) rval = false;
                else _output.truncate(count)
              }
          }
          return rval
        };
        cipher.start =
          function (iv, output) {
            iv = iv || _prev.slice(0);
            if (iv.constructor == String && iv.length == 16) iv = forge.util.createBuffer(iv);
            else if (iv.constructor == Array && iv.length == 16) {
              var tmp = iv;
              var iv = forge.util.createBuffer();
              for (var i = 0; i < 16; ++i) iv.putByte(tmp[i])
            }
            if (iv.constructor != Array) {
              var tmp = iv;
              iv = new Array(4);
              iv[0] = tmp.getInt32();
              iv[1] = tmp.getInt32();
              iv[2] = tmp.getInt32();
              iv[3] = tmp.getInt32()
            }
            _input = forge.util.createBuffer();
            _output = output || forge.util.createBuffer();
            _prev = iv.slice(0);
            _inBlock = new Array(Nb);
            _outBlock =
              new Array(Nb);
            _finish = false;
            cipher.output = _output
          };
        if (iv !== null) cipher.start(iv, output)
      }
      return cipher
    };
    forge.aes.startEncrypting = function (key, iv, output) {
      return _createCipher(key, iv, output, false)
    };
    forge.aes.createEncryptionCipher = function (key) {
      return _createCipher(key, null, null, false)
    };
    forge.aes.startDecrypting = function (key, iv, output) {
      return _createCipher(key, iv, output, true)
    };
    forge.aes.createDecryptionCipher = function (key) {
      return _createCipher(key, null, null, true)
    };
    forge.aes._expandKey = function (key,
      decrypt) {
      if (!init) initialize();
      return expandKey(key, decrypt)
    };
    forge.aes._updateBlock = _updateBlock
  })();
  (function () {
    if (typeof window !== "undefined") {
      var forge = window.forge = window.forge || {};
      forge.util = {}
    } else if (typeof module !== "undefined" && module.exports) {
      var forge = {};
      module.exports = forge.util = {}
    } else if (typeof self !== "undefined") {
      var forge = self.forge = self.forge || {};
      forge.util = {}
    }
    var util = forge.util;
    util.ByteBuffer = function (b) {
      this.data = b || "";
      this.read = 0
    };
    util.ByteBuffer.prototype.length = function () {
      return this.data.length - this.read
    };
    util.ByteBuffer.prototype.isEmpty = function () {
      return this.data.length -
        this.read === 0
    };
    util.ByteBuffer.prototype.putByte = function (b) {
      this.data += String.fromCharCode(b)
    };
    util.ByteBuffer.prototype.fillWithByte = function (b, n) {
      b = String.fromCharCode(b);
      var d = this.data;
      while (n > 0) {
        if (n & 1) d += b;
        n >>>= 1;
        if (n > 0) b += b
      }
      this.data = d
    };
    util.ByteBuffer.prototype.putBytes = function (bytes) {
      this.data += bytes
    };
    util.ByteBuffer.prototype.putString = function (str) {
      this.data += util.encodeUtf8(str)
    };
    util.ByteBuffer.prototype.putInt16 = function (i) {
      this.data += String.fromCharCode(i >> 8 & 255) + String.fromCharCode(i &
        255)
    };
    util.ByteBuffer.prototype.putInt24 = function (i) {
      this.data += String.fromCharCode(i >> 16 & 255) + String.fromCharCode(i >> 8 & 255) + String.fromCharCode(i & 255)
    };
    util.ByteBuffer.prototype.putInt32 = function (i) {
      this.data += String.fromCharCode(i >> 24 & 255) + String.fromCharCode(i >> 16 & 255) + String.fromCharCode(i >> 8 & 255) + String.fromCharCode(i & 255)
    };
    util.ByteBuffer.prototype.putInt16Le = function (i) {
      this.data += String.fromCharCode(i & 255) + String.fromCharCode(i >> 8 & 255)
    };
    util.ByteBuffer.prototype.putInt24Le = function (i) {
      this.data +=
        String.fromCharCode(i & 255) + String.fromCharCode(i >> 8 & 255) + String.fromCharCode(i >> 16 & 255)
    };
    util.ByteBuffer.prototype.putInt32Le = function (i) {
      this.data += String.fromCharCode(i & 255) + String.fromCharCode(i >> 8 & 255) + String.fromCharCode(i >> 16 & 255) + String.fromCharCode(i >> 24 & 255)
    };
    util.ByteBuffer.prototype.putInt = function (i, n) {
      do {
        n -= 8;
        this.data += String.fromCharCode(i >> n & 255)
      } while (n > 0)
    };
    util.ByteBuffer.prototype.putBuffer = function (buffer) {
      this.data += buffer.getBytes()
    };
    util.ByteBuffer.prototype.getByte = function () {
      return this.data.charCodeAt(this.read++)
    };
    util.ByteBuffer.prototype.getInt16 = function () {
      var rval = this.data.charCodeAt(this.read) << 8 ^ this.data.charCodeAt(this.read + 1);
      this.read += 2;
      return rval
    };
    util.ByteBuffer.prototype.getInt24 = function () {
      var rval = this.data.charCodeAt(this.read) << 16 ^ this.data.charCodeAt(this.read + 1) << 8 ^ this.data.charCodeAt(this.read + 2);
      this.read += 3;
      return rval
    };
    util.ByteBuffer.prototype.getInt32 = function () {
      var rval = this.data.charCodeAt(this.read) << 24 ^ this.data.charCodeAt(this.read + 1) << 16 ^ this.data.charCodeAt(this.read + 2) <<
        8 ^ this.data.charCodeAt(this.read + 3);
      this.read += 4;
      return rval
    };
    util.ByteBuffer.prototype.getInt16Le = function () {
      var rval = this.data.charCodeAt(this.read) ^ this.data.charCodeAt(this.read + 1) << 8;
      this.read += 2;
      return rval
    };
    util.ByteBuffer.prototype.getInt24Le = function () {
      var rval = this.data.charCodeAt(this.read) ^ this.data.charCodeAt(this.read + 1) << 8 ^ this.data.charCodeAt(this.read + 2) << 16;
      this.read += 3;
      return rval
    };
    util.ByteBuffer.prototype.getInt32Le = function () {
      var rval = this.data.charCodeAt(this.read) ^ this.data.charCodeAt(this.read +
        1) << 8 ^ this.data.charCodeAt(this.read + 2) << 16 ^ this.data.charCodeAt(this.read + 3) << 24;
      this.read += 4;
      return rval
    };
    util.ByteBuffer.prototype.getInt = function (n) {
      var rval = 0;
      do {
        rval = (rval << n) + this.data.charCodeAt(this.read++);
        n -= 8
      } while (n > 0);
      return rval
    };
    util.ByteBuffer.prototype.getBytes = function (count) {
      var rval;
      if (count) {
        count = Math.min(this.length(), count);
        rval = this.data.slice(this.read, this.read + count);
        this.read += count
      } else if (count === 0) rval = "";
      else {
        rval = this.read === 0 ? this.data : this.data.slice(this.read);
        this.clear()
      }
      return rval
    };
    util.ByteBuffer.prototype.bytes = function (count) {
      return typeof count === "undefined" ? this.data.slice(this.read) : this.data.slice(this.read, this.read + count)
    };
    util.ByteBuffer.prototype.at = function (i) {
      return this.data.charCodeAt(this.read + i)
    };
    util.ByteBuffer.prototype.setAt = function (i, b) {
      this.data = this.data.substr(0, this.read + i) + String.fromCharCode(b) + this.data.substr(this.read + i + 1)
    };
    util.ByteBuffer.prototype.last = function () {
      return this.data.charCodeAt(this.data.length - 1)
    };
    util.ByteBuffer.prototype.copy =
      function () {
        var c = util.createBuffer(this.data);
        c.read = this.read;
        return c
      };
    util.ByteBuffer.prototype.compact = function () {
      if (this.read > 0) {
        this.data = this.data.slice(this.read);
        this.read = 0
      }
    };
    util.ByteBuffer.prototype.clear = function () {
      this.data = "";
      this.read = 0
    };
    util.ByteBuffer.prototype.truncate = function (count) {
      var len = Math.max(0, this.length() - count);
      this.data = this.data.substr(this.read, len);
      this.read = 0
    };
    util.ByteBuffer.prototype.toHex = function () {
      var rval = "";
      for (var i = this.read; i < this.data.length; ++i) {
        var b =
          this.data.charCodeAt(i);
        if (b < 16) rval += "0";
        rval += b.toString(16)
      }
      return rval
    };
    util.ByteBuffer.prototype.toString = function () {
      return util.decodeUtf8(this.bytes())
    };
    util.createBuffer = function (input, encoding) {
      encoding = encoding || "raw";
      if (input !== undefined && encoding === "utf8") input = util.encodeUtf8(input);
      return new util.ByteBuffer(input)
    };
    util.fillString = function (c, n) {
      var s = "";
      while (n > 0) {
        if (n & 1) s += c;
        n >>>= 1;
        if (n > 0) c += c
      }
      return s
    };
    util.xorBytes = function (s1, s2, n) {
      var s3 = "";
      var b = "";
      var t = "";
      var i = 0;
      var c = 0;
      for (; n >
        0; --n, ++i) {
        b = s1.charCodeAt(i) ^ s2.charCodeAt(i);
        if (c >= 10) {
          s3 += t;
          t = "";
          c = 0
        }
        t += String.fromCharCode(b);
        ++c
      }
      s3 += t;
      return s3
    };
    util.hexToBytes = function (hex) {
      var rval = "";
      var i = 0;
      if (hex.length & 1 == 1) {
        i = 1;
        rval += String.fromCharCode(parseInt(hex[0], 16))
      }
      for (; i < hex.length; i += 2) rval += String.fromCharCode(parseInt(hex.substr(i, 2), 16));
      return rval
    };
    util.bytesToHex = function (bytes) {
      return util.createBuffer(bytes).toHex()
    };
    util.int32ToBytes = function (i) {
      return String.fromCharCode(i >> 24 & 255) + String.fromCharCode(i >> 16 & 255) +
        String.fromCharCode(i >> 8 & 255) + String.fromCharCode(i & 255)
    };
    var _base64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
    var _base64Idx = [62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, 64, -1, -1, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51];
    util.encode64 = function (input, maxline) {
      var line = "";
      var output = "";
      var chr1, chr2, chr3;
      var i = 0;
      while (i < input.length) {
        chr1 =
          input.charCodeAt(i++);
        chr2 = input.charCodeAt(i++);
        chr3 = input.charCodeAt(i++);
        line += _base64.charAt(chr1 >> 2);
        line += _base64.charAt((chr1 & 3) << 4 | chr2 >> 4);
        if (isNaN(chr2)) line += "==";
        else {
          line += _base64.charAt((chr2 & 15) << 2 | chr3 >> 6);
          line += isNaN(chr3) ? "=" : _base64.charAt(chr3 & 63)
        }
        if (maxline && line.length > maxline) {
          output += line.substr(0, maxline) + "\r\n";
          line = line.substr(maxline)
        }
      }
      output += line;
      return output
    };
    util.decode64 = function (input) {
      input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");
      var output = "";
      var enc1, enc2, enc3,
        enc4;
      var i = 0;
      while (i < input.length) {
        enc1 = _base64Idx[input.charCodeAt(i++) - 43];
        enc2 = _base64Idx[input.charCodeAt(i++) - 43];
        enc3 = _base64Idx[input.charCodeAt(i++) - 43];
        enc4 = _base64Idx[input.charCodeAt(i++) - 43];
        output += String.fromCharCode(enc1 << 2 | enc2 >> 4);
        if (enc3 !== 64) {
          output += String.fromCharCode((enc2 & 15) << 4 | enc3 >> 2);
          if (enc4 !== 64) output += String.fromCharCode((enc3 & 3) << 6 | enc4)
        }
      }
      return output
    };
    util.encodeUtf8 = function (str) {
      return unescape(encodeURIComponent(str))
    };
    util.decodeUtf8 = function (str) {
      return decodeURIComponent(escape(str))
    };
    util.deflate = function (api, bytes, raw) {
      bytes = util.decode64(api.deflate(util.encode64(bytes)).rval);
      if (raw) {
        var start = 2;
        var flg = bytes.charCodeAt(1);
        if (flg & 32) start = 6;
        bytes = bytes.substring(start, bytes.length - 4)
      }
      return bytes
    };
    util.inflate = function (api, bytes, raw) {
      var rval = api.inflate(util.encode64(bytes)).rval;
      return rval === null ? null : util.decode64(rval)
    };
    var _setStorageObject = function (api, id, obj) {
      if (!api) throw {
        message: "WebStorage not available."
      };
      var rval;
      if (obj === null) rval = api.removeItem(id);
      else {
        obj =
          util.encode64(JSON.stringify(obj));
        rval = api.setItem(id, obj)
      }
      if (typeof rval !== "undefined" && rval.rval !== true) throw rval.error;
    };
    var _getStorageObject = function (api, id) {
      if (!api) throw {
        message: "WebStorage not available."
      };
      var rval = api.getItem(id);
      if (api.init)
        if (rval.rval === null) {
          if (rval.error) throw rval.error;
          rval = null
        } else rval = rval.rval;
      if (rval !== null) rval = JSON.parse(util.decode64(rval));
      return rval
    };
    var _setItem = function (api, id, key, data) {
      var obj = _getStorageObject(api, id);
      if (obj === null) obj = {};
      obj[key] =
        data;
      _setStorageObject(api, id, obj)
    };
    var _getItem = function (api, id, key) {
      var rval = _getStorageObject(api, id);
      if (rval !== null) rval = key in rval ? rval[key] : null;
      return rval
    };
    var _removeItem = function (api, id, key) {
      var obj = _getStorageObject(api, id);
      if (obj !== null && key in obj) {
        delete obj[key];
        var empty = true;
        for (var prop in tmp) {
          empty = false;
          break
        }
        if (empty) obj = null;
        _setStorageObject(api, id, obj)
      }
    };
    var _clearItems = function (api, id) {
      _setStorageObject(api, id, null)
    };
    var _callStorageFunction = function (func, args, location) {
      var rval =
        null;
      if (typeof location === "undefined") location = ["web", "flash"];
      var type;
      var done = false;
      var exception = null;
      for (var idx in location) {
        type = location[idx];
        try {
          if (type === "flash" || type === "both")
            if (args[0] === null) throw {
              message: "Flash local storage not available."
            };
            else {
              rval = func.apply(this, args);
              done = type === "flash"
            } if (type === "web" || type === "both") {
            args[0] = localStorage;
            rval = func.apply(this, args);
            done = true
          }
        } catch (ex) {
          exception = ex
        }
        if (done) break
      }
      if (!done) throw exception;
      return rval
    };
    util.setItem = function (api,
      id, key, data, location) {
      _callStorageFunction(_setItem, arguments, location)
    };
    util.getItem = function (api, id, key, location) {
      return _callStorageFunction(_getItem, arguments, location)
    };
    util.removeItem = function (api, id, key, location) {
      _callStorageFunction(_removeItem, arguments, location)
    };
    util.clearItems = function (api, id, location) {
      _callStorageFunction(_clearItems, arguments, location)
    };
    util.parseUrl = function (str) {
      var regex = /^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;
      regex.lastIndex = 0;
      var m = regex.exec(str);
      var url = m ===
        null ? null : {
          full: str,
          scheme: m[1],
          host: m[2],
          port: m[3],
          path: m[4]
        };
      if (url) {
        url.fullHost = url.host;
        if (url.port)
          if (url.port !== 80 && url.scheme === "http") url.fullHost += ":" + url.port;
          else {
            if (url.port !== 443 && url.scheme === "https") url.fullHost += ":" + url.port
          }
        else if (url.scheme === "http") url.port = 80;
        else if (url.scheme === "https") url.port = 443;
        url.full = url.scheme + "://" + url.fullHost
      }
      return url
    };
    var _queryVariables = null;
    util.getQueryVariables = function (query) {
      var parse = function (q) {
        var rval = {};
        var kvpairs = q.split("&");
        for (var i =
            0; i < kvpairs.length; i++) {
          var pos = kvpairs[i].indexOf("=");
          var key;
          var val;
          if (pos > 0) {
            key = kvpairs[i].substring(0, pos);
            val = kvpairs[i].substring(pos + 1)
          } else {
            key = kvpairs[i];
            val = null
          }
          if (!(key in rval)) rval[key] = [];
          if (val !== null) rval[key].push(unescape(val))
        }
        return rval
      };
      var rval;
      if (typeof query === "undefined") {
        if (_queryVariables === null)
          if (typeof window === "undefined") _queryVariables = {};
          else _queryVariables = parse(window.location.search.substring(1));
        rval = _queryVariables
      } else rval = parse(query);
      return rval
    };
    util.parseFragment =
      function (fragment) {
        var fp = fragment;
        var fq = "";
        var pos = fragment.indexOf("?");
        if (pos > 0) {
          fp = fragment.substring(0, pos);
          fq = fragment.substring(pos + 1)
        }
        var path = fp.split("/");
        if (path.length > 0 && path[0] == "") path.shift();
        var query = fq == "" ? {} : util.getQueryVariables(fq);
        return {
          pathString: fp,
          queryString: fq,
          path: path,
          query: query
        }
      };
    util.makeRequest = function (reqString) {
      var frag = util.parseFragment(reqString);
      var req = {
        path: frag.pathString,
        query: frag.queryString,
        getPath: function (i) {
          return typeof i === "undefined" ? frag.path :
            frag.path[i]
        },
        getQuery: function (k, i) {
          var rval;
          if (typeof k === "undefined") rval = frag.query;
          else {
            rval = frag.query[k];
            if (rval && typeof i !== "undefined") rval = rval[i]
          }
          return rval
        },
        getQueryLast: function (k, _default) {
          var rval;
          var vals = req.getQuery(k);
          if (vals) rval = vals[vals.length - 1];
          else rval = _default;
          return rval
        }
      };
      return req
    };
    util.makeLink = function (path, query, fragment) {
      path = jQuery.isArray(path) ? path.join("/") : path;
      var qstr = jQuery.param(query || {});
      fragment = fragment || "";
      return path + (qstr.length > 0 ? "?" + qstr : "") +
        (fragment.length > 0 ? "#" + fragment : "")
    };
    util.setPath = function (object, keys, value) {
      if (typeof object === "object" && object !== null) {
        var i = 0;
        var len = keys.length;
        while (i < len) {
          var next = keys[i++];
          if (i == len) object[next] = value;
          else {
            var hasNext = next in object;
            if (!hasNext || hasNext && typeof object[next] !== "object" || hasNext && object[next] === null) object[next] = {};
            object = object[next]
          }
        }
      }
    };
    util.getPath = function (object, keys, _default) {
      var i = 0;
      var len = keys.length;
      var hasNext = true;
      while (hasNext && i < len && typeof object === "object" &&
        object !== null) {
        var next = keys[i++];
        hasNext = next in object;
        if (hasNext) object = object[next]
      }
      return hasNext ? object : _default
    };
    util.deletePath = function (object, keys) {
      if (typeof object === "object" && object !== null) {
        var i = 0;
        var len = keys.length;
        while (i < len) {
          var next = keys[i++];
          if (i == len) delete object[next];
          else {
            if (!(next in object) || typeof object[next] !== "object" || object[next] === null) break;
            object = object[next]
          }
        }
      }
    };
    util.isEmpty = function (obj) {
      for (var prop in obj)
        if (obj.hasOwnProperty(prop)) return false;
      return true
    };
    util.format = function (format) {
      var re = /%./g;
      var match;
      var part;
      var argi = 0;
      var parts = [];
      var last = 0;
      while (match = re.exec(format)) {
        part = format.substring(last, re.lastIndex - 2);
        if (part.length > 0) parts.push(part);
        last = re.lastIndex;
        var code = match[0][1];
        switch (code) {
          case "s":
          case "o":
            if (argi < arguments.length) parts.push(arguments[argi++ + 1]);
            else parts.push("<?>");
            break;
          case "%":
            parts.push("%");
            break;
          default:
            parts.push("<%" + code + "?>")
        }
      }
      parts.push(format.substring(last));
      return parts.join("")
    };
    util.formatNumber =
      function (number, decimals, dec_point, thousands_sep) {
        var n = number,
          c = isNaN(decimals = Math.abs(decimals)) ? 2 : decimals;
        var d = dec_point === undefined ? "," : dec_point;
        var t = thousands_sep === undefined ? "." : thousands_sep,
          s = n < 0 ? "-" : "";
        var i = parseInt(n = Math.abs(+n || 0).toFixed(c), 10) + "";
        var j = i.length > 3 ? i.length % 3 : 0;
        return s + (j ? i.substr(0, j) + t : "") + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : "")
      };
    util.formatSize = function (size) {
      if (size >= 1073741824) size = util.formatNumber(size / 1073741824,
        2, ".", "") + " GiB";
      else if (size >= 1048576) size = util.formatNumber(size / 1048576, 2, ".", "") + " MiB";
      else if (size >= 1024) size = util.formatNumber(size / 1024, 0) + " KiB";
      else size = util.formatNumber(size, 0) + " bytes";
      return size
    }
  })();
  (function () {
    function getSqDist(p1, p2) {
      var dx = p1.x - p2.x,
        dy = p1.y - p2.y;
      return dx * dx + dy * dy
    }

    function getSqSegDist(p, p1, p2) {
      var x = p1.x,
        y = p1.y,
        dx = p2.x - x,
        dy = p2.y - y;
      if (dx !== 0 || dy !== 0) {
        var t = ((p.x - x) * dx + (p.y - y) * dy) / (dx * dx + dy * dy);
        if (t > 1) {
          x = p2.x;
          y = p2.y
        } else if (t > 0) {
          x += dx * t;
          y += dy * t
        }
      }
      dx = p.x - x;
      dy = p.y - y;
      return dx * dx + dy * dy
    }

    function simplifyRadialDist(points, sqTolerance) {
      var prevPoint = points[0],
        newPoints = [prevPoint],
        point;
      for (var i = 1, len = points.length; i < len; i++) {
        point = points[i];
        if (getSqDist(point, prevPoint) > sqTolerance) {
          newPoints.push(point);
          prevPoint = point
        }
      }
      if (prevPoint !== point) newPoints.push(point);
      return newPoints
    }

    function simplifyDouglasPeucker(points, sqTolerance) {
      var len = points.length,
        MarkerArray = typeof Uint8Array !== "undefined" ? Uint8Array : Array,
        markers = new MarkerArray(len),
        first = 0,
        last = len - 1,
        stack = [],
        newPoints = [],
        i, maxSqDist, sqDist, index;
      markers[first] = markers[last] = 1;
      while (last) {
        maxSqDist = 0;
        for (i = first + 1; i < last; i++) {
          sqDist = getSqSegDist(points[i], points[first], points[last]);
          if (sqDist > maxSqDist) {
            index = i;
            maxSqDist = sqDist
          }
        }
        if (maxSqDist >
          sqTolerance) {
          markers[index] = 1;
          stack.push(first, index, index, last)
        }
        last = stack.pop();
        first = stack.pop()
      }
      for (i = 0; i < len; i++)
        if (markers[i]) newPoints.push(points[i]);
      return newPoints
    }

    function simplify(points, tolerance, highestQuality) {
      if (points.length <= 1) return points;
      var sqTolerance = tolerance !== undefined ? tolerance * tolerance : 1;
      points = highestQuality ? points : simplifyRadialDist(points, sqTolerance);
      points = simplifyDouglasPeucker(points, sqTolerance);
      return points
    }
    window.simplify = simplify
  })();
  ! function (e, t) {
    var n, a, o, i = "._tap",
      c = "._tapActive",
      r = "tap",
      u = "clientX clientY screenX screenY pageX pageY".split(" "),
      s = {
        count: 0,
        event: 0
      },
      g = function (e, n) {
        var a = n.originalEvent,
          o = t.Event(a);
        o.type = e;
        for (var i = 0, c = u.length; c > i; i++) o[u[i]] = n[u[i]];
        return o
      },
      p = function (e) {
        if (e.isTrigger) return !1;
        var n = s.event,
          a = Math.abs(e.pageX - n.pageX),
          o = Math.abs(e.pageY - n.pageY),
          i = Math.max(a, o);
        return e.timeStamp - n.timeStamp < t.tap.TIME_DELTA && i < t.tap.POSITION_DELTA && (!n.touches || 1 === s.count) && T.isTracking
      },
      l = function (e) {
        if (!o) return !1;
        var n = Math.abs(e.pageX - o.pageX),
          a = Math.abs(e.pageY - o.pageY),
          i = Math.max(n, a);
        return Math.abs(e.timeStamp - o.timeStamp) < 750 && i < t.tap.POSITION_DELTA
      },
      h = function (e) {
        if (0 === e.type.indexOf("touch")) {
          e.touches = e.originalEvent.changedTouches;
          for (var t = e.touches[0], n = 0, a = u.length; a > n; n++) e[u[n]] = t[u[n]]
        }
        e.timeStamp = Date.now ? Date.now() : +new Date
      },
      T = {
        isEnabled: !1,
        isTracking: !1,
        enable: function () {
          T.isEnabled || $.event.special.tap || (T.isEnabled = !0, n = t(e.body).on("touchstart" + i, T.onStart).on("mousedown" + i, T.onStart).on("click" +
            i, T.onClick))
        },
        disable: function () {
          T.isEnabled && (T.isEnabled = !1, n.off(i))
        },
        onStart: function (e) {
          e.isTrigger || (h(e), (!t.tap.LEFT_BUTTON_ONLY || e.touches || 1 === e.which) && (e.touches && (s.count = e.touches.length), T.isTracking && T.onCancel(e), (e.touches || !l(e)) && (T.isTracking = !0, s.event = e, e.touches ? (o = e, n.on("touchend" + i + c, T.onEnd).on("touchcancel" + i + c, T.onCancel)) : n.on("mouseup" + i + c, T.onEnd))))
        },
        onEnd: function (e) {
          var n;
          e.isTrigger || (h(e), p(e) && (n = g(r, e), a = n, t(s.event.target).trigger(n)), T.onCancel(e))
        },
        onCancel: function (e) {
          e &&
            "touchcancel" === e.type && e.preventDefault(), T.isTracking = !1, n.off(c)
        },
        onClick: function (e) {
          return !e.isTrigger && a && a.isDefaultPrevented() && a.target === e.target && a.pageX === e.pageX && a.pageY === e.pageY && e.timeStamp - a.timeStamp < 750 ? (a = null, !1) : void 0
        }
      };
    t(e).ready(T.enable), t.tap = {
      POSITION_DELTA: 10,
      TIME_DELTA: 400,
      LEFT_BUTTON_ONLY: !0
    }
  }(document, jQuery);
  ! function (a, b) {
    "object" == typeof exports && "undefined" != typeof module ? module.exports = b() : "function" == typeof define && define.amd ? define(b) : a.moment = b()
  }(this, function () {
    function a() {
      return Dc.apply(null, arguments)
    }

    function b(a) {
      Dc = a
    }

    function c(a) {
      return "[object Array]" === Object.prototype.toString.call(a)
    }

    function d(a) {
      return a instanceof Date || "[object Date]" === Object.prototype.toString.call(a)
    }

    function e(a, b) {
      var c, d = [];
      for (c = 0; c < a.length; ++c) d.push(b(a[c], c));
      return d
    }

    function f(a, b) {
      return Object.prototype.hasOwnProperty.call(a,
        b)
    }

    function g(a, b) {
      for (var c in b) f(b, c) && (a[c] = b[c]);
      return f(b, "toString") && (a.toString = b.toString), f(b, "valueOf") && (a.valueOf = b.valueOf), a
    }

    function h(a, b, c, d) {
      return za(a, b, c, d, !0).utc()
    }

    function i() {
      return {
        empty: !1,
        unusedTokens: [],
        unusedInput: [],
        overflow: -2,
        charsLeftOver: 0,
        nullInput: !1,
        invalidMonth: null,
        invalidFormat: !1,
        userInvalidated: !1,
        iso: !1
      }
    }

    function j(a) {
      return null == a._pf && (a._pf = i()), a._pf
    }

    function k(a) {
      if (null == a._isValid) {
        var b = j(a);
        a._isValid = !isNaN(a._d.getTime()) && b.overflow < 0 && !b.empty &&
          !b.invalidMonth && !b.nullInput && !b.invalidFormat && !b.userInvalidated, a._strict && (a._isValid = a._isValid && 0 === b.charsLeftOver && 0 === b.unusedTokens.length && void 0 === b.bigHour)
      }
      return a._isValid
    }

    function l(a) {
      var b = h(0 / 0);
      return null != a ? g(j(b), a) : j(b).userInvalidated = !0, b
    }

    function m(a, b) {
      var c, d, e;
      if ("undefined" != typeof b._isAMomentObject && (a._isAMomentObject = b._isAMomentObject), "undefined" != typeof b._i && (a._i = b._i), "undefined" != typeof b._f && (a._f = b._f), "undefined" != typeof b._l && (a._l = b._l), "undefined" !=
        typeof b._strict && (a._strict = b._strict), "undefined" != typeof b._tzm && (a._tzm = b._tzm), "undefined" != typeof b._isUTC && (a._isUTC = b._isUTC), "undefined" != typeof b._offset && (a._offset = b._offset), "undefined" != typeof b._pf && (a._pf = j(b)), "undefined" != typeof b._locale && (a._locale = b._locale), Fc.length > 0)
        for (c in Fc) d = Fc[c], e = b[d], "undefined" != typeof e && (a[d] = e);
      return a
    }

    function n(b) {
      m(this, b), this._d = new Date(+b._d), Gc === !1 && (Gc = !0, a.updateOffset(this), Gc = !1)
    }

    function o(a) {
      return a instanceof n || null != a && null !=
        a._isAMomentObject
    }

    function p(a) {
      var b = +a,
        c = 0;
      return 0 !== b && isFinite(b) && (c = b >= 0 ? Math.floor(b) : Math.ceil(b)), c
    }

    function q(a, b, c) {
      var d, e = Math.min(a.length, b.length),
        f = Math.abs(a.length - b.length),
        g = 0;
      for (d = 0; e > d; d++)(c && a[d] !== b[d] || !c && p(a[d]) !== p(b[d])) && g++;
      return g + f
    }

    function r() {}

    function s(a) {
      return a ? a.toLowerCase().replace("_", "-") : a
    }

    function t(a) {
      for (var b, c, d, e, f = 0; f < a.length;) {
        for (e = s(a[f]).split("-"), b = e.length, c = s(a[f + 1]), c = c ? c.split("-") : null; b > 0;) {
          if (d = u(e.slice(0, b).join("-"))) return d;
          if (c && c.length >= b && q(e, c, !0) >= b - 1) break;
          b--
        }
        f++
      }
      return null
    }

    function u(a) {
      var b = null;
      if (!Hc[a] && "undefined" != typeof module && module && module.exports) try {
        b = Ec._abbr, require("./locale/" + a), v(b)
      } catch (c) {}
      return Hc[a]
    }

    function v(a, b) {
      var c;
      return a && (c = "undefined" == typeof b ? x(a) : w(a, b), c && (Ec = c)), Ec._abbr
    }

    function w(a, b) {
      return null !== b ? (b.abbr = a, Hc[a] || (Hc[a] = new r), Hc[a].set(b), v(a), Hc[a]) : (delete Hc[a], null)
    }

    function x(a) {
      var b;
      if (a && a._locale && a._locale._abbr && (a = a._locale._abbr), !a) return Ec;
      if (!c(a)) {
        if (b =
          u(a)) return b;
        a = [a]
      }
      return t(a)
    }

    function y(a, b) {
      var c = a.toLowerCase();
      Ic[c] = Ic[c + "s"] = Ic[b] = a
    }

    function z(a) {
      return "string" == typeof a ? Ic[a] || Ic[a.toLowerCase()] : void 0
    }

    function A(a) {
      var b, c, d = {};
      for (c in a) f(a, c) && (b = z(c), b && (d[b] = a[c]));
      return d
    }

    function B(b, c) {
      return function (d) {
        return null != d ? (D(this, b, d), a.updateOffset(this, c), this) : C(this, b)
      }
    }

    function C(a, b) {
      return a._d["get" + (a._isUTC ? "UTC" : "") + b]()
    }

    function D(a, b, c) {
      return a._d["set" + (a._isUTC ? "UTC" : "") + b](c)
    }

    function E(a, b) {
      var c;
      if ("object" ==
        typeof a)
        for (c in a) this.set(c, a[c]);
      else if (a = z(a), "function" == typeof this[a]) return this[a](b);
      return this
    }

    function F(a, b, c) {
      for (var d = "" + Math.abs(a), e = a >= 0; d.length < b;) d = "0" + d;
      return (e ? c ? "+" : "" : "-") + d
    }

    function G(a, b, c, d) {
      var e = d;
      "string" == typeof d && (e = function () {
        return this[d]()
      }), a && (Mc[a] = e), b && (Mc[b[0]] = function () {
        return F(e.apply(this, arguments), b[1], b[2])
      }), c && (Mc[c] = function () {
        return this.localeData().ordinal(e.apply(this, arguments), a)
      })
    }

    function H(a) {
      return a.match(/\[[\s\S]/) ? a.replace(/^\[|\]$/g,
        "") : a.replace(/\\/g, "")
    }

    function I(a) {
      var b, c, d = a.match(Jc);
      for (b = 0, c = d.length; c > b; b++) Mc[d[b]] ? d[b] = Mc[d[b]] : d[b] = H(d[b]);
      return function (e) {
        var f = "";
        for (b = 0; c > b; b++) f += d[b] instanceof Function ? d[b].call(e, a) : d[b];
        return f
      }
    }

    function J(a, b) {
      return a.isValid() ? (b = K(b, a.localeData()), Lc[b] || (Lc[b] = I(b)), Lc[b](a)) : a.localeData().invalidDate()
    }

    function K(a, b) {
      function c(a) {
        return b.longDateFormat(a) || a
      }
      var d = 5;
      for (Kc.lastIndex = 0; d >= 0 && Kc.test(a);) a = a.replace(Kc, c), Kc.lastIndex = 0, d -= 1;
      return a
    }

    function L(a,
      b, c) {
      _c[a] = "function" == typeof b ? b : function (a) {
        return a && c ? c : b
      }
    }

    function M(a, b) {
      return f(_c, a) ? _c[a](b._strict, b._locale) : new RegExp(N(a))
    }

    function N(a) {
      return a.replace("\\", "").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function (a, b, c, d, e) {
        return b || c || d || e
      }).replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&")
    }

    function O(a, b) {
      var c, d = b;
      for ("string" == typeof a && (a = [a]), "number" == typeof b && (d = function (a, c) {
          c[b] = p(a)
        }), c = 0; c < a.length; c++) ad[a[c]] = d
    }

    function P(a, b) {
      O(a, function (a, c, d, e) {
        d._w = d._w || {}, b(a, d._w,
          d, e)
      })
    }

    function Q(a, b, c) {
      null != b && f(ad, a) && ad[a](b, c._a, c, a)
    }

    function R(a, b) {
      return (new Date(Date.UTC(a, b + 1, 0))).getUTCDate()
    }

    function S(a) {
      return this._months[a.month()]
    }

    function T(a) {
      return this._monthsShort[a.month()]
    }

    function U(a, b, c) {
      var d, e, f;
      for (this._monthsParse || (this._monthsParse = [], this._longMonthsParse = [], this._shortMonthsParse = []), d = 0; 12 > d; d++) {
        if (e = h([2E3, d]), c && !this._longMonthsParse[d] && (this._longMonthsParse[d] = new RegExp("^" + this.months(e, "").replace(".", "") + "$", "i"), this._shortMonthsParse[d] =
            new RegExp("^" + this.monthsShort(e, "").replace(".", "") + "$", "i")), c || this._monthsParse[d] || (f = "^" + this.months(e, "") + "|^" + this.monthsShort(e, ""), this._monthsParse[d] = new RegExp(f.replace(".", ""), "i")), c && "MMMM" === b && this._longMonthsParse[d].test(a)) return d;
        if (c && "MMM" === b && this._shortMonthsParse[d].test(a)) return d;
        if (!c && this._monthsParse[d].test(a)) return d
      }
    }

    function V(a, b) {
      var c;
      return "string" == typeof b && (b = a.localeData().monthsParse(b), "number" != typeof b) ? a : (c = Math.min(a.date(), R(a.year(), b)), a._d["set" +
        (a._isUTC ? "UTC" : "") + "Month"](b, c), a)
    }

    function W(b) {
      return null != b ? (V(this, b), a.updateOffset(this, !0), this) : C(this, "Month")
    }

    function X() {
      return R(this.year(), this.month())
    }

    function Y(a) {
      var b, c = a._a;
      return c && -2 === j(a).overflow && (b = c[cd] < 0 || c[cd] > 11 ? cd : c[dd] < 1 || c[dd] > R(c[bd], c[cd]) ? dd : c[ed] < 0 || c[ed] > 24 || 24 === c[ed] && (0 !== c[fd] || 0 !== c[gd] || 0 !== c[hd]) ? ed : c[fd] < 0 || c[fd] > 59 ? fd : c[gd] < 0 || c[gd] > 59 ? gd : c[hd] < 0 || c[hd] > 999 ? hd : -1, j(a)._overflowDayOfYear && (bd > b || b > dd) && (b = dd), j(a).overflow = b), a
    }

    function Z(b) {
      a.suppressDeprecationWarnings ===
        !1 && "undefined" != typeof console && console.warn && console.warn("Deprecation warning: " + b)
    }

    function $(a, b) {
      var c = !0,
        d = a + "\n" + (new Error).stack;
      return g(function () {
        return c && (Z(d), c = !1), b.apply(this, arguments)
      }, b)
    }

    function _(a, b) {
      kd[a] || (Z(b), kd[a] = !0)
    }

    function aa(a) {
      var b, c, d = a._i,
        e = ld.exec(d);
      if (e) {
        for (j(a).iso = !0, b = 0, c = md.length; c > b; b++)
          if (md[b][1].exec(d)) {
            a._f = md[b][0] + (e[6] || " ");
            break
          } for (b = 0, c = nd.length; c > b; b++)
          if (nd[b][1].exec(d)) {
            a._f += nd[b][0];
            break
          } d.match(Yc) && (a._f += "Z"), ta(a)
      } else a._isValid = !1
    }

    function ba(b) {
      var c = od.exec(b._i);
      return null !== c ? void(b._d = new Date(+c[1])) : (aa(b), void(b._isValid === !1 && (delete b._isValid, a.createFromInputFallback(b))))
    }

    function ca(a, b, c, d, e, f, g) {
      var h = new Date(a, b, c, d, e, f, g);
      return 1970 > a && h.setFullYear(a), h
    }

    function da(a) {
      var b = new Date(Date.UTC.apply(null, arguments));
      return 1970 > a && b.setUTCFullYear(a), b
    }

    function ea(a) {
      return fa(a) ? 366 : 365
    }

    function fa(a) {
      return a % 4 === 0 && a % 100 !== 0 || a % 400 === 0
    }

    function ga() {
      return fa(this.year())
    }

    function ha(a, b, c) {
      var d,
        e = c - b,
        f = c - a.day();
      return f > e && (f -= 7), e - 7 > f && (f += 7), d = Aa(a).add(f, "d"), {
        week: Math.ceil(d.dayOfYear() / 7),
        year: d.year()
      }
    }

    function ia(a) {
      return ha(a, this._week.dow, this._week.doy).week
    }

    function ja() {
      return this._week.dow
    }

    function ka() {
      return this._week.doy
    }

    function la(a) {
      var b = this.localeData().week(this);
      return null == a ? b : this.add(7 * (a - b), "d")
    }

    function ma(a) {
      var b = ha(this, 1, 4).week;
      return null == a ? b : this.add(7 * (a - b), "d")
    }

    function na(a, b, c, d, e) {
      var f, g, h = da(a, 0, 1).getUTCDay();
      return h = 0 === h ? 7 : h, c = null !=
        c ? c : e, f = e - h + (h > d ? 7 : 0) - (e > h ? 7 : 0), g = 7 * (b - 1) + (c - e) + f + 1, {
          year: g > 0 ? a : a - 1,
          dayOfYear: g > 0 ? g : ea(a - 1) + g
        }
    }

    function oa(a) {
      var b = Math.round((this.clone().startOf("day") - this.clone().startOf("year")) / 864E5) + 1;
      return null == a ? b : this.add(a - b, "d")
    }

    function pa(a, b, c) {
      return null != a ? a : null != b ? b : c
    }

    function qa(a) {
      var b = new Date;
      return a._useUTC ? [b.getUTCFullYear(), b.getUTCMonth(), b.getUTCDate()] : [b.getFullYear(), b.getMonth(), b.getDate()]
    }

    function ra(a) {
      var b, c, d, e, f = [];
      if (!a._d) {
        for (d = qa(a), a._w && null == a._a[dd] && null ==
          a._a[cd] && sa(a), a._dayOfYear && (e = pa(a._a[bd], d[bd]), a._dayOfYear > ea(e) && (j(a)._overflowDayOfYear = !0), c = da(e, 0, a._dayOfYear), a._a[cd] = c.getUTCMonth(), a._a[dd] = c.getUTCDate()), b = 0; 3 > b && null == a._a[b]; ++b) a._a[b] = f[b] = d[b];
        for (; 7 > b; b++) a._a[b] = f[b] = null == a._a[b] ? 2 === b ? 1 : 0 : a._a[b];
        24 === a._a[ed] && 0 === a._a[fd] && 0 === a._a[gd] && 0 === a._a[hd] && (a._nextDay = !0, a._a[ed] = 0), a._d = (a._useUTC ? da : ca).apply(null, f), null != a._tzm && a._d.setUTCMinutes(a._d.getUTCMinutes() - a._tzm), a._nextDay && (a._a[ed] = 24)
      }
    }

    function sa(a) {
      var b,
        c, d, e, f, g, h;
      b = a._w, null != b.GG || null != b.W || null != b.E ? (f = 1, g = 4, c = pa(b.GG, a._a[bd], ha(Aa(), 1, 4).year), d = pa(b.W, 1), e = pa(b.E, 1)) : (f = a._locale._week.dow, g = a._locale._week.doy, c = pa(b.gg, a._a[bd], ha(Aa(), f, g).year), d = pa(b.w, 1), null != b.d ? (e = b.d, f > e && ++d) : e = null != b.e ? b.e + f : f), h = na(c, d, e, g, f), a._a[bd] = h.year, a._dayOfYear = h.dayOfYear
    }

    function ta(b) {
      if (b._f === a.ISO_8601) return void aa(b);
      b._a = [], j(b).empty = !0;
      var c, d, e, f, g, h = "" + b._i,
        i = h.length,
        k = 0;
      for (e = K(b._f, b._locale).match(Jc) || [], c = 0; c < e.length; c++) f = e[c],
        d = (h.match(M(f, b)) || [])[0], d && (g = h.substr(0, h.indexOf(d)), g.length > 0 && j(b).unusedInput.push(g), h = h.slice(h.indexOf(d) + d.length), k += d.length), Mc[f] ? (d ? j(b).empty = !1 : j(b).unusedTokens.push(f), Q(f, d, b)) : b._strict && !d && j(b).unusedTokens.push(f);
      j(b).charsLeftOver = i - k, h.length > 0 && j(b).unusedInput.push(h), j(b).bigHour === !0 && b._a[ed] <= 12 && b._a[ed] > 0 && (j(b).bigHour = void 0), b._a[ed] = ua(b._locale, b._a[ed], b._meridiem), ra(b), Y(b)
    }

    function ua(a, b, c) {
      var d;
      return null == c ? b : null != a.meridiemHour ? a.meridiemHour(b,
        c) : null != a.isPM ? (d = a.isPM(c), d && 12 > b && (b += 12), d || 12 !== b || (b = 0), b) : b
    }

    function va(a) {
      var b, c, d, e, f;
      if (0 === a._f.length) return j(a).invalidFormat = !0, void(a._d = new Date(0 / 0));
      for (e = 0; e < a._f.length; e++) f = 0, b = m({}, a), null != a._useUTC && (b._useUTC = a._useUTC), b._f = a._f[e], ta(b), k(b) && (f += j(b).charsLeftOver, f += 10 * j(b).unusedTokens.length, j(b).score = f, (null == d || d > f) && (d = f, c = b));
      g(a, c || b)
    }

    function wa(a) {
      if (!a._d) {
        var b = A(a._i);
        a._a = [b.year, b.month, b.day || b.date, b.hour, b.minute, b.second, b.millisecond], ra(a)
      }
    }

    function xa(a) {
      var b,
        e = a._i,
        f = a._f;
      return a._locale = a._locale || x(a._l), null === e || void 0 === f && "" === e ? l({
        nullInput: !0
      }) : ("string" == typeof e && (a._i = e = a._locale.preparse(e)), o(e) ? new n(Y(e)) : (c(f) ? va(a) : f ? ta(a) : d(e) ? a._d = e : ya(a), b = new n(Y(a)), b._nextDay && (b.add(1, "d"), b._nextDay = void 0), b))
    }

    function ya(b) {
      var f = b._i;
      void 0 === f ? b._d = new Date : d(f) ? b._d = new Date(+f) : "string" == typeof f ? ba(b) : c(f) ? (b._a = e(f.slice(0), function (a) {
        return parseInt(a, 10)
      }), ra(b)) : "object" == typeof f ? wa(b) : "number" == typeof f ? b._d = new Date(f) : a.createFromInputFallback(b)
    }

    function za(a, b, c, d, e) {
      var f = {};
      return "boolean" == typeof c && (d = c, c = void 0), f._isAMomentObject = !0, f._useUTC = f._isUTC = e, f._l = c, f._i = a, f._f = b, f._strict = d, xa(f)
    }

    function Aa(a, b, c, d) {
      return za(a, b, c, d, !1)
    }

    function Ba(a, b) {
      var d, e;
      if (1 === b.length && c(b[0]) && (b = b[0]), !b.length) return Aa();
      for (d = b[0], e = 1; e < b.length; ++e) b[e][a](d) && (d = b[e]);
      return d
    }

    function Ca() {
      var a = [].slice.call(arguments, 0);
      return Ba("isBefore", a)
    }

    function Da() {
      var a = [].slice.call(arguments, 0);
      return Ba("isAfter", a)
    }

    function Ea(a) {
      var b =
        A(a),
        c = b.year || 0,
        d = b.quarter || 0,
        e = b.month || 0,
        f = b.week || 0,
        g = b.day || 0,
        h = b.hour || 0,
        i = b.minute || 0,
        j = b.second || 0,
        k = b.millisecond || 0;
      this._milliseconds = +k + 1E3 * j + 6E4 * i + 36E5 * h, this._days = +g + 7 * f, this._months = +e + 3 * d + 12 * c, this._data = {}, this._locale = x(), this._bubble()
    }

    function Fa(a) {
      return a instanceof Ea
    }

    function Ga(a, b) {
      G(a, 0, 0, function () {
        var a = this.utcOffset(),
          c = "+";
        return 0 > a && (a = -a, c = "-"), c + F(~~(a / 60), 2) + b + F(~~a % 60, 2)
      })
    }

    function Ha(a) {
      var b = (a || "").match(Yc) || [],
        c = b[b.length - 1] || [],
        d = (c + "").match(td) || ["-",
          0, 0
        ],
        e = +(60 * d[1]) + p(d[2]);
      return "+" === d[0] ? e : -e
    }

    function Ia(b, c) {
      var e, f;
      return c._isUTC ? (e = c.clone(), f = (o(b) || d(b) ? +b : +Aa(b)) - +e, e._d.setTime(+e._d + f), a.updateOffset(e, !1), e) : Aa(b).local();
      return c._isUTC ? Aa(b).zone(c._offset || 0) : Aa(b).local()
    }

    function Ja(a) {
      return 15 * -Math.round(a._d.getTimezoneOffset() / 15)
    }

    function Ka(b, c) {
      var d, e = this._offset || 0;
      return null != b ? ("string" == typeof b && (b = Ha(b)), Math.abs(b) < 16 && (b = 60 * b), !this._isUTC && c && (d = Ja(this)), this._offset = b, this._isUTC = !0, null != d && this.add(d,
        "m"), e !== b && (!c || this._changeInProgress ? $a(this, Va(b - e, "m"), 1, !1) : this._changeInProgress || (this._changeInProgress = !0, a.updateOffset(this, !0), this._changeInProgress = null)), this) : this._isUTC ? e : Ja(this)
    }

    function La(a, b) {
      return null != a ? ("string" != typeof a && (a = -a), this.utcOffset(a, b), this) : -this.utcOffset()
    }

    function Ma(a) {
      return this.utcOffset(0, a)
    }

    function Na(a) {
      return this._isUTC && (this.utcOffset(0, a), this._isUTC = !1, a && this.subtract(Ja(this), "m")), this
    }

    function Oa() {
      return this._tzm ? this.utcOffset(this._tzm) :
        "string" == typeof this._i && this.utcOffset(Ha(this._i)), this
    }

    function Pa(a) {
      return a = a ? Aa(a).utcOffset() : 0, (this.utcOffset() - a) % 60 === 0
    }

    function Qa() {
      return this.utcOffset() > this.clone().month(0).utcOffset() || this.utcOffset() > this.clone().month(5).utcOffset()
    }

    function Ra() {
      if (this._a) {
        var a = this._isUTC ? h(this._a) : Aa(this._a);
        return this.isValid() && q(this._a, a.toArray()) > 0
      }
      return !1
    }

    function Sa() {
      return !this._isUTC
    }

    function Ta() {
      return this._isUTC
    }

    function Ua() {
      return this._isUTC && 0 === this._offset
    }

    function Va(a,
      b) {
      var c, d, e, g = a,
        h = null;
      return Fa(a) ? g = {
          ms: a._milliseconds,
          d: a._days,
          M: a._months
        } : "number" == typeof a ? (g = {}, b ? g[b] = a : g.milliseconds = a) : (h = ud.exec(a)) ? (c = "-" === h[1] ? -1 : 1, g = {
          y: 0,
          d: p(h[dd]) * c,
          h: p(h[ed]) * c,
          m: p(h[fd]) * c,
          s: p(h[gd]) * c,
          ms: p(h[hd]) * c
        }) : (h = vd.exec(a)) ? (c = "-" === h[1] ? -1 : 1, g = {
          y: Wa(h[2], c),
          M: Wa(h[3], c),
          d: Wa(h[4], c),
          h: Wa(h[5], c),
          m: Wa(h[6], c),
          s: Wa(h[7], c),
          w: Wa(h[8], c)
        }) : null == g ? g = {} : "object" == typeof g && ("from" in g || "to" in g) && (e = Ya(Aa(g.from), Aa(g.to)), g = {}, g.ms = e.milliseconds, g.M = e.months), d = new Ea(g),
        Fa(a) && f(a, "_locale") && (d._locale = a._locale), d
    }

    function Wa(a, b) {
      var c = a && parseFloat(a.replace(",", "."));
      return (isNaN(c) ? 0 : c) * b
    }

    function Xa(a, b) {
      var c = {
        milliseconds: 0,
        months: 0
      };
      return c.months = b.month() - a.month() + 12 * (b.year() - a.year()), a.clone().add(c.months, "M").isAfter(b) && --c.months, c.milliseconds = +b - +a.clone().add(c.months, "M"), c
    }

    function Ya(a, b) {
      var c;
      return b = Ia(b, a), a.isBefore(b) ? c = Xa(a, b) : (c = Xa(b, a), c.milliseconds = -c.milliseconds, c.months = -c.months), c
    }

    function Za(a, b) {
      return function (c, d) {
        var e,
          f;
        return null === d || isNaN(+d) || (_(b, "moment()." + b + "(period, number) is deprecated. Please use moment()." + b + "(number, period)."), f = c, c = d, d = f), c = "string" == typeof c ? +c : c, e = Va(c, d), $a(this, e, a), this
      }
    }

    function $a(b, c, d, e) {
      var f = c._milliseconds,
        g = c._days,
        h = c._months;
      e = null == e ? !0 : e, f && b._d.setTime(+b._d + f * d), g && D(b, "Date", C(b, "Date") + g * d), h && V(b, C(b, "Month") + h * d), e && a.updateOffset(b, g || h)
    }

    function _a(a) {
      var b = a || Aa(),
        c = Ia(b, this).startOf("day"),
        d = this.diff(c, "days", !0),
        e = -6 > d ? "sameElse" : -1 > d ? "lastWeek" : 0 >
        d ? "lastDay" : 1 > d ? "sameDay" : 2 > d ? "nextDay" : 7 > d ? "nextWeek" : "sameElse";
      return this.format(this.localeData().calendar(e, this, Aa(b)))
    }

    function ab() {
      return new n(this)
    }

    function bb(a, b) {
      var c;
      return b = z("undefined" != typeof b ? b : "millisecond"), "millisecond" === b ? (a = o(a) ? a : Aa(a), +this > +a) : (c = o(a) ? +a : +Aa(a), c < +this.clone().startOf(b))
    }

    function cb(a, b) {
      var c;
      return b = z("undefined" != typeof b ? b : "millisecond"), "millisecond" === b ? (a = o(a) ? a : Aa(a), +a > +this) : (c = o(a) ? +a : +Aa(a), +this.clone().endOf(b) < c)
    }

    function db(a, b, c) {
      return this.isAfter(a,
        c) && this.isBefore(b, c)
    }

    function eb(a, b) {
      var c;
      return b = z(b || "millisecond"), "millisecond" === b ? (a = o(a) ? a : Aa(a), +this === +a) : (c = +Aa(a), +this.clone().startOf(b) <= c && c <= +this.clone().endOf(b))
    }

    function fb(a) {
      return 0 > a ? Math.ceil(a) : Math.floor(a)
    }

    function gb(a, b, c) {
      var d, e, f = Ia(a, this),
        g = 6E4 * (f.utcOffset() - this.utcOffset());
      return b = z(b), "year" === b || "month" === b || "quarter" === b ? (e = hb(this, f), "quarter" === b ? e /= 3 : "year" === b && (e /= 12)) : (d = this - f, e = "second" === b ? d / 1E3 : "minute" === b ? d / 6E4 : "hour" === b ? d / 36E5 : "day" ===
        b ? (d - g) / 864E5 : "week" === b ? (d - g) / 6048E5 : d), c ? e : fb(e)
    }

    function hb(a, b) {
      var c, d, e = 12 * (b.year() - a.year()) + (b.month() - a.month()),
        f = a.clone().add(e, "months");
      return 0 > b - f ? (c = a.clone().add(e - 1, "months"), d = (b - f) / (f - c)) : (c = a.clone().add(e + 1, "months"), d = (b - f) / (c - f)), -(e + d)
    }

    function ib() {
      return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")
    }

    function jb() {
      var a = this.clone().utc();
      return 0 < a.year() && a.year() <= 9999 ? "function" == typeof Date.prototype.toISOString ? this.toDate().toISOString() : J(a,
        "YYYY-MM-DD[T]HH:mm:ss.SSS[Z]") : J(a, "YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")
    }

    function kb(b) {
      var c = J(this, b || a.defaultFormat);
      return this.localeData().postformat(c)
    }

    function lb(a, b) {
      return this.isValid() ? Va({
        to: this,
        from: a
      }).locale(this.locale()).humanize(!b) : this.localeData().invalidDate()
    }

    function mb(a) {
      return this.from(Aa(), a)
    }

    function nb(a, b) {
      return this.isValid() ? Va({
        from: this,
        to: a
      }).locale(this.locale()).humanize(!b) : this.localeData().invalidDate()
    }

    function ob(a) {
      return this.to(Aa(), a)
    }

    function pb(a) {
      var b;
      return void 0 === a ? this._locale._abbr : (b = x(a), null != b && (this._locale = b), this)
    }

    function qb() {
      return this._locale
    }

    function rb(a) {
      switch (a = z(a)) {
        case "year":
          this.month(0);
        case "quarter":
        case "month":
          this.date(1);
        case "week":
        case "isoWeek":
        case "day":
          this.hours(0);
        case "hour":
          this.minutes(0);
        case "minute":
          this.seconds(0);
        case "second":
          this.milliseconds(0)
      }
      return "week" === a && this.weekday(0), "isoWeek" === a && this.isoWeekday(1), "quarter" === a && this.month(3 * Math.floor(this.month() / 3)), this
    }

    function sb(a) {
      return a =
        z(a), void 0 === a || "millisecond" === a ? this : this.startOf(a).add(1, "isoWeek" === a ? "week" : a).subtract(1, "ms")
    }

    function tb() {
      return +this._d - 6E4 * (this._offset || 0)
    }

    function ub() {
      return Math.floor(+this / 1E3)
    }

    function vb() {
      return this._offset ? new Date(+this) : this._d
    }

    function wb() {
      var a = this;
      return [a.year(), a.month(), a.date(), a.hour(), a.minute(), a.second(), a.millisecond()]
    }

    function xb() {
      return k(this)
    }

    function yb() {
      return g({}, j(this))
    }

    function zb() {
      return j(this).overflow
    }

    function Ab(a, b) {
      G(0, [a, a.length], 0,
        b)
    }

    function Bb(a, b, c) {
      return ha(Aa([a, 11, 31 + b - c]), b, c).week
    }

    function Cb(a) {
      var b = ha(this, this.localeData()._week.dow, this.localeData()._week.doy).year;
      return null == a ? b : this.add(a - b, "y")
    }

    function Db(a) {
      var b = ha(this, 1, 4).year;
      return null == a ? b : this.add(a - b, "y")
    }

    function Eb() {
      return Bb(this.year(), 1, 4)
    }

    function Fb() {
      var a = this.localeData()._week;
      return Bb(this.year(), a.dow, a.doy)
    }

    function Gb(a) {
      return null == a ? Math.ceil((this.month() + 1) / 3) : this.month(3 * (a - 1) + this.month() % 3)
    }

    function Hb(a, b) {
      if ("string" ==
        typeof a)
        if (isNaN(a)) {
          if (a = b.weekdaysParse(a), "number" != typeof a) return null
        } else a = parseInt(a, 10);
      return a
    }

    function Ib(a) {
      return this._weekdays[a.day()]
    }

    function Jb(a) {
      return this._weekdaysShort[a.day()]
    }

    function Kb(a) {
      return this._weekdaysMin[a.day()]
    }

    function Lb(a) {
      var b, c, d;
      for (this._weekdaysParse || (this._weekdaysParse = []), b = 0; 7 > b; b++)
        if (this._weekdaysParse[b] || (c = Aa([2E3, 1]).day(b), d = "^" + this.weekdays(c, "") + "|^" + this.weekdaysShort(c, "") + "|^" + this.weekdaysMin(c, ""), this._weekdaysParse[b] = new RegExp(d.replace(".",
            ""), "i")), this._weekdaysParse[b].test(a)) return b
    }

    function Mb(a) {
      var b = this._isUTC ? this._d.getUTCDay() : this._d.getDay();
      return null != a ? (a = Hb(a, this.localeData()), this.add(a - b, "d")) : b
    }

    function Nb(a) {
      var b = (this.day() + 7 - this.localeData()._week.dow) % 7;
      return null == a ? b : this.add(a - b, "d")
    }

    function Ob(a) {
      return null == a ? this.day() || 7 : this.day(this.day() % 7 ? a : a - 7)
    }

    function Pb(a, b) {
      G(a, 0, 0, function () {
        return this.localeData().meridiem(this.hours(), this.minutes(), b)
      })
    }

    function Qb(a, b) {
      return b._meridiemParse
    }

    function Rb(a) {
      return "p" === (a + "").toLowerCase().charAt(0)
    }

    function Sb(a, b, c) {
      return a > 11 ? c ? "pm" : "PM" : c ? "am" : "AM"
    }

    function Tb(a) {
      G(0, [a, 3], 0, "millisecond")
    }

    function Ub() {
      return this._isUTC ? "UTC" : ""
    }

    function Vb() {
      return this._isUTC ? "Coordinated Universal Time" : ""
    }

    function Wb(a) {
      return Aa(1E3 * a)
    }

    function Xb() {
      return Aa.apply(null, arguments).parseZone()
    }

    function Yb(a, b, c) {
      var d = this._calendar[a];
      return "function" == typeof d ? d.call(b, c) : d
    }

    function Zb(a) {
      var b = this._longDateFormat[a];
      return !b && this._longDateFormat[a.toUpperCase()] &&
        (b = this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g, function (a) {
          return a.slice(1)
        }), this._longDateFormat[a] = b), b
    }

    function $b() {
      return this._invalidDate
    }

    function _b(a) {
      return this._ordinal.replace("%d", a)
    }

    function ac(a) {
      return a
    }

    function bc(a, b, c, d) {
      var e = this._relativeTime[c];
      return "function" == typeof e ? e(a, b, c, d) : e.replace(/%d/i, a)
    }

    function cc(a, b) {
      var c = this._relativeTime[a > 0 ? "future" : "past"];
      return "function" == typeof c ? c(b) : c.replace(/%s/i, b)
    }

    function dc(a) {
      var b, c;
      for (c in a) b = a[c],
        "function" == typeof b ? this[c] = b : this["_" + c] = b;
      this._ordinalParseLenient = new RegExp(this._ordinalParse.source + "|" + /\d{1,2}/.source)
    }

    function ec(a, b, c, d) {
      var e = x(),
        f = h().set(d, b);
      return e[c](f, a)
    }

    function fc(a, b, c, d, e) {
      if ("number" == typeof a && (b = a, a = void 0), a = a || "", null != b) return ec(a, b, c, e);
      var f, g = [];
      for (f = 0; d > f; f++) g[f] = ec(a, f, c, e);
      return g
    }

    function gc(a, b) {
      return fc(a, b, "months", 12, "month")
    }

    function hc(a, b) {
      return fc(a, b, "monthsShort", 12, "month")
    }

    function ic(a, b) {
      return fc(a, b, "weekdays", 7, "day")
    }

    function jc(a, b) {
      return fc(a, b, "weekdaysShort", 7, "day")
    }

    function kc(a, b) {
      return fc(a, b, "weekdaysMin", 7, "day")
    }

    function lc() {
      var a = this._data;
      return this._milliseconds = Rd(this._milliseconds), this._days = Rd(this._days), this._months = Rd(this._months), a.milliseconds = Rd(a.milliseconds), a.seconds = Rd(a.seconds), a.minutes = Rd(a.minutes), a.hours = Rd(a.hours), a.months = Rd(a.months), a.years = Rd(a.years), this
    }

    function mc(a, b, c, d) {
      var e = Va(b, c);
      return a._milliseconds += d * e._milliseconds, a._days += d * e._days, a._months +=
        d * e._months, a._bubble()
    }

    function nc(a, b) {
      return mc(this, a, b, 1)
    }

    function oc(a, b) {
      return mc(this, a, b, -1)
    }

    function pc() {
      var a, b, c, d = this._milliseconds,
        e = this._days,
        f = this._months,
        g = this._data,
        h = 0;
      return g.milliseconds = d % 1E3, a = fb(d / 1E3), g.seconds = a % 60, b = fb(a / 60), g.minutes = b % 60, c = fb(b / 60), g.hours = c % 24, e += fb(c / 24), h = fb(qc(e)), e -= fb(rc(h)), f += fb(e / 30), e %= 30, h += fb(f / 12), f %= 12, g.days = e, g.months = f, g.years = h, this
    }

    function qc(a) {
      return 400 * a / 146097
    }

    function rc(a) {
      return 146097 * a / 400
    }

    function sc(a) {
      var b, c, d =
        this._milliseconds;
      if (a = z(a), "month" === a || "year" === a) return b = this._days + d / 864E5, c = this._months + 12 * qc(b), "month" === a ? c : c / 12;
      switch (b = this._days + Math.round(rc(this._months / 12)), a) {
        case "week":
          return b / 7 + d / 6048E5;
        case "day":
          return b + d / 864E5;
        case "hour":
          return 24 * b + d / 36E5;
        case "minute":
          return 1440 * b + d / 6E4;
        case "second":
          return 86400 * b + d / 1E3;
        case "millisecond":
          return Math.floor(864E5 * b) + d;
        default:
          throw new Error("Unknown unit " + a);
      }
    }

    function tc() {
      return this._milliseconds + 864E5 * this._days + this._months %
        12 * 2592E6 + 31536E6 * p(this._months / 12)
    }

    function uc(a) {
      return function () {
        return this.as(a)
      }
    }

    function vc(a) {
      return a = z(a), this[a + "s"]()
    }

    function wc(a) {
      return function () {
        return this._data[a]
      }
    }

    function xc() {
      return fb(this.days() / 7)
    }

    function yc(a, b, c, d, e) {
      return e.relativeTime(b || 1, !!c, a, d)
    }

    function zc(a, b, c) {
      var d = Va(a).abs(),
        e = fe(d.as("s")),
        f = fe(d.as("m")),
        g = fe(d.as("h")),
        h = fe(d.as("d")),
        i = fe(d.as("M")),
        j = fe(d.as("y")),
        k = e < ge.s && ["s", e] || 1 === f && ["m"] || f < ge.m && ["mm", f] || 1 === g && ["h"] || g < ge.h && ["hh", g] ||
        1 === h && ["d"] || h < ge.d && ["dd", h] || 1 === i && ["M"] || i < ge.M && ["MM", i] || 1 === j && ["y"] || ["yy", j];
      return k[2] = b, k[3] = +a > 0, k[4] = c, yc.apply(null, k)
    }

    function Ac(a, b) {
      return void 0 === ge[a] ? !1 : void 0 === b ? ge[a] : (ge[a] = b, !0)
    }

    function Bc(a) {
      var b = this.localeData(),
        c = zc(this, !a, b);
      return a && (c = b.pastFuture(+this, c)), b.postformat(c)
    }

    function Cc() {
      var a = he(this.years()),
        b = he(this.months()),
        c = he(this.days()),
        d = he(this.hours()),
        e = he(this.minutes()),
        f = he(this.seconds() + this.milliseconds() / 1E3),
        g = this.asSeconds();
      return g ?
        (0 > g ? "-" : "") + "P" + (a ? a + "Y" : "") + (b ? b + "M" : "") + (c ? c + "D" : "") + (d || e || f ? "T" : "") + (d ? d + "H" : "") + (e ? e + "M" : "") + (f ? f + "S" : "") : "P0D"
    }
    var Dc, Ec, Fc = a.momentProperties = [],
      Gc = !1,
      Hc = {},
      Ic = {},
      Jc = /(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,
      Kc = /(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,
      Lc = {},
      Mc = {},
      Nc = /\d/,
      Oc = /\d\d/,
      Pc = /\d{3}/,
      Qc = /\d{4}/,
      Rc = /[+-]?\d{6}/,
      Sc = /\d\d?/,
      Tc = /\d{1,3}/,
      Uc = /\d{1,4}/,
      Vc = /[+-]?\d{1,6}/,
      Wc = /\d+/,
      Xc = /[+-]?\d+/,
      Yc = /Z|[+-]\d\d:?\d\d/gi,
      Zc = /[+-]?\d+(\.\d{1,3})?/,
      $c = /[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,
      _c = {},
      ad = {},
      bd = 0,
      cd = 1,
      dd = 2,
      ed = 3,
      fd = 4,
      gd = 5,
      hd = 6;
    G("M", ["MM", 2], "Mo", function () {
      return this.month() + 1
    }), G("MMM", 0, 0, function (a) {
      return this.localeData().monthsShort(this, a)
    }), G("MMMM", 0, 0, function (a) {
      return this.localeData().months(this, a)
    }), y("month", "M"), L("M", Sc), L("MM", Sc, Oc), L("MMM", $c), L("MMMM", $c), O(["M",
      "MM"
    ], function (a, b) {
      b[cd] = p(a) - 1
    }), O(["MMM", "MMMM"], function (a, b, c, d) {
      var e = c._locale.monthsParse(a, d, c._strict);
      null != e ? b[cd] = e : j(c).invalidMonth = a
    });
    var id = "January_February_March_April_May_June_July_August_September_October_November_December".split("_"),
      jd = "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),
      kd = {};
    a.suppressDeprecationWarnings = !1;
    var ld = /^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
      md = [
        ["YYYYYY-MM-DD", /[+-]\d{6}-\d{2}-\d{2}/],
        ["YYYY-MM-DD", /\d{4}-\d{2}-\d{2}/],
        ["GGGG-[W]WW-E", /\d{4}-W\d{2}-\d/],
        ["GGGG-[W]WW", /\d{4}-W\d{2}/],
        ["YYYY-DDD", /\d{4}-\d{3}/]
      ],
      nd = [
        ["HH:mm:ss.SSSS", /(T| )\d\d:\d\d:\d\d\.\d+/],
        ["HH:mm:ss", /(T| )\d\d:\d\d:\d\d/],
        ["HH:mm", /(T| )\d\d:\d\d/],
        ["HH", /(T| )\d\d/]
      ],
      od = /^\/?Date\((\-?\d+)/i;
    a.createFromInputFallback = $("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",
      function (a) {
        a._d = new Date(a._i + (a._useUTC ? " UTC" : ""))
      }), G(0, ["YY", 2], 0, function () {
      return this.year() % 100
    }), G(0, ["YYYY", 4], 0, "year"), G(0, ["YYYYY", 5], 0, "year"), G(0, ["YYYYYY", 6, !0], 0, "year"), y("year", "y"), L("Y", Xc), L("YY", Sc, Oc), L("YYYY", Uc, Qc), L("YYYYY", Vc, Rc), L("YYYYYY", Vc, Rc), O(["YYYY", "YYYYY", "YYYYYY"], bd), O("YY", function (b, c) {
      c[bd] = a.parseTwoDigitYear(b)
    }), a.parseTwoDigitYear = function (a) {
      return p(a) + (p(a) > 68 ? 1900 : 2E3)
    };
    var pd = B("FullYear", !1);
    G("w", ["ww", 2], "wo", "week"), G("W", ["WW", 2], "Wo", "isoWeek"),
      y("week", "w"), y("isoWeek", "W"), L("w", Sc), L("ww", Sc, Oc), L("W", Sc), L("WW", Sc, Oc), P(["w", "ww", "W", "WW"], function (a, b, c, d) {
        b[d.substr(0, 1)] = p(a)
      });
    var qd = {
      dow: 0,
      doy: 6
    };
    G("DDD", ["DDDD", 3], "DDDo", "dayOfYear"), y("dayOfYear", "DDD"), L("DDD", Tc), L("DDDD", Pc), O(["DDD", "DDDD"], function (a, b, c) {
      c._dayOfYear = p(a)
    }), a.ISO_8601 = function () {};
    var rd = $("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548", function () {
        var a = Aa.apply(null, arguments);
        return this > a ? this : a
      }),
      sd =
      $("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548", function () {
        var a = Aa.apply(null, arguments);
        return a > this ? this : a
      });
    Ga("Z", ":"), Ga("ZZ", ""), L("Z", Yc), L("ZZ", Yc), O(["Z", "ZZ"], function (a, b, c) {
      c._useUTC = !0, c._tzm = Ha(a)
    });
    var td = /([\+\-]|\d\d)/gi;
    a.updateOffset = function () {};
    var ud = /(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,
      vd = /^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;
    Va.fn = Ea.prototype;
    var wd = Za(1, "add"),
      xd = Za(-1, "subtract");
    a.defaultFormat = "YYYY-MM-DDTHH:mm:ssZ";
    var yd = $("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.", function (a) {
      return void 0 === a ? this.localeData() : this.locale(a)
    });
    G(0, ["gg", 2], 0, function () {
        return this.weekYear() % 100
      }), G(0, ["GG", 2], 0, function () {
        return this.isoWeekYear() % 100
      }), Ab("gggg", "weekYear"), Ab("ggggg", "weekYear"), Ab("GGGG", "isoWeekYear"),
      Ab("GGGGG", "isoWeekYear"), y("weekYear", "gg"), y("isoWeekYear", "GG"), L("G", Xc), L("g", Xc), L("GG", Sc, Oc), L("gg", Sc, Oc), L("GGGG", Uc, Qc), L("gggg", Uc, Qc), L("GGGGG", Vc, Rc), L("ggggg", Vc, Rc), P(["gggg", "ggggg", "GGGG", "GGGGG"], function (a, b, c, d) {
        b[d.substr(0, 2)] = p(a)
      }), P(["gg", "GG"], function (b, c, d, e) {
        c[e] = a.parseTwoDigitYear(b)
      }), G("Q", 0, 0, "quarter"), y("quarter", "Q"), L("Q", Nc), O("Q", function (a, b) {
        b[cd] = 3 * (p(a) - 1)
      }), G("D", ["DD", 2], "Do", "date"), y("date", "D"), L("D", Sc), L("DD", Sc, Oc), L("Do", function (a, b) {
        return a ?
          b._ordinalParse : b._ordinalParseLenient
      }), O(["D", "DD"], dd), O("Do", function (a, b) {
        b[dd] = p(a.match(Sc)[0], 10)
      });
    var zd = B("Date", !0);
    G("d", 0, "do", "day"), G("dd", 0, 0, function (a) {
      return this.localeData().weekdaysMin(this, a)
    }), G("ddd", 0, 0, function (a) {
      return this.localeData().weekdaysShort(this, a)
    }), G("dddd", 0, 0, function (a) {
      return this.localeData().weekdays(this, a)
    }), G("e", 0, 0, "weekday"), G("E", 0, 0, "isoWeekday"), y("day", "d"), y("weekday", "e"), y("isoWeekday", "E"), L("d", Sc), L("e", Sc), L("E", Sc), L("dd", $c), L("ddd",
      $c), L("dddd", $c), P(["dd", "ddd", "dddd"], function (a, b, c) {
      var d = c._locale.weekdaysParse(a);
      null != d ? b.d = d : j(c).invalidWeekday = a
    }), P(["d", "e", "E"], function (a, b, c, d) {
      b[d] = p(a)
    });
    var Ad = "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),
      Bd = "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),
      Cd = "Su_Mo_Tu_We_Th_Fr_Sa".split("_");
    G("H", ["HH", 2], 0, "hour"), G("h", ["hh", 2], 0, function () {
        return this.hours() % 12 || 12
      }), Pb("a", !0), Pb("A", !1), y("hour", "h"), L("a", Qb), L("A", Qb), L("H", Sc), L("h", Sc), L("HH", Sc, Oc),
      L("hh", Sc, Oc), O(["H", "HH"], ed), O(["a", "A"], function (a, b, c) {
        c._isPm = c._locale.isPM(a), c._meridiem = a
      }), O(["h", "hh"], function (a, b, c) {
        b[ed] = p(a), j(c).bigHour = !0
      });
    var Dd = /[ap]\.?m?\.?/i,
      Ed = B("Hours", !0);
    G("m", ["mm", 2], 0, "minute"), y("minute", "m"), L("m", Sc), L("mm", Sc, Oc), O(["m", "mm"], fd);
    var Fd = B("Minutes", !1);
    G("s", ["ss", 2], 0, "second"), y("second", "s"), L("s", Sc), L("ss", Sc, Oc), O(["s", "ss"], gd);
    var Gd = B("Seconds", !1);
    G("S", 0, 0, function () {
      return ~~(this.millisecond() / 100)
    }), G(0, ["SS", 2], 0, function () {
      return ~~(this.millisecond() /
        10)
    }), Tb("SSS"), Tb("SSSS"), y("millisecond", "ms"), L("S", Tc, Nc), L("SS", Tc, Oc), L("SSS", Tc, Pc), L("SSSS", Wc), O(["S", "SS", "SSS", "SSSS"], function (a, b) {
      b[hd] = p(1E3 * ("0." + a))
    });
    var Hd = B("Milliseconds", !1);
    G("z", 0, 0, "zoneAbbr"), G("zz", 0, 0, "zoneName");
    var Id = n.prototype;
    Id.add = wd, Id.calendar = _a, Id.clone = ab, Id.diff = gb, Id.endOf = sb, Id.format = kb, Id.from = lb, Id.fromNow = mb, Id.to = nb, Id.toNow = ob, Id.get = E, Id.invalidAt = zb, Id.isAfter = bb, Id.isBefore = cb, Id.isBetween = db, Id.isSame = eb, Id.isValid = xb, Id.lang = yd, Id.locale = pb, Id.localeData =
      qb, Id.max = sd, Id.min = rd, Id.parsingFlags = yb, Id.set = E, Id.startOf = rb, Id.subtract = xd, Id.toArray = wb, Id.toDate = vb, Id.toISOString = jb, Id.toJSON = jb, Id.toString = ib, Id.unix = ub, Id.valueOf = tb, Id.year = pd, Id.isLeapYear = ga, Id.weekYear = Cb, Id.isoWeekYear = Db, Id.quarter = Id.quarters = Gb, Id.month = W, Id.daysInMonth = X, Id.week = Id.weeks = la, Id.isoWeek = Id.isoWeeks = ma, Id.weeksInYear = Fb, Id.isoWeeksInYear = Eb, Id.date = zd, Id.day = Id.days = Mb, Id.weekday = Nb, Id.isoWeekday = Ob, Id.dayOfYear = oa, Id.hour = Id.hours = Ed, Id.minute = Id.minutes = Fd, Id.second =
      Id.seconds = Gd, Id.millisecond = Id.milliseconds = Hd, Id.utcOffset = Ka, Id.utc = Ma, Id.local = Na, Id.parseZone = Oa, Id.hasAlignedHourOffset = Pa, Id.isDST = Qa, Id.isDSTShifted = Ra, Id.isLocal = Sa, Id.isUtcOffset = Ta, Id.isUtc = Ua, Id.isUTC = Ua, Id.zoneAbbr = Ub, Id.zoneName = Vb, Id.dates = $("dates accessor is deprecated. Use date instead.", zd), Id.months = $("months accessor is deprecated. Use month instead", W), Id.years = $("years accessor is deprecated. Use year instead", pd), Id.zone = $("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",
        La);
    var Jd = Id,
      Kd = {
        sameDay: "[Today at] LT",
        nextDay: "[Tomorrow at] LT",
        nextWeek: "dddd [at] LT",
        lastDay: "[Yesterday at] LT",
        lastWeek: "[Last] dddd [at] LT",
        sameElse: "L"
      },
      Ld = {
        LTS: "h:mm:ss A",
        LT: "h:mm A",
        L: "MM/DD/YYYY",
        LL: "MMMM D, YYYY",
        LLL: "MMMM D, YYYY LT",
        LLLL: "dddd, MMMM D, YYYY LT"
      },
      Md = "Invalid date",
      Nd = "%d",
      Od = /\d{1,2}/,
      Pd = {
        future: "in %s",
        past: "%s ago",
        s: "a few seconds",
        m: "a minute",
        mm: "%d minutes",
        h: "an hour",
        hh: "%d hours",
        d: "a day",
        dd: "%d days",
        M: "a month",
        MM: "%d months",
        y: "a year",
        yy: "%d years"
      },
      Qd = r.prototype;
    Qd._calendar = Kd, Qd.calendar = Yb, Qd._longDateFormat = Ld, Qd.longDateFormat = Zb, Qd._invalidDate = Md, Qd.invalidDate = $b, Qd._ordinal = Nd, Qd.ordinal = _b, Qd._ordinalParse = Od, Qd.preparse = ac, Qd.postformat = ac, Qd._relativeTime = Pd, Qd.relativeTime = bc, Qd.pastFuture = cc, Qd.set = dc, Qd.months = S, Qd._months = id, Qd.monthsShort = T, Qd._monthsShort = jd, Qd.monthsParse = U, Qd.week = ia, Qd._week = qd, Qd.firstDayOfYear = ka, Qd.firstDayOfWeek = ja, Qd.weekdays = Ib, Qd._weekdays = Ad, Qd.weekdaysMin = Kb, Qd._weekdaysMin = Cd, Qd.weekdaysShort =
      Jb, Qd._weekdaysShort = Bd, Qd.weekdaysParse = Lb, Qd.isPM = Rb, Qd._meridiemParse = Dd, Qd.meridiem = Sb, v("en", {
        ordinalParse: /\d{1,2}(th|st|nd|rd)/,
        ordinal: function (a) {
          var b = a % 10,
            c = 1 === p(a % 100 / 10) ? "th" : 1 === b ? "st" : 2 === b ? "nd" : 3 === b ? "rd" : "th";
          return a + c
        }
      }), a.lang = $("moment.lang is deprecated. Use moment.locale instead.", v), a.langData = $("moment.langData is deprecated. Use moment.localeData instead.", x);
    var Rd = Math.abs,
      Sd = uc("ms"),
      Td = uc("s"),
      Ud = uc("m"),
      Vd = uc("h"),
      Wd = uc("d"),
      Xd = uc("w"),
      Yd = uc("M"),
      Zd = uc("y"),
      $d = wc("milliseconds"),
      _d = wc("seconds"),
      ae = wc("minutes"),
      be = wc("hours"),
      ce = wc("days"),
      de = wc("months"),
      ee = wc("years"),
      fe = Math.round,
      ge = {
        s: 45,
        m: 45,
        h: 22,
        d: 26,
        M: 11
      },
      he = Math.abs,
      ie = Ea.prototype;
    ie.abs = lc, ie.add = nc, ie.subtract = oc, ie.as = sc, ie.asMilliseconds = Sd, ie.asSeconds = Td, ie.asMinutes = Ud, ie.asHours = Vd, ie.asDays = Wd, ie.asWeeks = Xd, ie.asMonths = Yd, ie.asYears = Zd, ie.valueOf = tc, ie._bubble = pc, ie.get = vc, ie.milliseconds = $d, ie.seconds = _d, ie.minutes = ae, ie.hours = be, ie.days = ce, ie.weeks = xc, ie.months = de, ie.years = ee, ie.humanize = Bc, ie.toISOString =
      Cc, ie.toString = Cc, ie.toJSON = Cc, ie.locale = pb, ie.localeData = qb, ie.toIsoString = $("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)", Cc), ie.lang = yd, G("X", 0, 0, "unix"), G("x", 0, 0, "valueOf"), L("x", Xc), L("X", Zc), O("X", function (a, b, c) {
        c._d = new Date(1E3 * parseFloat(a, 10))
      }), O("x", function (a, b, c) {
        c._d = new Date(p(a))
      }), a.version = "2.10.3", b(Aa), a.fn = Jd, a.min = Ca, a.max = Da, a.utc = h, a.unix = Wb, a.months = gc, a.isDate = d, a.locale = v, a.invalid = l, a.duration = Va, a.isMoment = o, a.weekdays = ic, a.parseZone =
      Xb, a.localeData = x, a.isDuration = Fa, a.monthsShort = hc, a.weekdaysMin = kc, a.defineLocale = w, a.weekdaysShort = jc, a.normalizeUnits = z, a.relativeTimeThreshold = Ac;
    var je = a;
    return je
  });
  (function (exports) {
    var existingPDFNet = !!exports.PDFNet;
    exports.PDFNet = exports.PDFNet ? exports.PDFNet : {};
    exports.PDFNet.Convert = exports.PDFNet.Convert ? exports.PDFNet.Convert : {};
    var finishedInitializeCapability;
    exports.PDFNet.initialize = function (l, pdfBackendType) {
      if (!finishedInitializeCapability) {
        var workerHandlers = {
          pnaclCrashError: function (msg, genericMsg) {
            console.log("PNaClCrashError: " + msg + ", " + genericMsg)
          },
          pnaclLoadError: function (msg, genericMsg) {
            console.log("PNaClLoadError: " + msg + ", " + genericMsg)
          },
          emsWorkerError: function (msg, genericMsg) {
            console.log("EmsWorkerError: " + msg + ", " + genericMsg)
          }
        };
        var useEmscriptenWhileLoading = pdfBackendType !== "pnacl" && !exports.CoreControls.isSubzeroEnabled();
        finishedInitializeCapability = createPromiseCapability();
        var finishInit = function (pdfBackendType) {
          exports.CoreControls.preloadPDFWorker(pdfBackendType, workerHandlers, {
            useEmscriptenWhileLoading: useEmscriptenWhileLoading,
            autoSwap: false
          });
          var workerTransportPromise = exports.CoreControls.initPDFWorkerTransports(pdfBackendType,
            workerHandlers, l);
          workerTransportPromise.then(function (transport) {
            exports.PDFNet.messageHandler = transport;
            finishedInitializeCapability.resolve()
          })
        };
        if (typeof readerControl !== "undefined" && typeof readerControl.pdfType !== "undefined") pdfBackendType = readerControl.pdfType;
        if (!pdfBackendType || pdfBackendType === "auto") {
          var getBackendeallocPromise = CoreControls.getDefaultPdfBackendType();
          getBackendeallocPromise.then(finishInit)
        } else finishInit(pdfBackendType)
      }
      return finishedInitializeCapability.promise
    };
    exports.PDFNet.Convert.office2PDFBuffer =
      function (input, options) {
        return new Promise(function (resolve, reject) {
          var partRetriever = typeof input === "string" ? new CoreControls.PartRetrievers.ExternalPdfPartRetriever(input) : new CoreControls.PartRetrievers.ArrayBufferPdfPartRetriever(input);
          var officeDoc = new CoreControls.Document(undefined, "office");
          var officeDocReady = function (err) {
            if (err) reject(err);
            officeDoc.getFileData({
              "downloadType": "pdf"
            }).then(function (buffer) {
              resolve(buffer)
            })["catch"](function (e) {
              reject(e)
            })
          };
          officeDoc.loadAsync(partRetriever,
            officeDocReady, {
              workerTransportPromise: CoreControls.initOfficeWorkerTransports(CoreControls.getCurrentPDFBackendType(), {}, options["l"])
            })
        })
      };
    if (!existingPDFNet) {
      exports.PDFNet.hasFullAPI = false;
      if (window.Proxy) exports.PDFNet = new window.Proxy(exports.PDFNet, {
        get: function (obj, prop) {
          if (prop in obj) return obj[prop];
          throw new Error('Full version of PDFNetJS has not been loaded. Please pass the "fullAPI: true" option in your WebViewer constructor to use the PDFNet APIs.');
        }
      })
    }
  })(typeof window === "undefined" ?
    this : window);
  var I = self,
    T = I.$T;
  (function () {
    function a(b) {
      d ? d.push(b) : setTimeout(b, 0)
    }
    var e = {
        version: "0.7.2.0",
        isUndefined: function (b) {
          return void 0 === b
        },
        isNull: function (b) {
          return null === b
        },
        gg: function (b) {
          return null === b || void 0 === b
        },
        uX: function (b) {
          return null !== b && void 0 !== b
        }
      },
      d = [];
    I.attachEvent && I.attachEvent("onload", function () {
      if (d) {
        var b = d;
        d = null;
        for (var f = 0, c = b.length; f < c; f++) b[f]()
      }
    });
    T || (I.$T = T = {
      init: a,
      ready: a
    });
    for (var c in e) T[c] = e[c]
  })();
  Object.gf = "Object";
  Object.mk = null;
  Object.oW = function (a) {
    for (var e in a) delete a[e]
  };
  Object.Dq = function (a, e) {
    return void 0 !== a[e]
  };
  Object.keys ? Object.XO = function (a) {
    return Object.keys(a).length
  } : (Object.keys = function (a) {
    var e = [],
      d;
    for (d in a) e.push(d);
    return e
  }, Object.XO = function (a) {
    var e = 0,
      d;
    for (d in a) e++;
    return e
  });
  Boolean.gf = "Boolean";
  Boolean.parse = function (a) {
    return "true" == a.toLowerCase()
  };
  Number.gf = "Number";
  Number.parse = function (a) {
    return a && a.length ? 0 <= a.indexOf(".") || 0 <= a.indexOf("e") || a.endsWith("f") || a.endsWith("F") ? parseFloat(a) : parseInt(a, 10) : 0
  };
  Number.prototype.format = function (a) {
    return T.gg(a) || 0 == a.length || "i" == a ? this.toString() : ca(this, a, !1)
  };
  Number.prototype.PG = function (a) {
    return T.gg(a) || 0 == a.length || "i" == a ? this.toLocaleString() : ca(this, a, !0)
  };
  Number.Tw = function (a, e, d, c) {
    var b = null;
    d = a.indexOf(d);
    0 < d && (b = a.substr(d), a = a.substr(0, d));
    (d = a.startsWith("-")) && (a = a.substr(1));
    var f = 0,
      g = e[f];
    if (a.length < g) return b ? a + b : a;
    for (var h = a.length, l = "", k = !1; !k;) {
      var m = g,
        n = h - m;
      0 > n && (g += n, m += n, n = 0, k = !0);
      if (!m) break;
      n = a.substr(n, m);
      l = l.length ? n + c + l : n;
      h -= m;
      f < e.length - 1 && (f++, g = e[f])
    }
    d && (l = "-" + l);
    return b ? l + b : l
  };

  function ca(a, e, d) {
    d = d ? T.GJ.fV.numberFormat : T.GJ.qV.numberFormat;
    var c = "",
      b = -1;
    1 < e.length && (b = parseInt(e.substr(1)));
    e = e.charAt(0);
    switch (e) {
      case "d":
      case "D":
        c = parseInt(Math.abs(a)).toString(); - 1 != b && (c = c.length < b ? String.hF(b - c.length) + c : c);
        0 > a && (c = "-" + c);
        break;
      case "x":
      case "X":
        c = parseInt(Math.abs(a)).toString(16);
        "X" == e && (c = c.toUpperCase()); - 1 != b && (c = c.length < b ? String.hF(b - c.length) + c : c);
        break;
      case "e":
      case "E":
        c = -1 == b ? a.toExponential() : a.toExponential(b);
        "E" == e && (c = c.toUpperCase());
        break;
      case "f":
      case "F":
      case "n":
      case "N":
        -1 ==
          b && (b = d.FX);
        c = a.toFixed(b).toString();
        b && "." != d.XG && (b = c.indexOf("."), c = c.substr(0, b) + d.XG + c.substr(b + 1));
        if ("n" == e || "N" == e) c = Number.Tw(c, d.HX, d.XG, d.GX);
        break;
      case "c":
      case "C":
        -1 == b && (b = d.zW);
        c = Math.abs(a).toFixed(b).toString();
        b && "." != d.kE && (b = c.indexOf("."), c = c.substr(0, b) + d.kE + c.substr(b + 1));
        c = Number.Tw(c, d.BW, d.kE, d.AW);
        c = 0 > a ? String.format(d.DW, c) : String.format(d.EW, c);
        break;
      case "p":
      case "P":
        -1 == b && (b = d.MX), c = (100 * Math.abs(a)).toFixed(b).toString(), b && "." != d.qH && (b = c.indexOf("."), c = c.substr(0,
          b) + d.qH + c.substr(b + 1)), c = Number.Tw(c, d.OX, d.qH, d.NX), c = 0 > a ? String.format(d.PX, c) : String.format(d.QX, c)
    }
    return c
  }
  String.gf = "String";
  String.JJ = "";
  String.compare = function (a, e, d) {
    d && (a && (a = a.toUpperCase()), e && (e = e.toUpperCase()));
    a = a || "";
    e = e || "";
    return a == e ? 0 : a < e ? -1 : 1
  };
  String.concat = function () {
    return 2 === arguments.length ? arguments[0] + arguments[1] : Array.prototype.join.call(arguments, "")
  };
  String.prototype.endsWith = function (a) {
    return a.length ? a.length > this.length ? !1 : this.substr(this.length - a.length) == a : !0
  };
  String.SE = function (a, e, d) {
    return 0 == String.compare(a, e, d)
  };
  String._format = function (a, e, d) {
    String.DC || (String.DC = /(\{[^\}^\{]+\})/g);
    return a.replace(String.DC, function (c, b) {
      var f = e[parseInt(b.substr(1)) + 1];
      if (T.gg(f)) return "";
      if (f.format) {
        var a = null,
          h = b.indexOf(":");
        0 < h && (a = b.substring(h + 1, b.length - 1));
        return d ? f.PG(a) : f.format(a)
      }
      return d ? f.toLocaleString() : f.toString()
    })
  };
  String.format = function (a) {
    return String._format(a, arguments, !1)
  };
  String.hF = function (a) {
    for (var e = "0", d = 1; d < a; d++) e += "0";
    return e
  };
  String.prototype.insert = function (a, e) {
    return e ? a ? this.substr(0, a) + e + this.substr(a) : e + this : this
  };
  String.xu = function (a) {
    return !a || !a.length
  };
  String.PG = function (a) {
    return String._format(a, arguments, !0)
  };
  String.prototype.remove = function (a, e) {
    return !e || a + e > this.length ? this.substr(0, a) : this.substr(0, a) + this.substr(a + e)
  };
  String.prototype.startsWith = function (a) {
    return a.length ? a.length > this.length ? !1 : this.substr(0, a.length) == a : !0
  };
  String.prototype.trim || (String.prototype.trim = function () {
    return this.replace(/\s*$/, "").replace(/^\s*/, "")
  });
  Array.gf = "Array";
  Array.as = [T.Jr];
  Array.prototype.add = function (a) {
    this.push(a)
  };
  Object.defineProperty(Array.prototype, "add", {
    enumerable: !1,
    writable: !0
  });
  Array.prototype.addRange = function (a) {
    this.push.apply(this, a)
  };
  Object.defineProperty(Array.prototype, "addRange", {
    enumerable: !1,
    writable: !0
  });
  Object.defineProperty(Array.prototype, "aggregate", {
    enumerable: !1,
    writable: !0
  });
  Array.prototype.clear = function () {
    this.length = 0
  };
  Object.defineProperty(Array.prototype, "clear", {
    enumerable: !1,
    writable: !0
  });
  Array.prototype.clone = function () {
    return 1 === this.length ? [this[0]] : Array.apply(null, this)
  };
  Object.defineProperty(Array.prototype, "clone", {
    enumerable: !1,
    writable: !0
  });
  Array.prototype.contains = function (a) {
    return 0 <= this.indexOf(a)
  };
  Object.defineProperty(Array.prototype, "contains", {
    enumerable: !1,
    writable: !0
  });
  Array.prototype.dequeue = function () {
    return this.shift()
  };
  Object.defineProperty(Array.prototype, "dequeue", {
    enumerable: !1,
    writable: !0
  });
  Array.prototype.enqueue = function (a) {
    this.NL = !0;
    this.push(a)
  };
  Object.defineProperty(Array.prototype, "enqueue", {
    enumerable: !1,
    writable: !0
  });

  function ea(a) {
    return a.length ? a[a.NL ? 0 : a.length - 1] : null
  }
  Object.defineProperty(Array.prototype, "peek", {
    enumerable: !1,
    writable: !0
  });
  Array.prototype.every || (Array.prototype.every = function (a, e) {
    for (var d = this.length, c = 0; c < d; c++)
      if (c in this && !a.call(e, this[c], c, this)) return !1;
    return !0
  }, Object.defineProperty(Array.prototype, "every", {
    enumerable: !1,
    writable: !0
  }));
  Object.defineProperty(Array.prototype, "extract", {
    enumerable: !1,
    writable: !0
  });
  Array.prototype.filter || (Array.prototype.filter = function (a, e) {
    for (var d = this.length, c = [], b = 0; b < d; b++)
      if (b in this) {
        var f = this[b];
        a.call(e, f, b, this) && c.push(f)
      } return c
  }, Object.defineProperty(Array.prototype, "filter", {
    enumerable: !1,
    writable: !0
  }));
  Array.prototype.forEach || (Array.prototype.forEach = function (a, e) {
    for (var d = this.length, c = 0; c < d; c++) c in this && a.call(e, this[c], c, this)
  }, Object.defineProperty(Array.prototype, "forEach", {
    enumerable: !1,
    writable: !0
  }));
  Array.prototype.getEnumerator = function () {
    return new T.yr(this)
  };
  Object.defineProperty(Array.prototype, "getEnumerator", {
    enumerable: !1,
    writable: !0
  });
  Array.prototype.groupBy = function (a, e) {
    for (var d = this.length, c = [], b = {}, f = 0; f < d; f++)
      if (f in this) {
        var g = a.call(e, this[f], f);
        if (!String.xu(g)) {
          var h = b[g];
          h || (h = [], h.key = g, b[g] = h, c.add(h));
          h.add(this[f])
        }
      } return c
  };
  Object.defineProperty(Array.prototype, "groupBy", {
    enumerable: !1,
    writable: !0
  });
  Array.prototype.index = function (a, e) {
    for (var d = this.length, c = {}, b = 0; b < d; b++)
      if (b in this) {
        var f = a.call(e, this[b], b);
        String.xu(f) || (c[f] = this[b])
      } return c
  };
  Object.defineProperty(Array.prototype, "index", {
    enumerable: !1,
    writable: !0
  });
  Array.prototype.indexOf || (Array.prototype.indexOf = function (a, e) {
    var d = this.length;
    if (d)
      for (var c = e || 0; c < d; c++)
        if (this[c] === a) return c;
    return -1
  }, Object.defineProperty(Array.prototype, "indexOf", {
    enumerable: !1,
    writable: !0
  }));
  Array.prototype.insert = function (a, e) {
    this.splice(a, 0, e)
  };
  Object.defineProperty(Array.prototype, "insert", {
    enumerable: !1,
    writable: !0
  });
  Object.defineProperty(Array.prototype, "insertRange", {
    enumerable: !1,
    writable: !0
  });
  Array.prototype.map || (Array.prototype.map = function (a, e) {
    for (var d = this.length, c = Array(d), b = 0; b < d; b++) b in this && (c[b] = a.call(e, this[b], b, this));
    return c
  }, Object.defineProperty(Array.prototype, "map", {
    enumerable: !1,
    writable: !0
  }));
  Array.prototype.remove = function (a) {
    a = this.indexOf(a);
    return 0 <= a ? (this.splice(a, 1), !0) : !1
  };
  Object.defineProperty(Array.prototype, "remove", {
    enumerable: !1,
    writable: !0
  });
  Object.defineProperty(Array.prototype, "removeAt", {
    enumerable: !1,
    writable: !0
  });
  Array.prototype.removeRange = function (a, e) {
    return this.splice(a, e)
  };
  Object.defineProperty(Array.prototype, "removeRange", {
    enumerable: !1,
    writable: !0
  });
  Array.prototype.some || (Array.prototype.some = function (a, e) {
    for (var d = this.length, c = 0; c < d; c++)
      if (c in this && a.call(e, this[c], c, this)) return !0;
    return !1
  }, Object.defineProperty(Array.prototype, "some", {
    enumerable: !1,
    writable: !0
  }));
  Array.toArray = function (a) {
    return Array.prototype.slice.call(a)
  };
  RegExp.gf = "RegExp";
  RegExp.parse = function (a) {
    if (a.startsWith("/")) {
      var e = a.lastIndexOf("/");
      if (1 < e) return new RegExp(a.substring(1, e), a.substr(e + 1))
    }
    return null
  };
  Error.gf = "Error";
  Error.sW = function (a, e, d) {
    a = Error(a);
    if (e)
      for (var c in e) a[c] = e[c];
    d && (a.lX = d);
    if (!(T.gg(a.stack) || T.gg(a.fileName) || T.gg(a.lineNumber))) {
      e = a.stack.split("\n");
      d = e[0];
      for (c = a.fileName + ":" + a.lineNumber; !T.gg(d) && -1 === d.indexOf(c);) e.shift(), d = e[0];
      d = e[1];
      isNullOrUndefined(d) || (d = d.match(/@(.*):(\d+)$/), T.gg(d) || (e.shift(), a.stack = e.join("\n"), a.fileName = d[1], a.lineNumber = parseInt(d[2])))
    }
    return a
  };
  I.qc = Function;
  I.qc.gf = "Type";
  I.QB = function (a) {
    this.gf = a
  };
  I.QB.prototype = {
    hL: !0,
    getName: function () {
      return this.gf
    }
  };
  I.qc.ov = function (a) {
    I.Ow || (I.Ow = {});
    I.dC || (I.dC = []);
    if (!I.Ow[a]) {
      for (var e = self, d = a.split("."), c = 0; c < d.length; c++) {
        var b = d[c],
          f = e[b];
        f || (e[b] = f = new I.QB(d.slice(0, c + 1).join(".")), 0 == c && I.dC.add(f));
        e = f
      }
      I.Ow[a] = e
    }
  };
  I.qc.prototype.Ma = function (a, e, d) {
    this.prototype.constructor = this;
    this.gf = a;
    this.SB = !0;
    this.mk = e || Object;
    e && (this.Zr = !0);
    if (d) {
      this.as = [];
      for (var c = 2; c < arguments.length; c++) d = arguments[c], this.as.add(d)
    }
  };

  function fa(a, e) {
    a.gf = e;
    a.YB = !0
  }
  I.qc.prototype.SA = function () {
    if (this.Zr) {
      var a = this.mk;
      a.Zr && a.SA();
      for (var e in a.prototype) {
        var d = a.prototype[e];
        this.prototype[e] || (this.prototype[e] = d)
      }
      delete this.Zr
    }
  };
  I.qc.prototype.sS || (I.qc.prototype.sS = I.qc.prototype.SA);

  function ga(a, e) {
    return T.gg(e) ? !1 : a == Object || e instanceof a ? !0 : ka(a, I.qc.UO(e))
  }

  function ka(a, e) {
    if (a == Object || a == e) return !0;
    if (a.SB)
      for (var d = e.mk; d;) {
        if (a == d) return !0;
        d = d.mk
      } else if (a.YB) {
        var c = e.as;
        if (c && c.contains(a)) return !0;
        for (d = e.mk; d;) {
          if ((c = d.as) && c.contains(a)) return !0;
          d = d.mk
        }
      } return !1
  }
  I.qc.oX = function (a) {
    return 1 == a.SB
  };
  I.qc.pX = function (a) {
    return 1 == a.fL
  };
  I.qc.qX = function (a) {
    return 1 == a.fL && 1 == a.UB
  };
  I.qc.rX = function (a) {
    return 1 == a.YB
  };
  I.qc.sX = function (a) {
    return 1 == a.hL
  };
  I.qc.lW = function (a, e) {
    return ga(e, a)
  };
  I.qc.XX = function (a, e) {
    return ga(e, a) ? a : null
  };
  I.qc.UO = function (a) {
    var e = null;
    try {
      e = a.constructor
    } catch (d) {}
    e && e.gf || (e = Object);
    return e
  };
  T.xi = function () {};
  T.xi.Ma("Enum");
  T.xi.parse = function (a, e) {
    var d = a.prototype;
    if (a.UB) {
      for (var c = e.split("|"), b = 0, f = !0, g = c.length - 1; 0 <= g; g--) {
        var h = c[g].trim(),
          l = !1;
        for (k in d)
          if (k === h) {
            b |= d[k];
            l = !0;
            break
          } if (!l) {
          f = !1;
          break
        }
      }
      if (f) return b
    } else
      for (var k in d)
        if (k === e) return d[k];
    throw "Invalid Enumeration Value";
  };
  T.xi.dW = function (a) {
    var e = this.prototype;
    if (this.UB && 0 !== a) {
      var d = [];
      for (c in e) e[c] & a && (d.length && d.add(" | "), d.add(c));
      if (!d.length) throw "Invalid Enumeration Value";
      return d.join("")
    }
    for (var c in e)
      if (e[c] === a) return c;
    throw "Invalid Enumeration Value";
  };
  T.hd = function () {};
  T.hd.Ma("Delegate");
  T.hd.empty = function () {};
  T.hd.oL = function (a, e, d) {
    for (var c = 0; c < a.length; c += 2)
      if (a[c] === e && a[c + 1] === d) return !0;
    return !1
  };
  T.hd._create = function (a) {
    function e() {
      if (2 == a.length) return a[1].apply(a[0], arguments);
      for (var d = a.clone(), c = 0; c < d.length; c += 2) T.hd.oL(a, d[c], d[c + 1]) && d[c + 1].apply(d[c], arguments);
      return null
    }
    e.Kg = a;
    return e
  };
  T.hd.create = function (a, e) {
    return a ? T.hd._create([a, e]) : e
  };
  T.hd.pW = function (a, e) {
    return a ? e ? T.hd._create((a.Kg ? a.Kg : [null, a]).concat(e.Kg ? e.Kg : [null, e])) : a.Kg ? a : T.hd.create(null, a) : e.Kg ? e : T.hd.create(null, e)
  };
  T.hd.remove = function (a, e) {
    if (!a || a === e) return null;
    if (!e) return a;
    var d = a.Kg,
      c = null,
      b;
    e.Kg ? (c = e.Kg[0], b = e.Kg[1]) : b = e;
    for (var f = 0; f < d.length; f += 2)
      if (d[f] === c && d[f + 1] === b) {
        if (2 == d.length) return null;
        d.splice(f, 2);
        return T.hd._create(d)
      } return a
  };
  T.hd.tW = function (a, e, d) {
    d = d || "__" + (new Date).valueOf();
    self[d] = e ? a : function () {
      try {
        delete self[d]
      } catch (c) {
        self[d] = void 0
      }
      a.apply(null, arguments)
    };
    return d
  };
  T.hd.IW = function (a) {
    delete self[a]
  };
  T.hd.nW = function (a) {
    self[a] = T.hd.empty
  };
  T.Ie = function () {};
  T.Ie.prototype = {
    bh: null,
    reset: null
  };
  T.Ie.getEnumerator = function (a) {
    return a ? a.getEnumerator ? a.getEnumerator() : new T.yr(a) : null
  };
  fa(T.Ie, "IEnumerator");
  T.Jr = function () {};
  T.Jr.prototype = {
    getEnumerator: null
  };
  fa(T.Jr, "IEnumerable");
  T.yr = function (a) {
    this.jC = a;
    this.ws = -1;
    this.current = null
  };
  T.yr.prototype = {
    bh: function () {
      this.ws++;
      this.current = this.jC[this.ws];
      return this.ws < this.jC.length
    },
    reset: function () {
      this.ws = -1;
      this.current = null
    }
  };
  T.yr.Ma("ArrayEnumerator", null, T.Ie);
  T.vB = function () {};
  T.vB.prototype = {
    Yc: null
  };
  fa(T.vB, "IDisposable");
  T.KB = function (a) {
    this.Ls = T.gg(a) ? [] : [a];
    this.isEmpty = 0 == this.Ls.length
  };
  T.KB.prototype = {
    append: function (a) {
      T.gg(a) || (this.Ls.add(a), this.isEmpty = !1);
      return this
    },
    clear: function () {
      this.Ls = [];
      this.isEmpty = !0
    },
    toString: function (a) {
      return this.Ls.join(a || "")
    }
  };
  T.KB.Ma("StringBuilder");
  T.Hr = function () {};
  T.Hr.Ma("EventArgs");
  T.Hr.JJ = new T.Hr;
  I.XMLHttpRequest || (I.XMLHttpRequest = function () {
    for (var a = ["Msxml2.XMLHTTP", "Microsoft.XMLHTTP"], e = 0; e < a.length; e++) try {
      return new ActiveXObject(a[e])
    } catch (d) {}
    return null
  });
  T.qB = function () {
    var a = T.qB;
    a.Zr && a.SA();
    a.mk.apply(this);
    this.cancel = !1
  };
  T.qB.Ma("CancelEventArgs", T.Hr);
  T.VK = function (a, e) {
    this.first = a;
    this.second = e
  };
  T.VK.Ma("Tuple");
  T.Sd = function (a) {
    this.vx = a;
    this.xh = null
  };
  T.Sd.prototype = {
    Xa: function () {
      this.xh = T.Sd.mC(this.xh);
      return this.vx
    },
    Db: function (a) {
      this.vx !== a && (this.vx = a, a = this.xh) && (this.xh = null, T.Sd.KC(a))
    }
  };
  T.Sd.qx = [];
  T.Sd.IL = {
    Yc: function () {
      T.Sd.qx.pop()
    }
  };
  T.Sd.VX = function (a) {
    T.Sd.qx.push(a);
    return T.Sd.IL
  };
  T.Sd.mC = function (a) {
    var e = T.Sd.qx,
      d = e.length;
    if (d) {
      a = a || [];
      for (var c = 0; c < d; c++) {
        var b = e[c];
        a.contains(b) || a.push(b)
      }
      return a
    }
    return null
  };
  T.Sd.KC = function (a) {
    for (var e = 0, d = a.length; e < d; e++) a[e].nX()
  };
  T.Sd.Ma("Observable");
  T.yB = function (a) {
    this.Qi = a || [];
    this.xh = null
  };
  T.yB.prototype = {
    add: function (a) {
      this.Qi.push(a);
      la(this)
    },
    clear: function () {
      this.Qi.clear();
      la(this)
    },
    contains: function (a) {
      return this.Qi.contains(a)
    },
    getEnumerator: function () {
      this.xh = T.Sd.mC(this.xh);
      return this.Qi.getEnumerator()
    },
    indexOf: function (a) {
      return this.Qi.indexOf(a)
    },
    insert: function (a, e) {
      this.Qi.insert(a, e);
      la(this)
    },
    remove: function (a) {
      return this.Qi.remove(a) ? (la(this), !0) : !1
    },
    toArray: function () {
      return this.Qi
    }
  };

  function la(a) {
    var e = a.xh;
    e && (a.xh = null, T.Sd.KC(e))
  }
  T.yB.Ma("ObservableCollection", null, T.Jr);
  T.TJ = function () {};
  fa(T.TJ, "IApplication");
  T.UJ = function () {};
  fa(T.UJ, "IContainer");
  T.YJ = function () {};
  fa(T.YJ, "IObjectFactory");
  T.VJ = function () {};
  fa(T.VJ, "IEventManager");
  T.WJ = function () {};
  fa(T.WJ, "IInitializable");
  self.qc.ov("XODText");
  self.qc.ov("XODTextOld");
  XODText.Zc = function () {};
  XODText.yw = function (a, e) {
    this.RC = a;
    this.pb = Array(8);
    this.pb[0] = e[0];
    this.pb[1] = e[1];
    this.pb[2] = e[2];
    this.pb[3] = e[3];
    this.pb[4] = e[4];
    this.pb[5] = e[5];
    this.pb[6] = e[6];
    this.pb[7] = e[7]
  };
  XODText.yw.prototype = {
    RC: null,
    pb: null,
    Pc: function () {
      for (var a = Array(8), e = 0; 8 > e; e++) a[e] = this.pb[e];
      return a
    }
  };
  XODText.IG = {
    ff: String.fromCharCode(64256),
    fi: String.fromCharCode(64257),
    fl: String.fromCharCode(64258),
    ffi: String.fromCharCode(64259),
    ffl: String.fromCharCode(64260),
    ft: String.fromCharCode(64261),
    st: String.fromCharCode(64262)
  };
  XODText.Tz = function (a) {
    this.XK = this.width = a
  };
  XODText.Tz.prototype = {
    width: 0,
    XK: 0
  };
  XODText.Ou = function () {};
  XODText.Ou.prototype = {
    A: function () {},
    addColorStop: function () {}
  };
  XODText.km = function (a) {
    this.Ak = [];
    this.qC = {};
    var e = new XODText.Ca;
    e.set(1, 0, 0, 1, 0, 0);
    this.Ak.push(e);
    this.zm = a
  };
  $.extend(XODText.km.prototype, {
    zm: null,
    $C: 0,
    vp: 0,
    ox: 0,
    canvas: {
      oY: 0,
      height: 0
    },
    $O: function (a) {
      return this.qC[a]
    },
    eW: function (a, e) {
      var d = new XODText.Na;
      d.Xg(a);
      e.aJ(d);
      return d.width()
    },
    Am: function (a) {
      if (Object.Dq(this.zm, a)) return this.zm[a];
      a = a.split(" ")[1];
      console.assert(Object.Dq(this.zm, a), "Font " + a + " file not found");
      return this.zm[a]
    },
    pD: function (a, e) {
      var d = new XODText.Ca,
        c = a.nx,
        b = a.SC;
      d.set(b / c, 0, 0, b / c, 0, 0);
      d.aJ(e)
    },
    font: null,
    save: function () {
      var a = new XODText.Ca;
      a.al(ea(this.Ak));
      this.Ak.push(a)
    },
    restore: function () {
      this.Ak.pop()
    },
    transform: function (a, e, d, c, b, f) {
      var g = new XODText.Ca;
      g.set(a, e, d, c, b, f);
      ea(this.Ak).concat(g)
    },
    rotate: function (a) {
      var e = new XODText.Ca,
        d = Math.cos(a);
      a = Math.sin(a);
      e.set(d, a, -a, d, 0, 0);
      ea(this.Ak).concat(e)
    },
    translate: function (a, e) {
      this.vp = a;
      this.ox = e
    },
    setLineDash: function () {},
    fillRect: function () {},
    fillText: function (a, e, d) {
      var c = this.Am(this.font);
      this.ps(a, e, d, c)
    },
    ps: function (a, e, d, c) {
      if (!this.wm) {
        this.translate(e, d);
        e = 0;
        for (d = a.length; e < d;) {
          var b = a.charCodeAt(e),
            f = e;
          55296 <= b && 55551 >= b ? (b = String.fromCodePoint((b - 55296 << 10) + (a.charCodeAt(e + 1) - 56320) + 65536), e += 2) : (b = String.fromCodePoint(b), e++);
          f = this.Du && f in this.Du ? this.Du[f] : b;
          b = c.Hy(b);
          this.pD(c, b);
          var g = b.y1;
          b.y1 = b.y2;
          b.y2 = g;
          b.x1 += this.vp;
          b.x2 += this.vp;
          b.y1 += this.ox;
          b.y2 += this.ox;
          this.vp += b.width();
          g = Array(8);
          g[0] = b.x1;
          g[1] = b.y1;
          g[2] = b.x2;
          g[3] = b.y1;
          g[4] = b.x2;
          g[5] = b.y2;
          g[6] = b.x1;
          g[7] = b.y2;
          ea(this.Ak).bJ(g);
          this.qC[this.$C] = new XODText.yw(f, g);
          this.$C++
        }
        this.Du = null
      }
    },
    measureText: function (a) {
      var e = this.Am(this.font);
      return this.WC(a, e)
    },
    WC: function (a, e) {
      var d = 0;
      if (!this.wm)
        for (var c = 0, b = a.length; c < b;) {
          var f = a.charCodeAt(c);
          55296 <= f && 55551 >= f ? (f = e.Hy(String.fromCodePoint((f - 55296 << 10) + (a.charCodeAt(c + 1) - 56320) + 65536)), c += 2) : (f = e.Hy(String.fromCodePoint(f)), c++);
          this.pD(e, f);
          d += f.width()
        }
      return new XODText.Tz(d)
    },
    strokeRect: function () {},
    lineWidth: 0,
    lineCap: null,
    strokeStyle: null,
    fillStyle: null,
    globalAlpha: 0,
    createLinearGradient: function () {
      return new XODText.Ou
    },
    createRadialGradient: function () {
      return new XODText.Ou
    },
    createPattern: function () {},
    addColorStop: function () {},
    beginPath: function () {},
    closePath: function () {},
    fill: function () {},
    stroke: function () {},
    clip: function () {},
    moveTo: function () {},
    lineTo: function () {},
    quadraticCurveTo: function () {},
    bezierCurveTo: function () {},
    miterLimit: 0,
    lineJoin: null,
    drawImage: function () {},
    setTransform: function () {},
    getImageData: function () {
      return new XODText.ImageData
    },
    putImageData: function () {},
    scale: function () {},
    S: function () {
      this.save()
    },
    r: function () {
      this.restore()
    },
    t: function (a, e, d, c,
      b, f) {
      this.transform(a, e, d, c, b, f)
    },
    ro: function (a) {
      this.rotate(a)
    },
    T: function (a, e) {
      this.translate(a, e)
    },
    w: 0,
    c: null,
    s: null,
    f: null,
    a: 0,
    L: function (a, e, d, c) {
      return this.createLinearGradient(a, e, d, c)
    },
    R: function (a, e, d, c, b, f) {
      return this.createRadialGradient(a, e, d, c, b, f)
    },
    P: function (a, e) {
      this.createPattern(a, e)
    },
    A: function () {},
    b: function () {
      this.beginPath()
    },
    z: function () {
      this.closePath()
    },
    F: function () {
      this.fill()
    },
    X: function () {
      this.stroke()
    },
    cr: function () {
      this.strokeRect()
    },
    C: function () {
      this.clip()
    },
    M: function (a,
      e) {
      this.moveTo(a, e)
    },
    l: function (a, e) {
      this.lineTo(a, e)
    },
    q: function (a, e, d, c) {
      this.quadraticCurveTo(a, e, d, c)
    },
    B: function (a, e, d, c, b, f) {
      this.bezierCurveTo(a, e, d, c, b, f)
    },
    n: null,
    x: function (a, e, d) {
      var c = this.Am(this.font);
      this.ps(a, e, d, c)
    },
    m: function (a) {
      var e = this.Am(this.font);
      return this.WC(a, e)
    },
    i: 0,
    j: null,
    I: function (a, e, d) {
      this.drawImage(a, e, d)
    },
    Z: function (a, e, d, c, b, f) {
      this.setTransform(a, e, d, c, b, f)
    },
    d: function (a, e, d, c) {
      return this.getImageData(a, e, d, c)
    },
    D: function (a, e, d) {
      this.putImageData(a, e, d)
    },
    e: function (a,
      e) {
      this.scale(a, e)
    },
    tm: function (a) {
      this.Du = a
    },
    fillTextCustom: function (a, e, d) {
      var c = this.Am(this.font);
      this.ps(a, e, d, c)
    },
    xc: function (a, e, d) {
      var c = this.Am(this.font);
      this.ps(a, e, d, c)
    },
    cgb: function () {
      console.assert(!this.wm, "Custom Glyphs begin offset is incorrect");
      this.wm = !0
    },
    cge: function () {
      console.assert(this.wm, "Custom Glyphs end offset is incorrect");
      this.wm = !1
    },
    xw: function (a, e, d) {
      1 < a.length && (a = a.substr(0, a.length - 1));
      this.x(a, e, d)
    },
    xcw: function (a, e, d) {
      1 < a.length && (a = a.substr(0, a.length - 1));
      this.xc(a,
        e, d)
    },
    createCanvas: function () {
      return {
        getContext: function () {
          return new XODText.km(this.zm)
        }
      }
    },
    wm: !1
  });
  Object.defineProperties(XODText.km.prototype, {
    n: {
      get: function () {
        return this.font
      },
      set: function (a) {
        this.font = a
      }
    }
  });
  XODText.df = function () {
    this.kf = [];
    this.Xb = [];
    this.Ea = [];
    this.jc = !1;
    this.Em = null
  };
  XODText.df.prototype = {
    clear: function () {
      this.Qa = "";
      this.Xb.clear();
      this.Ea.clear();
      this.jc = !1
    },
    Nb: function () {
      this.Xb = [];
      this.Ea = [];
      this.jc = !1
    },
    rM: function (a) {
      function e(d) {
        for (var c = d.length, b = 0; b < c; b += 8) {
          var f = a.W({
              x: d[b],
              y: d[b + 1]
            }),
            g = a.W({
              x: d[b + 2],
              y: d[b + 3]
            }),
            h = a.W({
              x: d[b + 4],
              y: d[b + 5]
            }),
            e = a.W({
              x: d[b + 6],
              y: d[b + 7]
            }),
            k = new XODText.bb;
          k.kD(f.x, f.y, g.x, g.y, h.x, h.y, e.x, e.y);
          k = k.Vg();
          d[b] = k.x1;
          d[b + 1] = k.y1;
          d[b + 2] = k.x2;
          d[b + 3] = k.y2;
          d[b + 4] = k.x3;
          d[b + 5] = k.y3;
          d[b + 6] = k.x4;
          d[b + 7] = k.y4
        }
      }
      e(this.Ea);
      this.kf.forEach(function (a) {
        e(a.pb);
        a.xb.forEach(function (c) {
          e(c.pb);
          c.Bd.forEach(function (b) {
            e(b)
          })
        })
      })
    },
    ev: function (a) {
      this.Ea = a.Ea;
      this.Xb = a.Xb;
      this.Qa = a.Qa;
      this.jc = a.jc;
      this.kf = function (a, d, c) {
        function b(b, f) {
          return b.slice(f, f + 8)
        }

        function f() {
          var f = new XODText.vb;
          f.Yb = a[k + 1];
          f.ob = r;
          r++;
          var g = a[k + 1];
          f.ha = c.slice(g, g + a[k + 2]);
          f.rp = g;
          for (var g = a[k], h = 0; h < g; ++h) f.Bd.push(b(d, 8 * (f.Yb + h)));
          n && (n.tp = f);
          return n = f
        }

        function g(b) {
          var c = f(),
            g = a[k],
            d = a[k + 3],
            h = a[k + 4],
            l;
          if (d === h) {
            d = Math.min(b.x1, b.x2);
            h = Math.max(b.x1, b.x2);
            l = c.Bd[0];
            b = c.Bd[g -
              1];
            b = [l[1], l[3], l[5], l[7], b[1], b[3], b[5], b[7]];
            l = Math.min.apply(null, b);
            b = Math.max.apply(null, b);
            for (var m = 0; m < g; ++m)
              for (var n = c.Bd[m], r = Math.min(n[0], n[2], n[4]), y = 0; 8 > y; y += 2) n[y] = n[y] === r ? d : h
          } else
            for (l = Math.min(b.y1, b.y2), b = Math.max(b.y1, b.y2), m = 0; m < g; ++m)
              for (n = c.Bd[m], r = Math.min(n[1], n[3], n[5]), y = 1; 8 > y; y += 2) n[y] = n[y] === r ? b : l;
          g = c.pb;
          n = c.Bd[0];
          m = n[2] - n[0];
          n = n[3] - n[1];
          0 < m ? (g[0] = d, g[1] = b, g[2] = h, g[3] = b, g[4] = h, g[5] = l, g[6] = d, g[7] = l) : 0 > m ? (g[0] = d, g[1] = l, g[2] = h, g[3] = l, g[4] = h, g[5] = b, g[6] = d, g[7] = b) : 0 < n ? (g[0] =
            d, g[1] = l, g[2] = d, g[3] = b, g[4] = h, g[5] = b, g[6] = h, g[7] = l) : 0 > n ? (g[0] = h, g[1] = b, g[2] = h, g[3] = l, g[4] = d, g[5] = l, g[6] = d, g[7] = b) : (g[0] = d, g[1] = b, g[2] = h, g[3] = b, g[4] = h, g[5] = l, g[6] = d, g[7] = l);
          k += 5;
          return c
        }

        function h() {
          var c = f();
          c.pb = b(a, k + 3);
          k += 11;
          return c
        }

        function l(f) {
          var c = new XODText.Pb;
          c.ob = f;
          var d = 0 < a[k];
          if (d) {
            var l = 6;
            f = a[k];
            var r = c.pb,
              A = a.slice(k + 2, k + 4),
              B = a.slice(k + 4, k + 6);
            r[0] = A[0];
            r[1] = A[1];
            r[2] = B[0];
            r[3] = A[1];
            r[4] = B[0];
            r[5] = B[1];
            r[6] = A[0];
            r[7] = B[1]
          } else l = 10, f = -a[k], c.pb = b(a, k + 2);
          d = d ? g : h;
          r = new XODText.Na;
          c.rb(r);
          k += l;
          n = null;
          for (l = 0; l < f; ++l) c.xb.push(d(r));
          c.ha = c.xb.map(function (b) {
            return b.ha
          }).join(" ");
          c.rp = c.xb[0] ? c.xb[0].rp : 0;
          m && (m.sp = c);
          return m = c
        }
        var k = 0,
          m = null,
          n = null,
          r = 0;
        return function () {
          var b = [],
            f = a[k];
          k++;
          for (var c = 0; c < f; ++c) b.push(l(c));
          return b
        }()
      }(a.Ya, this.Ea, this.Qa)
    },
    ts: function (a) {
      for (var e = "", d = 0, c, b, f; d < a.length;) c = a.charCodeAt(d), 9 == c ? (e += String.fromCharCode(10), d++) : 128 > c ? (e += String.fromCharCode(c), d++) : 191 < c && 224 > c ? (b = a.charCodeAt(d + 1), e += String.fromCharCode((c & 31) << 6 | b & 63), d += 2) : (b =
        a.charCodeAt(d + 1), f = a.charCodeAt(d + 2), e += String.fromCharCode((c & 15) << 12 | (b & 63) << 6 | f & 63), d += 3);
      return e
    },
    bD: function (a, e) {
      for (var d = new XODText.vb, c = T.Ie.getEnumerator(a.split(",")), b = -1; c.bh();) {
        var f = c.current.split(":"),
          g = parseInt(f[0]),
          h = 0;
        1 < f.length && (h = parseInt(f[1]));
        b === g && (++g, --h);
        for (b = g + h; g <= b; g++) f = e.$O(g), h = f.RC, 1 < h.length && (h = h in XODText.IG ? XODText.IG[h] : h.charAt(0)), d.Xs(h, f.Pc()), this.Xb.add(g), this.Ea.addRange(f.Pc())
      }
      return d
    },
    parse: function (a, e) {
      var d = 0,
        c = 0,
        b = 0;
      do {
        for (var f; a.advance();)
          if (f =
            a.ua(), "F" === f) a.na();
          else if ("P" === f) a.na();
        else if ("L" === f) {
          a.na();
          f = new XODText.Pb;
          f.wp(d++);
          0 < this.kf.length && this.kf[this.kf.length - 1].oI(f);
          this.kf.add(f);
          for (var g = T.Ie.getEnumerator(a.current.textContent.split(" ")); g.bh();) {
            var h = g.current;
            if (0 < f.Tg()) {
              this.Qa += " ";
              this.Xb.add(-1);
              b++;
              var l = Array(8);
              f.$c().Pc(l);
              this.Ea.addRange(l)
            }
            h = this.bD(h, e);
            h.wp(c++);
            h.nD(b);
            f.BD(h);
            this.Qa += h.ha;
            b += h.Wb()
          }
          this.Qa += "\n";
          this.Xb.add(-2);
          b++;
          console.assert(0 < f.Tg(), "No words in line");
          0 < f.Tg() && (l = Array(8),
            f.$c().Pc(l), this.Ea.addRange(l))
        } else console.assert("XML parser has encountered a symbol it can't process.");
        a.Aa()
      } while (a.depth)
    },
    bN: function (a, e) {
      var d = 0,
        c = 0,
        b = 0;
      this.Em = [];
      for (var f = 0; f < a.length; ++f)
        for (var g = a[f], h = 0; h < g.length; ++h)
          for (var l = g[h], k = 0; k < l.length; ++k) {
            var m = new XODText.Pb;
            m.wp(d++);
            0 < this.kf.length && this.kf[this.kf.length - 1].oI(m);
            this.kf.add(m);
            for (var n = T.Ie.getEnumerator(l[k].split(" ")); n.bh();) {
              var r = n.current;
              if (0 < m.Tg()) {
                this.Em.push(this.Qa.length);
                this.Qa += " ";
                this.Xb.add(-1);
                b++;
                var q = Array(8);
                m.$c().Pc(q);
                this.Ea.addRange(q)
              }
              r = this.bD(r, e);
              r.wp(c++);
              r.nD(b);
              m.BD(r);
              this.Qa += r.ha;
              b += r.Wb()
            }
            this.Em.push(this.Qa.length);
            this.Qa += "\n";
            this.Xb.add(-2);
            b++;
            console.assert(0 < m.Tg(), "No words in line");
            0 < m.Tg() && (q = Array(8), m.$c().Pc(q), this.Ea.addRange(q))
          }
      this.jc = !0
    },
    pA: function (a, e) {
      try {
        var d = new window.Je(a);
        console.assert("TextData" === d.ua(), "XML parser has encountered a symbol it can't process.");
        "TextData" === d.ua() && (d.na(), this.parse(d, e))
      } catch (c) {
        console.warn("TextSelection has encountered an error: " +
          c.message);
        return
      }
      this.jc = !0
    },
    ready: function () {
      return this.jc
    },
    kq: function () {
      return this.kf.length ? this.kf[0] : new XODText.Pb
    },
    Re: function () {
      return this.Ea
    },
    Qa: "",
    Xb: null,
    Ea: null,
    jc: !1
  };
  XODText.Pb = function () {
    this.xb = [];
    this.ob = -1;
    this.sc = [];
    this.pb = Array(8);
    this.sp = null
  };
  XODText.Pb.prototype = {
    Nb: function () {
      this.ob = this.Jc = -1;
      this.sc = []
    },
    ta: function (a) {
      return this.ob === a.ob
    },
    Tg: function () {
      return this.xb.length
    },
    Jb: function () {
      return this.xb.length ? this.xb[0] : new XODText.vb
    },
    $c: function () {
      return this.xb.length ? this.xb[this.xb.length - 1] : new XODText.vb
    },
    YF: function (a) {
      return 0 > a || a >= this.Tg() ? new XODText.vb : this.xb[a]
    },
    ve: function () {
      return null == this.sp ? new XODText.Pb : this.sp
    },
    rb: function (a) {
      a.Fl(this.pb)
    },
    wp: function (a) {
      this.ob = a
    },
    Rg: function () {
      if (this.sc.length) return this.sc[0];
      var a = new XODText.ca,
        e = new XODText.ca,
        d = this.Jb(),
        c = this.$c(),
        b = Array(8),
        f = Array(8);
      d.md(0, b);
      a.x = (b[0] + b[2] + b[4] + b[6]) / 4;
      a.y = (b[1] + b[3] + b[5] + b[7]) / 4;
      c.md(c.Wb() - 1, f);
      e.x = (f[0] + f[2] + f[4] + f[6]) / 4;
      e.y = (f[1] + f[3] + f[5] + f[7]) / 4;
      .01 > Math.abs(a.x - e.x) && .01 > Math.abs(a.y - e.y) && this.sc.add(0);
      a = Math.atan2(e.y - a.y, e.x - a.x);
      a *= 180 / 3.1415926;
      0 > a && (a += 360);
      this.sc.add(a);
      return 0
    },
    ha: "",
    Da: null,
    ob: 0,
    sc: null,
    pb: null,
    sp: null,
    oI: function (a) {
      this.sp = a
    },
    BD: function (a) {
      0 < this.xb.length && this.xb[this.xb.length - 1].kT(a);
      this.xb.add(a);
      var e = String.xu(this.ha),
        d = Array(8);
      a.Pc(d);
      if (e)
        for (e = 0; 8 > e; e++) this.pb[e] = d[e];
      else this.ha += " ", XODText.bb.Is(this.pb, d, !1, 0);
      this.ha += a.ha
    }
  };
  XODText.vb = function () {
    this.Bd = [];
    this.ob = this.Yb = -1;
    this.pb = Array(8);
    this.tp = null
  };
  XODText.vb.prototype = {
    Nb: function () {
      this.ob = this.Yb = -1
    },
    ta: function (a) {
      return this.ob === a.ob
    },
    Wb: function () {
      return this.Bd.length
    },
    cg: function () {
      return this.ha.length
    },
    $a: function () {
      return this.rp
    },
    nD: function (a) {
      this.rp = a
    },
    Yd: function () {
      return null == this.tp ? new XODText.vb : this.tp
    },
    un: function (a, e) {
      if (this.Bd && this.Bd[a]) {
        var d = this.Bd[a][0],
          c = this.Bd[a][2],
          b = this.Bd[a][1],
          f = this.Bd[a][5];
        b < f ? (e[1] = f, e[3] = f, e[5] = b, e[7] = b) : (e[1] = b, e[3] = b, e[5] = f, e[7] = f);
        e[0] = d;
        e[2] = c;
        e[4] = c;
        e[6] = d
      } else exports.utils.warn("default",
        "getGlyphQuadInWordQuadFormat: No glyph with index " + a + " found.")
    },
    md: function (a, e) {
      for (var d = 0; 8 > d; d++) e[d] = this.Bd[a][d]
    },
    Pc: function (a) {
      for (var e = 0; 8 > e; e++) a[e] = this.pb[e]
    },
    rb: function (a) {
      var e = new XODText.Na;
      e.Fl(this.pb);
      a[0] = e.x1;
      a[1] = e.y1;
      a[2] = e.x2;
      a[3] = e.y2
    },
    wp: function (a) {
      this.ob = this.Yb = a
    },
    Yb: 0,
    ha: "",
    Da: null,
    ob: 0,
    rp: 0,
    pb: null,
    tp: null,
    Xs: function (a, e) {
      var d = String.xu(this.ha);
      this.ha += a;
      for (var c = Array(8), b = 0; 8 > b; b++) c[b] = e[b];
      for (b = 0; b < a.length; ++b) this.Bd.add(c);
      if (d)
        for (b = 0; 8 > b; b++) this.pb[b] =
          c[b];
      else XODText.bb.Is(this.pb, c, !1, 0)
    },
    kT: function (a) {
      this.tp = a
    }
  };
  XODTextOld.df = function () {};
  XODTextOld.df.prototype = {
    clear: function () {
      this.Ya.clear();
      this.Qa = "";
      this.Xb.clear();
      this.Ea.clear();
      this.jc = !1
    },
    Nb: function () {
      this.Ya = [];
      this.Xb = [];
      this.Ea = [];
      this.jc = !1
    },
    ts: function (a) {
      for (var e = "", d = 0, c, b, f; d < a.length;) c = a.charCodeAt(d), 9 == c ? (e += String.fromCharCode(10), d++) : 128 > c ? (e += String.fromCharCode(c), d++) : 191 < c && 224 > c ? (b = a.charCodeAt(d + 1), e += String.fromCharCode((c & 31) << 6 | b & 63), d += 2) : (b = a.charCodeAt(d + 1), f = a.charCodeAt(d + 2), e += String.fromCharCode((c & 15) << 12 | (b & 63) << 6 | f & 63), d += 3);
      return e
    },
    nQ: function (a) {
      this.Ya = [];
      this.Xb = [];
      this.Ea = [];
      this.jc = !1;
      try {
        var e = new window.Je(a);
        this.Qa = "";
        e.na();
        if (!e.advance()) return;
        var d = e.current.textContent;
        this.Qa = d = this.ts(d);
        this.Xb.clear();
        e.advance();
        for (var d = e.current.textContent, c = d.split(","), b = T.Ie.getEnumerator(c); b.bh();) {
          var f = b.current;
          try {
            var g = parseInt(f.trim());
            this.Xb.add(g)
          } catch (p) {}
        }
        this.Ya.clear();
        e.advance();
        for (var d = e.current.textContent, c = d.split(","), h = T.Ie.getEnumerator(c); h.bh();) {
          f = h.current;
          try {
            g = parseFloat(f.trim()),
              this.Ya.add(g)
          } catch (p) {}
        }
        this.Ea.clear();
        e.advance();
        d = e.current.textContent;
        c = d.split(",");
        a = [];
        for (var e = [], d = 0, l = T.Ie.getEnumerator(c); l.bh();) {
          f = l.current;
          switch (f) {
            case "Q":
              d = 1;
              break;
            case "R":
              d = 2;
              break;
            case "S":
              d = 3;
              break;
            default:
              d = 0
          }
          if (d) a.add(0), e.add(d);
          else try {
            g = parseFloat(f.trim()), a.add(g), e.add(d)
          } catch (p) {
            return
          }
        }
        for (var d = 0, k = a.length, m, n, r, q, l = f = c = 0; l < k;) {
          var v = e[l];
          if (0 < v) d = v, ++l, 3 === d && (c = a[l], f = a[l + 1], l += 2);
          else if (1 === d)
            for (g = 0; 8 > g; ++g) this.Ea.add(a[l++]);
          else 2 === d ? (m = a[l++],
            n = a[l++], r = a[l++], q = a[l++], this.Ea.add(m), this.Ea.add(n), this.Ea.add(r), this.Ea.add(n), this.Ea.add(r), this.Ea.add(q), this.Ea.add(m), this.Ea.add(q)) : 3 === d && (m = a[l++], n = c, r = a[l++], q = f, this.Ea.add(m), this.Ea.add(n), this.Ea.add(r), this.Ea.add(n), this.Ea.add(r), this.Ea.add(q), this.Ea.add(m), this.Ea.add(q))
        }
      } catch (p) {
        return
      }
      this.Qa.length && this.Qa.length === this.Xb.length && 8 * this.Qa.length === this.Ea.length && (this.jc = !0)
    },
    ready: function () {
      return this.jc
    },
    kq: function () {
      var a = new XODTextOld.Pb;
      if (!this.Ya.length) return a.Te(this.Ya,
        -1, this.Qa, this.Ea, 0), a;
      a.Te(this.Ya, 1, this.Qa, this.Ea, 1);
      return a
    },
    Re: function () {
      return this.Ea
    },
    Ya: null,
    Qa: null,
    Xb: null,
    Ea: null,
    jc: !1
  };
  XODTextOld.Pb = function () {};
  XODTextOld.Pb.prototype = {
    Nb: function () {
      this.Jc = -1;
      this.ob = 0;
      this.sc = []
    },
    Te: function (a, e, d, c, b) {
      this.Jc = e;
      this.ob = b;
      this.sc = [];
      this.Ad = a;
      this.ha = d;
      this.Da = c
    },
    ta: function (a) {
      return this.Jc === a.Jc
    },
    Tg: function () {
      return Math.abs(this.Ad[this.Jc])
    },
    Xh: function () {
      return 0 < this.Ad[this.Jc]
    },
    Jb: function () {
      var a = new XODTextOld.vb;
      a.Te(this.Ad, this.Jc + (this.Xh() ? 6 : 10), this.Jc, this.ha, this.Da, 1);
      return a
    },
    YF: function (a) {
      if (0 > a || a >= this.Tg()) {
        var e = new XODTextOld.vb;
        e.Te(this.Ad, -1, -1, this.ha, this.Da, 0)
      } else {
        var d =
          this.Xh() ? 6 : 10,
          c = this.Xh() ? 5 : 11,
          e = new XODTextOld.vb;
        e.Te(this.Ad, this.Jc + d + c * a, this.Jc, this.ha, this.Da, 1 + a)
      }
      return e
    },
    ve: function () {
      var a = this.Jc + parseInt(this.Ad[this.Jc + 1]);
      if (a >= this.Ad.length) {
        var e = new XODTextOld.Pb;
        e.Te(this.Ad, -1, this.ha, this.Da, 0)
      } else e = new XODTextOld.Pb, e.Te(this.Ad, a, this.ha, this.Da, this.ob + 1);
      return e
    },
    rb: function (a) {
      if (this.Xh()) a.x1 = this.Ad[this.Jc + 2 + 0], a.y1 = this.Ad[this.Jc + 2 + 1], a.x2 = this.Ad[this.Jc + 2 + 2], a.y2 = this.Ad[this.Jc + 2 + 3];
      else {
        for (var e = 1.79769E308, d = XODText.Zc.Ai,
            c = 1.79769E308, b = XODText.Zc.Ai, f = 0; 4 > f; ++f) var g = this.Ad[this.Jc + 2 + 2 * f],
          h = this.Ad[this.Jc + 2 + 2 * f + 1],
          e = Math.min(e, g),
          d = Math.max(d, g),
          c = Math.min(c, h),
          b = Math.max(b, h);
        a.x1 = e;
        a.y1 = c;
        a.x2 = d;
        a.y2 = b
      }
    },
    Rg: function () {
      if (this.sc.length) return this.sc[0];
      var a = new XODText.ca,
        e = new XODText.ca,
        d = new XODTextOld.vb;
      d.Nb();
      var c = this.Jb(),
        b = new XODTextOld.vb;
      b.Nb();
      for (var f = this.Jb(); !f.ta(d); f = f.Yd()) b = f;
      d = Array(8);
      f = Array(8);
      c.md(0, d);
      a.x = (d[0] + d[2] + d[4] + d[6]) / 4;
      a.y = (d[1] + d[3] + d[5] + d[7]) / 4;
      b.md(b.Wb() - 1, f);
      e.x =
        (f[0] + f[2] + f[4] + f[6]) / 4;
      e.y = (f[1] + f[3] + f[5] + f[7]) / 4;
      .01 > Math.abs(a.x - e.x) && .01 > Math.abs(a.y - e.y) && this.sc.add(0);
      a = Math.atan2(e.y - a.y, e.x - a.x);
      a *= 180 / 3.1415926;
      0 > a && (a += 360);
      this.sc.add(a);
      return 0
    },
    Jc: 0,
    Ad: null,
    ha: null,
    Da: null,
    ob: 0,
    sc: null
  };
  XODTextOld.vb = function () {};
  XODTextOld.vb.prototype = {
    Nb: function () {
      this.uh = this.Yb = -1;
      this.ob = 0
    },
    Te: function (a, e, d, c, b, f) {
      this.Yb = e;
      this.uh = d;
      this.Ya = a;
      this.ha = c;
      this.Da = b;
      this.ob = f
    },
    ta: function (a) {
      return this.Yb === a.Yb
    },
    Wb: function () {
      return parseInt(this.Ya[this.Yb])
    },
    cg: function () {
      return parseInt(this.Ya[this.Yb + 2])
    },
    $a: function () {
      return parseInt(this.Ya[this.Yb + 1])
    },
    Xh: function () {
      return 0 < this.Ya[this.uh]
    },
    oP: function () {
      return Math.abs(this.Ya[this.uh])
    },
    Yd: function () {
      var a = this.Xh(),
        e = a ? 5 : 11;
      this.Yb >= this.uh + (a ? 6 : 10) + (this.oP() -
        1) * e ? (a = new XODTextOld.vb, a.Te(this.Ya, -1, -1, this.ha, this.Da, 0)) : (a = new XODTextOld.vb, a.Te(this.Ya, this.Yb + e, this.uh, this.ha, this.Da, this.ob + 1));
      return a
    },
    PO: function (a) {
      var e = this.Wb();
      return 0 > a || a >= e ? -1 : parseInt(this.Ya[this.Yb + 1]) + a
    },
    md: function (a, e) {
      var d = this.PO(a);
      if (!(0 > d)) {
        var c = new XODTextOld.Pb;
        c.Te(this.Ya, this.uh, this.ha, this.Da, 0);
        if (c.Xh()) {
          var b = new XODText.Na;
          c.rb(b);
          c = b.y1 < b.y2 ? b.y1 : b.y2;
          b = b.y1 > b.y2 ? b.y1 : b.y2;
          d *= 8;
          e[0] = this.Da[d];
          e[1] = c;
          e[2] = this.Da[d + 2];
          e[3] = e[1];
          e[4] = this.Da[d +
            4];
          e[5] = b;
          e[6] = this.Da[d + 6];
          e[7] = e[5]
        } else
          for (d *= 8, c = 0; 8 > c; ++c) e[c] = this.Da[d + c]
      }
    },
    Pc: function (a) {
      var e = new XODTextOld.Pb;
      e.Te(this.Ya, this.uh, this.ha, this.Da, 0);
      if (e.Xh()) {
        var d = this.Ya[this.Yb + 3],
          c = this.Ya[this.Yb + 4];
        if (d > c) {
          var b;
          b = d;
          d = c;
          c = b
        }
        b = new XODText.Na;
        e.rb(b);
        e = b.y1 < b.y2 ? b.y1 : b.y2;
        b = b.y1 > b.y2 ? b.y1 : b.y2;
        a[0] = d;
        a[1] = e;
        a[2] = c;
        a[3] = e;
        a[4] = c;
        a[5] = b;
        a[6] = d;
        a[7] = b
      } else
        for (d = this.Yb + 3, c = 0; 8 > c; ++c) a[c] = this.Ya[d + c]
    },
    rb: function (a) {
      var e = new XODTextOld.Pb;
      e.Te(this.Ya, this.uh, this.ha, this.Da, 0);
      if (e.Xh()) {
        var d = this.Ya[this.Yb + 3],
          c = this.Ya[this.Yb + 4];
        if (d > c) {
          var b;
          b = d;
          d = c;
          c = b
        }
        b = new XODText.Na;
        e.rb(b);
        e = b.y1 < b.y2 ? b.y1 : b.y2;
        b = b.y1 > b.y2 ? b.y1 : b.y2
      } else {
        d = 1.79769E308;
        c = XODText.Zc.Ai;
        e = 1.79769E308;
        b = XODText.Zc.Ai;
        for (var f = this.Yb + 3, g = 0; 4 > g; ++g) {
          var h = this.Ya[f + 2 * g],
            l = this.Ya[f + 2 * g + 1],
            d = Math.min(d, h),
            c = Math.max(c, h),
            e = Math.min(e, l);
          b = Math.max(b, l)
        }
      }
      a[0] = d;
      a[1] = e;
      a[2] = c;
      a[3] = b
    },
    Yb: 0,
    uh: 0,
    Ya: null,
    ha: null,
    Da: null,
    ob: 0
  };
  XODText.Na = function () {
    this.y2 = this.x2 = this.y1 = this.x1 = 0
  };
  XODText.Na.prototype = {
    Ha: function (a, e, d, c) {
      this.x1 = a;
      this.y1 = e;
      this.x2 = d;
      this.y2 = c
    },
    Xg: function (a) {
      this.x1 = a.x1;
      this.y1 = a.y1;
      this.x2 = a.x2;
      this.y2 = a.y2
    },
    normalize: function () {
      if (this.x1 > this.x2) {
        var a;
        a = this.x1;
        this.x1 = this.x2;
        this.x2 = a
      }
      this.y1 > this.y2 && (a = this.y1, this.y1 = this.y2, this.y2 = a)
    },
    set: function (a, e, d, c) {
      this.x1 = a;
      this.y1 = e;
      this.x2 = d;
      this.y2 = c
    },
    Nq: function (a) {
      return this.x2 < a.x1 || this.x1 > a.x2 || this.y2 < a.y1 || this.y1 > a.y2
    },
    width: function () {
      var a = this.x2 - this.x1;
      return 0 > a ? -a : a
    },
    height: function () {
      var a =
        this.y2 - this.y1;
      return 0 > a ? -a : a
    },
    Fl: function (a) {
      for (var e = 1.79769E308, d = XODText.Zc.Ai, c = 1.79769E308, b = XODText.Zc.Ai, f = 0; 4 > f; ++f) var g = a[2 * f],
        h = a[2 * f + 1],
        e = Math.min(e, g),
        d = Math.max(d, g),
        c = Math.min(c, h),
        b = Math.max(b, h);
      this.x1 = e;
      this.y1 = c;
      this.x2 = d;
      this.y2 = b
    },
    su: function (a, e) {
      var d, c, b, f, g, h, l, k;
      a.x1 < a.x2 ? (d = a.x1, c = a.x2) : (d = a.x2, c = a.x1);
      a.y1 < a.y2 ? (b = a.y1, f = a.y2) : (b = a.y2, f = a.y1);
      e.x1 < e.x2 ? (g = e.x1, h = e.x2) : (g = e.x2, h = e.x1);
      e.y1 < e.y2 ? (l = e.y1, k = e.y2) : (l = e.y2, k = e.y1);
      if (c < g || h < d || f < l || k < b) return this.x1 = this.x2 =
        this.y1 = this.y2 = 0, !1;
      this.x1 = d < g ? g : d;
      this.x2 = c < h ? c : h;
      this.y1 = b < l ? l : b;
      this.y2 = f < k ? f : k;
      return this.x1 === this.x2 || this.y1 === this.y2 ? (this.x1 = this.x2 = this.y1 = this.y2 = 0, !1) : !0
    },
    mQ: function (a) {
      this.AL(a, a)
    },
    AL: function (a, e) {
      this.normalize();
      this.x1 -= a;
      this.x2 += a;
      this.y1 -= e;
      this.y2 += e
    },
    union: function (a) {
      a.x1 < this.x1 && (this.x1 = a.x1);
      a.y1 < this.y1 && (this.y1 = a.y1);
      a.x2 > this.x2 && (this.x2 = a.x2);
      a.y2 > this.y2 && (this.y2 = a.y2)
    },
    contains: function (a, e) {
      if (this.x1 < this.x2) {
        if (a < this.x1 || a > this.x2) return !1
      } else if (a <
        this.x2 || a > this.x1) return !1;
      if (this.y1 < this.y2) {
        if (e < this.y1 || e > this.y2) return !1
      } else if (e < this.y2 || e > this.y1) return !1;
      return !0
    },
    x1: 0,
    y1: 0,
    x2: 0,
    y2: 0
  };
  XODText.ca = function (a, e) {
    this.x = a;
    this.y = e
  };
  XODText.ca.ta = function (a, e) {
    return a.x === e.x && a.y === e.y
  };
  XODText.ca.EX = function (a, e) {
    return a !== e
  };
  XODText.ca.CE = function (a) {
    var e = new XODText.ca;
    e.x = a.x / 2;
    e.y = a.y / 2;
    return e
  };
  XODText.ca.multiply = function (a, e) {
    var d = new XODText.ca;
    d.init(a.x * e, a.y * e);
    return d
  };
  XODText.ca.jg = function (a, e) {
    var d = new XODText.ca;
    d.init(a.x - e.x, a.y - e.y);
    return d
  };
  XODText.ca.Zn = function (a, e) {
    var d = new XODText.ca;
    d.init(a.x + e.x, a.y + e.y);
    return d
  };
  XODText.ca.distance = function (a, e) {
    var d = a.x - e.x,
      c = a.y - e.y;
    return Math.sqrt(d * d + c * c)
  };
  XODText.ca.prototype = {
    x: 0,
    y: 0,
    init: function (a, e) {
      this.x = a;
      this.y = e
    },
    ru: function (a) {
      this.x = a.x;
      this.y = a.y
    },
    add: function (a) {
      this.x += a.x;
      this.y += a.y
    },
    sub: function (a) {
      this.x -= a.x;
      this.y -= a.y
    },
    normalize: function () {
      var a = Math.sqrt(this.x * this.x + this.y * this.y);
      return a ? (this.x /= a, this.y /= a, !0) : !1
    },
    length: function () {
      return Math.sqrt(this.x * this.x + this.y * this.y)
    },
    Ub: function (a) {
      return this.x * a.x + this.y * a.y
    }
  };
  XODText.Zc.Ma("XODText.doubleData");
  XODText.yw.Ma("XODText.Letter");
  XODText.Tz.Ma("XODText.nsIDOMTextMetrics");
  XODText.Ou.Ma("XODText.nsIDOMCanvasGradient");
  XODText.km.Ma("XODText.SelectionContext");
  XODText.df.Ma("XODText.SelectionInfo");
  XODText.Pb.Ma("XODText.Line");
  XODText.vb.Ma("XODText.Word");
  XODText.Na.Ma("XODText.SelectionRect");
  XODText.ca.Ma("XODText.SelectionPoint");
  XODText.Zc.Yj = 1.79769E308;
  XODText.Zc.Ai = -1.79769E308;
  (function () {
    self.qc.ov("XODText");
    XODText.xs = function () {};
    XODText.xd = function (a, d) {
      this.x = a;
      this.y = d
    };
    XODText.xd.prototype = {
      x: 0,
      y: 0
    };
    XODText.bb = function () {
      this.Ql = this.Ol = this.Pl = this.Nl = this.y2 = this.x2 = this.y1 = this.x1 = 0
    };
    var a = RegExp("[-[\\]{}()*+?.,\\\\^$|#\\s]", "g");
    XODText.Ew = function (e, d) {
      this.AG = d && ("r" === d || "w" === d);
      this.text = d && "w" === d ? e.replace(/(\*+|.)/g, function (c) {
        return "*" === c.charAt(0) ? 1 == c.length ? ".*?" : "*".repeat(c.length / 2 | 0).replace(a, "\\$&") : c.replace(a, "\\$&")
      }) : e
    };
    XODText.bb.Is =
      function (a, d, c, b) {
        var f = new XODText.ca;
        f.init(0, 0);
        var g = new XODText.ca;
        g.init(0, 0);
        var h = new XODText.ca;
        h.init(0, 0);
        var l = new XODText.ca;
        l.init(0, 0);
        for (var k = 0; 4 > k; ++k) {
          XODText.bb.TF(f, a, k);
          if (!f.normalize() && c) return !1;
          k ? 2 === k ? h = XODText.ca.jg(h, f) : 1 === k ? l = XODText.ca.Zn(l, f) : 3 === k && (l = XODText.ca.jg(l, f)) : h = XODText.ca.Zn(h, f);
          for (var m = Array(8), n = 0; 1 > n; ++n) {
            for (var r = 0; 8 > r; ++r) m[r] = d[8 * n + r];
            XODText.bb.TF(g, m, k);
            if (!g.normalize() && c) return !1;
            k ? 2 === k ? h = XODText.ca.jg(h, g) : 1 === k ? l = XODText.ca.Zn(l, g) :
              3 === k && (l = XODText.ca.jg(l, g)) : h = XODText.ca.Zn(h, g)
          }
          if (c && Math.abs(f.Ub(g)) < XODText.bb.eN) return !1
        }
        h = XODText.ca.CE(h);
        l = XODText.ca.CE(l);
        if (!h.normalize() && c || !l.normalize() && c || c && !XODText.bb.iR(a, d, h, l, b, b / 10)) return !1;
        XODText.bb.inflate(a, d, 1, h, l);
        return !0
      };
    XODText.bb.TF = function (a, d, c) {
      var b = (c + 1) % 4;
      a.x = d[2 * b] - d[2 * c];
      a.y = d[2 * b + 1] - d[2 * c + 1]
    };
    XODText.bb.iR = function (a, d, c, b, f, g) {
      var h = new XODText.ca;
      h.init(a[0], a[1]);
      var l = new XODText.ca;
      l.init(a[2], a[3]);
      var k = new XODText.ca;
      k.init(d[0], d[1]);
      var m =
        new XODText.ca;
      m.init(d[2], d[3]);
      var n = h.Ub(c),
        r = l.Ub(c),
        q = k.Ub(c);
      c = m.Ub(c);
      if (n > r) var v = n,
        n = r,
        r = v;
      q > c && (v = q, q = c, c = v);
      if (q - r > f || n - c > f) return !1;
      h.x = a[2];
      h.y = a[3];
      l.x = a[4];
      l.y = a[5];
      k.x = d[2];
      k.y = d[3];
      m.x = d[4];
      m.y = d[5];
      n = h.Ub(b);
      r = l.Ub(b);
      q = k.Ub(b);
      c = m.Ub(b);
      n > r && (v = n, n = r, r = v);
      q > c && (v = q, q = c, c = v);
      return Math.abs(n - q) > g || Math.abs(r - c) > g ? !1 : !0
    };
    XODText.bb.inflate = function (a, d, c, b, f) {
      var g = !1;
      avx_ = new XODText.ca;
      avx_.init(1, 0);
      avy_ = new XODText.ca;
      avy_.init(0, 1);
      if (1E-4 <= Math.abs(b.x - 1) || 1E-4 <= Math.abs(b.y -
          0) && 1E-4 <= Math.abs(f.x - 0) || 1E-4 <= Math.abs(f.y - 1)) {
        var g = !0,
          h = new XODText.Ca;
        h.Ha(b.x, f.x, b.y, f.y, 0, 0);
        h = h.inverse();
        avx_.x = h.m_a;
        avx_.y = h.m_b;
        avy_.x = h.m_c;
        avy_.y = h.m_d
      }
      for (var h = XODText.Zc.Yj, l = XODText.Zc.Ai, k = XODText.Zc.Yj, m = XODText.Zc.Ai, n, r, q = 0, v = 0, p = 0; 4 > p; ++p) {
        var u = new XODText.ca;
        u.init(a[2 * p], a[2 * p + 1]);
        g ? (n = u.Ub(avx_), r = u.Ub(avy_)) : (n = u.x, r = u.y);
        p ? (h > n && (h = n, q = u.x), l < n && (l = n), k > r && (k = r, v = u.y), m < r && (m = r)) : (h = l = n, k = m = r, q = u.x, v = u.y);
        for (u = 0; u < c; ++u) {
          var w = new XODText.ca;
          w.init(d[8 * u + 2 * p], d[8 * u +
            2 * p + 1]);
          g ? (n = w.Ub(avx_), r = w.Ub(avy_)) : (n = w.x, r = w.y);
          h > n && (h = n, q = w.x);
          l < n && (l = n);
          k > r && (k = r, v = w.y);
          m < r && (m = r)
        }
      }
      d = new XODText.ca;
      d.init(q, v);
      q = d.Ub(f);
      c = XODText.ca.multiply(b, h - d.Ub(b));
      q = XODText.ca.multiply(f, k - q);
      d.x += c.x + q.x;
      d.y += c.y + q.y;
      g ? (g = b.x, d = f.x, b = b.y, f = f.y, a[0] = g * h + d * k, a[1] = b * h + f * k, a[2] = g * l + d * k, a[3] = b * l + f * k, a[4] = g * l + d * m, a[5] = b * l + f * m, a[6] = g * h + d * m, a[7] = b * h + f * m) : (a[0] = h, a[1] = k, a[2] = l, a[3] = k, a[4] = l, a[5] = m, a[6] = h, a[7] = m)
    };
    XODText.bb.prototype = {
      _init: function (a, d, c, b, f, g, h, l) {
        this.x1 = a;
        this.y1 =
          d;
        this.x2 = c;
        this.y2 = b;
        this.Nl = f;
        this.Pl = g;
        this.Ol = h;
        this.Ql = l
      },
      kD: function (a, d, c, b, f, g, h, l) {
        this.x1 = a;
        this.y1 = d;
        this.x2 = c;
        this.y2 = b;
        this.Nl = f;
        this.Pl = g;
        this.Ol = h;
        this.Ql = l
      },
      Vg: function () {
        return {
          x1: this.x1,
          y1: this.y1,
          x2: this.x2,
          y2: this.y2,
          x3: this.Nl,
          y3: this.Pl,
          x4: this.Ol,
          y4: this.Ql
        }
      },
      bP: function () {
        var a = this.Vg(),
          d = Math.min(a.x1, a.x2, a.x3, a.x4),
          c = Math.max(a.x1, a.x2, a.x3, a.x4),
          b = Math.min(a.y1, a.y2, a.y3, a.y4),
          f = Math.max(a.y1, a.y2, a.y3, a.y4);
        a.x1 = d;
        a.x2 = c;
        a.x3 = c;
        a.x4 = d;
        a.y1 = b;
        a.y2 = b;
        a.y3 = f;
        a.y4 = f;
        return a
      },
      x1: 0,
      y1: 0,
      x2: 0,
      y2: 0,
      Nl: 0,
      Pl: 0,
      Ol: 0,
      Ql: 0
    };
    XODText.Ca = function () {};
    XODText.Ca.Al = function (a) {
      var d = Math.cos(a);
      a = Math.sin(a);
      1E-7 > Math.abs(a) && (a = 0);
      1E-7 > Math.abs(d) && (d = 0);
      var c = new XODText.Ca;
      c.Ha(d, -a, a, d, 0, 0);
      return c
    };
    XODText.Ca.prototype = {
      m_a: 0,
      m_b: 0,
      m_c: 0,
      m_d: 0,
      m_h: 0,
      m_v: 0,
      al: function (a) {
        this.m_a = a.m_a;
        this.m_b = a.m_b;
        this.m_c = a.m_c;
        this.m_d = a.m_d;
        this.m_h = a.m_h;
        this.m_v = a.m_v
      },
      Ha: function (a, d, c, b, f, g) {
        this.m_a = a;
        this.m_b = d;
        this.m_c = c;
        this.m_d = b;
        this.m_h = f;
        this.m_v = g
      },
      set: function (a, d, c, b, f, g) {
        this.m_a =
          a;
        this.m_b = d;
        this.m_c = c;
        this.m_d = b;
        this.m_h = f;
        this.m_v = g
      },
      inverse: function () {
        var a = new XODText.Ca,
          d = this.m_a * this.m_d - this.m_b * this.m_c;
        if (!d) return a;
        a.m_a = this.m_d / d;
        a.m_c = -this.m_c / d;
        a.m_h = (this.m_c * this.m_v - this.m_h * this.m_d) / d;
        a.m_b = -this.m_b / d;
        a.m_d = this.m_a / d;
        a.m_v = -(this.m_a * this.m_v - this.m_h * this.m_b) / d;
        return a
      },
      W: function (a) {
        var d = a.x;
        a.x = a.x * this.m_a + a.y * this.m_c + this.m_h;
        a.y = d * this.m_b + a.y * this.m_d + this.m_v;
        return a
      },
      concat: function (a) {
        var d = this.m_a,
          c = this.m_b,
          b = this.m_c,
          f = this.m_d;
        this.m_a = a.m_a * d + a.m_b * b;
        this.m_b = a.m_a * c + a.m_b * f;
        this.m_c = a.m_c * d + a.m_d * b;
        this.m_d = a.m_c * c + a.m_d * f;
        this.m_h = a.m_h * d + a.m_v * b + this.m_h;
        this.m_v = a.m_h * c + a.m_v * f + this.m_v
      },
      SE: function (a) {
        return this.m_a == a.m_a && this.m_b == a.m_b && this.m_c == a.m_c && this.m_d == a.m_d && this.m_h == a.m_h && this.m_v == a.m_v
      },
      bJ: function (a) {
        var d = new XODText.xd(a[0], a[1]),
          c = new XODText.xd(a[2], a[3]),
          b = new XODText.xd(a[4], a[5]),
          f = new XODText.xd(a[6], a[7]),
          d = this.W(d),
          c = this.W(c),
          b = this.W(b),
          f = this.W(f);
        a[0] = d.x;
        a[1] = d.y;
        a[2] = c.x;
        a[3] =
          c.y;
        a[4] = b.x;
        a[5] = b.y;
        a[6] = f.x;
        a[7] = f.y
      },
      aJ: function (a) {
        var d = Array(8);
        d[0] = a.x1;
        d[1] = a.y1;
        d[2] = a.x2;
        d[3] = a.y1;
        d[4] = a.x2;
        d[5] = a.y2;
        d[6] = a.x1;
        d[7] = a.y2;
        this.bJ(d);
        a.Fl(d)
      }
    };
    XODText.np = function () {};
    XODText.np.mL = function (a, d) {
      return a.Wc < d.Wc || a.Wc === d.Wc && a._position < d._position || a.Wc === d.Wc && a._position === d._position && a.xk < d.xk ? -1 : a.Wc === d.Wc && a._position === d._position && a.xk === d.xk ? 0 : 1
    };
    XODText.np.prototype = {
      _init: function () {
        this.Ds = []
      },
      _add: function (a) {
        this.Ds.add(a)
      },
      _clear: function () {
        this.Ds.clear()
      },
      nL: function (a, d) {
        d.clear();
        for (var c = [], b = T.Ie.getEnumerator(this.Ds); b.bh();) {
          var f = b.current;
          c.add(f)
        }
        c.sort(XODText.np.mL);
        for (var b = "", g, h = [], l = [], k = XODText.xs.PB, m = 0; m < c.length; ++m)
          if (f = c[m], !(0 > f.Wc || f.Wc >= a.length || 0 > f._position || 0 >= f.xk)) {
            if (-1 !== f.Wc) {
              h = a[f.Wc].text;
              if (!h.ready()) return !1;
              b = h.Qa;
              g = h.Xb;
              h = h.Re();
              if (!b.length || b.length !== g.length || 8 * b.length !== h.length) continue;
              for (var k = XODText.xs.PB, n = T.Ie.getEnumerator(g); n.bh();) {
                var r = n.current;
                r > k && (k = r)
              }
              l.clear();
              for (var q = 0; q < k + 1; ++q) l.add(-1);
              for (q = 0; q < g.length; ++q) n = g[q], 0 <= n && (l[n] = q)
            }
            g = Array(8);
            for (n = f._position; n < f._position + f.xk && !(n > k); ++n)
              if (r = l[n], !(0 > r)) {
                for (q = 0; 8 > q; ++q) g[q] = h[8 * r + q];
                var v = !1;
                if (1 <= d.length && (q = d[d.length - 1], q.Wc === f.Wc)) {
                  var p = g[0] - g[2],
                    u = g[1] - g[3];
                  XODText.bb.Is(q.Wf, g, !0, Math.sqrt(p * p + u * u)) && (v = b.charAt(r), q.tx.insert(q.tx.length, v), v = !0)
                }
                v || (v = b.charAt(r), r = new XODText.bx, r.pp(f.Wc, v, g), d.add(r))
              }
          } return 0 < d.length
      },
      Ds: null
    };
    XODText.mp = function () {};
    XODText.mp.prototype = {
      pp: function (a, d, c) {
        this.Wc = a;
        this._position =
          d;
        this.xk = c
      },
      Wc: 0,
      _position: 0,
      xk: 0
    };
    XODText.bx = function () {};
    XODText.bx.prototype = {
      pp: function (a, d, c) {
        this.Wc = a;
        this.tx = d;
        this.Wf = Array(8);
        for (a = 0; 8 > a; ++a) this.Wf[a] = c[a]
      },
      Wc: 0,
      tx: null,
      Wf: null
    };
    XODText.Ps = function () {
      this.lf = new XODText.Na;
      this.mx = new XODText.Na
    };
    XODText.Ps.prototype = {
      lf: null,
      mx: null,
      vh: null,
      wh: null
    };
    XODText.ib = function () {};
    XODText.ac = function () {};
    XODText.me = function () {
      this.Hm = {};
      this.Tf = 0;
      this.cb = this.Cm = this.Cs = this.yd = -1;
      this.lx = this.Si = this.Fs = this.yk = !1;
      this.jf = [];
      this.Ic = [];
      this.Uf = [];
      this.jb = this.Oa = "";
      this.zd = [];
      this.Gg = [];
      this.Dm = [];
      this.jx = [];
      this.Ka = {};
      this.Ka[" "] = null;
      this.Ka["\t"] = null;
      this.Ka["\n"] = null;
      this.Ka["."] = null;
      this.Ka[","] = null;
      this.Ka["?"] = null;
      this.Ka[":"] = null;
      this.Ka[";"] = null;
      this.Ka['"'] = null;
      this.Ka["'"] = null;
      this.Ka["<"] = null;
      this.Ka[">"] = null;
      this.Ka["`"] = null;
      this.Ka["~"] = null;
      this.Ka["!"] = null;
      this.Ka["@"] = null;
      this.Ka["#"] = null;
      this.Ka.$ = null;
      this.Ka["%"] = null;
      this.Ka["^"] = null;
      this.Ka["&"] = null;
      this.Ka["("] = null;
      this.Ka[")"] = null;
      this.Ka["["] =
        null;
      this.Ka["]"] = null;
      this.Ka["{"] = null;
      this.Ka["}"] = null;
      this.Ka["|"] = null;
      this.Ka._ = null;
      this.Ka["\\"] = null;
      this.Ka["-"] = null;
      this.Ka["="] = null;
      this.Ka["+"] = null;
      this.Ka["/"] = null;
      this.Ka["*"] = null
    };
    XODText.me.Ng = function (a, d) {
      for (var c = 0, b = a.length - 1, f = Math.floor((c + b) / 2); a[f] !== d && c < b;) d < a[f] ? b = f - 1 : d > a[f] && (c = f + 1), f = Math.floor((c + b) / 2);
      return a[f] !== d ? !1 : !0
    };
    XODText.me.prototype = {
      xM: function (a, d, c, b, f) {
        this.Fs = !1;
        this.pe = a.Lb();
        if (0 > this.pe.length || 0 > d.length || 0 <= b && b > f) return !1;
        this.Tf = c;
        if (!this.mD(d)) return !1;
        a = b;
        d = this.pe.length;
        if (0 > a)
          if (0 > f) a = 0, f = d - 1;
          else return !1;
        else if (f < a) return !1;
        console.assert(0 <= a && a <= f);
        if (a >= d || f >= d) return !1;
        this.Cs = a;
        this.Cm = f;
        this.yd = this.Yg() ? this.Cm : this.Cs;
        ++this.Cm;
        this.jb = this.Oa = "";
        this.Gg.clear();
        this.Dm.clear();
        this.jf.clear();
        this.Ic.clear();
        this.Fs = !0;
        this.cb = -1;
        this.yk = !1;
        return !0
      },
      run: function (a) {
        var d = -1,
          c = -1,
          b = -1,
          f = "",
          g = "",
          h = new XODText.np;
        h._init();
        h._clear();
        if (!this.Fs || 0 >= this.zk.text.length) return new XODText.qh(XODText.ac.Mk, b, f, g, d, c);
        for (var l = "", k = -1, m = -1;;) {
          if (this.yd === this.Cm) return new XODText.qh(XODText.ac.Mk, b, f, g, d, c);
          var n = !0;
          if (!this.Oa.length || this.cb === this.Oa.length) {
            if (!this.Yg()) {
              if (this.cb === this.Oa.length) {
                if (this.zG() && !this.yk) return this.yk = !0, b = this.yd, new XODText.qh(XODText.ac.It, b, f, g, d, c);
                ++this.yd
              }
              if (this.yd === this.Cm) return new XODText.qh(XODText.ac.Mk, b, f, g, d, c)
            } else if (this.cb === this.Oa.length) {
              if (this.zG() && !this.yk) return this.yk = !0, b = this.yd, new XODText.qh(XODText.ac.It, b, f, g, d, c);
              if (this.yd === this.Cs) return new XODText.qh(XODText.ac.Mk,
                b, f, g, d, c);
              --this.yd
            }(n = this.Vw(this.yd)) ? this.Yg() ? (this.cb = this.Oa.length, --this.cb) : this.cb = 0: this.cb = 0
          }
          this.yk = !1;
          n && (console.assert(this.cb !== this.Oa.length), c = this.tL(h), l = c.$w, k = c.rs, m = c.qs, g = c.es, d = c.Os, c = c.Ns);
          if (n && k !== this.Oa.length) {
            console.assert(0 < l.length);
            f = l;
            b = this.yd;
            this.Yg() ? (this.cb = k) ? --this.cb : this.cb = this.Oa.length : this.cb = m;
            if (this.Aq())
              for (a.clear(), l = [], h.nL(this.pe, l), h = 0; h < l.length; ++h) k = new XODText.bb, m = l[h], k.x1 = m.Wf[0], k.y1 = m.Wf[1], k.x2 = m.Wf[2], k.y2 = m.Wf[3], k.Nl = m.Wf[4],
                k.Pl = m.Wf[5], k.Ol = m.Wf[6], k.Ql = m.Wf[7], a.add(k);
            return new XODText.qh(XODText.ac.Wp, b, f, g, d, c)
          }
          this.cb = this.Oa.length
        }
      },
      mD: function (a) {
        if (0 >= a.length) return !1;
        for (var d = "", c = a.length, b = !1, f = 0; f < c; ++f) {
          var g = this.Ks(a.charAt(f));
          " " === g ? b || (d += g, b = !0) : (b = !1, d += g)
        }
        this.QC = d;
        this.Uf.clear();
        a = "";
        for (f = 0; f < d.length; ++f) g = d.charAt(f), this.vk(g) ? this.Uf.add(a.length - 1) : a += g;
        this.uu() || (a = a.toLowerCase());
        this.zk = this.AQ() ? new XODText.Ew(a, "r") : this.JQ() ? new XODText.Ew(a, "w") : new XODText.Ew(a, "");
        f = this.Si;
        this.zk.text.length ? this.Si = !1 : (this.zk.text = d, this.Uf.clear(), this.Si = !0);
        this.Si !== f && 0 < this.Oa.length && !this.Vw(this.yd) && (this.cb = this.Oa.length);
        return !0
      },
      setMode: function (a) {
        var d = this.Aq(),
          c = this.uu(),
          b = this.Yg();
        this.Tf = a;
        var f = this.Aq();
        a = this.uu();
        var g = this.Yg(),
          h = !1;
        c !== a && this.mD(this.QC);
        if (!(0 >= this.Oa.length)) {
          d !== f && f && !h && (console.assert(0 <= this.cb && this.cb <= this.Oa.length), this.Vw(this.yd), h = !0);
          if (c !== a && !h) {
            console.assert(this.zd.length === this.Oa.length);
            console.assert(this.zd.length <=
              this.jb.length);
            d = this.Oa.length;
            c = "";
            for (f = 0; f < d; ++f) console.assert(0 <= this.zd[f] && this.zd[f] < this.jb.length), c += this.Ks(this.jb.charAt(this.zd[f]));
            this.Oa = c;
            a || (this.Oa = this.Oa.toLowerCase())
          }
          if (b !== g)
            if (console.assert(0 <= this.cb && this.cb <= this.Oa.length), this.cb !== this.Oa.length)
              if (g)
                for (f = 0; 2 > f; ++f) this.cb && --this.cb;
              else
                for (f = 0; 2 > f; ++f) this.cb !== this.Oa.length && ++this.cb;
          else g ? (this.cb = this.Oa.length, --this.cb) : this.cb = 0
        }
      },
      Aq: function () {
        return 0 < (this.Tf & XODText.ib.ME)
      },
      uQ: function () {
        return 0 <
          (this.Tf & XODText.ib.KE)
      },
      uu: function () {
        return 0 < (this.Tf & XODText.ib.LE)
      },
      JQ: function () {
        return 0 < (this.Tf & XODText.ib.QE)
      },
      AQ: function () {
        return 0 < (this.Tf & XODText.ib.OE)
      },
      IQ: function () {
        return 0 < (this.Tf & XODText.ib.PE)
      },
      Yg: function () {
        return 0 < (this.Tf & XODText.ib.sy)
      },
      zG: function () {
        return 0 < (this.Tf & XODText.ib.NE)
      },
      tL: function (a) {
        var d, c, b, f = this.eL();
        c = f.rs;
        b = f.qs;
        ambient = f.es;
        var g = f.Os,
          h = f.Ns;
        if (c === this.Oa.length) return f;
        var l, k;
        d = this.rL(0, 0, c, b, b - c);
        l = d.iD;
        k = d.vC;
        for (var m = "", n = l; n < k; ++n) m += this.jb.charAt(n);
        d = m;
        m = "";
        if (this.uQ()) {
          var r = l,
            q = k,
            g = this.jb.length,
            v = h = 0,
            p = n = !1,
            u = !1;
          if (r)
            for (--r; r;) {
              var w = this.jb.charAt(r);
              n && this.sh(w) && v++;
              n || !u || this.sh(w) || (n = p = !0);
              if (30 <= h || 0 < v) {
                r++;
                break
              }
              if (this.Gg.length > r && -2 === this.Gg[r]) {
                var A = this.jb.charAt(r + 1);
                if ("A" <= A && "Z" >= A) {
                  ++r;
                  p = !0;
                  break
                }
              }--r;
              h++;
              u = u || this.sh(w) || "\n" === w
            }
          p || (r = l);
          n = q;
          for (v = 0; q !== g;) {
            this.sh(this.jb.charAt(q)) && (n = q - 1, v++);
            if (10 <= v || 70 <= h) {
              q === g - 1 || this.sh(this.jb.charAt(q + 1)) || (q = n);
              break
            }
            q++
          }
          q === g && --q;
          for (n = r; n <= q; ++n) g = this.jb.charAt(n),
            m = "\n" === g ? m + " " : m + g;
          g = l - r;
          h = k - r
        }
        f.es = m;
        if (this.Aq()) {
          console.assert(this.jb.length === this.Gg.length);
          console.assert(k >= l);
          m = k - l;
          v = [];
          for (n = l; n < k; ++n) v.insert(v.length, this.Gg[n]);
          for (l = 0; l < m && 0 > v[l];) ++l;
          for (n = k = l; l < m;)
            if (r = v[l], l === m - 1) p = this.yd, r = v[n], q = v[l], 0 > q && (q = v[k]), console.assert(0 <= p && 0 <= r && q >= r), u = new XODText.mp, u.pp(p, r, q - r + 1), a._add(u), ++l;
            else if (-1 === r) console.assert(0 <= v[k]), ++l;
          else if (-2 === r) {
            console.assert(0 <= v[k]);
            p = this.yd;
            r = v[n];
            q = v[k];
            console.assert(0 <= p && 0 <= r && q >= r);
            u = new XODText.mp;
            u.pp(p, r, q - r + 1);
            a._add(u);
            for (++l; l < m && 0 > v[l];) ++l;
            n = k = l
          } else 0 <= r && (console.assert(0 <= v[k]), k === l || this.pL(v, k, l) ? (k = l, ++l) : (p = this.yd, r = v[n], q = v[k], console.assert(0 <= p && 0 <= r && q >= r), u = new XODText.mp, u.pp(p, r, q - r + 1), a._add(u), n = k = l))
        }
        f.$w = d;
        f.rs = c;
        f.qs = b;
        f.Os = g;
        f.Ns = h;
        return f
      },
      Bm: null,
      Ib: null,
      yC: function (e) {
        return e.replace(a, "\\$&")
      },
      OL: function (a, d, c) {
        Object.Dq(this.Hm, a.text) ? this.Ib = this.Hm[a.text] : (this.Ib = a.AG ? {
            re: new RegExp(a.text, "g"),
            matches: null
          } : {
            re: new RegExp(this.yC(a.text), "g"),
            matches: null
          },
          this.Hm[a.text] = this.Ib);
        this.Ib.re.lastIndex = c;
        this.Bm = this.Ib.re.exec(d);
        return null != this.Bm ? {
          start: this.Ib.re.lastIndex - this.Bm[0].length,
          length: this.Bm[0].length
        } : {
          start: -1,
          length: 0
        }
      },
      PL: function (a, d, c) {
        this.Ib = null;
        Object.Dq(this.Hm, a.text) && (this.Ib = this.Hm[a.text]);
        if (null === this.Ib || null == this.Ib.matches) this.Ib = a.AG ? {
          re: new RegExp(a.text, "g"),
          matches: [],
          BA: null
        } : {
          re: new RegExp(this.yC(a.text), "g"),
          matches: [],
          BA: null
        }, this.Hm[a.text] = this.Ib;
        if (this.Ib.BA !== d) {
          for (this.Ib.matches = []; null !==
            (this.Bm = this.Ib.re.exec(d));) this.Ib.matches.push({
            start: this.Bm.index,
            end: this.Ib.re.lastIndex
          });
          this.Ib.BA = d
        }
        if (0 < this.Ib.matches.length)
          for (a = this.Ib.matches.length - 1; 0 <= a; a--)
            if (this.Ib.matches[a].end < c) return {
              start: this.Ib.matches[a].start,
              length: this.Ib.matches[a].end - this.Ib.matches[a].start
            };
        return {
          start: -1,
          length: 0
        }
      },
      eL: function () {
        var a, d, c, b;
        c = this.cb;
        for (b = this.Oa.length;;) {
          var f = !1;
          console.assert(0 < this.zk.text.length);
          if (this.Yg()) {
            if (c === b) {
              a = d = b;
              break
            }
            d = this.PL(this.zk, this.Oa, c)
          } else d =
            this.OL(this.zk, this.Oa, c);
          a = d.start;
          if (0 > a) {
            a = d = b;
            break
          }
          d = d.start + d.length;
          this.Yg() ? (c = a, 0 !== c ? --c : c = b) : c = d;
          if (!this.Si)
            if (0 < this.Uf.length)
              if (this.jf.length || this.Ic.length) {
                for (var g = this.Ic.length, h = this.jf.length, l = a - 0, k = T.Ie.getEnumerator(this.Uf); k.bh();) {
                  var m = k.current,
                    m = l + m;
                  if (!XODText.me.Ng(this.jf, m) && !XODText.me.Ng(this.Ic, m)) {
                    f = !0;
                    break
                  }
                }
                if (f) continue;
                for (var k = a - 0, n = d - 0 - 1, r = m = this.ix(this.Ic, k); r !== g; ++r) {
                  var q = this.Ic[r];
                  if (q >= k && q < n && (m = q - l, !XODText.me.Ng(this.Uf, m))) {
                    f = !0;
                    break
                  }
                  if (q >=
                    n) break
                }
                if (f) continue;
                for (r = m = this.ix(this.jf, k); r !== h; ++r) {
                  q = this.jf[r];
                  if (q >= k && q < n && (m = q - l, !XODText.me.Ng(this.Uf, m))) {
                    f = !0;
                    break
                  }
                  if (q >= n) break
                }
                if (f) continue
              } else continue;
          else if (this.Ic.length)
            for (k = a - 0, n = d - 0 - 1, g = this.Ic.length, r = m = this.ix(this.Ic, k); r !== g && (q = this.Ic[r], q >= k && q < n || !(q >= n)); ++r);
          if (this.IQ()) {
            if (0 !== a && (q = a - 0 - 1, !(XODText.me.Ng(this.jf, q) || XODText.me.Ng(this.Ic, q) || this.sh(this.Oa.charAt(a)) || this.sh(this.Oa.charAt(a - 1))))) continue;
            if (d !== b && (q = d - 0 - 1, !(XODText.me.Ng(this.jf, q) ||
                XODText.me.Ng(this.Ic, q) || this.sh(this.Oa.charAt(d - 1)) || this.sh(this.Oa.charAt(d))))) continue
          }
          break
        }
        return new XODText.Dw("", a, d, "", -1, -1)
      },
      sh: function (a) {
        return Object.Dq(this.Ka, a) ? !0 : this.As(a) || this.EL(a)
      },
      ix: function (a, d) {
        var c = a.indexOf(d);
        0 > c && (c = ~c);
        return c
      },
      Ks: function (a) {
        a = a.charCodeAt(0);
        if (39 === a || 8217 === a) a = 39;
        else if (34 === a || 8220 === a || 8221 === a) a = 34;
        return String.fromCharCode(a)
      },
      vk: function (a) {
        var d = a;
        a = a.charCodeAt(0);
        return "-" === d || 8208 === a || 8209 === a || 65293 === a || 173 === a
      },
      DL: function (a) {
        var d =
          a;
        a = a.charCodeAt(0);
        return "," === d || 65292 === a || 65294 === a
      },
      EL: function (a) {
        var d = a;
        a = a.charCodeAt(0);
        return 32 < a && 48 > a || 57 < a && 65 > a || 90 < a && 97 > a || 122 < a && 127 > a || this.DL(d) || this.vk(d) || 173 === a || 1642 <= a && (1645 >= a || 8210 <= a && 8231 >= a || 8240 <= a && 8269 >= a || 8592 <= a && 9215 >= a || 12441 <= a && 12444 >= a || 65281 <= a && 65291 >= a || 65295 === a || 65306 <= a && 65312 >= a || 65344 === a || 65371 <= a && 65374 >= a) ? !0 : !1
      },
      As: function (a) {
        a = a.charCodeAt(0);
        return 32 === a || 1 <= a && 31 >= a || 160 === a || 8192 <= a && (8207 >= a || 8232 <= a && 8239 >= a || 8298 <= a && 8303 >= a) ? !0 : !1
      },
      Vw: function (a) {
        if (0 > a || a >= this.pe.length) return !1;
        this.jb = this.Oa = "";
        this.zd.clear();
        this.jf.clear();
        this.Ic.clear();
        var d = this.Aq(),
          c = [],
          b = [];
        if (d) {
          var f = this.pe[a].text;
          if (!f.ready()) return !1;
          a = f.Qa;
          c = f.Xb;
          b = f.Re();
          this.Gg.clear();
          this.lx && this.jx.clear()
        } else {
          f = this.pe[a].text;
          if (!f.ready()) return !1;
          a = f.Qa
        }
        if (0 >= a.length) return !1;
        for (var f = "", g = a.length, h = -1, l = 0; l < g; ++l) {
          var k = a.charAt(l),
            m = -1;
          d && (m = c[l]);
          if ("\n" === k) {
            for (k = l - 1; 0 <= k && " " === a.charAt(k);) --k;
            if (!(0 > k || this.vk(a.charAt(k)))) {
              for (k =
                l + 1; k < g && " " === a.charAt(k);) ++k;
              k >= g || this.vk(a.charAt(k)) || (f += " ", this.zd.add(this.jb.length), this.jb += " ", d && (h = h < m ? m : h, this.Pw(m, b, 8 * l)))
            }
          } else if (" " === k) l < g - 1 && ("\n" === a.charAt(l + 1) || " " === a.charAt(l + 1)) || (f += k, this.zd.add(this.jb.length), this.jb += k, d && (h = h < m ? m : h, this.Pw(m, b, 8 * l)));
          else {
            if (this.vk(k))
              if (this.Si) f += this.Ks(k), this.zd.add(this.jb.length);
              else {
                var n = f.length - 1;
                l < g - 1 && "\n" === a.charAt(l + 1) ? this.jf.add(n) : this.Ic.length && n === this.Ic[this.Ic.length - 1] || this.Ic.add(n)
              }
            else f += this.Ks(k),
              this.zd.add(this.jb.length);
            this.jb += k;
            d && (h = h < m ? m : h, this.Pw(m, b, 8 * l))
          }
        }
        console.assert(f.length === this.zd.length);
        this.Oa = f;
        if (d) {
          g = this.Gg.length;
          this.Dm.clear();
          for (l = 0; l < h + 1; ++l) this.Dm.add(!0);
          for (l = 0; l < g; ++l) m = this.Gg[l], 0 <= m && (this.Dm[m] = !1)
        }
        this.uu() || (this.Oa = this.Oa.toLowerCase());
        this.jf.sort();
        this.Ic.sort();
        this.Uf.sort();
        return !0
      },
      Pw: function (a, d, c) {
        this.Gg.add(a);
        if (this.lx)
          for (a = c; a < c + 8; ++a) this.jx.add(d[a])
      },
      rL: function (a, d, c, b, f) {
        c ? (a = this.zd[c - 1], ++a) : a = 0;
        b < this.zd.length ? d = this.zd[b] :
          (d = this.zd[b - 1], d === this.jb.length - 1 && ++d);
        console.assert(a >= c && d >= b && d >= a);
        if (!this.Si) {
          if (!XODText.me.Ng(this.Uf, f - 1))
            for (; 0 < d && this.vk(this.jb.charAt(d - 1));) --d;
          c = this.jb.length;
          if (!XODText.me.Ng(this.Uf, -1))
            for (; a < c - 1 && this.vk(this.jb.charAt(a));) ++a;
          d < a && (console.assert(!1), d = a)
        }
        return new XODText.Cw(a, d)
      },
      pL: function (a, d, c) {
        console.assert(0 <= d && d <= c && d < a.length && c < a.length);
        d = a[d];
        a = a[c];
        if (d === a || d + 1 === a) return !0;
        for (c = !0; 0 <= d && d < a - 1;)
          if (!this.Dm[++d]) {
            c = !1;
            break
          } return c
      },
      Fs: !1,
      pe: null,
      Tf: 0,
      Ka: null,
      yd: 0,
      Cs: 0,
      Cm: 0,
      cb: 0,
      yk: !1,
      jb: null,
      Oa: null,
      zd: null,
      Gg: null,
      Dm: null,
      zk: null,
      Si: !1,
      QC: null,
      jf: null,
      Ic: null,
      Uf: null,
      jx: null,
      lx: !1
    };
    XODText.Gi = function (a) {
      this.ha = "";
      this.Es = -1;
      this.Da = [];
      this.Pa = "";
      this.pe = a.Lb();
      this.xb = new XODText.df;
      this.xb.Nb();
      this.nb = [];
      this.Hs = [];
      this.Gs = []
    };
    XODText.Gi.prototype = {
      Re: function () {
        for (var a = this.Da.length / 8, d = [], c = 0; c < a; ++c) {
          var b = new XODText.bb,
            f = 8 * c;
          b.kD(this.Da[f], this.Da[f + 1], this.Da[f + 2], this.Da[f + 3], this.Da[f + 4], this.Da[f + 5], this.Da[f + 6], this.Da[f + 7]);
          d.add(b)
        }
        return d
      },
      As: function (a) {
        a = a.charCodeAt(0);
        return 32 === a || 1 <= a && 31 >= a || 160 === a || 8192 <= a && (8207 >= a || 8232 <= a && 8239 >= a || 8298 <= a && 8303 >= a) ? !0 : !1
      },
      jD: function (a, d) {
        this.Da.clear();
        this.Pa = "";
        d.normalize();
        var c = [],
          b = "",
          f;
        for (f = a - 1; f < a + 2; f++) this.Ui(f) && (c.push({
          idx: f,
          Kf: this.ha
        }), b += this.ha);
        if (0 === c.length || 0 === b.length || !this.Ui(a)) return !1;
        var g = new XODText.Na,
          h = Array(8),
          l, k, m = new XODText.Pb;
        m.Nb();
        var n, r = new XODText.vb;
        r.Nb();
        var q = [],
          v = !1;
        for (k = this.xb.kq(); !k.ta(m); k = k.ve())
          if (k.rb(g),
            g.normalize(), !d.Nq(g)) {
            var p = [null, null],
              u = [null, null],
              w = -1;
            l = -1;
            for (n = k.Jb(); !n.ta(r); n = n.Yd())
              if (n.Pc(h), g.Fl(h), !d.Nq(g)) {
                l = n.cg();
                var A = n.$a(); - 1 === w && (w = A);
                f = q.length;
                if (0 < l && 0 < f) {
                  v && ("\n" !== q[0] && (this.As(q[f - 1]) ? q[f - 1] = "\n" : q.add("\n")), v = !1);
                  for (f = 0; f < q.length; ++f) this.Pa += q[f];
                  q.clear()
                }
                for (f = 0; f <= l; ++f) A + f < this.ha.length && (f < l ? this.Pa += this.ha.charAt(A + f) : q.add(this.ha.charAt(A + f)));
                if (0 < l) {
                  f = g.x2 - g.x1;
                  var B = g.y2 - g.y1;
                  this.Jg(h, Math.sqrt(f * f + B * B) / l * 3)
                }
                l = A + l
              } v = !0;
            p[0] = w;
            for (f = n = 0; f < c.length; f++)
              if (c[f].idx ===
                a) {
                n += p[0];
                break
              } else c[f].idx < a && (n += c[f].Kf.length);
            u[0] = b.substring(Math.max(0, n - 100), n);
            if (-1 !== l) {
              p[1] = l;
              for (f = n = 0; f < c.length; f++)
                if (c[f].idx === a) {
                  n += l;
                  break
                } else c[f].idx < a && (n += c[f].Kf.length);
              u[1] = b.substr(n + 1, 100)
            }
            null !== p[0] && null !== p[1] && this.Gs.push(p);
            null !== u[0] && null !== u[1] && this.Hs.push(u)
          } return 0 < this.Da.length
      },
      lL: function () {
        var a, d = new XODText.Pb;
        d.Nb();
        var c = Array(8),
          b = Array(8),
          f = .1,
          g = -100;
        for (a = this.xb.kq(); !a.ta(d); a = a.ve()) {
          var h = new XODText.ca,
            l = new XODText.ca,
            k = new XODText.vb;
          k.Nb();
          var m = a.Jb(),
            n = new XODText.vb;
          n.Nb();
          for (var r = a.Jb(); !r.ta(k); r = r.Yd()) n = r;
          m.md(0, c);
          h.x = (c[0] + c[2] + c[4] + c[6]) / 4;
          h.y = (c[1] + c[3] + c[5] + c[7]) / 4;
          n.md(n.Wb() - 1, b);
          l.x = (b[0] + b[2] + b[4] + b[6]) / 4;
          l.y = (b[1] + b[3] + b[5] + b[7]) / 4;
          k = XODText.ca.distance(h, l);
          k > f && (g = Math.atan2(l.y - h.y, l.x - h.x), g *= 180 / 3.1415926, g = Math.round(g), 0 > g && (g += 360), f = k)
        }
        this.sc = g;
        this.kx = 2 > Math.abs(this.sc) || 2 > Math.abs(this.sc - 180)
      },
      eI: function (a, d) {
        this.Da.clear();
        this.Pa = "";
        d.normalize();
        var c = [],
          b = "",
          f;
        for (f = a - 1; f < a + 2; f++) this.Ui(f) &&
          (c.push({
            idx: f,
            Kf: this.ha
          }), b += this.ha);
        if (0 === c.length || 0 === b.length || !this.Ui(a)) return !1;
        var g = new XODText.Na,
          h = Array(8),
          l, k, m, n = new XODText.Pb;
        n.Nb();
        var r, q = new XODText.vb;
        q.Nb();
        var v = [],
          p = !1;
        for (m = this.xb.kq(); !m.ta(n); m = m.ve())
          if (m.rb(g), g.normalize(), !d.Nq(g)) {
            var u = [null, null],
              w = [null, null],
              A = -1,
              B = !0;
            for (r = m.Jb(); !r.ta(q); r = r.Yd())
              if (r.Pc(h), g.Fl(h), !d.Nq(g)) {
                l = r.cg();
                var z = r.$a(),
                  x = v.length;
                if (0 < l && 0 < x) {
                  p && ("\n" !== v[0] && (this.As(v[x - 1]) ? v[x - 1] = "\n" : v.add("\n")), p = !1);
                  for (f = 0; f < v.length; ++f) this.Pa +=
                    v[f];
                  v.clear()
                }
                var x = 0,
                  y = Array(8),
                  F = Array(8),
                  L = !1,
                  D = !1;
                for (k = 0; k < l; ++k) {
                  var H = z + k;
                  if (H < this.ha.length) {
                    f = Array(8);
                    var J = new XODText.Na;
                    r.md(k, f);
                    J.Fl(f);
                    if (d.Nq(J)) 0 === x ? L = !0 : D = !0;
                    else {
                      A = H;
                      x++;
                      if (1 === x) {
                        if (B) {
                          u[0] = H;
                          for (f = B = 0; f < c.length; f++)
                            if (c[f].idx === a) {
                              B += H;
                              break
                            } else c[f].idx < a && (B += c[f].Kf.length);
                          w[0] = b.substring(Math.max(0, B - 100), B);
                          B = !1
                        }
                        L && r.md(k, y)
                      }
                      r.md(k, F);
                      k < l ? this.Pa += this.ha.charAt(H) : v.add(this.ha.charAt(H))
                    }
                  }
                }
                "\n" != v[l] && v.push(" ");
                0 < x && (L && this.nk(h, y, !0), D && this.nk(h, F, !1), g.Fl(h),
                  l = g.x2 - g.x1, z = g.y2 - g.y1, this.Jg(h, Math.sqrt(l * l + z * z) / x * 3))
              } p = !0;
            if (-1 !== A) {
              u[1] = A;
              for (f = r = 0; f < c.length; f++)
                if (c[f].idx === a) {
                  r += A;
                  break
                } else c[f].idx < a && (r += c[f].Kf.length);
              w[1] = b.substr(r + 1, 100)
            }
            null !== u[0] && null !== u[1] && this.Gs.push(u);
            null !== w[0] && null !== w[1] && this.Hs.push(w)
          } return 0 < this.Da.length
      },
      sP: function (a, d, c) {
        for (var b = [], f = -1, g = "", h = 0; h < d.length; h++) {
          var l = this.BP(a, d[h][0], d[h][1]);
          if (l.status) - 1 !== f || void 0 === l.ul || null === l.ul || isNaN(l.ul) || (f = l.ul), l.ul === f && Array.prototype.push.apply(b,
            l.value), g += this.Pa;
          else break
        } - 1 === f && (f = 0);
        return 0 === b.length ? {
          status: !1
        } : g.replace(/( |\n)/gm, "") !== c.replace(/( |\n)/gm, "") ? {
          status: !1
        } : {
          status: !0,
          value: b,
          ul: f
        }
      },
      BP: function (a, d, c, b) {
        if (20 >= d.length || 20 >= c.length) return {
          status: !1
        };
        var f = [],
          g = "",
          h = [],
          l = !0,
          k = 0,
          m, n;
        for (m = a - 1; m < a + 2; m++)
          if (this.Ui(m))
            if (f.push({
                idx: m,
                Kf: this.ha
              }), g += this.ha, null !== this.pe[m].text.Em) {
              for (n = 0; n < this.pe[m].text.Em.length; n++) h.push(this.pe[m].text.Em[n] + k);
              k += this.ha.length
            } else l = !1;
        if (0 === f.length || 0 === g.length) return {
          status: !1
        };
        k = [];
        m = 0;
        l ? (n = g.replace(/( |\n)/gm, ""), d = d.replace(/( |\n)/gm, "")) : n = g;
        for (; !(0 === n.length || n.length < d.length || (a = n.indexOf(d), 0 > a));) k.push(m + a + d.length), n = n.substr(a + 1), m += a + 1;
        if (0 === k.length) return {
          status: !1
        };
        d = [];
        m = k[0] + 1;
        l ? (n = g.replace(/( |\n)/gm, "").substring(k[0] + 1), c = c.replace(/( |\n)/gm, "")) : n = g.substring(k[0] + 1);
        for (; !(0 === n.length || n.length < c.length || (a = n.indexOf(c), 0 > a));) d.push(m + a), n = n.substr(a + 1), m += a + 1;
        if (0 === d.length) return {
          status: !1
        };
        c = [];
        for (m = 0; m < k.length; m++)
          for (n = 0; n < d.length; n++)
            if (k[m] +
              1 <= d[n] && (a = [], a.push(k[m]), a.push(d[n]), c.push(a)), 1 < c.length) return {
              status: !1
            };
        if (1 !== c.length) return {
          status: !1
        };
        if (l) {
          for (m = 0; m < h.length && !(c[0][0] < h[m]); m++) c[0][0]++;
          for (m = 0; m < h.length && !(c[0][1] < h[m]); m++) c[0][1]++
        }
        l = [0, 0];
        h = -1;
        for (m = k = 0; m < f.length; m++) {
          d = f[m].Kf;
          if (c[0][0] >= k && c[0][0] < k + d.length) {
            h = f[m].idx;
            l[0] = c[0][0] - k;
            break
          }
          k += d.length
        }
        if (-1 === h) return {
          status: !1
        };
        n = -1;
        for (m = k = 0; m < f.length; m++) {
          d = f[m].Kf;
          if (c[0][1] >= k && c[0][1] < k + d.length) {
            n = f[m].idx;
            l[1] = c[0][1] - k;
            break
          }
          k += d.length
        }
        if (-1 ===
          n) return {
          status: !1
        };
        if (h === n) f = this.iz(h, l[0], l[1] - 1);
        else {
          for (m = 0; m < f.length && f[m].idx !== h; m++);
          f = this.iz(h, l[0], f[m].Kf.length - 1);
          this.Pa = g.substring(c[0][0], c[0][1])
        }
        if (f.status) {
          if (b && this.Pa.replace(/( |\n)/gm, "") !== b.replace(/( |\n)/gm, "")) return {
            status: !1
          };
          f.ul = h;
          return f
        }
        return {
          status: !1
        }
      },
      tP: function (a, d, c) {
        for (var b = [], f = "", g = 0; g < d.length; g++) {
          var h = Number(d[g][0]),
            l = Number(d[g][1]);
          if (isNaN(h) || isNaN(l)) return exports.utils.warn("getRectangularSelectionFromTextIndices: could not parse index-based selectors as numbers."), {
            status: !1
          };
          h = this.iz(a, h, l);
          if (h.status) Array.prototype.push.apply(b, h.value), f += this.Pa;
          else return {
            status: !1
          }
        }
        return 0 === b.length ? {
          status: !1
        } : f.replace(/( |\n)/gm, "") !== c.replace(/( |\n)/gm, "") ? {
          status: !1
        } : {
          status: !0,
          value: b
        }
      },
      iz: function (a, d, c, b) {
        if (!this.Ui(a)) return {
          status: !1
        };
        var f = new XODText.vb;
        f.Nb();
        a = new XODText.Pb;
        a.Nb();
        this.Pa = this.ha.substring(d, Math.min(c + 1, this.ha.length));
        if (b && this.Pa.replace(/( |\n)/gm, "") !== b.replace(/( |\n)/gm, "")) return {
          status: !1
        };
        b = 0;
        for (var g, h;;) {
          if (b >=
            this.nb.length) return {
            status: !1
          };
          g = this.nb[b].vh;
          h = this.nb[b].wh;
          if (h.$c().$a() + h.$c().Wb() >= d && g.Jb().$a() <= d) break;
          b++
        }
        for (var l = this.nb[b], k = l.vh;;) {
          if (k.ta(a)) return {
            status: !1
          };
          if (this.zh(k.Rg())) {
            if (k.$c().$a() + k.$c().Wb() >= d && k.Jb().$a() <= d) break;
            if (k.ta(l.wh) || k.ta(a)) return {
              status: !1
            };
            k = k.ve()
          }
        }
        for (var m = k.Jb();;) {
          if (m.ta(f)) return {
            status: !1
          };
          if (m.$a() + m.Wb() >= d && m.$a() <= d) break;
          m = m.Yd()
        }
        for (var n = 0;;) {
          if (n >= this.nb.length) return {
            status: !1
          };
          g = this.nb[n].vh;
          h = this.nb[n].wh;
          if (h.$c().$a() + h.$c().Wb() >=
            c && g.Jb().$a() <= c) break;
          n++
        }
        for (var r = this.nb[n].vh;;) {
          if (r.ta(a)) return {
            status: !1
          };
          if (this.zh(r.Rg())) {
            if (r.$c().$a() + r.$c().Wb() >= c && r.Jb().$a() <= c) break;
            if (r.ta(l.wh)) return {
              status: !1
            };
            r = r.ve()
          }
        }
        for (l = r.Jb();;) {
          if (l.ta(f)) return {
            status: !1
          };
          if (l.$a() + l.Wb() >= c && l.$a() <= c) break;
          l = l.Yd()
        }
        for (var f = [], q = Array(4), v = b; v <= n; v++)
          if (g = this.nb[v].vh, h = this.nb[v].wh, v === b && v !== n)
            for (g = k; !g.ta(a); g = g.ve()) {
              if (this.zh(g.Rg())) {
                var p = Array(8);
                g.ta(k) ? m.un(Math.min(d - m.$a(), m.Wb() - 1), p) : (g.Jb().rb(q), p[0] = q[0],
                  p[1] = q[3], p[6] = q[0], p[7] = q[1]);
                g.$c().rb(q);
                p[2] = q[2];
                p[3] = q[3];
                p[4] = q[2];
                p[5] = q[1];
                f.push(p);
                if (g.ta(h)) break
              }
            } else if (v !== b && v === n)
              for (;; g = g.ve()) {
                if (g.ta(a)) return {
                  status: !1
                };
                if (this.zh(g.Rg()) && (p = Array(8), g.ta(r) ? l.un(Math.min(c - l.$a(), l.Wb() - 1), p) : (g.$c().rb(q), p[2] = q[2], p[3] = q[3], p[4] = q[2], p[5] = q[1]), g.Jb().rb(q), p[0] = q[0], p[1] = q[3], p[6] = q[0], p[7] = q[1], f.push(p), g.ta(r))) break
              } else if (v === b && v === n)
                for (g = k;; g = g.ve()) {
                  if (g.ta(a)) return {
                    status: !1
                  };
                  if (this.zh(g.Rg()) && (p = Array(8), g.ta(k) && !g.ta(r) ?
                      (m.un(Math.min(d - m.$a(), m.Wb() - 1), p), g.$c().rb(q), p[2] = q[2], p[3] = q[3], p[4] = q[2], p[5] = q[1]) : !g.ta(k) && g.ta(r) ? (l.un(Math.min(c - l.$a(), l.Wb() - 1), p), g.Jb().rb(q), p[0] = q[0], p[1] = q[3], p[6] = q[0], p[7] = q[1]) : g.ta(k) && g.ta(r) ? (m.un(Math.min(d - m.$a(), m.Wb() - 1), p), q[0] = p[6], q[1] = p[7], q[2] = p[2], q[3] = p[3], l.un(Math.min(c - l.$a(), l.Wb() - 1), p), p[0] = q[0], p[1] = q[3], p[6] = q[0], p[7] = q[1]) : (g.Jb().rb(q), p[0] = q[0], p[1] = q[3], p[6] = q[0], p[7] = q[1], g.$c().rb(q), p[2] = q[2], p[3] = q[3], p[4] = q[2], p[5] = q[1]), f.push(p), g.ta(r))) break
                } else
                  for (; !(g.ta(a) ||
                      this.zh(g.Rg()) && (p = Array(8), g.Jb().rb(q), p[0] = q[0], p[1] = q[3], p[6] = q[0], p[7] = q[1], g.$c().rb(q), p[2] = q[2], p[3] = q[3], p[4] = q[2], p[5] = q[1], f.push(p), g.ta(h))); g = g.ve());
        return {
          status: !0,
          value: f
        }
      },
      cI: function (a, d) {
        this.Da.clear();
        this.Pa = "";
        var c = [],
          b = "",
          f;
        for (f = a - 1; f < a + 2; f++) this.Ui(f) && (c.push({
          idx: f,
          Kf: this.ha
        }), b += this.ha);
        if (0 === c.length || 0 === b.length || !this.Ui(a)) return !1;
        var g, h, l, k, m = Array(8),
          n = Array(8),
          r = new XODText.Na,
          q = new XODText.Pb,
          v = new XODText.Pb;
        q.Nb();
        v.Nb();
        var p = this.kx,
          u = this.kx,
          w,
          A = new XODText.Pb;
        A.Nb();
        var B = new XODText.vb;
        B.Nb();
        var z = new XODText.ca;
        z.init(d.x1, d.y1);
        var x = new XODText.ca;
        x.init(d.x2, d.y2);
        v = this.sL(z, x, q, v);
        q = v.CC;
        v = v.NC;
        if (q.ta(A) || v.ta(A)) return !1;
        x = new XODText.vb;
        z = new XODText.vb;
        x.Nb();
        z.Nb();
        h = g = XODText.Zc.Yj;
        for (var y = q.Jb(); !y.ta(B); y = y.Yd()) y.rb(m), p ? (f = d.x1, w = d.y1) : (w = m[0], m[0] = m[1], m[1] = w, w = m[2], m[2] = m[3], m[3] = w, f = d.y1, w = d.x1), l = (m[3] + m[1]) / 2, m[2] <= f ? (k = m[2] - f, l -= w, l = k * k + l * l) : m[0] >= f ? (k = m[0] - f, l -= w, l = k * k + l * l) : (l -= w, l *= l), l < g && (g = l, x = y);
        for (y = v.Jb(); !y.ta(B); y =
          y.Yd()) y.rb(m), u ? (f = d.x2, w = d.y2) : (w = m[0], m[0] = m[1], m[1] = w, w = m[2], m[2] = m[3], m[3] = w, f = d.y2, w = d.x2), l = (m[3] + m[1]) / 2, m[2] <= f ? (k = m[2] - f, l -= w, l = k * k + l * l) : m[0] >= f ? (k = m[0] - f, l -= w, l = k * k + l * l) : (l -= w, l *= l), l < h && (h = l, z = y);
        if (x.ta(B) || z.ta(B)) return !1;
        w = y = 0;
        h = g = XODText.Zc.Yj;
        var F = x.Wb();
        for (f = 0; f < F; ++f) x.md(f, m), k = (m[0] + m[2] + m[4] + m[6]) / 4, l = (m[1] + m[3] + m[5] + m[7]) / 4, k -= d.x1, l -= d.y1, l = k * k + l * l, l < g && (g = l, y = f);
        F = z.Wb();
        for (f = 0; f < F; ++f) z.md(f, m), k = (m[0] + m[2] + m[4] + m[6]) / 4, l = (m[1] + m[3] + m[5] + m[7]) / 4, k -= d.x2, l -= d.y2, l = k * k +
          l * l, l < h && (h = l, w = f);
        g = y + x.$a();
        h = w + z.$a();
        h < g && (f = g, g = h, h = f);
        this.Gs.push([g, h]);
        l = [null, null];
        for (f = k = 0; f < c.length; f++)
          if (c[f].idx === a) {
            k += g;
            break
          } else c[f].idx < a && (k += c[f].Kf.length);
        l[0] = b.substring(Math.max(0, k - 100), k);
        for (f = g = 0; f < c.length; f++)
          if (c[f].idx === a) {
            g += h;
            break
          } else c[f].idx < a && (g += c[f].Kf.length);
        l[1] = b.substr(g + 1, 100);
        null !== l[0] && null !== l[1] && this.Hs.push(l);
        h = q.ob;
        f = v.ob;
        c = x.ob;
        b = z.ob;
        if (h === f) {
          c > b && (h = x, x = z, z = h, h = y, y = w, w = h);
          q.rb(r);
          if (c === b && y === w && (h = new XODText.Na, !h.su(r, d))) return !1;
          c === b ? (w < y && (h = y, y = w, w = h), h = w) : h = x.cg();
          x.md(y, m);
          console.assert(p === u);
          p = x.$a();
          console.assert(y <= h);
          for (u = y; u <= h; ++u) p + u < this.ha.length && (this.Pa += this.ha.charAt(p + u));
          0 <= h && (x.Pc(n), p = n[0] - n[2], u = n[1] - n[3], p = Math.sqrt(p * p + u * u), p = p / (h + 1) * 3, this.nk(n, m, !0), c === b && (r = Array(8), z.md(w, r), this.nk(n, r, !1)), this.Jg(n, p));
          for (y = x = x.Yd(); !y.ta(B) && y.ob < z.ob; y = y.Yd()) {
            h = y.cg();
            p = y.$a();
            for (u = 0; u <= h; ++u) p + u < this.ha.length && (this.Pa += this.ha.charAt(p + u));
            0 < h && (y.Pc(n), p = n[0] - n[2], u = n[1] - n[3], p = Math.sqrt(p *
              p + u * u), p = p / h * 3, this.Jg(n, p))
          }
          z.md(w, m);
          h = z.cg();
          if (c !== b) {
            p = z.$a();
            console.assert(w <= h);
            for (u = 0; u <= w; ++u) p + u < this.ha.length && (this.Pa += this.ha.charAt(p + u));
            0 < h && (z.Pc(n), p = n[0] - n[2], u = n[1] - n[3], p = Math.sqrt(p * p + u * u), p = p / h * 3, this.nk(n, m, !1), this.Jg(n, p))
          }
        } else {
          h > f && (p = q, q = v, v = p, h = x, x = z, z = h, h = y, y = w, w = h);
          q.rb(r);
          h = new XODText.Na;
          h.su(r, d) || (x = q.Jb(), y = 0);
          x.md(y, m);
          h = x.cg();
          p = x.$a();
          console.assert(y <= h);
          for (u = y; u <= h; ++u) p + u < this.ha.length && (this.Pa += this.ha.charAt(p + u));
          0 < h && (x.Pc(n), p = n[0] - n[2], u = n[1] -
            n[3], p = Math.sqrt(p * p + u * u), p = p / h * 3, this.nk(n, m, !0), this.Jg(n, p));
          for (y = x = x.Yd(); !y.ta(B); y = y.Yd()) {
            h = y.cg();
            p = y.$a();
            for (u = 0; u <= h; ++u) p + u < this.ha.length && (this.Pa += this.ha.charAt(p + u));
            0 < h && (y.Pc(n), p = n[0] - n[2], u = n[1] - n[3], p = Math.sqrt(p * p + u * u), p = p / h * 3, this.Jg(n, p))
          }
          for (q = q.ve(); !q.ta(v) && !q.ta(A); q = q.ve())
            if (this.zh(q.Rg()))
              for (q.rb(r), y = q.Jb(); !y.ta(B); y = y.Yd()) {
                h = y.cg();
                p = y.$a();
                for (u = 0; u <= h; ++u) p + u < this.ha.length && (this.Pa += this.ha.charAt(p + u));
                0 < h && (y.Pc(n), p = n[0] - n[2], u = n[1] - n[3], p = Math.sqrt(p *
                  p + u * u), p = p / h * 3, this.Jg(n, p))
              }
          v.rb(r);
          h = new XODText.Na;
          h.su(r, d) || (z = v.YF(v.Tg() - 1), w = z.Wb() - 1);
          for (y = v.Jb(); !y.ta(B) && !y.ta(z); y = y.Yd()) {
            h = y.cg();
            p = y.$a();
            for (u = 0; u <= h; ++u) p + u < this.ha.length && (this.Pa += this.ha.charAt(p + u));
            0 < h && (y.Pc(n), p = n[0] - n[2], u = n[1] - n[3], p = Math.sqrt(p * p + u * u), p = p / h * 3, this.Jg(n, p))
          }
          z.md(w, m);
          h = z.cg();
          p = z.$a();
          console.assert(w <= h);
          for (u = 0; u <= w; ++u) p + u < this.ha.length && (this.Pa += this.ha.charAt(p + u));
          0 < h && (z.Pc(n), p = n[0] - n[2], u = n[1] - n[3], p = Math.sqrt(p * p + u * u), p = p / h * 3, this.nk(n, m, !1),
            this.Jg(n, p))
        }
        return 0 < this.Da.length
      },
      Ui: function (a) {
        if (0 > a || a >= this.pe.length) return !1;
        if (0 >= this.Es || this.Es !== a) {
          var d = this.pe[a].text;
          if (null == d || !d.ready()) return !1;
          this.xb = d;
          this.ha = this.xb.Qa;
          this.lL();
          this.kL();
          this.Es = a
        }
        return !0
      },
      Jg: function (a, d) {
        var c = this.Da.length / 8;
        if (c) {
          for (var b = Array(8), c = 8 * (c - 1), f = 0; 8 > f; ++f) b[f] = this.Da[c + f];
          if (XODText.bb.Is(b, a, !0, d))
            for (f = 0; 8 > f; ++f) this.Da[c + f] = b[f];
          else
            for (f = 0; 8 > f; ++f) this.Da.add(a[f])
        } else
          for (var f = 0; 8 > f; ++f) this.Da.add(a[f])
      },
      nk: function (a,
        d, c) {
        var b = new XODText.ca;
        b.init(a[0], a[1]);
        var f = new XODText.ca;
        f.init(a[2], a[3]);
        var g = XODText.ca.jg(f, b);
        g.normalize() && (c ? (f = new XODText.ca, f.init(d[0], d[1]), d = XODText.ca.jg(f, b).Ub(g), g = XODText.ca.multiply(g, d), a[0] += g.x, a[1] += g.y, a[6] += g.x, a[7] += g.y) : (b = new XODText.ca, b.init(d[2], d[3]), d = XODText.ca.jg(b, f).Ub(g), g = XODText.ca.multiply(g, d), a[2] += g.x, a[3] += g.y, a[4] += g.x, a[5] += g.y))
      },
      HC: function (a) {
        var d = XODText.Ca.Al(0),
          c = XODText.Ca.Al(1.570796325),
          b = XODText.Ca.Al(3.14159265),
          f = XODText.Ca.Al(3.14159265 *
            1.5);
        switch (parseInt(a / 90 + .1)) {
          case 0:
            return d;
          case 1:
            return c;
          case 2:
            return b;
          case 3:
            return f;
          case 4:
            return d;
          default:
            return d
        }
      },
      zh: function () {
        return !0
      },
      qD: function (a, d) {
        var c = this.HC(d),
          b = new XODText.xd(a.x1, a.y1),
          b = c.W(b);
        a.x1 = b.x;
        a.y1 = b.y;
        b = new XODText.xd(a.x2, a.y2);
        b = c.W(b);
        a.x2 = b.x;
        a.y2 = b.y;
        a.normalize()
      },
      kL: function () {
        this.nb.clear();
        var a, d = new XODText.Pb;
        d.Nb();
        var c = new XODText.Na,
          b = new XODText.Ps,
          f = !1;
        for (a = this.xb.kq(); !a.ta(d); a = a.ve())
          if (this.zh(a.Rg())) {
            a.rb(c);
            c.normalize();
            var g =
              new XODText.Na;
            g.Xg(c);
            this.qD(c, this.sc);
            f ? (this.nb.add(b), b = new XODText.Ps, b.mx.Xg(g), b.lf.Xg(c), b.vh = a, b.wh = a) : (b.mx.Xg(g), b.lf.Xg(c), b.vh = a, b.wh = a, f = !0)
          } f && this.nb.add(b)
      },
      zC: function (a, d) {
        for (var c = XODText.Zc.Yj, b = new XODText.Na, f = a.vh, g = a.vh;; g = g.ve()) {
          if (!this.zh(g.Rg()))
            if (g.ta(a.wh)) break;
            else continue;
          g.rb(b);
          this.qD(b, this.sc);
          var h = (b.y1 + b.y2) / 2;
          Math.abs(h - d.y) < c && (f = g, c = Math.abs(h - d.y));
          if (g.ta(a.wh)) break
        }
        return f
      },
      Gr: function (a, d, c) {
        var b = XODText.ca.jg(d, a),
          f = XODText.ca.jg(c, a),
          g = f.Ub(b);
        if (0 >= g) return f.Ub(f);
        f = b.Ub(b);
        if (f <= g) return c = XODText.ca.jg(c, d), c.Ub(c);
        a = XODText.ca.Zn(a, XODText.ca.multiply(b, g / f));
        c = XODText.ca.jg(c, a);
        return c.Ub(c)
      },
      ow: function (a, d) {
        var c = this.Gr(new XODText.ca(d.x1, d.y1), new XODText.ca(d.x2, d.y1), a),
          b = this.Gr(new XODText.ca(d.x2, d.y1), new XODText.ca(d.x2, d.y2), a),
          f = this.Gr(new XODText.ca(d.x2, d.y2), new XODText.ca(d.x1, d.y2), a),
          g = this.Gr(new XODText.ca(d.x1, d.y2), new XODText.ca(d.x1, d.y1), a);
        return Math.min(c, b, f, g)
      },
      sL: function (a, d, c, b) {
        var f = -1,
          g = -1,
          h = !1,
          l = !1,
          k = this.HC(this.sc),
          m = new XODText.ca,
          n = new XODText.ca;
        m.ru(a);
        n.ru(d);
        a = new XODText.xd(m.x, m.y);
        a = k.W(a);
        m.x = a.x;
        m.y = a.y;
        a = new XODText.xd(n.x, n.y);
        a = k.W(a);
        n.x = a.x;
        n.y = a.y;
        d = 0;
        for (var r = this.nb.length; d < r; ++d) k = this.nb[d], 0 > f && k.lf.contains(m.x, m.y) && (f = d, l = !0), 0 > g && k.lf.contains(n.x, n.y) && (g = d, h = !0);
        if (!l || !h) {
          a = [];
          for (k = 0; k < this.nb.length; ++k) a.add(0);
          var k = Math.max(f, g),
            q = new XODText.Na;
          q.Ha(m.x, m.y, n.x, n.y);
          q.mQ(.1);
          0 <= k && q.union(this.nb[k].lf);
          var v = new XODText.Na;
          d = 0;
          for (r = this.nb.length; d <
            r; ++d) {
            var p = new XODText.Na;
            p.Xg(this.nb[d].lf);
            v.su(p, q) && (a[d] = 1)
          }
          d = a.indexOf(1);
          for (q = r = a.indexOf(1); - 1 !== r;) {
            q = r;
            r++;
            if (r >= a.length) break;
            r = a.indexOf(1, r)
          }
          r = q;
          if (0 > d) return new XODText.Sr(c, b);
          0 > k ? (f = d, g = r, l = new XODText.Na, l.Xg(this.nb[f].lf), h = (m.x - l.x1) * (m.x - l.x2), h = 0 < h ? Math.min(Math.abs(m.x - l.x1), Math.abs(m.x - l.x2)) : 0, k = (m.y - l.y1) * (m.y - l.y2), k = 0 < k ? Math.min(Math.abs(m.y - l.y1), Math.abs(m.y - l.y2)) : 0, a = (n.x - l.x1) * (n.x - l.x2), a = 0 < a ? Math.min(Math.abs(n.x - l.x1), Math.abs(n.x - l.x2)) : 0, d = (n.y - l.y1) * (n.y -
            l.y2), d = 0 < d ? Math.min(Math.abs(n.y - l.y1), Math.abs(n.y - l.y2)) : 0, h * h + k * k > a * a + d * d && (l = f, f = g, g = l)) : (q = new XODText.Na, q.Xg(this.nb[k].lf), a = new XODText.ca, l ? a.ru(n) : a.ru(m), console.assert(!(l && h) && !(!l && !h)), console.assert(!q.contains(a.x, a.y)), k - d > Math.max(r - k, 0) ? (h = Math.min(k, d), q = r) : (h = Math.max(k, r), q = d), h != k && (d = Array(3), r = Array(3), d[0] = this.ow(a, this.nb[q].lf), d[1] = this.ow(a, this.nb[h].lf), d[2] = this.ow(a, this.nb[k].lf), r[0] = q, r[1] = h, r[2] = k, h = 1, d[0] < d[1] && (h = 0), d[2] < d[h] && (h = 2), h = r[h]), l ? g = h : f = h)
        }
        0 <=
          f && 0 <= g && (c = this.zC(this.nb[f], m, c), b = this.zC(this.nb[g], n, b));
        return new XODText.Sr(c, b)
      },
      Da: null,
      Pa: null,
      pe: null,
      xb: null,
      Es: 0,
      sc: 0,
      kx: !1,
      nb: null
    };
    XODText.qh = function (a, d, c, b, f, g) {
      this.xv = a;
      this.eA = d;
      this.wA = c;
      this.DD = b;
      this.WH = f;
      this.VH = g
    };
    XODText.qh.prototype = {
      xv: 0,
      eA: 0,
      wA: null,
      DD: null,
      WH: 0,
      VH: 0
    };
    XODText.Sr = function (a, d) {
      this.CC = a;
      this.NC = d
    };
    XODText.Sr.prototype = {
      CC: null,
      NC: null
    };
    XODText.Cw = function (a, d) {
      this.iD = a;
      this.vC = d
    };
    XODText.Cw.prototype = {
      iD: 0,
      vC: 0
    };
    XODText.Dw = function (a, d, c, b, f, g) {
      this.$w =
        a;
      this.rs = d;
      this.qs = c;
      this.es = b;
      this.Os = f;
      this.Ns = g
    };
    XODText.Dw.prototype = {
      $w: null,
      rs: 0,
      qs: 0,
      es: null,
      Os: 0,
      Ns: 0
    };
    XODText.xs.Ma("XODText._intData");
    XODText.xd.Ma("XODText.Point2D");
    XODText.bb.Ma("XODText.Quad");
    XODText.Ca.Ma("XODText.Matrix2D");
    XODText.np.Ma("XODText._highlights");
    XODText.mp.Ma("XODText._highlight");
    XODText.bx.Ma("XODText._highlightDocInfo");
    XODText.Ps.Ma("XODText._selectionTextBlock");
    XODText.ib.Ma("XODText.SearchMode");
    XODText.ac.Ma("XODText.ResultCode");
    XODText.me.Ma("XODText.TextSearchLowlevel");
    XODText.Gi.Ma("XODText.TextLocator");
    XODText.qh.Ma("XODText.ResultRun");
    XODText.Sr.Ma("XODText.ResultFindStructuralBounds");
    XODText.Cw.Ma("XODText.ResultDetermineOriRange");
    XODText.Dw.Ma("XODText.ResultFindTexts");
    XODText.xs.PB = -2147483648;
    XODText.bb.eN = Math.cos(3.14159265 / 180 * 2);
    XODText.ib.LE = 1;
    XODText.ib.PE = 2;
    XODText.ib.sy = 4;
    XODText.ib.NE = 8;
    XODText.ib.ME = 16;
    XODText.ib.KE = 32;
    XODText.ib.OE = 64;
    XODText.ib.QE = 128;
    XODText.ac.Mk = 0;
    XODText.ac.It = 1;
    XODText.ac.Wp = 2
  })();
  self.qc.ov("XODText");
  XODText.Ag = function () {
    this.nC = {};
    this.nx = 1E3;
    this.SC = 200
  };
  XODText.Ag.prototype = {
    TC: 0,
    UC: 0,
    nx: 0,
    SC: 0,
    Hy: function (a) {
      var e = new XODText.Na,
        d = this.nC[a];
      "undefined" != typeof d ? e.Xg(d) : window.utils.warn("Character " + a + " does not have bounding box.");
      return e
    },
    Xs: function (a, e, d) {
      var c = new XODText.Na;
      c.set(e, this.TC, d, this.UC);
      this.nC[a] = c
    },
    hr: function (a, e) {
      this.TC = a;
      this.UC = e
    },
    yI: function (a) {
      this.nx = a
    }
  };
  XODText.ww = function (a) {
    this.Dy = {};
    this.jc = !1;
    this.ja = a
  };
  $.extend(XODText.ww.prototype, {
    jc: !1,
    isReady: function () {
      return this.jc
    },
    VW: function () {
      return this.Dy
    },
    pA: function (a) {
      try {
        var e = new window.Je(a);
        console.assert("FontInfo" === e.ua(), "Root element is incorrect.");
        "FontInfo" === e.ua() && (e.na(), this._parse(e))
      } catch (d) {
        console.warn("Font Parser has encountered an error: " + d.message);
        return
      }
      this.jc = !0
    },
    ts: function (a) {
      var e = "",
        d = 0,
        c, b, f;
      for (2 <= a.length && "{" === a.charAt(0) && "}" === a.charAt(1) && (a = a.substr(2)); d < a.length;) c = a.charCodeAt(d), 128 > c ? (e += String.fromCharCode(c),
        d++) : 191 < c && 224 > c ? (b = a.charCodeAt(d + 1), e += String.fromCharCode((c & 31) << 6 | b & 63), d += 2) : (b = a.charCodeAt(d + 1), f = a.charCodeAt(d + 2), e += String.fromCharCode((c & 15) << 12 | (b & 63) << 6 | f & 63), d += 3);
      return e
    },
    LL: function (a) {
      a = a.K("name");
      console.assert(42 === a.length, "Font file name is incorrect.");
      console.assert(null != a, "Font file name is incorrect.");
      return window.Ze.Py(this.ja, parseInt("0x" + a.substr(28, 8)))
    },
    KL: function (a, e) {
      console.assert(null != e, "Font bbox file is corrupted.");
      var d = a.K("height");
      console.assert(null !=
        d, "Height attribute is missing.");
      d = d.split(":");
      e.hr(parseFloat(d[0]), parseFloat(d[1]))
    },
    ML: function (a, e) {
      var d = a.K("units_per_em");
      null != d && e.yI(parseInt(d))
    },
    JL: function (a, e) {
      console.assert(null != e, "Font bbox file is corrupted.");
      var d = a.K("bbox");
      console.assert(null != d, "Character width is missing.");
      var c = d.split(":"),
        d = parseFloat(c[0]),
        c = parseFloat(c[1]),
        b = this.ts(a.current.textContent);
      console.assert(0 < b.length, "Char value is empty.");
      e.Xs(b, d, c)
    },
    _parse: function (a) {
      do {
        for (var e = null; a.advance();) {
          var d =
            a.ua();
          "Font" === d ? (e = new XODText.Ag, d = this.LL(a), this.KL(a, e), this.ML(a, e), this.Dy[d] = e, a.na()) : "c" === d ? this.JL(a, e) : console.warn("Font XML parser has encountered a tag it can't process.")
        }
        a.Aa()
      } while (a.depth)
    }
  });
  XODText.Ag.Ma("XODText.Font");
  XODText.ww.Ma("XODText.FontParser");
  (function (a) {
    function e(b) {
      this.done = !1;
      this.worker = new Worker(a.o.Ty() + "CoreWorker.js");
      var c = null,
        d = null,
        l = this;
      this.index = b;
      this.worker.addEventListener("message", function (b) {
        switch (b.data.command) {
          case "done":
            l.done = !0;
            d = null;
            break;
          case "nextChunk":
            c = b.data.resources;
            d = b.data.dataString;
            break;
          default:
            throw Error("Unknown message command " + b.data.command + " from worker");
        }
        l.done ? (l.rt(null, []), l.finish()) : c && d && (l.rt(d, c), d = c = null)
      }, !1);
      this.PU()
    }
    var d = [],
      c = [],
      b = "../core/";
    e.prototype = {
      setData: function (b,
        a, c) {
        this.rt = a;
        this.done = !1;
        this.worker.postMessage({
          command: "data",
          dataString: b,
          docId: c
        })
      },
      cancel: function () {
        this.worker.postMessage({
          command: "cancel"
        })
      },
      PU: function () {
        this.worker.postMessage({
          command: "options",
          imageScaling: a.o.Cx,
          specialBlendSupported: a.utils.specialBlendSupported,
          continueWithoutPrompt: 0 < a.Yl
        })
      },
      qR: function () {
        this.worker.postMessage({
          command: "nextChunk"
        })
      },
      finish: function () {
        this.done = !0;
        if (c.length) {
          var b = c[0];
          c.shift();
          this.setData(b.data, b.rt, b.ja);
          b.pQ(this)
        }
      }
    };
    a.OP = function (b,
      a, h, l) {
      for (var k = d.length, m, n = 0; n < k; ++n) d[n].done && (m = d[n]);
      m || 4 > k && (m = d[k] = new e(k));
      m ? (m.setData(b, l, a), h(m)) : c.push({
        pQ: h,
        data: b,
        ja: a,
        rt: l
      })
    };
    a.o = a.o || {};
    a.o.Cx = !1;
    a.o.rj = function () {
      return b
    };
    a.o.NT = function (a) {
      a.lastIndexOf("/") !== a.length - 1 && (a += "/");
      b = a
    }
  })(window);
  (function (a) {
    function e(b, a) {
      var f = Error.apply(this, arguments);
      f.name = this.name = "WorkerError";
      this.stack = f.stack;
      this.message = f.message;
      this.userMessage = a
    }

    function d(b) {
      r.push(b);
      for (var a = 0; a < q.length; ++a) b(q[a])
    }

    function c(c, h, l) {
      if (_.isUndefined(c)) return null;
      var n, v = new Promise(function (b, f) {
          d(function () {
            f(new e("The worker has encountered an error", a.utils.ie ? "error.EmsWorkerErrorIE" : "error.EmsWorkerError"))
          });
          var l = {};
          g && (l.workerHeapSize = g);
          k && (l.pdfResourcePath = k);
          m && (l.pdfAsmPath = m);
          var v =
            window.location.href,
            p = v.lastIndexOf("/", v.lastIndexOf("#")); - 1 !== p && (l.parentUrl = v.substring(0, p + 1));
          n = new window.YK(c, h, l);
          n.gB.then(function () {
            b()
          }, function (b) {
            f(b)
          })
        }),
        p = new Promise(function (b, f) {
          if (a.utils.isJSWorker && a.jsworker && a.jsworker.utils) "android" !== a.jsworker.platform && "ios" !== a.jsworker.platform || !a.jsworker.utils.getResourcesDir ? a.jsworker.utils.getHTMLContentPath ? a.jsworker.utils.getHTMLContentPath(function (a) {
              a ? (a.endsWith("/") || (a += "/"), b(a + "js/html5/pdf/")) : f(new e("Couldn't fetch resource file path."))
            }) :
            f(new e("Some functions required for fetching resources are not defined.")) : a.jsworker.utils.getResourcesDir(function (a, c) {
              a ? f(a) : b(c)
            });
          else {
            var c = new XMLHttpRequest;
            c.open("GET", window.o.fu() + "pdfnet.res", !0);
            c.responseType = "arraybuffer";
            c.onload = function () {
              200 === c.status ? b(c.response) : f(new e("Couldn't fetch resource file.", "error.ResourceLoadError"))
            };
            c.onerror = function () {
              f(new e("Network error", "error.ResourceLoadError"))
            };
            c.send(null)
          }
        });
      return Promise.all([v, p]).then(function (b) {
        return a.utils.isJSWorker &&
          a.jsworker && a.jsworker.utils ? n.ZQ(b[1], l) : n.YQ(b[1], l)
      }).then(function () {
        "undefined" !== typeof b && n.HA(b);
        "undefined" !== typeof f && n.Cv(f);
        return n
      })["catch"](function (b) {
        b.message && -1 !== b.message.indexOf("Bad License Key") && (b.userMessage = "error.InvalidLicenseKey");
        throw b;
      })
    }
    var b, f, g, h;
    a.Nv = a.utils.chromeHasSubzero;
    var l, k, m, n = {},
      r = [],
      q = [],
      v = _.throttle(function (b) {
        var a = r.length;
        q.push(b);
        for (var f = 0; f < a; ++f) r[f](b)
      }, 100, {
        trailing: !1
      });
    e.prototype = Object.create(Error.prototype, {
      constructor: {
        value: e,
        writable: !0,
        configurable: !0
      }
    });
    a.o = a.o || {};
    var p = a.o,
      u;
    p.Yt = function () {
      return u
    };
    p.nI = function (b) {
      u = b
    };
    p.nP = function () {
      return new Promise(function (b) {
        var a;
        try {
          a = window.parent && window.parent.WebViewer ? window.parent.WebViewer.l() : void 0, b(a)
        } catch (f) {
          window.parent.postMessage("requestl", "*"), $(window).on("message.l", function (a) {
            a = a.originalEvent;
            "object" === typeof a.data && "responsel" === a.data.type && (b(a.data.value), $(window).off("message.l"))
          })
        }
      })
    };
    p.DF = function (b) {
      return b ? Promise.resolve(b) : a._trnDebugMode ?
        Promise.resolve() : ("" + location).split("").reverse().join("").match(/(moc\.nortfdp\.[^.]+\/\/|moc\.nortfdp\/\/)/) || a.jsworker ? Promise.resolve("") : p.nP().then(function (b) {
          return b ? b : null
        })
    };
    p.tG = function (b) {
      return !b || 50 > b.length || "demo:" !== b.slice(0, 5) ? !1 : 0 < b.slice(5, b.lastIndexOf(":")).match(/^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/).length
    };
    var w = {};
    p.kr = function (b) {
      b.pdf && (w.Ij = b.pdf);
      b.office && (w.Qu = b.office)
    };
    p.xf = function () {
      return w
    };
    p.HA = function (a) {
      b = a;
      p.xf().Ij &&
        p.xf().Ij.then(function (b) {
          b.HA(a)
        })
    };
    p.Cv = function (b) {
      f = b;
      p.xf().Ij && p.xf().Ij.then(function (b) {
        b.Cv(f)
      })
    };
    p.XN = function (b) {
      a.utils.chromeHasSubzero && (a.Nv = b)
    };
    p.BG = function () {
      return a.Nv
    };
    var A = a.PDFNet && a.PDFNet.hasFullAPI;
    p.WN = function (b) {
      A = b
    };
    p.zq = function () {
      return A
    };
    p.oT = function (b) {
      b.lastIndexOf("/") !== b.length - 1 && (b += "/");
      l = b
    };
    p.dP = function () {
      return m || p.rj() + "pdf/" + (p.zq() ? "full/" : "lean/")
    };
    p.mT = function (b) {
      b.lastIndexOf("/") !== b.length - 1 && (b += "/");
      m = b
    };
    p.Wy = function () {
      return l || p.rj() +
        "pdf/" + (p.zq() ? "full/" : "lean/")
    };
    p.nT = function (b) {
      b.lastIndexOf("/") !== b.length - 1 && (b += "/");
      k = b
    };
    p.fu = function () {
      return k || p.rj() + "pdf/"
    };
    var B;
    p.hT = function (b) {
      b.lastIndexOf("/") !== b.length - 1 && (b += "/");
      B = b
    };
    p.Ty = function () {
      return B || p.rj()
    };
    p.TS = function (b) {
      g = b
    };
    var z, x, y;
    p.rP = function () {
      return x
    };
    p.Ky = function () {
      y || (y = new Promise(function (b) {
        if (a.utils.isJSWorker && a.jsworker) b("jsworker");
        else if (a.utils.isChrome) {
          var f = !0,
            c = $('<embed name="simple_module" id="simple_module" width=0 height=0 src="' +
              window.o.fu() + 'SimpleWorker.nmf" type="application/x-pnacl" style="position:absolute" />'),
            g = c[0];
          g.addEventListener("error", function () {
            f && (console.log("PNaClError: PNaCl failed to load. Falling back to Emscripten."), f = !1);
            b("ems")
          }, !0);
          $(document.body).prepend(c);
          var d = !1,
            h = function (a) {
              d || (b(a), clearTimeout(k), c.remove(), d = !0)
            };
          if ("undefined" === typeof g.postMessage) f && (console.log("PNaClError: PNaCl seems to be disabled. Falling back to Emscripten."), f = !1), h("ems");
          else {
            var k, l = function () {
              f && (console.log("PNaClError: PNaCl Timed out. Falling back to Emscripten."),
                f = !1);
              h("ems")
            };
            g.addEventListener("progress", function () {
              clearTimeout(k);
              k = setTimeout(l, 5E3)
            });
            g.addEventListener("message", function (b) {
              clearTimeout(k);
              "T" === b.data ? h("pnacl") : (console.log("PNaClError: PNaCl responded incorrectly. Falling back to Emscripten."), h("ems"))
            });
            g.postMessage("T");
            k = setTimeout(l, 5E3)
          }
        } else b("ems")
      }));
      return y
    };
    p.tF = function () {
      return n.Hx
    };
    p.wH = function (b, f, c) {
      p.xf().Ij && b === p.tF() || (_.isUndefined(c) && (c = {}), c.workerId = "pdf_pnacl_module", c.pnaclWorkerPath = window.o.Wy() +
        (a.Nv ? "PDFWorkerSubzero.nmf" : "PDFWorker.nmf"), c.emsWorkerPath = window.o.fu() + (g || k || m ? "ResizableWorker.js" : "PDFworker.js"), c.hB = n, z = p.xH(b, f, c))
    };
    p.xH = function (b, f, c) {
      c = c || {};
      var g;
      return new Promise(function (h, k) {
        function l(b) {
          function f(a) {
            "object" === typeof a.data && "action" in a.data && "workerLoaded" === a.data.action && (b.workerLoadingProgress && b.workerLoadingProgress(1), g.removeEventListener("message", f))
          }
          var g;
          d(function () {
            k(new e("The worker has encountered an error", a.utils.ie ? "error.EmsWorkerErrorIE" :
              "error.EmsWorkerError"))
          });
          g = c.emsWorkerPath.toLowerCase().startsWith("http") ? new Worker(window.o.Ty() + "CORSWorker.js?isfull=" + p.zq() + "&file=" + encodeURIComponent(c.emsWorkerPath) + "&path=" + encodeURIComponent(window.o.Wy().slice(0, -9))) : new Worker(c.emsWorkerPath + "?isfull=" + p.zq());
          g.onerror = v;
          x = !0;
          g.addEventListener("message", f, !1);
          var h = p.PJ();
          p.tI(h ? 18E3 / h : 0);
          return g
        }

        function m(b, a) {
          h(b);
          c.hB.Hx = a
        }
        if ("jsworker" === b) console.log("Attempting to load JSWorker"), a.utils.isJSWorker && (g = a.jsworker.loadWorker(),
          console.log("JSWorker loaded!"), g && g.getProcessId(function (b) {
            console.log("Loaded worker in process: " + b)
          })), x = !1, m(g, "jsworker");
        else if ("pnacl" === b) {
          _.isUndefined(c.useEmscriptenWhileLoading) && (c.useEmscriptenWhileLoading = !p.BG());
          x = !1;
          var n = $('<embed name="' + c.workerId + '" id="' + c.workerId + '" width=0 height=0 src="' + c.pnaclWorkerPath + '" type="application/x-pnacl" style="position:absolute" />');
          $(document.body).prepend(n);
          var u = function (b) {
              b.lengthComputable && (c.useEmscriptenWhileLoading ? (g.removeEventListener("progress",
                u, !0), g.removeEventListener("loadend", r, !0), g.removeEventListener("crash", q, !0), g.removeEventListener("error", w, !0), m(l(f), "ems"), g.addEventListener("loadend", function () {
                x = !1;
                c.hB.Hx = "pnacl";
                f.pnaclComplete && f.pnaclComplete(g)
              })) : f.workerLoadingProgress && f.workerLoadingProgress(b.loaded / b.total))
            },
            r = function () {
              f.workerLoadingProgress && f.workerLoadingProgress(1);
              p.tI(1E3);
              m(g, "pnacl")
            },
            q = function () {
              k(new e("The Worker has Crashed.", "error.PNaClCrashError"))
            },
            w = function () {
              console.log("PNaClError: Main worker encountered an error. Falling back to Emscripten.");
              m(l(f), "ems")
            };
          g = n[0];
          g.addEventListener("progress", u, !0);
          g.addEventListener("loadend", r, !0);
          g.addEventListener("crash", q, !0);
          g.addEventListener("error", w, !0)
        } else "ems" === b && m(l(f), "ems")
      })
    };
    p.rS = function (b) {
      z = Promise.resolve(b);
      p.kr({
        pdf: null
      })
    };
    p.uG = function () {
      return h
    };
    p.qu = function (b, f, g) {
      z || p.xf().Ij || p.wH(b, f);
      p.Yt() || p.nI(g);
      g = g || p.Yt();
      if (p.xf().Ij) {
        if (h && g && !p.tG(g)) throw Error("PDFNet was already initialized in demo mode. For solution see pdftron.com/kb_demo_init. Note that calling initPDFWorkerTransports or creating WebViewer object will also call PDFNet.initialize so your license key should be used in all of these calls.");
      } else h = !g, b = Promise.all([p.DF(g), z]).then(function (b) {
        if (null === b[0] && !a._trnDebugMode) throw b = Error("A license key for WebViewer is required. You can get a demo license key by downloading the trial from pdftron.com."), b.userMessage = "A license key for WebViewer is required. You can get a demo license key by downloading the trial from pdftron.com.", b;
        h = p.tG(b[0]);
        return c(b[1], x, b[0])
      }), p.kr({
        pdf: b
      });
      return p.xf().Ij
    };
    a.lk = e;
    p.wM = d
  })(window);
  (function (a) {
    var e = {
      PDFNetC: 14,
      PDFNetCFull: 14
    };
    a.LP = function () {
      return e.PDFNetC
    }
  })("undefined" === typeof window ? this : window);
  (function (a) {
    var e = a._trnDebugMode || a.fW,
      d = a.GL ? a.GL : {};
    a.utils = a.utils ? a.utils : {};
    a.utils.warn = function (a, b) {
      b || (b = a, a = "default");
      e && d[a] && console.warn(a + ": " + b)
    };
    a.utils.log = function (a, b) {
      b || (b = a, a = "default");
      e && d[a] && console.log(a + ": " + b)
    };
    a.utils.error = function (a) {
      e && console.error(a);
      throw Error(a);
    };
    a.info = function () {};
    a.warn = function (c, b) {
      a.utils.warn(c, b)
    };
    a.error = function (c) {
      a.utils.error(c)
    }
  })("undefined" === typeof window ? this : window);
  (function (a) {
    function e(b, a, f, g, h, k) {
      this.Uj = 16;
      this.gK = 288;
      this.status = 0;
      this.root = null;
      this.m = 0;
      var l = Array(this.Uj + 1),
        e, A, B, z, x, y, F, L = Array(this.Uj + 1),
        D, H, J, E = new d,
        N = Array(this.Uj);
      z = Array(this.gK);
      var G, M = Array(this.Uj + 1),
        O, K, C;
      C = this.root = null;
      for (x = 0; x < l.length; x++) l[x] = 0;
      for (x = 0; x < L.length; x++) L[x] = 0;
      for (x = 0; x < N.length; x++) N[x] = null;
      for (x = 0; x < z.length; x++) z[x] = 0;
      for (x = 0; x < M.length; x++) M[x] = 0;
      e = 256 < a ? b[256] : this.Uj;
      D = b;
      H = 0;
      x = a;
      do l[D[H]]++, H++; while (0 < --x);
      if (l[0] == a) this.root = null, this.status =
        this.m = 0;
      else {
        for (y = 1; y <= this.Uj && 0 == l[y]; y++);
        F = y;
        k < y && (k = y);
        for (x = this.Uj; 0 != x && 0 == l[x]; x--);
        B = x;
        k > x && (k = x);
        for (O = 1 << y; y < x; y++, O <<= 1)
          if (0 > (O -= l[y])) {
            this.status = 2;
            this.m = k;
            return
          } if (0 > (O -= l[x])) this.status = 2, this.m = k;
        else {
          l[x] += O;
          M[1] = y = 0;
          D = l;
          H = 1;
          for (J = 2; 0 < --x;) M[J++] = y += D[H++];
          D = b;
          x = H = 0;
          do 0 != (y = D[H++]) && (z[M[y]++] = x); while (++x < a);
          a = M[B];
          M[0] = x = 0;
          D = z;
          H = 0;
          z = -1;
          G = L[0] = 0;
          J = null;
          for (K = 0; F <= B; F++)
            for (b = l[F]; 0 < b--;) {
              for (; F > G + L[1 + z];) {
                G += L[1 + z];
                z++;
                K = (K = B - G) > k ? k : K;
                if ((A = 1 << (y = F - G)) > b + 1)
                  for (A -= b + 1, J = F; ++y <
                    K && !((A <<= 1) <= l[++J]);) A -= l[J];
                G + y > e && G < e && (y = e - G);
                K = 1 << y;
                L[1 + z] = y;
                J = Array(K);
                for (A = 0; A < K; A++) J[A] = new d;
                C = null == C ? this.root = new c : C.next = new c;
                C.next = null;
                C.list = J;
                N[z] = J;
                0 < z && (M[z] = x, E.b = L[z], E.e = 16 + y, E.t = J, y = (x & (1 << G) - 1) >> G - L[z], N[z - 1][y].e = E.e, N[z - 1][y].b = E.b, N[z - 1][y].n = E.n, N[z - 1][y].t = E.t)
              }
              E.b = F - G;
              H >= a ? E.e = 99 : D[H] < f ? (E.e = 256 > D[H] ? 16 : 15, E.n = D[H++]) : (E.e = h[D[H] - f], E.n = g[D[H++] - f]);
              A = 1 << F - G;
              for (y = x >> G; y < K; y += A) J[y].e = E.e, J[y].b = E.b, J[y].n = E.n, J[y].t = E.t;
              for (y = 1 << F - 1; 0 != (x & y); y >>= 1) x ^= y;
              for (x ^=
                y;
                (x & (1 << G) - 1) != M[z];) G -= L[z], z--
            }
          this.m = L[1];
          this.status = 0 != O && 1 != B ? 1 : 0
        }
      }
    }

    function d() {
      this.n = this.b = this.e = 0;
      this.t = null
    }

    function c() {
      this.list = this.next = null
    }
    var b = [0, 1, 3, 7, 15, 31, 63, 127, 255, 511, 1023, 2047, 4095, 8191, 16383, 32767, 65535],
      f = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0],
      g = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 99, 99],
      h = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289,
        16385, 24577
      ],
      l = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13],
      k = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
    a.im || (a.im = {});
    a.im.IB = function (b) {
      this.ZU();
      this.cw = b;
      this.dw = 0
    };
    a.im.IB.prototype = {
      getBytes: function (b) {
        for (var a, f = Array(1024), c = [], g = 0; g < b && 0 < (a = this.YU(f, 0, f.length));) c[c.length] = String.fromCharCode.apply(null, f.slice(0, a)), g += a;
        return g ? (this.cw = this.cw.slice(this.dw), this.dw = 0, c.join("")) : ""
      },
      UU: function () {
        return this.cw.length == this.dw ? -1 : this.cw.charCodeAt(this.dw++) &
          255
      },
      Fc: function (b) {
        for (; this.Rl < b;) this.Io |= this.UU() << this.Rl, this.Rl += 8
      },
      Vc: function (a) {
        return this.Io & b[a]
      },
      lc: function (b) {
        this.Io >>= b;
        this.Rl -= b
      },
      bw: function (b, a, f) {
        var c, g, d;
        if (0 == f) return 0;
        for (d = 0;;) {
          this.Fc(this.vg);
          g = this.Rj.list[this.Vc(this.vg)];
          for (c = g.e; 16 < c;) {
            if (99 == c) return -1;
            this.lc(g.b);
            c -= 16;
            this.Fc(c);
            g = g.t[this.Vc(c)];
            c = g.e
          }
          this.lc(g.b);
          if (16 == c) this.Qd &= 32767, b[a + d++] = this.Qj[this.Qd++] = g.n;
          else {
            if (15 == c) break;
            this.Fc(c);
            this.Ge = g.n + this.Vc(c);
            this.lc(c);
            this.Fc(this.Ho);
            g = this.zJ.list[this.Vc(this.Ho)];
            for (c = g.e; 16 < c;) {
              if (99 == c) return -1;
              this.lc(g.b);
              c -= 16;
              this.Fc(c);
              g = g.t[this.Vc(c)];
              c = g.e
            }
            this.lc(g.b);
            this.Fc(c);
            this.Sl = this.Qd - g.n - this.Vc(c);
            for (this.lc(c); 0 < this.Ge && d < f;) this.Ge--, this.Sl &= 32767, this.Qd &= 32767, b[a + d++] = this.Qj[this.Qd++] = this.Qj[this.Sl++]
          }
          if (d == f) return f
        }
        this.Pj = -1;
        return d
      },
      $U: function (b, a, f) {
        var c;
        c = this.Rl & 7;
        this.lc(c);
        this.Fc(16);
        c = this.Vc(16);
        this.lc(16);
        this.Fc(16);
        if (c != (~this.Io & 65535)) return -1;
        this.lc(16);
        this.Ge = c;
        for (c = 0; 0 < this.Ge && c < f;) this.Ge--, this.Qd &= 32767,
          this.Fc(8), b[a + c++] = this.Qj[this.Qd++] = this.Vc(8), this.lc(8);
        0 == this.Ge && (this.Pj = -1);
        return c
      },
      XU: function (b, a, c) {
        if (null == this.aw) {
          var d, k = Array(288);
          for (d = 0; 144 > d; d++) k[d] = 8;
          for (; 256 > d; d++) k[d] = 9;
          for (; 280 > d; d++) k[d] = 7;
          for (; 288 > d; d++) k[d] = 8;
          this.lB = 7;
          d = new e(k, 288, 257, f, g, this.lB);
          if (0 != d.status) return alert("HufBuild error: " + d.status), -1;
          this.aw = d.root;
          this.lB = d.m;
          for (d = 0; 30 > d; d++) k[d] = 5;
          this.kB = 5;
          d = new e(k, 30, 0, h, l, this.kB);
          if (1 < d.status) return this.aw = null, alert("HufBuild error: " + d.status),
            -1;
          this.VU = d.root;
          this.kB = d.m
        }
        this.Rj = this.aw;
        this.zJ = this.VU;
        this.vg = this.lB;
        this.Ho = this.kB;
        return this.bw(b, a, c)
      },
      WU: function (b, a, c) {
        var d, v, p, u, w, A, B, z = Array(316);
        for (d = 0; d < z.length; d++) z[d] = 0;
        this.Fc(5);
        A = 257 + this.Vc(5);
        this.lc(5);
        this.Fc(5);
        B = 1 + this.Vc(5);
        this.lc(5);
        this.Fc(4);
        d = 4 + this.Vc(4);
        this.lc(4);
        if (286 < A || 30 < B) return -1;
        for (v = 0; v < d; v++) this.Fc(3), z[k[v]] = this.Vc(3), this.lc(3);
        for (; 19 > v; v++) z[k[v]] = 0;
        this.vg = 7;
        v = new e(z, 19, 19, null, null, this.vg);
        if (0 != v.status) return -1;
        this.Rj = v.root;
        this.vg =
          v.m;
        u = A + B;
        for (d = p = 0; d < u;)
          if (this.Fc(this.vg), w = this.Rj.list[this.Vc(this.vg)], v = w.b, this.lc(v), v = w.n, 16 > v) z[d++] = p = v;
          else if (16 == v) {
          this.Fc(2);
          v = 3 + this.Vc(2);
          this.lc(2);
          if (d + v > u) return -1;
          for (; 0 < v--;) z[d++] = p
        } else {
          17 == v ? (this.Fc(3), v = 3 + this.Vc(3), this.lc(3)) : (this.Fc(7), v = 11 + this.Vc(7), this.lc(7));
          if (d + v > u) return -1;
          for (; 0 < v--;) z[d++] = 0;
          p = 0
        }
        this.vg = 9;
        v = new e(z, A, 257, f, g, this.vg);
        0 == this.vg && (v.status = 1);
        if (0 != v.status) return -1;
        this.Rj = v.root;
        this.vg = v.m;
        for (d = 0; d < B; d++) z[d] = z[d + A];
        this.Ho = 6;
        v = new e(z,
          B, 0, h, l, this.Ho);
        this.zJ = v.root;
        this.Ho = v.m;
        return 0 == this.Ho && 257 < A || 0 != v.status ? -1 : this.bw(b, a, c)
      },
      ZU: function () {
        null == this.Qj && (this.Qj = Array(65536));
        this.Rl = this.Io = this.Qd = 0;
        this.Pj = -1;
        this.$v = !1;
        this.Ge = this.Sl = 0;
        this.aw = this.Rj = null
      },
      YU: function (b, a, f) {
        var c, g;
        for (c = 0; c < f && (!this.$v || -1 != this.Pj);) {
          if (0 < this.Ge) {
            if (0 != this.Pj)
              for (; 0 < this.Ge && c < f;) this.Ge--, this.Sl &= 32767, this.Qd &= 32767, b[a + c++] = this.Qj[this.Qd++] = this.Qj[this.Sl++];
            else {
              for (; 0 < this.Ge && c < f;) this.Ge--, this.Qd &= 32767, this.Fc(8),
                b[a + c++] = this.Qj[this.Qd++] = this.Vc(8), this.lc(8);
              0 == this.Ge && (this.Pj = -1)
            }
            if (c == f) break
          }
          if (-1 == this.Pj) {
            if (this.$v) break;
            this.Fc(1);
            0 != this.Vc(1) && (this.$v = !0);
            this.lc(1);
            this.Fc(2);
            this.Pj = this.Vc(2);
            this.lc(2);
            this.Rj = null;
            this.Ge = 0
          }
          switch (this.Pj) {
            case 0:
              g = this.$U(b, a + c, f - c);
              break;
            case 1:
              g = null != this.Rj ? this.bw(b, a + c, f - c) : this.XU(b, a + c, f - c);
              break;
            case 2:
              g = null != this.Rj ? this.bw(b, a + c, f - c) : this.WU(b, a + c, f - c);
              break;
            default:
              g = -1
          }
          if (-1 == g) return this.$v ? 0 : -1;
          c += g
        }
        return c
      }
    };
    a.im.inflate = function (b) {
      return (new a.im.IB(b)).getBytes(4E9)
    }
  })(self);
  ! function (a) {
    "object" == typeof exports && "undefined" != typeof module ? module.exports = a() : "function" == typeof define && define.amd ? define([], a) : ("undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this).FR = a()
  }(function () {
    return function e(d, c, b) {
      function f(h, k) {
        if (!c[h]) {
          if (!d[h]) {
            var m = "function" == typeof require && require;
            if (!k && m) return m(h, !0);
            if (g) return g(h, !0);
            m = Error("Cannot find module '" + h + "'");
            throw m.code = "MODULE_NOT_FOUND", m;
          }
          m = c[h] = {
            exports: {}
          };
          d[h][0].call(m.exports,
            function (b) {
              var c = d[h][1][b];
              return f(c ? c : b)
            }, m, m.exports, e, d, c, b)
        }
        return c[h].exports
      }
      for (var g = "function" == typeof require && require, h = 0; h < b.length; h++) f(b[h]);
      return f
    }({
      1: [function (e, d, c) {
        e = "undefined" != typeof Uint8Array && "undefined" != typeof Uint16Array && "undefined" != typeof Int32Array;
        c.assign = function (b) {
          for (var f = Array.prototype.slice.call(arguments, 1); f.length;) {
            var c = f.shift();
            if (c) {
              if ("object" != typeof c) throw new TypeError(c + "must be non-object");
              for (var d in c) c.hasOwnProperty(d) && (b[d] = c[d])
            }
          }
          return b
        };
        c.LI = function (b, f) {
          return b.length === f ? b : b.subarray ? b.subarray(0, f) : (b.length = f, b)
        };
        var b = {
            Gk: function (b, f, c, d, e) {
              if (f.subarray && b.subarray) return void b.set(f.subarray(c, c + d), e);
              for (var n = 0; n < d; n++) b[e + n] = f[c + n]
            },
            bF: function (b) {
              var f, c, d, e, n;
              f = d = 0;
              for (c = b.length; f < c; f++) d += b[f].length;
              n = new Uint8Array(d);
              f = d = 0;
              for (c = b.length; f < c; f++) e = b[f], n.set(e, d), d += e.length;
              return n
            }
          },
          f = {
            Gk: function (b, f, c, d, e) {
              for (var n = 0; n < d; n++) b[e + n] = f[c + n]
            },
            bF: function (b) {
              return [].concat.apply([], b)
            }
          };
        c.MT = function (g) {
          g ?
            (c.Vj = Uint8Array, c.Lo = Uint16Array, c.Mo = Int32Array, c.assign(c, b)) : (c.Vj = Array, c.Lo = Array, c.Mo = Array, c.assign(c, f))
        };
        c.MT(e)
      }, {}],
      2: [function (e, d, c) {
        function b(b, c) {
          if (65537 > c && (b.subarray && h || !b.subarray && g)) return String.fromCharCode.apply(null, f.LI(b, c));
          for (var d = "", l = 0; l < c; l++) d += String.fromCharCode(b[l]);
          return d
        }
        var f = e("./common"),
          g = !0,
          h = !0,
          l = new f.Vj(256);
        for (e = 0; 256 > e; e++) l[e] = 252 <= e ? 6 : 248 <= e ? 5 : 240 <= e ? 4 : 224 <= e ? 3 : 192 <= e ? 2 : 1;
        l[254] = l[254] = 1;
        c.fU = function (b) {
          var c, g, d, h, l, e = b.length,
            u = 0;
          for (h =
            0; h < e; h++) g = b.charCodeAt(h), 55296 === (64512 & g) && h + 1 < e && (d = b.charCodeAt(h + 1), 56320 === (64512 & d) && (g = 65536 + (g - 55296 << 10) + (d - 56320), h++)), u += 128 > g ? 1 : 2048 > g ? 2 : 65536 > g ? 3 : 4;
          c = new f.Vj(u);
          for (h = l = 0; l < u; h++) g = b.charCodeAt(h), 55296 === (64512 & g) && h + 1 < e && (d = b.charCodeAt(h + 1), 56320 === (64512 & d) && (g = 65536 + (g - 55296 << 10) + (d - 56320), h++)), 128 > g ? c[l++] = g : 2048 > g ? (c[l++] = 192 | g >>> 6, c[l++] = 128 | 63 & g) : 65536 > g ? (c[l++] = 224 | g >>> 12, c[l++] = 128 | g >>> 6 & 63, c[l++] = 128 | 63 & g) : (c[l++] = 240 | g >>> 18, c[l++] = 128 | g >>> 12 & 63, c[l++] = 128 | g >>> 6 & 63,
            c[l++] = 128 | 63 & g);
          return c
        };
        c.jW = function (f) {
          return b(f, f.length)
        };
        c.zM = function (b) {
          for (var c = new f.Vj(b.length), g = 0, d = c.length; g < d; g++) c[g] = b.charCodeAt(g);
          return c
        };
        c.BM = function (f, c) {
          var g, d, h, e, p = c || f.length,
            u = Array(2 * p);
          for (g = d = 0; g < p;)
            if (h = f[g++], 128 > h) u[d++] = h;
            else if (e = l[h], 4 < e) u[d++] = 65533, g += e - 1;
          else {
            for (h &= 2 === e ? 31 : 3 === e ? 15 : 7; 1 < e && g < p;) h = h << 6 | 63 & f[g++], e--;
            1 < e ? u[d++] = 65533 : 65536 > h ? u[d++] = h : (h -= 65536, u[d++] = 55296 | h >> 10 & 1023, u[d++] = 56320 | 1023 & h)
          }
          return b(u, d)
        };
        c.HU = function (b, f) {
          var c;
          f = f ||
            b.length;
          f > b.length && (f = b.length);
          for (c = f - 1; 0 <= c && 128 === (192 & b[c]);) c--;
          return 0 > c ? f : 0 === c ? f : c + l[b[c]] > f ? c : f
        }
      }, {
        "./common": 1
      }],
      3: [function (e, d) {
        d.exports = function (c, b, f, g) {
          var d = 65535 & c | 0;
          c = c >>> 16 & 65535 | 0;
          for (var l; 0 !== f;) {
            l = 2E3 < f ? 2E3 : f;
            f -= l;
            do d = d + b[g++] | 0, c = c + d | 0; while (--l);
            d %= 65521;
            c %= 65521
          }
          return d | c << 16 | 0
        }
      }, {}],
      4: [function (e, d) {
        d.exports = {
          NB: 0,
          XV: 1,
          OB: 2,
          UV: 3,
          Xr: 4,
          MV: 5,
          aW: 6,
          qm: 0,
          Yr: 1,
          dL: 2,
          RV: -1,
          ZV: -2,
          NV: -3,
          cL: -5,
          WV: 0,
          KV: 1,
          JV: 9,
          OV: -1,
          SV: 1,
          VV: 2,
          YV: 3,
          TV: 4,
          PV: 0,
          LV: 0,
          $V: 1,
          bW: 2,
          QV: 8
        }
      }, {}],
      5: [function (e,
        d) {
        var c = function () {
          for (var b, f = [], c = 0; 256 > c; c++) {
            b = c;
            for (var d = 0; 8 > d; d++) b = 1 & b ? 3988292384 ^ b >>> 1 : b >>> 1;
            f[c] = b
          }
          return f
        }();
        d.exports = function (b, f, g, d) {
          g = d + g;
          for (b ^= -1; d < g; d++) b = b >>> 8 ^ c[255 & (b ^ f[d])];
          return b ^ -1
        }
      }, {}],
      6: [function (e, d) {
        d.exports = function () {
          this.CR = this.SU = this.time = this.text = 0;
          this.Mc = null;
          this.vy = 0;
          this.Ux = this.name = "";
          this.$P = 0;
          this.done = !1
        }
      }, {}],
      7: [function (e, d) {
        d.exports = function (c, b) {
          var f, g, d, l, k, e, n, r, q, v, p, u, w, A, B, z, x, y, F, L, D, H, J, E;
          f = c.state;
          g = c.Cj;
          J = c.input;
          d = g + (c.Oe - 5);
          l = c.Md;
          E = c.output;
          k = l - (b - c.Kc);
          e = l + (c.Kc - 257);
          n = f.Et;
          r = f.Fe;
          q = f.ti;
          v = f.Ee;
          p = f.window;
          u = f.uj;
          w = f.uc;
          A = f.Yh;
          B = f.Lk;
          z = (1 << f.Zg) - 1;
          x = (1 << f.dn) - 1;
          a: do b: for (15 > w && (u += J[g++] << w, w += 8, u += J[g++] << w, w += 8), y = A[u & z];;) {
              if (F = y >>> 24, u >>>= F, w -= F, F = y >>> 16 & 255, 0 === F) E[l++] = 65535 & y;
              else {
                if (!(16 & F)) {
                  if (0 === (64 & F)) {
                    y = A[(65535 & y) + (u & (1 << F) - 1)];
                    continue b
                  }
                  if (32 & F) {
                    f.mode = 12;
                    break a
                  }
                  c.fb = "invalid literal/length code";
                  f.mode = 30;
                  break a
                }
                L = 65535 & y;
                (F &= 15) && (w < F && (u += J[g++] << w, w += 8), L += u & (1 << F) - 1, u >>>= F, w -= F);
                15 > w && (u += J[g++] << w,
                  w += 8, u += J[g++] << w, w += 8);
                y = B[u & x];
                c: for (;;) {
                  if (F = y >>> 24, u >>>= F, w -= F, F = y >>> 16 & 255, !(16 & F)) {
                    if (0 === (64 & F)) {
                      y = B[(65535 & y) + (u & (1 << F) - 1)];
                      continue c
                    }
                    c.fb = "invalid distance code";
                    f.mode = 30;
                    break a
                  }
                  if (D = 65535 & y, F &= 15, w < F && (u += J[g++] << w, w += 8, w < F && (u += J[g++] << w, w += 8)), D += u & (1 << F) - 1, D > n) {
                    c.fb = "invalid distance too far back";
                    f.mode = 30;
                    break a
                  }
                  if (u >>>= F, w -= F, F = l - k, D > F) {
                    if (F = D - F, F > q && f.xA) {
                      c.fb = "invalid distance too far back";
                      f.mode = 30;
                      break a
                    }
                    if (y = 0, H = p, 0 === v) {
                      if (y += r - F, F < L) {
                        L -= F;
                        do E[l++] = p[y++]; while (--F);
                        y =
                          l - D;
                        H = E
                      }
                    } else if (v < F) {
                      if (y += r + v - F, F -= v, F < L) {
                        L -= F;
                        do E[l++] = p[y++]; while (--F);
                        if (y = 0, v < L) {
                          F = v;
                          L -= F;
                          do E[l++] = p[y++]; while (--F);
                          y = l - D;
                          H = E
                        }
                      }
                    } else if (y += v - F, F < L) {
                      L -= F;
                      do E[l++] = p[y++]; while (--F);
                      y = l - D;
                      H = E
                    }
                    for (; 2 < L;) E[l++] = H[y++], E[l++] = H[y++], E[l++] = H[y++], L -= 3;
                    L && (E[l++] = H[y++], 1 < L && (E[l++] = H[y++]))
                  } else {
                    y = l - D;
                    do E[l++] = E[y++], E[l++] = E[y++], E[l++] = E[y++], L -= 3; while (2 < L);
                    L && (E[l++] = E[y++], 1 < L && (E[l++] = E[y++]))
                  }
                  break
                }
              }
              break
            }
            while (g < d && l < e);
            L = w >> 3;
          g -= L;
          w -= L << 3;
          c.Cj = g;
          c.Md = l;
          c.Oe = g < d ? 5 + (d - g) : 5 - (g - d);
          c.Kc =
            l < e ? 257 + (e - l) : 257 - (l - e);
          f.uj = u & (1 << w) - 1;
          f.uc = w
        }
      }, {}],
      8: [function (e, d, c) {
          function b(b) {
            return (b >>> 24 & 255) + (b >>> 8 & 65280) + ((65280 & b) << 8) + ((255 & b) << 24)
          }

          function f() {
            this.mode = 0;
            this.last = !1;
            this.wrap = 0;
            this.xz = !1;
            this.total = this.check = this.Et = this.Vb = 0;
            this.head = null;
            this.Ee = this.ti = this.Fe = this.Eo = 0;
            this.window = null;
            this.Mc = this.offset = this.length = this.uc = this.uj = 0;
            this.Lk = this.Yh = null;
            this.zf = this.Mq = this.Sn = this.SG = this.dn = this.Zg = 0;
            this.next = null;
            this.Jd = new q.Lo(320);
            this.vr = new q.Lo(288);
            this.BE =
              this.HG = null;
            this.LU = this.back = this.xA = 0
          }

          function g(b) {
            var f;
            return b && b.state ? (f = b.state, b.cB = b.pr = f.total = 0, b.fb = "", f.wrap && (b.Fk = 1 & f.wrap), f.mode = z, f.last = 0, f.xz = 0, f.Et = 32768, f.head = null, f.uj = 0, f.uc = 0, f.Yh = f.HG = new q.Mo(x), f.Lk = f.BE = new q.Mo(y), f.xA = 1, f.back = -1, A) : B
          }

          function h(b) {
            var f;
            return b && b.state ? (f = b.state, f.Fe = 0, f.ti = 0, f.Ee = 0, g(b)) : B
          }

          function l(b, f) {
            var c, g;
            return b && b.state ? (g = b.state, 0 > f ? (c = 0, f = -f) : (c = (f >> 4) + 1, 48 > f && (f &= 15)), f && (8 > f || 15 < f) ? B : (null !== g.window && g.Eo !== f && (g.window = null),
              g.wrap = c, g.Eo = f, h(b))) : B
          }

          function k(b, c) {
            var g, d;
            return b ? (d = new f, b.state = d, d.window = null, g = l(b, c), g !== A && (b.state = null), g) : B
          }

          function m(b, f, c, g) {
            var d;
            b = b.state;
            return null === b.window && (b.Fe = 1 << b.Eo, b.Ee = 0, b.ti = 0, b.window = new q.Vj(b.Fe)), g >= b.Fe ? (q.Gk(b.window, f, c - b.Fe, b.Fe, 0), b.Ee = 0, b.ti = b.Fe) : (d = b.Fe - b.Ee, d > g && (d = g), q.Gk(b.window, f, c - g, d, b.Ee), g -= d, g ? (q.Gk(b.window, f, c - g, g, 0), b.Ee = g, b.ti = b.Fe) : (b.Ee += d, b.Ee === b.Fe && (b.Ee = 0), b.ti < b.Fe && (b.ti += d))), 0
          }
          var n, r, q = e("../utils/common"),
            v = e("./adler32"),
            p = e("./crc32"),
            u = e("./inffast"),
            w = e("./inftrees"),
            A = 0,
            B = -2,
            z = 1,
            x = 852,
            y = 592,
            F = !0;
          c.iX = h;
          c.jX = l;
          c.kX = g;
          c.gX = function (b) {
            return k(b, 15)
          };
          c.kQ = k;
          c.inflate = function (f, c) {
            var g, d, h, k, l, e, y, x, C, R, V, P, ba, Q, S, U, Z, ha, ja, W, aa, da, X = 0,
              Y = new q.Vj(4),
              ma = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
            if (!f || !f.state || !f.output || !f.input && 0 !== f.Oe) return B;
            g = f.state;
            12 === g.mode && (g.mode = 13);
            l = f.Md;
            h = f.output;
            y = f.Kc;
            k = f.Cj;
            d = f.input;
            e = f.Oe;
            x = g.uj;
            C = g.uc;
            R = e;
            V = y;
            aa = A;
            a: for (;;) switch (g.mode) {
              case z:
                if (0 === g.wrap) {
                  g.mode =
                    13;
                  break
                }
                for (; 16 > C;) {
                  if (0 === e) break a;
                  e--;
                  x += d[k++] << C;
                  C += 8
                }
                if (2 & g.wrap && 35615 === x) {
                  g.check = 0;
                  Y[0] = 255 & x;
                  Y[1] = x >>> 8 & 255;
                  g.check = p(g.check, Y, 2, 0);
                  C = x = 0;
                  g.mode = 2;
                  break
                }
                if (g.Vb = 0, g.head && (g.head.done = !1), !(1 & g.wrap) || (((255 & x) << 8) + (x >> 8)) % 31) {
                  f.fb = "incorrect header check";
                  g.mode = 30;
                  break
                }
                if (8 !== (15 & x)) {
                  f.fb = "unknown compression method";
                  g.mode = 30;
                  break
                }
                if (x >>>= 4, C -= 4, W = (15 & x) + 8, 0 === g.Eo) g.Eo = W;
                else if (W > g.Eo) {
                  f.fb = "invalid window size";
                  g.mode = 30;
                  break
                }
                g.Et = 1 << W;
                f.Fk = g.check = 1;
                g.mode = 512 & x ? 10 : 12;
                C = x = 0;
                break;
              case 2:
                for (; 16 > C;) {
                  if (0 === e) break a;
                  e--;
                  x += d[k++] << C;
                  C += 8
                }
                if (g.Vb = x, 8 !== (255 & g.Vb)) {
                  f.fb = "unknown compression method";
                  g.mode = 30;
                  break
                }
                if (57344 & g.Vb) {
                  f.fb = "unknown header flags set";
                  g.mode = 30;
                  break
                }
                g.head && (g.head.text = x >> 8 & 1);
                512 & g.Vb && (Y[0] = 255 & x, Y[1] = x >>> 8 & 255, g.check = p(g.check, Y, 2, 0));
                C = x = 0;
                g.mode = 3;
              case 3:
                for (; 32 > C;) {
                  if (0 === e) break a;
                  e--;
                  x += d[k++] << C;
                  C += 8
                }
                g.head && (g.head.time = x);
                512 & g.Vb && (Y[0] = 255 & x, Y[1] = x >>> 8 & 255, Y[2] = x >>> 16 & 255, Y[3] = x >>> 24 & 255, g.check = p(g.check, Y, 4, 0));
                C = x = 0;
                g.mode = 4;
              case 4:
                for (; 16 > C;) {
                  if (0 === e) break a;
                  e--;
                  x += d[k++] << C;
                  C += 8
                }
                g.head && (g.head.SU = 255 & x, g.head.CR = x >> 8);
                512 & g.Vb && (Y[0] = 255 & x, Y[1] = x >>> 8 & 255, g.check = p(g.check, Y, 2, 0));
                C = x = 0;
                g.mode = 5;
              case 5:
                if (1024 & g.Vb) {
                  for (; 16 > C;) {
                    if (0 === e) break a;
                    e--;
                    x += d[k++] << C;
                    C += 8
                  }
                  g.length = x;
                  g.head && (g.head.vy = x);
                  512 & g.Vb && (Y[0] = 255 & x, Y[1] = x >>> 8 & 255, g.check = p(g.check, Y, 2, 0));
                  C = x = 0
                } else g.head && (g.head.Mc = null);
                g.mode = 6;
              case 6:
                if (1024 & g.Vb && (P = g.length, P > e && (P = e), P && (g.head && (W = g.head.vy - g.length, g.head.Mc || (g.head.Mc = Array(g.head.vy)),
                    q.Gk(g.head.Mc, d, k, P, W)), 512 & g.Vb && (g.check = p(g.check, d, P, k)), e -= P, k += P, g.length -= P), g.length)) break a;
                g.length = 0;
                g.mode = 7;
              case 7:
                if (2048 & g.Vb) {
                  if (0 === e) break a;
                  P = 0;
                  do W = d[k + P++], g.head && W && 65536 > g.length && (g.head.name += String.fromCharCode(W)); while (W && P < e);
                  if (512 & g.Vb && (g.check = p(g.check, d, P, k)), e -= P, k += P, W) break a
                } else g.head && (g.head.name = null);
                g.length = 0;
                g.mode = 8;
              case 8:
                if (4096 & g.Vb) {
                  if (0 === e) break a;
                  P = 0;
                  do W = d[k + P++], g.head && W && 65536 > g.length && (g.head.Ux += String.fromCharCode(W)); while (W && P < e);
                  if (512 & g.Vb && (g.check = p(g.check, d, P, k)), e -= P, k += P, W) break a
                } else g.head && (g.head.Ux = null);
                g.mode = 9;
              case 9:
                if (512 & g.Vb) {
                  for (; 16 > C;) {
                    if (0 === e) break a;
                    e--;
                    x += d[k++] << C;
                    C += 8
                  }
                  if (x !== (65535 & g.check)) {
                    f.fb = "header crc mismatch";
                    g.mode = 30;
                    break
                  }
                  C = x = 0
                }
                g.head && (g.head.$P = g.Vb >> 9 & 1, g.head.done = !0);
                f.Fk = g.check = 0;
                g.mode = 12;
                break;
              case 10:
                for (; 32 > C;) {
                  if (0 === e) break a;
                  e--;
                  x += d[k++] << C;
                  C += 8
                }
                f.Fk = g.check = b(x);
                C = x = 0;
                g.mode = 11;
              case 11:
                if (0 === g.xz) return f.Md = l, f.Kc = y, f.Cj = k, f.Oe = e, g.uj = x, g.uc = C, 2;
                f.Fk = g.check = 1;
                g.mode =
                  12;
              case 12:
                if (5 === c || 6 === c) break a;
              case 13:
                if (g.last) {
                  x >>>= 7 & C;
                  C -= 7 & C;
                  g.mode = 27;
                  break
                }
                for (; 3 > C;) {
                  if (0 === e) break a;
                  e--;
                  x += d[k++] << C;
                  C += 8
                }
                switch (g.last = 1 & x, x >>>= 1, --C, 3 & x) {
                  case 0:
                    g.mode = 14;
                    break;
                  case 1:
                    Q = g;
                    if (F) {
                      n = new q.Mo(512);
                      r = new q.Mo(32);
                      for (U = 0; 144 > U;) Q.Jd[U++] = 8;
                      for (; 256 > U;) Q.Jd[U++] = 9;
                      for (; 280 > U;) Q.Jd[U++] = 7;
                      for (; 288 > U;) Q.Jd[U++] = 8;
                      w(1, Q.Jd, 0, 288, n, 0, Q.vr, {
                        uc: 9
                      });
                      for (U = 0; 32 > U;) Q.Jd[U++] = 5;
                      w(2, Q.Jd, 0, 32, r, 0, Q.vr, {
                        uc: 5
                      });
                      F = !1
                    }
                    Q.Yh = n;
                    Q.Zg = 9;
                    Q.Lk = r;
                    Q.dn = 5;
                    if (g.mode = 20, 6 === c) {
                      x >>>= 2;
                      C -= 2;
                      break a
                    }
                    break;
                  case 2:
                    g.mode = 17;
                    break;
                  case 3:
                    f.fb = "invalid block type", g.mode = 30
                }
                x >>>= 2;
                C -= 2;
                break;
              case 14:
                x >>>= 7 & C;
                for (C -= 7 & C; 32 > C;) {
                  if (0 === e) break a;
                  e--;
                  x += d[k++] << C;
                  C += 8
                }
                if ((65535 & x) !== (x >>> 16 ^ 65535)) {
                  f.fb = "invalid stored block lengths";
                  g.mode = 30;
                  break
                }
                if (g.length = 65535 & x, x = 0, C = 0, g.mode = 15, 6 === c) break a;
              case 15:
                g.mode = 16;
              case 16:
                if (P = g.length) {
                  if (P > e && (P = e), P > y && (P = y), 0 === P) break a;
                  q.Gk(h, d, k, P, l);
                  e -= P;
                  k += P;
                  y -= P;
                  l += P;
                  g.length -= P;
                  break
                }
                g.mode = 12;
                break;
              case 17:
                for (; 14 > C;) {
                  if (0 === e) break a;
                  e--;
                  x += d[k++] << C;
                  C += 8
                }
                if (g.Sn =
                  (31 & x) + 257, x >>>= 5, C -= 5, g.Mq = (31 & x) + 1, x >>>= 5, C -= 5, g.SG = (15 & x) + 4, x >>>= 4, C -= 4, 286 < g.Sn || 30 < g.Mq) {
                  f.fb = "too many length or distance symbols";
                  g.mode = 30;
                  break
                }
                g.zf = 0;
                g.mode = 18;
              case 18:
                for (; g.zf < g.SG;) {
                  for (; 3 > C;) {
                    if (0 === e) break a;
                    e--;
                    x += d[k++] << C;
                    C += 8
                  }
                  g.Jd[ma[g.zf++]] = 7 & x;
                  x >>>= 3;
                  C -= 3
                }
                for (; 19 > g.zf;) g.Jd[ma[g.zf++]] = 0;
                if (g.Yh = g.HG, g.Zg = 7, da = {
                    uc: g.Zg
                  }, aa = w(0, g.Jd, 0, 19, g.Yh, 0, g.vr, da), g.Zg = da.uc, aa) {
                  f.fb = "invalid code lengths set";
                  g.mode = 30;
                  break
                }
                g.zf = 0;
                g.mode = 19;
              case 19:
                for (; g.zf < g.Sn + g.Mq;) {
                  for (; X = g.Yh[x &
                      (1 << g.Zg) - 1], S = X >>> 24, U = 65535 & X, !(S <= C);) {
                    if (0 === e) break a;
                    e--;
                    x += d[k++] << C;
                    C += 8
                  }
                  if (16 > U) x >>>= S, C -= S, g.Jd[g.zf++] = U;
                  else {
                    if (16 === U) {
                      for (Q = S + 2; C < Q;) {
                        if (0 === e) break a;
                        e--;
                        x += d[k++] << C;
                        C += 8
                      }
                      if (x >>>= S, C -= S, 0 === g.zf) {
                        f.fb = "invalid bit length repeat";
                        g.mode = 30;
                        break
                      }
                      W = g.Jd[g.zf - 1];
                      P = 3 + (3 & x);
                      x >>>= 2;
                      C -= 2
                    } else if (17 === U) {
                      for (Q = S + 3; C < Q;) {
                        if (0 === e) break a;
                        e--;
                        x += d[k++] << C;
                        C += 8
                      }
                      x >>>= S;
                      C -= S;
                      W = 0;
                      P = 3 + (7 & x);
                      x >>>= 3;
                      C -= 3
                    } else {
                      for (Q = S + 7; C < Q;) {
                        if (0 === e) break a;
                        e--;
                        x += d[k++] << C;
                        C += 8
                      }
                      x >>>= S;
                      C -= S;
                      W = 0;
                      P = 11 + (127 & x);
                      x >>>=
                        7;
                      C -= 7
                    }
                    if (g.zf + P > g.Sn + g.Mq) {
                      f.fb = "invalid bit length repeat";
                      g.mode = 30;
                      break
                    }
                    for (; P--;) g.Jd[g.zf++] = W
                  }
                }
                if (30 === g.mode) break;
                if (0 === g.Jd[256]) {
                  f.fb = "invalid code -- missing end-of-block";
                  g.mode = 30;
                  break
                }
                if (g.Zg = 9, da = {
                    uc: g.Zg
                  }, aa = w(1, g.Jd, 0, g.Sn, g.Yh, 0, g.vr, da), g.Zg = da.uc, aa) {
                  f.fb = "invalid literal/lengths set";
                  g.mode = 30;
                  break
                }
                if (g.dn = 6, g.Lk = g.BE, da = {
                    uc: g.dn
                  }, aa = w(2, g.Jd, g.Sn, g.Mq, g.Lk, 0, g.vr, da), g.dn = da.uc, aa) {
                  f.fb = "invalid distances set";
                  g.mode = 30;
                  break
                }
                if (g.mode = 20, 6 === c) break a;
              case 20:
                g.mode = 21;
              case 21:
                if (6 <= e && 258 <= y) {
                  f.Md = l;
                  f.Kc = y;
                  f.Cj = k;
                  f.Oe = e;
                  g.uj = x;
                  g.uc = C;
                  u(f, V);
                  l = f.Md;
                  h = f.output;
                  y = f.Kc;
                  k = f.Cj;
                  d = f.input;
                  e = f.Oe;
                  x = g.uj;
                  C = g.uc;
                  12 === g.mode && (g.back = -1);
                  break
                }
                for (g.back = 0; X = g.Yh[x & (1 << g.Zg) - 1], S = X >>> 24, Q = X >>> 16 & 255, U = 65535 & X, !(S <= C);) {
                  if (0 === e) break a;
                  e--;
                  x += d[k++] << C;
                  C += 8
                }
                if (Q && 0 === (240 & Q)) {
                  Z = S;
                  ha = Q;
                  for (ja = U; X = g.Yh[ja + ((x & (1 << Z + ha) - 1) >> Z)], S = X >>> 24, Q = X >>> 16 & 255, U = 65535 & X, !(Z + S <= C);) {
                    if (0 === e) break a;
                    e--;
                    x += d[k++] << C;
                    C += 8
                  }
                  x >>>= Z;
                  C -= Z;
                  g.back += Z
                }
                if (x >>>= S, C -= S, g.back += S, g.length = U, 0 === Q) {
                  g.mode =
                    26;
                  break
                }
                if (32 & Q) {
                  g.back = -1;
                  g.mode = 12;
                  break
                }
                if (64 & Q) {
                  f.fb = "invalid literal/length code";
                  g.mode = 30;
                  break
                }
                g.Mc = 15 & Q;
                g.mode = 22;
              case 22:
                if (g.Mc) {
                  for (Q = g.Mc; C < Q;) {
                    if (0 === e) break a;
                    e--;
                    x += d[k++] << C;
                    C += 8
                  }
                  g.length += x & (1 << g.Mc) - 1;
                  x >>>= g.Mc;
                  C -= g.Mc;
                  g.back += g.Mc
                }
                g.LU = g.length;
                g.mode = 23;
              case 23:
                for (; X = g.Lk[x & (1 << g.dn) - 1], S = X >>> 24, Q = X >>> 16 & 255, U = 65535 & X, !(S <= C);) {
                  if (0 === e) break a;
                  e--;
                  x += d[k++] << C;
                  C += 8
                }
                if (0 === (240 & Q)) {
                  Z = S;
                  ha = Q;
                  for (ja = U; X = g.Lk[ja + ((x & (1 << Z + ha) - 1) >> Z)], S = X >>> 24, Q = X >>> 16 & 255, U = 65535 & X, !(Z + S <= C);) {
                    if (0 ===
                      e) break a;
                    e--;
                    x += d[k++] << C;
                    C += 8
                  }
                  x >>>= Z;
                  C -= Z;
                  g.back += Z
                }
                if (x >>>= S, C -= S, g.back += S, 64 & Q) {
                  f.fb = "invalid distance code";
                  g.mode = 30;
                  break
                }
                g.offset = U;
                g.Mc = 15 & Q;
                g.mode = 24;
              case 24:
                if (g.Mc) {
                  for (Q = g.Mc; C < Q;) {
                    if (0 === e) break a;
                    e--;
                    x += d[k++] << C;
                    C += 8
                  }
                  g.offset += x & (1 << g.Mc) - 1;
                  x >>>= g.Mc;
                  C -= g.Mc;
                  g.back += g.Mc
                }
                if (g.offset > g.Et) {
                  f.fb = "invalid distance too far back";
                  g.mode = 30;
                  break
                }
                g.mode = 25;
              case 25:
                if (0 === y) break a;
                if (P = V - y, g.offset > P) {
                  if (P = g.offset - P, P > g.ti && g.xA) {
                    f.fb = "invalid distance too far back";
                    g.mode = 30;
                    break
                  }
                  P >
                    g.Ee ? (P -= g.Ee, ba = g.Fe - P) : ba = g.Ee - P;
                  P > g.length && (P = g.length);
                  Q = g.window
                } else Q = h, ba = l - g.offset, P = g.length;
                P > y && (P = y);
                y -= P;
                g.length -= P;
                do h[l++] = Q[ba++]; while (--P);
                0 === g.length && (g.mode = 21);
                break;
              case 26:
                if (0 === y) break a;
                h[l++] = g.length;
                y--;
                g.mode = 21;
                break;
              case 27:
                if (g.wrap) {
                  for (; 32 > C;) {
                    if (0 === e) break a;
                    e--;
                    x |= d[k++] << C;
                    C += 8
                  }
                  if (V -= y, f.pr += V, g.total += V, V && (f.Fk = g.check = g.Vb ? p(g.check, h, V, l - V) : v(g.check, h, V, l - V)), V = y, (g.Vb ? x : b(x)) !== g.check) {
                    f.fb = "incorrect data check";
                    g.mode = 30;
                    break
                  }
                  C = x = 0
                }
                g.mode = 28;
              case 28:
                if (g.wrap && g.Vb) {
                  for (; 32 > C;) {
                    if (0 === e) break a;
                    e--;
                    x += d[k++] << C;
                    C += 8
                  }
                  if (x !== (4294967295 & g.total)) {
                    f.fb = "incorrect length check";
                    g.mode = 30;
                    break
                  }
                  C = x = 0
                }
                g.mode = 29;
              case 29:
                aa = 1;
                break a;
              case 30:
                aa = -3;
                break a;
              case 31:
                return -4;
              default:
                return B
            }
            return f.Md = l, f.Kc = y, f.Cj = k, f.Oe = e, g.uj = x, g.uc = C, (g.Fe || V !== f.Kc && 30 > g.mode && (27 > g.mode || 4 !== c)) && m(f, f.output, f.Md, V - f.Kc) ? (g.mode = 31, -4) : (R -= f.Oe, V -= f.Kc, f.cB += R, f.pr += V, g.total += V, g.wrap && V && (f.Fk = g.check = g.Vb ? p(g.check, h, V, f.Md - V) : v(g.check, h, V, f.Md - V)),
              f.qN = g.uc + (g.last ? 64 : 0) + (12 === g.mode ? 128 : 0) + (20 === g.mode || 15 === g.mode ? 256 : 0), (0 === R && 0 === V || 4 === c) && aa === A && (aa = -5), aa)
          };
          c.iQ = function (b) {
            if (!b || !b.state) return B;
            var f = b.state;
            return f.window && (f.window = null), b.state = null, A
          };
          c.jQ = function (b, f) {
            var c;
            b && b.state && (c = b.state, 0 === (2 & c.wrap) || (c.head = f, f.done = !1))
          };
          c.lQ = function (b, f) {
            var c, g, d = f.length;
            return b && b.state ? (c = b.state, 0 !== c.wrap && 11 !== c.mode ? B : 11 === c.mode && (g = 1, g = v(g, f, d, 0), g !== c.check) ? -3 : m(b, f, d, d) ? (c.mode = 31, -4) : (c.xz = 1, A)) : B
          };
          c.fX = "pako inflate (from Nodeca project)"
        },
        {
          "../utils/common": 1,
          "./adler32": 3,
          "./crc32": 5,
          "./inffast": 7,
          "./inftrees": 9
        }
      ],
      9: [function (e, d) {
        var c = e("../utils/common"),
          b = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0],
          f = [16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78],
          g = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0],
          h = [16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25,
            26, 26, 27, 27, 28, 28, 29, 29, 64, 64
          ];
        d.exports = function (d, k, e, n, r, q, v, p) {
          var u, w, A, B, z, x, y, F, L = p.uc,
            D, H, J, E, N, G, M = 0,
            O, K = null,
            C = 0,
            R = new c.Lo(16);
          B = new c.Lo(16);
          var V = null,
            P = 0;
          for (D = 0; 15 >= D; D++) R[D] = 0;
          for (H = 0; H < n; H++) R[k[e + H]]++;
          E = L;
          for (J = 15; 1 <= J && 0 === R[J]; J--);
          if (E > J && (E = J), 0 === J) return r[q++] = 20971520, r[q++] = 20971520, p.uc = 1, 0;
          for (L = 1; L < J && 0 === R[L]; L++);
          E < L && (E = L);
          for (D = u = 1; 15 >= D; D++)
            if (u <<= 1, u -= R[D], 0 > u) return -1;
          if (0 < u && (0 === d || 1 !== J)) return -1;
          B[1] = 0;
          for (D = 1; 15 > D; D++) B[D + 1] = B[D] + R[D];
          for (H = 0; H < n; H++) 0 !==
            k[e + H] && (v[B[k[e + H]]++] = H);
          if (0 === d ? (K = V = v, z = 19) : 1 === d ? (K = b, C -= 257, V = f, P -= 257, z = 256) : (K = g, V = h, z = -1), O = 0, H = 0, D = L, B = q, N = E, G = 0, A = -1, M = 1 << E, n = M - 1, 1 === d && 852 < M || 2 === d && 592 < M) return 1;
          for (;;) {
            x = D - G;
            v[H] < z ? (y = 0, F = v[H]) : v[H] > z ? (y = V[P + v[H]], F = K[C + v[H]]) : (y = 96, F = 0);
            u = 1 << D - G;
            L = w = 1 << N;
            do w -= u, r[B + (O >> G) + w] = x << 24 | y << 16 | F | 0; while (0 !== w);
            for (u = 1 << D - 1; O & u;) u >>= 1;
            if (0 !== u ? (O &= u - 1, O += u) : O = 0, H++, 0 === --R[D]) {
              if (D === J) break;
              D = k[e + v[H]]
            }
            if (D > E && (O & n) !== A) {
              0 === G && (G = E);
              B += L;
              N = D - G;
              for (u = 1 << N; N + G < J && (u -= R[N + G], !(0 >= u));) N++,
                u <<= 1;
              if (M += 1 << N, 1 === d && 852 < M || 2 === d && 592 < M) return 1;
              A = O & n;
              r[A] = E << 24 | N << 16 | B - q | 0
            }
          }
          return 0 !== O && (r[B + O] = D - G << 24 | 4194304), p.uc = E, 0
        }
      }, {
        "../utils/common": 1
      }],
      10: [function (e, d) {
        d.exports = {
          2: "need dictionary",
          1: "stream end",
          0: "",
          "-1": "file error",
          "-2": "stream error",
          "-3": "data error",
          "-4": "insufficient memory",
          "-5": "buffer error",
          "-6": "incompatible version"
        }
      }, {}],
      11: [function (e, d) {
        d.exports = function () {
          this.input = null;
          this.cB = this.Oe = this.Cj = 0;
          this.output = null;
          this.pr = this.Kc = this.Md = 0;
          this.fb = "";
          this.state =
            null;
          this.qN = 2;
          this.Fk = 0
        }
      }, {}],
      "/lib/inflate.js": [function (e, d, c) {
          function b(f) {
            if (!(this instanceof b)) return new b(f);
            var c = this.options = h.assign({
              OM: 16384,
              fd: 0,
              to: ""
            }, f || {});
            c.raw && 0 <= c.fd && 16 > c.fd && (c.fd = -c.fd, 0 === c.fd && (c.fd = -15));
            !(0 <= c.fd && 16 > c.fd) || f && f.fd || (c.fd += 32);
            15 < c.fd && 48 > c.fd && 0 === (15 & c.fd) && (c.fd |= 15);
            this.ty = 0;
            this.fb = "";
            this.ended = !1;
            this.ut = [];
            this.Jl = new n;
            this.Jl.Kc = 0;
            f = g.kQ(this.Jl, c.fd);
            if (f !== k.qm) throw Error(m[f]);
            this.header = new r;
            g.jQ(this.Jl, this.header)
          }

          function f(f,
            c) {
            var g = new b(c);
            if (g.push(f, !0), g.ty) throw g.fb || m[g.ty];
            return g.result
          }
          var g = e("./zlib/inflate"),
            h = e("./utils/common"),
            l = e("./utils/strings"),
            k = e("./zlib/constants"),
            m = e("./zlib/messages"),
            n = e("./zlib/zstream"),
            r = e("./zlib/gzheader"),
            q = Object.prototype.toString;
          b.prototype.push = function (b, f) {
            var c, d, e, m, n, r, y = this.Jl,
              F = this.options.OM,
              L = this.options.MW,
              D = !1;
            if (this.ended) return !1;
            d = f === ~~f ? f : !0 === f ? k.Xr : k.NB;
            "string" == typeof b ? y.input = l.zM(b) : "[object ArrayBuffer]" === q.call(b) ? y.input = new Uint8Array(b) :
              y.input = b;
            y.Cj = 0;
            y.Oe = y.input.length;
            do {
              if (0 === y.Kc && (y.output = new h.Vj(F), y.Md = 0, y.Kc = F), c = g.inflate(y, k.NB), c === k.dL && L && (r = "string" == typeof L ? l.fU(L) : "[object ArrayBuffer]" === q.call(L) ? new Uint8Array(L) : L, c = g.lQ(this.Jl, r)), c === k.cL && !0 === D && (c = k.qm, D = !1), c !== k.Yr && c !== k.qm) return this.Xz(c), this.ended = !0, !1;
              y.Md && (0 !== y.Kc && c !== k.Yr && (0 !== y.Oe || d !== k.Xr && d !== k.OB) || ("string" === this.options.to ? (e = l.HU(y.output, y.Md), m = y.Md - e, n = l.BM(y.output, e), y.Md = m, y.Kc = F - m, m && h.Gk(y.output, y.output, e, m, 0), this.ZG(n)) :
                this.ZG(h.LI(y.output, y.Md))));
              0 === y.Oe && 0 === y.Kc && (D = !0)
            } while ((0 < y.Oe || 0 === y.Kc) && c !== k.Yr);
            return c === k.Yr && (d = k.Xr), d === k.Xr ? (c = g.iQ(this.Jl), this.Xz(c), this.ended = !0, c === k.qm) : d !== k.OB || (this.Xz(k.qm), y.Kc = 0, !0)
          };
          b.prototype.ZG = function (b) {
            this.ut.push(b)
          };
          b.prototype.Xz = function (b) {
            b === k.qm && ("string" === this.options.to ? this.result = this.ut.join("") : this.result = h.bF(this.ut));
            this.ut = [];
            this.ty = b;
            this.fb = this.Jl.fb
          };
          c.pV = b;
          c.inflate = f;
          c.hX = function (b, c) {
            return c = c || {}, c.raw = !0, f(b, c)
          };
          c.jY = f
        },
        {
          "./utils/common": 1,
          "./utils/strings": 2,
          "./zlib/constants": 4,
          "./zlib/gzheader": 6,
          "./zlib/inflate": 8,
          "./zlib/messages": 10,
          "./zlib/zstream": 11
        }
      ]
    }, {}, [])("/lib/inflate.js")
  });
  (function (a) {
    a.wg = {
      Ri: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
      encode: function (e) {
        for (var d = "", c, b, f, g, h, l, k = 0; k < e.length;) c = e.charCodeAt(k++), b = e.charCodeAt(k++), f = e.charCodeAt(k++), g = c >> 2, c = (c & 3) << 4 | b >> 4, h = (b & 15) << 2 | f >> 6, l = f & 63, isNaN(b) ? h = l = 64 : isNaN(f) && (l = 64), d = d + a.wg.Ri.charAt(g) + a.wg.Ri.charAt(c) + a.wg.Ri.charAt(h) + a.wg.Ri.charAt(l);
        return d
      },
      decode: function (e) {
        var d = "",
          c, b, f, g, h, l = 0;
        for (e = e.replace(/[^A-Za-z0-9\+\/\=]/g, ""); l < e.length;) c = a.wg.Ri.indexOf(e.charAt(l++)),
          b = a.wg.Ri.indexOf(e.charAt(l++)), g = a.wg.Ri.indexOf(e.charAt(l++)), h = a.wg.Ri.indexOf(e.charAt(l++)), c = c << 2 | b >> 4, b = (b & 15) << 4 | g >> 2, f = (g & 3) << 6 | h, d += String.fromCharCode(c), 64 !== g && (d += String.fromCharCode(b)), 64 !== h && (d += String.fromCharCode(f));
        return d
      }
    };
    "undefined" === typeof window.btoa && (window.btoa = a.wg.encode);
    "undefined" === typeof window.atob && (window.atob = a.wg.decode)
  })(window);
  (function (a) {
    function e(a) {
      var c;
      "string" !== typeof a ? a = {
        documentElement: a
      } : (c = new DOMParser, a = c.parseFromString(a, "text/xml"));
      this.current = a.documentElement;
      this.next = this.current.nextSibling;
      this.diff = this.depth = 0
    }
    e.prototype = {
      fC: function () {
        for (; this.next && this.next.nodeType !== Node.ELEMENT_NODE;) this.next = this.next.nextSibling
      },
      advance: function () {
        this.fC();
        return this.next ? (this.current = this.next, this.next = this.current.nextSibling, !0) : !1
      },
      ua: function () {
        return this.current.tagName
      },
      na: function () {
        ++this.depth;
        this.next = this.current.firstChild;
        this.fC();
        this.next || ++this.diff
      },
      Aa: function () {
        --this.depth;
        0 < this.diff ? --this.diff : this.current = this.current.parentNode;
        this.current && (this.next = this.current.nextSibling)
      },
      K: function (a) {
        return this.current.getAttribute(a)
      }
    };
    a.Je = e
  })(window);
  (function (a) {
    function e(a) {
      this.depth = this.index = 0;
      this.ge = a;
      this.location = {
        start: 0,
        Bu: 1,
        Cu: 1,
        end: a.length,
        empty: !0
      };
      this.Iq = [this.location];
      this.Az = !1;
      "?" === this.ge.charAt(1) && this.FF();
      this.location.empty = !1
    }
    a.Vr = a.Vr ? a.Vr : {};
    a.Vr.rU = function (a) {
      if (a) return a.replace(/&[^;]*;/g, function (a) {
        switch (a.charAt(1)) {
          case "q":
            return '"';
          case "a":
            return "&";
          case "l":
            return "<";
          case "g":
            return ">";
          case "#":
            return "x" === a.charAt(2) ? String.fromCharCode(parseInt(a.substring(3, a.length - 1), 16)) : String.fromCharCode(parseInt(a.substring(2,
              a.length - 1), 10))
        }
        return a
      })
    };
    e.prototype = {
      advance: function () {
        this.$i = null;
        this.FF();
        var a = this.location.start;
        ++a;
        this.location.empty = !1;
        if ("/" !== this.ge.charAt(a)) return this.location.empty = "/" === this.ge.charAt(this.ge.indexOf(">", a) - 1), !0;
        this.location.end = !0;
        return !1
      },
      JG: function () {
        var a = this.location.start + 1,
          c = this.ge.indexOf(">", a);
        this.location.empty && --c;
        a = this.ge.substring(a, c);
        this.$i = {};
        c = a.indexOf(" ");
        if (-1 !== c) {
          this.RE = a.substring(0, c);
          for (var a = a.slice(c), a = a.split('"'), c = a.length - 1,
              b = 0; b < c; ++b) {
            var f = a[b],
              g = a[++b];
            this.$i[f.substring(1, f.length - 1)] = g
          }
        } else this.RE = a
      },
      FF: function () {
        if (this.Az) this.Az = !1, this.location.start = this.ge.indexOf("<", this.location.start + 1);
        else {
          var a = this.location.Bu;
          if (!this.location.empty)
            for (var c = this.location.Cu; 0 < c;) a = this.ge.indexOf("<", a), "/" === this.ge.charAt(++a) ? --c : (a = this.ge.indexOf(">", a), "/" !== this.ge.charAt(a - 1) && ++c);
          this.location.start = this.ge.indexOf("<", a)
        }
        this.location.Bu = this.location.start + 1;
        this.location.Cu = 1
      },
      mark: function () {
        this.ge.mark &&
          this.ge.mark(this.location.start)
      },
      ua: function () {
        null !== this.$i && "undefined" !== typeof this.$i || this.JG();
        return this.RE
      },
      na: function () {
        ++this.depth;
        this.location = {
          start: this.location.start
        };
        this.Iq[this.Iq.length] = this.location;
        this.Az = !0
      },
      Aa: function () {
        --this.depth;
        this.$i = null;
        var a = this.location.Bu,
          c = this.location.Cu,
          b = this.location.empty,
          f = this.location.end;
        this.Iq.pop();
        this.location = this.Iq[this.Iq.length - 1];
        this.location.Bu = a;
        this.location.Cu = f ? 0 : b ? c : c + 1
      },
      K: function (d) {
        null !== this.$i && "undefined" !==
          typeof this.$i || this.JG();
        return a.Vr.rU(this.$i[d])
      }
    };
    a.IV = e
  })(self);
  (function (a) {
    a.setImmediate || function () {
      function e(b) {
        var a = b.data;
        if ("string" == typeof a && 0 == a.indexOf("IM") && (b = c[a])) a: {
          delete c[a],
          a = b[0];
          switch (b.length) {
            case 1:
              a();
              break a;
            case 2:
              a(b[1]);
              break a;
            case 3:
              a(b[1], b[2]);
              break a
          }
          a.apply(window, f.call(b, 1))
        }
      }
      var d = 0,
        c = {},
        b = !0,
        f = Array.prototype.slice;
      a.setImmediate = function () {
        for (var f = d++, h = "IM" + f, l = arguments.length, k = Array(l); l--;) k[l] = arguments[l];
        c[h] = k;
        b && (b = !1, a.addEventListener("message", e));
        a.postMessage(h, "*");
        return f
      };
      a.clearImmediate = function (b) {
        delete c["IM" +
          b]
      }
    }()
  })("undefined" === typeof self ? this : self);
  (function (a) {
    function e(b) {
      if (b) {
        if (b.length !== this.Xl) throw Error("Data is wrong size for zip header!");
        this.Zp = b = this.XR(b);
        if (b.Lj !== this.ZN) throw Error("Invalid XOD file, signature is wrong!");
        this.KQ = 4294967295 === b.Dt;
        this.ag = {};
        this.names = []
      }
    }

    function d(b, c, d) {
      this.source = b;
      this.pt = this.Nx = !1;
      this.Gf = {};
      this.Ok = function () {};
      this.decrypt = c;
      this.Jk = d;
      this.oE = a.o.oh && c !== a.o.oh.decrypt
    }

    function c(b) {
      this.tl = b;
      this.started = !1;
      this.ji = 1
    }
    c.prototype = {
      cancel: function () {}
    };
    a.oj = function (b) {
      if ("string" !==
        typeof b) {
        for (var a = "", c = 0, d = b.length, k; c < d;) k = b.subarray(c, c + 1024), c += 1024, a += String.fromCharCode.apply(null, k);
        return a
      }
      return b
    };
    a.UF = function (b) {
      if ("string" === typeof b) {
        for (var a = new Uint8Array(b.length), c = b.length, d = 0; d < c; d++) a[d] = b.charCodeAt(d);
        return a
      }
      return b
    };
    d.prototype = {
      Of: "Document/FixedDocument.fdoc",
      xg: "Document/DocProps/core.xml",
      Ye: "Document/Structure/DocStruct.struct",
      US: function (b) {
        this.Ok = b
      },
      yl: function (b) {
        var c = this;
        this.Qn(function (d) {
          if (d) {
            a.utils.warn("Error loading document: " +
              d);
            c.Ok(d);
            if (b) {
              b(d);
              return
            }
            throw d;
          }
          return c.request([c.Of, c.xg, c.Ye])
        })
      },
      ni: function () {
        return !1
      },
      request: function (b, a) {
        var c = this;
        if (!c.Nx) throw Error("Document must be loaded before requesting parts");
        _(b).each(function (b) {
          c.eO(b, function (b, f, d, l) {
            return b ? (f !== c.Ye && 0 !== f.indexOf("Annot/Appearances") && c.Ok(b), c.trigger("partReady", {
              qa: f,
              qf: !1,
              Xc: !!b.wx,
              error: b
            })) : c.trigger("partReady", {
              qa: f,
              data: d,
              qf: !1,
              Xc: !1,
              error: null,
              yb: l,
              WG: a
            })
          })
        })
      },
      El: function (b) {
        this.sf = b
      },
      Kv: function (b) {
        this.withCredentials =
          b
      },
      Lx: function (b) {
        var a = this;
        _(b).each(function (b) {
          var f = a.Gf[b];
          f && (f.ji--, 0 === f.ji && (delete a.Gf[b], f.cancel()))
        })
      },
      eO: function (b, a) {
        if (this.Gf[b]) this.Gf[b].ji++;
        else return this.Gf[b] = new c(b), this.BH(b, a)
      }
    };
    _(d.prototype).extend(Backbone.Events);
    e.prototype = {
      vF: function () {
        return {
          start: this.Zp.Dt,
          stop: this.Zp.Dt + this.Zp.AE
        }
      },
      jq: function (b) {
        var a = this.ag[b],
          c = a.offset + this.Wo + a.eh + a.Pk;
        return {
          start: c,
          stop: c + a.kt,
          tl: b
        }
      },
      Zt: function (b) {
        b = this.jq(b);
        var a = Math.floor(b.start / 102400),
          c = b.stop - b.start;
        return Math.min(c, 102400 * (a + 1) - b.start) > c / 2 ? a : a + 1
      },
      $Q: function (b) {
        if (b && (this.Zp = b = this.$R(b), b.Lj !== this.TU)) throw Error("Invalid XOD file, signature is wrong!");
      },
      LO: function (b) {
        var a = this.Zt(b),
          c = this.names.indexOf(b),
          d;
        b = [];
        var k;
        for (k = c - 1; 0 <= k && this.Zt(this.names[k]) === a; --k);
        d = k + 1;
        var e = this.jq(this.names[d]).start;
        for (k = c + 1; k < this.names.length && this.Zt(this.names[k]) === a; ++k);
        a = k - 1;
        c = this.jq(this.names[a]).stop;
        for (k = d; k <= a; ++k) d = this.jq(this.names[k]), d.start -= e, d.stop -= e, b.push(d);
        return {
          start: e,
          stop: c,
          yH: b
        }
      },
      dE: function (b) {
        return !!this.ag[b]
      },
      sG: function (b) {
        return 0 !== this.ag[b].vt
      },
      zH: function (b) {
        for (var a = 10, c = this.LJ, d = this.Zp.$I, k = 0; k < d; k++) {
          var e = this.YR(b, a),
            a = a + c,
            n = b.substr(a, e.eh),
            a = a + (e.eh + e.Pk + e.bE + 10);
          this.ag[n] = e;
          this.names[this.names.length] = n
        }
      },
      aL: 56,
      bL: 20,
      Xl: 22,
      LJ: 36,
      Wo: 30,
      kv: function (b, a, c) {
        for (var d = "", k = 0; k < a; k++) var e = b.charCodeAt(k + c).toString(16),
          d = 1 === e.length ? "0" + e + d : e + d;
        return parseInt(d, 16)
      },
      YR: function (b, a) {
        var c = {},
          d = this.kv;
        c.vt = d(b, 2, a);
        c.kt = d(b, 4, a + 10);
        c.pU =
          d(b, 4, a + 14);
        c.eh = d(b, 2, a + 18);
        c.Pk = d(b, 2, a + 20);
        c.bE = d(b, 2, a + 22);
        c.offset = d(b, 4, a + 32);
        return c
      },
      $R: function (b) {
        var a = {},
          c = this.kv;
        a.Lj = c(b, 4, 0);
        a.cX = c(b, 8, 4);
        a.lY = c(b, 2, 12);
        a.mY = c(b, 2, 14);
        a.CN = c(b, 4, 16);
        a.LM = c(b, 4, 20);
        a.uR = c(b, 8, 24);
        a.$I = c(b, 8, 32);
        a.AE = c(b, 8, 40);
        a.Dt = c(b, 8, 48);
        return a
      },
      XR: function (b) {
        var a = {},
          c = this.kv;
        a.Lj = c(b, 4, 0);
        a.CN = c(b, 2, 4);
        a.LM = c(b, 2, 6);
        a.uR = c(b, 2, 8);
        a.$I = c(b, 2, 10);
        a.AE = c(b, 4, 12);
        a.Dt = c(b, 4, 16);
        a.bE = c(b, 2, 20);
        return a
      },
      AH: function (b) {
        var a = {},
          c = this.kv;
        a.Lj = c(b, 4, 0);
        a.kY = c(b,
          2, 4);
        a.Vb = c(b, 2, 6);
        a.vt = c(b, 2, 8);
        a.BX = c(b, 2, 10);
        a.AX = c(b, 2, 12);
        a.rW = c(b, 4, 14);
        a.kt = c(b, 4, 18);
        a.pU = c(b, 4, 22);
        a.eh = c(b, 2, 26);
        a.Pk = c(b, 2, 28);
        return a
      },
      ZN: 101010256,
      TU: 101075792,
      NG: 67324752,
      OG: "PK\u0003\u0004"
    };
    e.inflate = function (b) {
      return "string" === typeof b ? a.im.inflate(b) : a.FR.inflate(b, {
        fd: -15
      })
    };
    a.o = a.o || {};
    a.o.V = a.o.V || {};
    var b = a.o.V;
    b.cf = d;
    b.Ji = e;
    b.Fx = Array(1024);
    a.ez = function (c, g, d, l) {
      g = g || 0;
      d = d || !1;
      var k = "",
        e;
      e = !(_.isNull(c.responseBody) || _.isUndefined(c.responseBody));
      if (10 === a.utils.ie && e ||
        !a.Uint8Array && e) {
        e = c.responseBody;
        l = _.isArray(e) ? e : (new a.VBArray(e)).toArray();
        g = l.length;
        c = Array(g);
        for (d = 0; d < g; d++) c[d] = l[d] & 255;
        d = g / 1024 + 1;
        for (g = 0; g < d; g++) k += String.fromCharCode.apply(null, c.slice(1024 * g, 1024 * g + 1024))
      } else if (!a.Uint8Array || d || _.isUndefined(c.response))
        for (e = c.responseText, c = b.Fx, d = g; d < l;) {
          for (g = 0; 1024 > g && d < l; ++g) c[g] = e.charCodeAt(d) & 255, ++d;
          k += String.fromCharCode.apply(null, c.slice(0, g))
        } else {
          e = c.response;
          l = new a.Uint8Array(e);
          e = l.length;
          d = g;
          if (a.utils.typedArrayApply) return l.subarray(g);
          for (c = b.Fx; d < e;) {
            g = 0;
            for (var n = Math.min(d + 1024, e); d < n; g++, d++) c[g] = l[d];
            k += String.fromCharCode.apply(null, 1024 > g ? c.slice(0, g) : c)
          }
        }
      return k
    };
    a.o.V.wi = {
      Mr: 0,
      pB: 1,
      fK: 2
    }
  })(window);
  (function (a) {
    function e(b, c, g) {
      d.apply(this, arguments);
      if ("xod" !== b.name.split(".").pop()) throw Error("Not an XOD file");
      if (!a.FileReader || !a.File || !a.Blob) throw Error("File API is not supported in this browser");
      this.file = b;
      this.qt = [];
      this.Zx = 0
    }
    var d = a.o.V.cf,
      c = a.o.V.Ji;
    e.prototype = new d;
    e.prototype = _(e.prototype).extend({
      Oz: function (b, a, c) {
        var d = this,
          l = new FileReader;
        l.onloadend = function (b, e) {
          if (0 < d.qt.length) {
            var n = d.qt.shift();
            n.aS.readAsBinaryString(n.file)
          } else d.Zx--;
          if (l.error) {
            n = l.error;
            if (n.code === n.ABORT_ERR) {
              console.warn("Request for chunk " + a.start + "-" + a.stop + " was aborted");
              return
            }
            return c(n)
          }
          if (n = e || l.content || b.target.result) return c(!1, n);
          console.warn("No data was returned from FileReader.")
        };
        a && (b = (b.slice || b.webkitSlice || b.mozSlice || b.wy).call(b, a.start, a.stop));
        0 === d.qt.length && 50 > d.Zx ? (l.readAsBinaryString(b), d.Zx++) : d.qt.push({
          aS: l,
          file: b
        });
        return function () {
          l.abort()
        }
      },
      Qn: function (b) {
        var a = this;
        a.pt = !0;
        var g = c.prototype.Xl;
        a.Oz(a.file, {
          start: -g,
          stop: a.file.size
        }, function (d,
          l) {
          if (d) return console.warn("Error loading end header: %s", d), b(d);
          if (l.length !== g) throw Error("Zip end header data is wrong size!");
          a.Eb = new c(l);
          var k = a.Eb.vF();
          a.Oz(a.file, k, function (c, g) {
            if (c) return console.warn("Error loading central directory: %s", c), b(c);
            if (g.length !== k.stop - k.start) throw Error("Zip central directory data is wrong size!");
            a.Eb.zH(g);
            a.Nx = !0;
            a.pt = !1;
            return b(!1)
          })
        })
      },
      BH: function (b, a) {
        var c = this,
          d = c.Gf[b];
        if (!c.Eb.dE(b)) return a(Error('File not found: "' + b + '"'), b);
        var l = c.Eb.jq(b),
          k = c.Oz(c.file, l, function (d, h) {
            delete c.Gf[b];
            if (d) return console.warn('Error loading part "%s": %s', b, d), a(d);
            if (h.length !== l.stop - l.start) throw Error("Part data is wrong size!");
            var k = c.Eb.sG(b);
            a(!1, b, h, k)
          });
        d.started = !0;
        d.cancel = k
      }
    });
    FileReader && !FileReader.prototype.readAsBinaryString && (FileReader.prototype.readAsBinaryString = function (b) {
      var a = "",
        c = this;
      c.content = "";
      var d = new FileReader;
      d.onload = function () {
        for (var b = new Uint8Array(d.result), k = b.byteLength, e = 0; e < k; e++) a += String.fromCharCode(b[e]);
        c.content += a;
        $(c).trigger("onload");
        d.onloadend = function () {
          $(c).trigger("onloadend")
        }
      };
      d.readAsArrayBuffer(b)
    });
    a.o.V.wB = e;
    a.af = a.af || {};
    a.af.iV = function (b) {
      return {
        name: b.value.split(/[/\\]/).pop(),
        size: null,
        data: null,
        waiting: [],
        zz: !1,
        wy: function (b, a) {
          return {
            $G: this,
            wy: this.wy,
            start: b,
            stop: a
          }
        }
      }
    };
    a.af.jV = function () {
      return {
        error: !1,
        onloadend: function () {},
        result: null,
        readAsBinaryString: function (b) {
          var a = b.$G || b,
            c = this,
            d = encodeURI(a.name);
          if (a.data) return this.sz(b);
          if (a.zz) return a.waiting.push(function () {
            c.sz(b)
          });
          a.zz = !0;
          new JSIO.dV(d, function (d) {
            a.zz = !1;
            if (d) return console.error('Failed to load file "%s"', a.name), console.warn("File must be in same directory as this page for FakeFileReader to work"), c.error = Error('Failed to load file "%s"', a.name), c.onloadend(c.error);
            a.size = this.fileSize;
            a.data = this.read(this.fileSize);
            c.sz.call(c, b);
            for (d = 0; d < a.waiting.length; d++) a.waiting[d]();
            a.waiting = []
          })
        },
        sz: function (b) {
          var a = b.$G || b,
            c = b.start || 0;
          b = b.stop || a.size;
          null === c && (c = a.size);
          null === b && (b = a.size);
          0 > c && (c = a.size +
            c);
          0 > b && (b = a.size + b);
          a = a.data.slice(c, b);
          c = "";
          for (b = 0; b < a.length / 1E3; b++) c += String.fromCharCode.apply(null, a.slice(1E3 * b, 1E3 * b + 1E3));
          this.result = c;
          this.onloadend({}, c)
        }
      }
    }
  })(window);
  (function (a) {
    function e(a) {
      this.file = a
    }
    e.prototype = $.extend({
      getFileData: function (a) {
        var c = this,
          b = new FileReader;
        b.onload = function (b) {
          c.trigger("documentLoadingProgress", [b.loaded, b.loaded]);
          a(new Uint8Array(b.target.result))
        };
        b.onprogress = function (b) {
          b.lengthComputable && c.trigger("documentLoadingProgress", [b.loaded, 0 < b.total ? b.total : 0])
        };
        b.readAsArrayBuffer(this.file)
      },
      getFile: function () {
        return a.utils.isJSWorker ? this.file.path : this.file
      }
    }, a.utils.eventHandler);
    a.o.V.cK = e
  })(window);
  (function (a) {
    function e(a) {
      this.buffer = a
    }
    e.prototype = $.extend({
      getFileData: function (a) {
        a(new Uint8Array(this.buffer))
      },
      getFile: function () {
        return null
      }
    }, a.utils.eventHandler);
    a.o.V.BJ = e
  })(window);
  (function (a) {
    function e(b, a, c) {
      for (var f in b) this[f] = b[f];
      this.startOffset = a;
      this.endOffset = c;
      this.jE = function (a, c, f, g) {
        _.isUndefined(c.stop) ? (c.start += this.endOffset, c.stop = this.endOffset) : (c.start += this.startOffset, c.stop += this.startOffset);
        a = this.Rp(this.url, c, this.Sm);
        return new b.Xq(a, c, f, g)
      }
    }

    function d(b, a, c, f) {
      h.apply(this, [b, c, f]);
      this.mi = {};
      this.Sm = a;
      this.url = b
    }

    function c() {
      this.ji = 1
    }

    function b(b) {
      var c = b.request,
        f = b.range;
      return function (g, d) {
        if (g) {
          if (g.code === c.Gb.Sj) {
            a.utils.warn("Request for range " +
              f.start + "-" + f.stop + " was aborted");
            return
          }
          return b.Pe.forEach(function (b) {
            b("Error retrieving file: " + c.url + ". Received return status " + g.status + ".")
          })
        }
        return b.Pe.forEach(function (b) {
          b(!1, d, c)
        })
      }
    }

    function f(b, c, f, g) {
      this.url = b;
      this.range = c;
      this.sf = f;
      this.request = new XMLHttpRequest;
      this.request.open("GET", this.url, !0);
      a.Uint8Array && (this.request.responseType = "arraybuffer");
      g && (this.request.withCredentials = g);
      d.DISABLE_RANGE_HEADER || (_.isUndefined(c.stop) ? this.request.setRequestHeader("Range", "bytes=" +
        c.start) : this.request.setRequestHeader("Range", ["bytes=", c.start, "-", c.stop - 1].join("")));
      this.request.setRequestHeader("X-Requested-With", "XMLHttpRequest");
      if (f)
        for (var h in f) this.request.setRequestHeader(h, f[h]);
      this.request.overrideMimeType ? this.request.overrideMimeType("text/plain; charset=x-user-defined") : this.request.setRequestHeader("Accept-Charset", "x-user-defined");
      this.status = this.Gb.Bi
    }

    function g(b, c, f) {
      for (var g = -1, d = 0; d < f.length; d++) _.isEqual(f[d].range, c) && _.isEqual(f[d].url, b) && (g =
        d); - 1 === g && a.utils.warn(c + " not found in queue");
      return g
    }
    var h = a.o.V.cf,
      l = a.o.V.Ji,
      k = [],
      m = [];
    f.prototype = {
      constructor: f,
      start: function (b) {
        var c = this,
          f = this.request;
        f.onreadystatechange = function () {
          if (c.wx) return c.status = c.Gb.Sj, b({
            code: c.Gb.Sj
          });
          if (this.readyState === c.ZK.DONE) {
            c.cu();
            var g = 0 === window.document.URL.indexOf("file:///");
            200 === f.status || 206 === f.status || g && 0 === f.status ? (g = a.ez(this), c.success(g, b)) : (c.status = c.Gb.ERROR, b({
              code: c.status,
              status: this.status
            }))
          }
        };
        this.request.send(null);
        this.status =
          this.Gb.dk
      },
      success: function (b, a) {
        this.status = this.Gb.GK;
        if (a) return a(!1, b)
      },
      abort: function () {
        this.cu();
        this.wx = !0;
        this.request.abort()
      },
      cu: function () {
        var a = g(this.url, this.range, m); - 1 !== a && m.splice(a, 1);
        if (0 < k.length) {
          var a = k.shift(),
            c = new this.constructor(a.url, a.range, this.sf, this.withCredentials);
          a.request = c;
          m.push(a);
          c.start(b(a))
        }
      },
      ZK: {
        GV: 0,
        DONE: 4
      },
      Gb: {
        Bi: 0,
        dk: 1,
        GK: 2,
        ERROR: 3,
        Sj: 4
      },
      extend: function (b) {
        var a = $.extend({}, this, b.prototype);
        a.constructor = b;
        return a
      }
    };
    a.pY = [];
    d.DISABLE_RANGE_HEADER = !1;
    d.prototype = {
      Xq: f,
      dK: 3,
      Rp: function (b, c, f) {
        var g = -1 === b.indexOf("?") ? "?" : "&";
        switch (f) {
          case !1:
          case a.o.V.wi.Mr:
            b = b + g + "_=" + _.uniqueId();
            break;
          case !0:
          case a.o.V.wi.pB:
            b = b + g + "_=" + c.start + "," + (_.isUndefined(c.stop) ? "" : c.stop)
        }
        return b
      },
      jE: function (b, a, c, f) {
        return new this.Xq(b, a, c, f)
      },
      $N: function (b, a, c, f, g) {
        for (var d = 0; d < k.length; d++)
          if (_.isEqual(k[d].range, a) && _.isEqual(k[d].url, b)) return k[d].Pe.push(f), k[d].Pu++, null;
        for (d = 0; d < m.length; d++)
          if (_.isEqual(m[d].range, a) && _.isEqual(m[d].url, b)) return m[d].Pe.push(f),
            m[d].Pu++, null;
        c = {
          url: b,
          range: a,
          Sm: c,
          Pe: [f],
          Pu: 1,
          request: {}
        };
        if (0 === k.length && m.length < this.dK) return m.push(c), c.request = this.jE(b, a, g, this.withCredentials), c;
        k.push(c);
        return null
      },
      ml: function (a, c, f) {
        var d = this.Rp(a, c, this.Sm);
        (a = this.$N(d, c, this.Sm, f, this.sf)) && a.request.start(b(a));
        return function () {
          var b = g(d, c, m),
            a; - 1 !== b ? (a = --m[b].Pu, 0 === a && m[b].request.abort()) : (b = g(d, c, k), -1 !== b && (a = --k[b].Pu, 0 === a && k.splice(b, 1)))
        }
      },
      yF: function () {
        return {
          start: -l.prototype.Xl
        }
      },
      PP: function () {
        var b = -(l.prototype.Xl +
          l.prototype.bL);
        return {
          start: b - l.prototype.aL,
          end: b
        }
      },
      Qn: function (b) {
        var c = this;
        c.pt = !0;
        var f = l.prototype.Xl;
        c.ml(c.url, c.yF(), function (g, d) {
          function h() {
            var f = c.Eb.vF();
            c.ml(c.url, f, function (g, d) {
              if (g) return a.utils.warn("Error loading central directory: " + g), b(g);
              d = a.oj(d);
              if (d.length !== f.stop - f.start) return b("Invalid XOD file: Zip central directory data is wrong size! Should be " + (f.stop - f.start) + " but is " + d.length);
              c.Eb.zH(d);
              c.Nx = !0;
              c.pt = !1;
              return b(!1)
            })
          }
          if (g) return a.utils.warn("Error loading end header: " +
            g), b(g);
          d = a.oj(d);
          if (d.length !== f) return b("Invalid XOD file: Zip end header data is wrong size!");
          try {
            c.Eb = new l(d)
          } catch (k) {
            return b(k)
          }
          c.Eb.KQ ? c.ml(c.url, c.PP(), function (f, g) {
            if (f) return a.utils.warn("Error loading zip64 header: " + f), b(f);
            g = a.oj(g);
            c.Eb.$Q(g);
            h()
          }) : h()
        })
      },
      bz: function (b) {
        b(Object.keys(this.Eb.ag))
      },
      BH: function (b, f) {
        var g = this;
        if (!g.Eb.dE(b)) return delete g.Gf[b], f(Error('File not found: "' + b + '"'), b);
        var d = g.Eb.Zt(b);
        if (d in g.mi) {
          var h = g.Gf[b];
          h.Vm = g.mi[d];
          h.Vm.ji++;
          h.cancel = h.Vm.cancel
        } else {
          var k =
            g.Eb.LO(b),
            e = g.ml(g.url, k, function (c, h) {
              c ? (a.utils.warn('Error loading part "' + b + '": ' + c), g.ml(g.url, k, function (a, c) {
                if (a) return f(a, b);
                g.CH(c, k, d, b, f)
              })) : g.CH(h, k, d, b, f)
            }),
            l = g.Gf[b];
          l && (l.started = !0, l.cancel = function () {
            l.Vm.ji--;
            0 === l.Vm.ji && (e(), delete g.mi[d])
          }, g.mi[d] = new c, l.Vm = g.mi[d], l.Vm.cancel = l.cancel)
        }
      },
      CH: function (b, a, c, f, g) {
        if (b.length !== a.stop - a.start) return g(Error("Part data is wrong size!"), f);
        do {
          if (!this.mi[c]) return;
          f = this.mi[c].ji;
          for (var d = a.yH.length, h = 0; h < d; ++h) {
            var k = a.yH[h];
            g(!1, k.tl, b["string" === typeof b ? "substring" : "subarray"](k.start, k.stop), this.Eb.sG(k.tl));
            k.tl in this.Gf && delete this.Gf[k.tl]
          }
        } while (f !== this.mi[c].ji);
        delete this.mi[c]
      }
    };
    d.prototype = $.extend(new h, d.prototype);
    e.prototype = $.extend(new d, e.prototype);
    a.o.V.Wj = d;
    a.o.V.hw = f
  })(window);
  (function (a) {
    function e(a, b) {
      d.apply(this, [a]);
      this.url = a; - 1 === b.indexOf("/", b.length - 1) && (b += "/");
      this.path = b
    }
    var d = a.o.V.cf;
    e.prototype = new d;
    e.prototype = _(e.prototype).extend({
      request: function (c) {
        var b = this;
        _(c).each(function (c) {
          var g = -1 !== c.indexOf("Thumbs/"),
            h = -1 !== c.indexOf("Fonts/");
          if (-1 !== c.indexOf("Images/") || g || h) return b.trigger("partReady", {
            qa: c,
            data: c,
            qf: !0,
            Xc: !1,
            error: null,
            yb: !1
          });
          $.ajax({
            url: b.path + c,
            mimeType: "text/plain; charset=x-user-defined",
            xhrFields: {
              withCredentials: d.withCredentials
            },
            xhr: function () {
              var b = $.ajaxSettings.xhr();
              b && (this.yP = function () {
                return b.responseBody
              });
              return b
            },
            success: function (g) {
              var d = a.utils.ie ? this.yP() : g;
              g = "";
              var h, e, r;
              if (a.utils.ie) {
                d = (new a.VBArray(d)).toArray();
                r = d.length;
                h = Array(r);
                for (e = 0; e < r; e++) h[e] = d[e] & 255;
                d = r / 1024 + 1;
                for (e = 0; e < d; e++) g += String.fromCharCode.apply(null, h.slice(1024 * e, 1024 * e + 1024))
              } else
                for (h = a.o.V.Fx, e = 0; e < d.length;) {
                  for (r = 0; 1024 > r && e < d.length; ++r) h[r] = d.charCodeAt(e) & 255, ++e;
                  g += String.fromCharCode.apply(null, h.slice(0, r))
                }
              return b.trigger("partReady", {
                qa: c,
                data: g,
                qf: !1,
                Xc: !1,
                error: null,
                yb: !0
              })
            },
            error: function (a, g, d) {
              a = Error(g + " " + d);
              return b.trigger("partReady", {
                qa: c,
                qf: !1,
                Xc: !!a.wx,
                error: a
              })
            }
          })
        })
      },
      Qn: function (a) {
        a()
      }
    });
    a.o.V.rw = e
  })(window);
  (function (a) {
    function e(a, c) {
      c = c || {};
      this.url = a;
      this.filename = c.filename || a;
      this.sf = null;
      this.FU = !!c.useDownloader;
      this.withCredentials = !!c.withCredentials
    }
    e.prototype = $.extend({
      El: function (a) {
        this.sf = a
      },
      getFileData: function (a) {
        var c = new XMLHttpRequest,
          b = 0 === this.url.indexOf("blob:") ? "blob" : "arraybuffer";
        c.open("GET", this.url, !0);
        c.withCredentials = this.withCredentials;
        c.responseType = b;
        var f = this;
        if (this.sf)
          for (var g in this.sf) c.setRequestHeader(g, this.sf[g]);
        var h = /^https?:/i.test(this.url);
        c.addEventListener("load",
          function (b) {
            if (200 === this.status || !h && 0 === this.status)
              if (f.trigger("documentLoadingProgress", [b.loaded, b.loaded]), "blob" === this.responseType) {
                b = this.response;
                var c = new FileReader;
                c.onload = function (b) {
                  a(new Uint8Array(b.target.result))
                };
                c.readAsArrayBuffer(b)
              } else try {
                c = new Uint8Array(this.response), a(c)
              } catch (g) {
                f.trigger("error", ["pdfLoad", "Out of memory"])
              } else f.trigger("error", ["pdfLoad", b.currentTarget.statusText])
          }, !1);
        c.onprogress = function (b) {
          f.trigger("documentLoadingProgress", [b.loaded, 0 <
            b.total ? b.total : 0
          ])
        };
        c.addEventListener("error", function () {
          f.trigger("error", ["pdfLoad", "Network failure"])
        }, !1);
        c.send();
        this.xhr = c
      },
      getFile: function () {
        if (a.utils.isJSWorker) return this.url;
        if (this.FU) {
          var d = {
            url: this.url
          };
          this.sf && (d.customHeaders = this.sf);
          return d
        }
        return null
      },
      abort: function () {
        this.xhr && this.xhr.abort()
      }
    }, a.utils.eventHandler);
    a.o.V.Ir = e
  })(window);
  (function (a) {
    function e(a, f, e, k) {
      b.apply(this, [a, e, k]);
      this.url = a;
      this.stream = new c(a, f);
      this.Eb = new d;
      this.Vq = createPromiseCapability();
      this.wv = {}
    }

    function d() {
      this.buffer = "";
      this.state = 0;
      this.Il = 4;
      this.Rc = null;
      this.Ue = f.prototype.Wo;
      this.ag = {}
    }

    function c(b, c) {
      var f = -1 === b.indexOf("?") ? "?" : "&";
      switch (c) {
        case !1:
        case a.o.V.wi.Mr:
          this.url = b + f + "_=" + _.uniqueId();
          break;
        default:
          this.url = b
      }
      this.request = new XMLHttpRequest;
      this.request.open("GET", this.url, !0);
      this.request.setRequestHeader("X-Requested-With",
        "XMLHttpRequest");
      this.request.overrideMimeType ? this.request.overrideMimeType("text/plain; charset=x-user-defined") : this.request.setRequestHeader("Accept-Charset", "x-user-defined");
      this.status = this.Gb.Bi
    }
    var b = a.o.V.cf,
      f = a.o.V.Ji;
    c.prototype = {
      start: function (b, a) {
        var c = this,
          f = this.request,
          d;
        c.ig = 0;
        if (b)
          for (var e in b) this.request.setRequestHeader(e, b[e]);
        a && (this.request.withCredentials = a);
        this.gi = setInterval(function () {
          var b = 0 === window.document.URL.indexOf("file:///"),
            b = 200 === f.status || b && 0 === f.status;
          if (4 !== f.readyState || b) {
            try {
              f.responseText
            } catch (a) {
              return
            }
            c.ig < f.responseText.length && (d = c.mA()) && c.trigger("data", d);
            0 === f.readyState && (clearInterval(c.gi), c.trigger("done"))
          } else clearInterval(c.gi), c.trigger("done", "Error received return status " + f.status)
        }, 1E3);
        this.request.send(null);
        this.status = this.Gb.dk
      },
      mA: function () {
        var b = this.request,
          c = b.responseText;
        if (0 !== c.length)
          if (this.ig === c.length) clearInterval(this.gi), this.trigger("done");
          else return c = Math.min(this.ig + 3E6, c.length), b = a.ez(b,
            this.ig, !0, c), this.ig = c, b
      },
      abort: function () {
        clearInterval(this.gi);
        var b = this;
        this.request.onreadystatechange = function () {
          a.utils.warn("StreamingRequest aborted");
          b.status = b.Gb.Sj;
          return b.trigger("aborted")
        };
        this.request.abort()
      },
      finish: function () {
        var b = this;
        this.request.onreadystatechange = function () {
          b.status = b.Gb.tw;
          return b.trigger("done")
        };
        this.request.abort()
      },
      Gb: {
        Bi: 0,
        dk: 1,
        tw: 2,
        ERROR: 3,
        Sj: 4
      }
    };
    _(c.prototype).extend(Backbone.Events);
    d.prototype = new f;
    d.prototype = _(d.prototype).extend({
      processData: function (b) {
        var a;
        for (b = this.buffer + b; b.length >= this.Ue;) switch (this.state) {
          case 0:
            this.Rc = a = this.AH(b.slice(0, this.Ue));
            if (a.Lj !== this.NG) throw Error("Wrong signature in local header: " + a.Lj);
            b = b.slice(this.Ue);
            this.state = 1;
            this.Ue = a.kt + a.eh + a.Pk + this.Il;
            this.trigger("header", a);
            break;
          case 1:
            if (this.Rc.name = b.slice(0, this.Rc.eh), this.ag[this.Rc.name] = this.Rc, a = this.Ue - this.Il, this.trigger("file", this.Rc.name, b.slice(this.Rc.eh + this.Rc.Pk, a), this.Rc.vt), b = b.slice(a), b.slice(0, this.Il) === this.OG) this.state = 0, this.Ue =
              f.prototype.Wo;
            else return this.state = 2, !0
        }
        this.buffer = b;
        return !1
      }
    });
    _(d.prototype).extend(Backbone.Events);
    e.prototype = new b;
    e.prototype = _(e.prototype).extend({
      yl: function (b) {
        var a = this;
        this.request([this.Of, this.xg, this.Ye]);
        this.stream.bind("data", function (c) {
          try {
            if (a.Eb.processData(c)) return a.stream.finish()
          } catch (f) {
            throw a.stream.abort(), a.Ok(f), b(f), f;
          }
        });
        this.stream.bind("done", function (c) {
          a.LR = !0;
          a.Vq.resolve();
          c ? (a.Ok(c), b(c)) : (Object.keys(a.wv).forEach(function (b) {
              b !== a.Ye && a.cJ(b)
            }),
            a.wv = {})
        });
        this.Eb.bind("header", _(this.lv).bind(this));
        this.Eb.bind("file", _(this.oA).bind(this));
        return this.stream.start(this.sf, this.withCredentials)
      },
      bz: function (b) {
        var a = this;
        this.Vq.promise.then(function () {
          b(Object.keys(a.Eb.ag))
        })
      },
      ni: function () {
        return !0
      },
      request: function (b) {
        var a = this;
        this.LR ? b.forEach(function (b) {
          a.cJ(b)
        }) : b.forEach(function (b) {
          a.wv[b] = !0
        })
      },
      lv: function () {},
      abort: function () {
        this.stream && this.stream.abort()
      },
      cJ: function (b) {
        this.trigger("partReady", {
          qa: b,
          error: "Requested part not found",
          qf: !1,
          Xc: !1
        })
      },
      oA: function (b, a, c) {
        delete this.wv[b];
        this.trigger("partReady", {
          qa: b,
          data: a,
          qf: !1,
          Xc: !1,
          error: null,
          yb: c
        })
      }
    });
    a.o.V.JB = e;
    a.o.V.BV = c
  })(window);
  (function (a) {
    function e(a, f, e, k) {
      b.apply(this, [a, e, k]);
      this.url = a;
      this.stream = new c(a, f);
      this.Eb = new d(f, e, k, a.slice(0, a.lastIndexOf("/") + 1));
      this.Vq = createPromiseCapability();
      this.zN = {};
      this.QH = null;
      this.timeStamp = 0
    }

    function d(b, a, c, d) {
      this.Sm = b;
      this.decrypt = a;
      this.Jk = c;
      this.buffer = "";
      this.state = 0;
      this.Il = 4;
      this.Rc = null;
      this.Ue = f.prototype.Wo;
      this.Xn = [];
      this.vv = [];
      this.Pq = this.Uz = 0;
      this.ag = {};
      this.uS = d;
      this.Iu = "";
      this.jv = null;
      this.Mz = "";
      this.uA = 0;
      this.gR = 5
    }

    function c(b, c) {
      var f = -1 === b.indexOf("?") ?
        "?" : "&";
      switch (c) {
        case !1:
        case a.o.V.wi.Mr:
          this.url = b + f + "_=" + _.uniqueId();
          break;
        default:
          this.url = b
      }
      this.request = new XMLHttpRequest;
      this.request.open("GET", this.url, !0);
      this.request.setRequestHeader("X-Requested-With", "XMLHttpRequest");
      this.request.overrideMimeType ? this.request.overrideMimeType("text/plain; charset=x-user-defined") : this.request.setRequestHeader("Accept-Charset", "x-user-defined");
      this.status = this.Gb.Bi
    }
    var b = a.o.V.cf,
      f = a.o.V.Ji;
    c.prototype = {
      start: function (b, a) {
        var c = this,
          f = this.request,
          d;
        c.ig = 0;
        if (b)
          for (var e in b) this.request.setRequestHeader(e, b[e]);
        a && (this.request.withCredentials = a);
        this.gi = setInterval(function () {
          var b = 0 === window.document.URL.indexOf("file:///"),
            b = 200 === f.status || b && 0 === f.status;
          if (4 !== f.readyState || b) {
            try {
              f.responseText
            } catch (a) {
              return
            }
            c.ig < f.responseText.length && (d = c.mA()) && c.trigger("data", d);
            0 === f.readyState && (clearInterval(c.gi), c.trigger("done"))
          } else clearInterval(c.gi), c.trigger("done", "Error received return status " + f.status)
        }, 300);
        this.request.send(null);
        this.status = this.Gb.dk
      },
      mA: function () {
        var b = this.request,
          c = b.responseText;
        if (0 !== c.length)
          if (this.ig === c.length) clearInterval(this.gi), this.trigger("done");
          else return c = Math.min(this.ig + 3E6, c.length), b = a.ez(b, this.ig, !0, c), this.ig = c, b
      },
      abort: function () {
        clearInterval(this.gi);
        var b = this;
        this.request.onreadystatechange = function () {
          a.utils.warn("RangeStreamingRequest aborted");
          b.status = b.Gb.Sj;
          return b.trigger("aborted")
        };
        this.request.abort()
      },
      finish: function () {
        var b = this;
        this.request.onreadystatechange =
          function () {
            b.status = b.Gb.tw;
            return b.trigger("done")
          };
        this.request.abort()
      },
      Gb: {
        Bi: 0,
        dk: 1,
        tw: 2,
        ERROR: 3,
        Sj: 4
      }
    };
    _(c.prototype).extend(Backbone.Events);
    d.prototype = new f;
    d.prototype = _(d.prototype).extend({
      pN: function (b) {
        b = a.utils.utf8_decode(b).split("\n");
        this.Mz && (b[0] = this.Mz + b[0]);
        var c = b[b.length - 1];
        c && (this.Mz = c, b.pop());
        0 < b.length && 3 > b[b.length - 1].length && b.pop();
        0 < b.length && 3 > b[0].length && b.shift();
        return b
      },
      WR: function (b) {
        if (!b) return !1;
        b = this.pN(b);
        for (var a = 0, c = 0, f, d = this.Iu, e = !1, r = 0; r < b.length; ++r)
          if (f =
            b[r].trim().replace(/(^[[,]*|[\],]*$)/g, ""), !(4 > f.length)) {
            f = JSON.parse(f) || {};
            f.url && (this.Iu = this.uS + f.url, d !== this.Iu && (a = 0, e = !0), d = this.Iu);
            f.size && (0 === a && (c = f.pos), a += f.size, e || 1048576 < a || 0 === this.Uz || b.length === r + 1) && (this.Pz({
              start: c,
              stop: c + a,
              url: d
            }), a = 0);
            if (f.end || 0 === f.size) return 0 < a && this.Pz({
              start: c,
              stop: c + a,
              url: d
            }), !0;
            e = !1
          } return !1
      },
      Pz: function (b) {
        var c = this;
        if (0 < this.Uz && 0 === this.Pq) this.vv.push(b);
        else {
          var f = this.Uz++;
          this.jv && this.jv.url === b.url || (this.jv = new a.o.V.Wj(b.url, this.Sm,
            this.decrypt, this.Jk));
          var d = this.jv;
          ++c.uA;
          d.ml(b.url, b, function (a, d) {
            --c.uA;
            c.xR(d, f, b)
          })
        }
      },
      kO: function () {
        if (0 < this.Pq)
          for (; 0 < this.vv.length && this.uA < this.gR;) this.Pz(this.vv.shift())
      },
      xR: function (b, c, f) {
        this.Xn[c - this.Pq] = {
          data: b,
          range: f
        };
        for (b = c; this.Pq === b; b++) 0 < this.Xn.length && this.Xn[0] && (this.processData(a.oj(this.Xn[0].data), this.Xn[0].range), this.Xn.shift(), ++this.Pq, this.kO())
      },
      processData: function (b) {
        var a;
        if (2 === this.state) return !1;
        for (b = this.buffer + b; b.length >= this.Ue;) switch (this.state) {
          case 0:
            this.Rc =
              a = this.AH(b.slice(0, this.Ue));
            if (a.Lj !== this.NG) throw Error("Wrong signature in local header: " + a.Lj);
            b = b.slice(this.Ue);
            this.state = 1;
            this.Ue = a.kt + a.eh + a.Pk + this.Il;
            this.trigger("header", a);
            break;
          case 1:
            if (this.Rc.name = b.slice(0, this.Rc.eh), this.ag[this.Rc.name] = this.Rc, a = this.Ue - this.Il, this.trigger("file", this.Rc.name, b.slice(this.Rc.eh + this.Rc.Pk, a), this.Rc.vt), b = b.slice(a), b.slice(0, this.Il) === this.OG) this.state = 0, this.Ue = f.prototype.Wo;
            else return this.state = 2, !0
        }
        this.buffer = b;
        return !1
      }
    });
    _(d.prototype).extend(Backbone.Events);
    e.prototype = new b;
    e.prototype = _(e.prototype).extend({
      yl: function (b) {
        var a = this;
        this.request([this.Of, this.xg, this.Ye]);
        this.stream.bind("data", function (c) {
          try {
            if (a.Eb.WR(c)) return a.stream.finish()
          } catch (f) {
            throw a.stream.abort(), a.Ok(f), b(f), f;
          }
        });
        this.stream.bind("done", function (c) {
          a.Vq.resolve();
          a.QH = {};
          c && (a.Ok(c), b(c))
        });
        this.Eb.bind("header", _(this.lv).bind(this));
        this.Eb.bind("file", _(this.oA).bind(this));
        this.timeStamp = Date.now();
        return this.stream.start(this.sf, this.withCredentials)
      },
      bz: function (b) {
        var a =
          this;
        this.Vq.promise.then(function () {
          b(Object.keys(a.Eb.ag))
        })
      },
      ni: function () {
        return !0
      },
      request: function () {},
      lv: function () {},
      abort: function () {
        this.stream && this.stream.abort()
      },
      oA: function (b, a, c) {
        this.trigger("partReady", {
          qa: b,
          data: a,
          qf: !1,
          Xc: !1,
          error: null,
          yb: c
        });
        this.zN[b] = {
          qa: b,
          data: null,
          yb: c
        }
      }
    });
    a.o.V.CK = e;
    a.o.V.zV = c
  })(window);
  (function (a) {
    function e(a) {
      d.apply(this, arguments);
      this.db = a
    }
    var d = a.o.V.cf;
    e.prototype = new d;
    e.prototype = _(e.prototype).extend({
      request: function (a) {
        var b = this;
        _(a).each(function (a) {
          b.db.get(a, function (c, d, e) {
            return c ? b.trigger("partReady", {
              qa: a,
              error: c
            }) : b.trigger("partReady", {
              qa: a,
              data: d,
              qf: !1,
              Xc: !1,
              error: null,
              yb: e
            })
          })
        })
      },
      Qn: function (a) {
        a()
      }
    });
    a.o.V.fp = e
  })(window);
  (function (a) {
    function e(b, a, g, d) {
      c.apply(this, arguments)
    }

    function d(b, c) {
      this.url = b;
      this.range = c;
      this.request = new XMLHttpRequest;
      this.request.open("GET", this.url, !0);
      a.Uint8Array && (this.request.responseType = "arraybuffer");
      this.request.setRequestHeader("X-Requested-With", "XMLHttpRequest");
      this.status = this.Gb.Bi
    }
    var c = a.o.V.Wj;
    d.prototype = a.o.V.hw.prototype.extend(d);
    e.prototype = {
      Xq: d,
      Rp: function (b, a) {
        return b + "/bytes=" + a.start + "," + (a.stop ? a.stop : "")
      }
    };
    e.prototype = $.extend(new c, e.prototype);
    a.o.V.AJ =
      e;
    a.o.V.cV = d
  })(window);
  (function (a) {
    a.o.oB = function (a, d) {
      function c(b, a) {
        function c(b) {
          e().then(function (a) {
            u && !w ? setTimeout(function () {
              c(b)
            }, 1) : a.send(JSON.stringify(b))
          })
        }

        function d(b, a, f) {
          var h = createPromiseCapability(),
            e = !1,
            l = h;
          q = b;
          v = a;
          p = f;
          n = null;
          try {
            var D = new WebSocket(A ? r + "/" + A : r + "/ws");
            D.onopen = function () {
              h.resolve();
              e = !0;
              h = null;
              u = !1;
              m.resolve(D);
              v && v()
            };
            D.onerror = function (b) {
              u = w = !0;
              h && h.reject(b);
              n && n.reject()
            };
            D.onclose = function () {
              m = createPromiseCapability();
              u = !0;
              n || (n = createPromiseCapability());
              n.resolve();
              p &&
                p();
              q && e && q({
                t: "health",
                data: {
                  unhealthy: !0
                }
              })
            };
            D.onmessage = function (b) {
              b && b.data && (b = JSON.parse(b.data), b.hb ? c({
                hb: !0
              }) : b.end ? k() : q(b))
            }
          } catch (H) {
            h.reject(H), h = null
          }
          return l.promise
        }

        function e() {
          u && q && d(q);
          return m.promise
        }

        function k() {
          return n ? n.promise : e().then(function (b) {
            n = createPromiseCapability();
            b.close();
            return n.promise
          })
        }
        var m = createPromiseCapability(),
          n = null,
          r = function (b) {
            var a = b.indexOf("://"),
              c = "ws://";
            0 > a ? a = 0 : (5 === a && (c = "wss://"), a += 3);
            var f = b.lastIndexOf("/");
            0 > f && (f = b.length);
            return c +
              b.slice(a, f)
          }(b),
          q = null,
          v = null,
          p = null,
          u = !1,
          w = !1,
          A = a;
        return {
          send: c,
          UA: d,
          close: k
        }
      }
      return window.WebSocket ? c(a, d) : function (b, a) {
        function c(b) {
          (v ? v.promise : Promise.resolve(q)).then(function (a) {
            var c = new XMLHttpRequest;
            a = r ? n + "/" + r + "pf?id=" + a : n + "/pf?id=" + a;
            var f = new FormData;
            f.append("data", JSON.stringify(b));
            c.open("POST", a);
            c.withCredentials = !0;
            c.send(f)
          })
        }

        function d() {
          e();
          p = !0;
          u();
          m.close()
        }

        function e() {
          q = 0;
          v || (v = createPromiseCapability())
        }

        function k() {
          m = new XMLHttpRequest;
          var b = n + "/pf",
            b = 0 !== q ? b + ("?id=" +
              q + "&uc=" + A) : b + ("?uc=" + A);
          A++;
          m.open("GET", b, !0);
          m.withCredentials = !0;
          m.setRequestHeader("Cache-Control", "no-cache");
          m.setRequestHeader("X-Requested-With", "XMLHttpRequest");
          var a = m,
            f = !1;
          m.onreadystatechange = function () {
            a: {
              var b;
              if (3 <= a.readyState && !f) {
                try {
                  b = a.responseText.length
                } catch (m) {
                  console.log("caught exception");
                  break a
                }
                if (0 < b) try {
                  var n = a.responseText.split("\n");
                  for (n[n.length - 1] && n.pop(); 0 < n.length && 3 > n[n.length - 1].length;) "]" === n.pop() && e();
                  0 < n.length && 3 > n[0].length && n.shift();
                  for (b = 0; b < n.length; ++b) n[b].endsWith(",") &&
                    (n[b] = n[b].substr(0, n[b].length - 1));
                  0 === q && 0 < n.length && (q = JSON.parse(n.shift()).id, b = v, v = null, b.resolve(q));
                  var u;
                  for (b = 0; b < n.length; ++b)(u = JSON.parse(n[b])) && u.end ? d() : u && u.hb && u.id === q ? c({
                    hb: !0
                  }) : w(u)
                } catch (m) {}
                p ? console.log("dead") : (f = !0, k())
              }
            }
          };
          m.send()
        }
        var m, n = function (b) {
            var a = b.lastIndexOf("/");
            0 > a && (a = b.length);
            return b.slice(0, a)
          }(b),
          r = a,
          q = 0,
          v = createPromiseCapability(),
          p = !1,
          u = null,
          w = null,
          A = 0;
        return {
          send: c,
          UA: function (b, a, c) {
            w = b;
            u = c;
            p = !1;
            e();
            k();
            a && a();
            return Promise.resolve()
          },
          close: d
        }
      }(a,
        d)
    }
  })(window);
  (function (a) {
    function e(b, f) {
      f.endsWith("/") || (f += "/");
      f.endsWith("blackbox/") || (f += "blackbox/");
      this.Xx = a.o.oB(f);
      this.Qv = null;
      this.We = f;
      this.DE = b;
      this.de = null;
      this.rl = d();
      this.fj = d();
      this.Wx = !1;
      this.Ne = this.Uc = this.gd = this.Nd = null;
      this.je = [];
      this.St = [];
      this.cache = {};
      this.QH = null;
      this.vv = [];
      this.timeStamp = 0;
      this.xe = [];
      this.Ef = [];
      this.zy = null;
      this.$x = !1;
      this.GA = this.id = null;
      this.Nz = this.fG = c;
      this.er = 0;
      this.uz = !1;
      this.rR = 1;
      this.Fu = {};
      this.Kv(!0)
    }

    function d() {
      var b = {
        promise: null,
        resolve: null,
        reject: null,
        state: 0,
        result: null,
        request: null,
        Bq: function () {
          return 1 === (b.state & 1)
        },
        BQ: function () {
          return 2 === (b.state & 2)
        },
        hg: function () {
          return !b.BQ() && !b.Bq()
        },
        wQ: function () {
          return 4 === (b.state & 4)
        },
        lI: function () {
          b.state |= 4
        }
      };
      b.promise = new Promise(function (a, c) {
        b.resolve = function () {
          if (0 === b.state || 4 === b.state) b.state = 1, b.result = arguments[0], a.apply(null, arguments)
        };
        b.reject = function () {
          if (0 === b.state || 4 === b.state) b.state = 2, c.apply(null, arguments)
        }
      });
      return b
    }

    function c() {
      return !1
    }

    function b(b, a, c) {
      if (!(a in f)) return !0;
      a = f[a];
      for (var d = 0; d < a.length; d++) {
        var e;
        var n = b;
        e = a[d];
        var r = c;
        if (e.name in n) {
          var q = "",
            v = !1,
            n = n[e.name];
          switch (e.type) {
            case "s":
              q = "String";
              v = _.isString(n);
              break;
            case "a":
              q = "Array";
              v = _.isArray(n);
              break;
            case "n":
              q = "Number";
              v = _.isNumber(n) && _.isFinite(n);
              break;
            case "o":
              q = "Object", v = _.isObject(n) && !_.isArray(n)
          }
          v || r.reject('Expected response field "' + e.name + '" to have type ' + q);
          e = v
        } else r.reject('Response missing field "' + e.name + '"'), e = !1;
        if (!e) return !1
      }
      return !0
    }
    var f = {
      pages: [{
        name: "pages",
        type: "a"
      }],
      pdf: [{
        name: "url",
        type: "s"
      }],
      docmod: [{
        name: "url",
        type: "s"
      }, {
        name: "rID",
        type: "s"
      }],
      health: [],
      tiles: [{
        name: "z",
        type: "n"
      }, {
        name: "rID",
        type: "n"
      }, {
        name: "tiles",
        type: "a"
      }, {
        name: "size",
        type: "n"
      }],
      annots: [{
        name: "url",
        type: "s"
      }, {
        name: "name",
        type: "s"
      }],
      image: [{
        name: "url",
        type: "s"
      }, {
        name: "name",
        type: "s"
      }, {
        name: "p",
        type: "n"
      }],
      text: [{
        name: "url",
        type: "s"
      }, {
        name: "name",
        type: "s"
      }, {
        name: "p",
        type: "n"
      }]
    };
    e.prototype = _(e.prototype).extend({
      vE: function () {
        var b = createPromiseCapability();
        if (this.Qv) {
          var a = !1,
            c = new XMLHttpRequest;
          c.open("GET", this.We + "ck?c=" + this.Qv);
          c.withCredentials = !0;
          c.onreadystatechange = function () {
            3 <= c.readyState && !a && (a = !0, 200 === c.status ? b.resolve() : b.reject())
          };
          c.send()
        } else b.resolve();
        return b.promise
      },
      gT: function (b, a) {
        this.fG = b || c;
        this.Nz = a || c
      },
      ZM: function () {
        var b = this;
        b.fj = d();
        b.rl = d();
        return this.Xx.close().then(function () {
          function a() {
            b.Wx = !1;
            b.id = null;
            b.$x = !1;
            return Promise.resolve()
          }
          return b.vE().then(a, a)
        })
      },
      SH: function () {
        this.fG();
        this.Bz();
        this.Nd && (this.Nd.hg() ? this.Ae(this.Nd.request) :
          this.Nd.Bq() && this.Nz(this.Nd.result.url, "pdf") && (this.Nd = null, this.RH()));
        this.Ne && this.Ne.hg() && this.Ae(this.Ne.request);
        this.gd && this.gd.hg() ? this.Ae(this.gd.request) : this.Uc && this.Uc.hg() && this.ZF(this.Uc.request);
        var b;
        for (b = 0; b < this.xe.length; b++) this.xe[b] && this.xe[b] && (this.xe[b].hg() ? this.Ae(this.xe[b].request) : this.xe[b].Bq() && this.Nz(this.xe[b].result.url, "image") && (this.xe[b] = null, this.uv(b)));
        for (b = 0; b < this.Ef.length; b++) this.Ef[b] && this.Ef[b] && this.Ef[b].hg() && !this.Ef[b].wQ() && this.Ae(this.Ef[b].request);
        for (b = 0; b < this.je.length; b++) this.je[b] && this.je[b].hg() && this.Ae(this.je[b].request)
      },
      Bz: function () {
        var b = this;
        this.Wx || (this.timeStamp = Date.now(), this.Xx.UA(function (a) {
          b.yR(a)
        }).then(function () {}, function () {
          b.$x = !0;
          b.er = 0;
          b.GA = 0;
          b.vE();
          b.fj.resolve({
            unhealthy: !0,
            id: 0,
            serverID: "0",
            hasPDF: !0,
            hasXOD: !1
          });
          b.rl.resolve()
        }), this.Wx = !0)
      },
      yl: function (b) {
        this.zy = b || null;
        this.rl.Bq() || (this.Bz(), this.Ae({
          t: "pages"
        }));
        return this.rl.promise
      },
      cE: function (b) {
        b = $.extend(b, {
          uri: encodeURIComponent(this.DE)
        });
        this.zy && (b.ext = this.zy);
        this.de && (b.c = this.de);
        return b
      },
      Ae: function (b) {
        b = this.cE(b);
        this.Xx.send(b)
      },
      Jh: function (b) {
        return b
      },
      yR: function (a) {
        var c = this,
          f, k = a.data,
          e = a.err,
          n = a.t;
        switch (n) {
          case "pages":
            e ? c.rl.reject(e) : b(k, n, c.rl) && c.rl.resolve(k);
            break;
          case "config":
            e ? c.fj.reject(e) : b(k, n, c.fj) && (k.id && (c.id = k.id), k.sCookieName && (c.Qv = k.sCookieName), k.serverID ? (c.er = k.serverID === c.GA && c.uz ? c.er + 1 : 0, c.GA = k.serverID) : c.er = 0, c.uz = !1, c.fj.resolve(k));
            break;
          case "health":
            e ? c.fj.reject(e) : b(k, n, c.fj) &&
              k.unhealthy && c.Qv && 1 >= c.er && (c.uz = !0, c.ZM().then(function () {
                c.SH()
              }, function () {
                c.SH()
              }));
            break;
          case "pdf":
            k.url = c.We + "../" + k.url;
            e ? c.Nd.reject(e) : b(k, n, c.Nd) && c.Nd.resolve(k);
            break;
          case "docmod":
            k.url = c.We + "../" + k.url;
            e ? c.Fu[k.rID].reject(e) : b(k, n, c.Nd) && c.Fu[k.rID].resolve(k);
            break;
          case "xod":
            if (e) this.gd && this.gd.hg() && this.gd.reject(e), this.Uc && this.Uc.hg() && this.Uc.reject(e);
            else if (k.notFound) k.noCreate || this.gd && this.gd.hg() && this.gd.resolve(k), this.Uc && this.Uc.hg() && this.Uc.resolve(k);
            else {
              k.url &&
                (k.url = c.We + "../" + k.url);
              if (!this.Uc || this.Uc.Bq()) this.Uc = d(), this.Uc.request = {
                t: "xod",
                noCreate: !0
              };
              this.gd || (this.gd = d(), this.gd.request = {
                t: "xod"
              });
              this.Uc.resolve(k);
              this.gd.resolve(k)
            }
            break;
          case "annots":
            e ? c.Ne.reject(e) : b(k, n, c.Ne) && (c.Ne.lI(), $.ajax({
              dataType: "text",
              url: c.We + "../" + k.url,
              xhrFields: {
                withCredentials: !0
              },
              success: function (b) {
                c.Ne.resolve(b)
              },
              error: function (b, a, f) {
                c.Ne.reject(a + (f ? ": " + JSON.stringify(f) : ""))
              }
            }));
            break;
          case "image":
            f = this.xe[k.p];
            e ? f.promise.reject(e) : b(k, n, f) && (f.result =
              k, f.result.url = c.We + "../" + f.result.url, f.resolve(f.result));
            break;
          case "tiles":
            f = k.rID;
            a = this.je[f];
            this.je[f] = null;
            this.St.push(f);
            if (e) a.reject(e);
            else if (b(k, n, a)) {
              for (e = 0; e < k.tiles.length; e++) k.tiles[e] = c.We + "../" + k.tiles[e];
              a.resolve(k)
            }
            break;
          case "text":
            f = this.Ef[k.p];
            e ? f.reject(e) : b(k, n, f) && (f.lI(), $.ajax({
              dataType: "json",
              url: c.We + "../" + k.url,
              xhrFields: {
                withCredentials: !0
              },
              success: function (b) {
                f.result = b;
                f.resolve(f.result)
              },
              error: function (b, a, c) {
                f.reject(a + (c ? ": " + JSON.stringify(c) : ""))
              }
            }));
            break;
          case "progress":
            "loading" === k.t && c.trigger("documentLoadingProgress", [k.bytes, k.total])
        }
      },
      rF: function () {
        this.Bz();
        return this.fj.promise
      },
      lF: function () {
        this.Ne || (this.Ne = d(), this.Ne.request = {
          t: "annots"
        }, this.Ae(this.Ne.request));
        return this.Ne.promise
      },
      uv: function (b) {
        this.xe[b] || (this.xe[b] = d(), this.xe[b].request = {
          t: "image",
          p: b
        }, this.Ae(this.xe[b].request));
        return this.xe[b].promise
      },
      nS: function (b) {
        this.Ef[b] || (this.Ef[b] = d(), this.Ef[b].request = {
          t: "text",
          p: b
        }, this.Ae(this.Ef[b].request));
        return this.Ef[b].promise
      },
      oS: function (b, a, c, f) {
        var e = this.je.length;
        this.St.length && (e = this.St.pop());
        this.je[e] = d();
        this.je[e].request = {
          t: "tiles",
          p: b,
          z: a,
          r: c,
          size: f,
          rID: e
        };
        this.Ae(this.je[e].request);
        return this.je[e].promise
      },
      RH: function () {
        this.Nd || (this.Nd = d(), this.Nd.request = {
          t: "pdf"
        }, this.$x ? this.Nd.resolve({
          url: this.DE
        }) : this.Ae(this.Nd.request));
        return this.Nd.promise
      },
      EF: function (b) {
        var a = new XMLHttpRequest,
          c = this.We + "aul?id=" + this.id,
          f = new FormData,
          e = {};
        b.annots && (e.annots = "xfdf");
        b.watermark && (e.watermark = "png");
        b.redactions && (e.redactions = "redact");
        e = {
          t: "docmod",
          reqID: this.rR++,
          parts: e
        };
        b.print && (e.print = !0);
        e = this.cE(e);
        f.append("msg", JSON.stringify(e));
        b.annots && f.append("annots", b.annots);
        b.watermark && f.append("watermark", b.watermark);
        b.redactions && f.append("redactions", b.redactions);
        this.Fu[e.reqID] = d();
        a.open("POST", c);
        a.withCredentials = !0;
        a.send(f);
        return this.Fu[e.reqID].promise
      },
      ZF: function () {
        this.Uc || (this.Uc = d(), this.Uc.request = {
          t: "xod",
          noCreate: !0
        }, this.Ae(this.Uc.request));
        return this.Uc.promise
      },
      pS: function () {
        this.gd || (this.gd = d(), this.gd.request = {
          t: "xod"
        }, this.Ae(this.gd.request));
        return this.gd.promise
      },
      ni: function () {
        return !0
      },
      request: function () {},
      lv: function () {},
      abort: function () {
        for (var b = 0; b < this.je.length; b++) this.je[b] && (this.je[b].resolve(null), this.je[b] = null, this.St.push(b));
        this.close()
      },
      El: function (b) {
        this.de = this.de || {};
        this.de.headers = b
      },
      GO: function () {
        return this.de ? _.omit(this.de.headers, ["Cookie", "cookie"]) : null
      },
      Kv: function (b) {
        this.de = this.de || {};
        this.de.internal = this.de.internal || {};
        this.de.internal.withCredentials = b
      },
      NP: function () {
        return this.de && this.de.internal ? this.de.internal.withCredentials : null
      },
      getFileData: function () {
        return Promise.reject()
      }
    }, a.utils.eventHandler);
    a.o.V.Br = e
  })(window);
  (function (a) {
    function e(b, a, f, d) {
      c.apply(this, arguments)
    }

    function d(b, a) {
      this.url = b;
      this.range = a;
      this.status = this.Gb.Bi
    }
    var c = a.o.V.Wj,
      b = a.o.V.hw,
      f = {};
    d.prototype = {
      start: function (b) {
        var c = this;
        f[this.range.start] = {
          success: function (f) {
            var d = atob(f),
              e, l = d.length;
            f = new Uint8Array(l);
            for (e = 0; e < l; ++e) f[e] = d.charCodeAt(e);
            d = f.length;
            e = "";
            var q = 0;
            if (a.utils.typedArrayApply)
              for (; q < d;) l = f.subarray(q, q + 1024), q += 1024, e += String.fromCharCode.apply(null, l);
            else
              for (l = Array(1024); q < d;) {
                for (var v = 0, p = Math.min(q +
                    1024, d); q < p; v++, q++) l[v] = f[q];
                e += String.fromCharCode.apply(null, 1024 > v ? l.slice(0, v) : l)
              }
            c.success(e, b)
          },
          fail: function () {
            c.status = c.Gb.ERROR;
            b({
              code: c.status
            })
          }
        };
        var d = document.createElement("IFRAME");
        d.setAttribute("src", this.url);
        document.documentElement.appendChild(d);
        d.parentNode.removeChild(d);
        d = null;
        this.status = this.Gb.dk;
        c.cu()
      }
    };
    d.prototype = b.prototype.extend(d);
    e.prototype = {
      Xq: d,
      Rp: function (b, a) {
        return b + "#" + a.start + "&" + (a.stop ? a.stop : "")
      }
    };
    e.prototype = $.extend(new c, e.prototype);
    a.o.V.Uo =
      e;
    a.o.V.nV = d;
    a.o.V.Uo.hA = function (b, a) {
      var c = f[a];
      delete f[a];
      c.success(b)
    };
    a.o.V.Uo.gA = function (b, a) {
      var c = f[a];
      delete f[a];
      c.fail()
    }
  })(window);
  (function (a) {
    function e(b, a, f, d) {
      c.apply(this, arguments)
    }

    function d(b, a) {
      this.url = b;
      this.range = a;
      this.status = this.Gb.Bi
    }
    var c = a.o.V.Wj,
      b = a.o.V.hw,
      f = {};
    d.prototype = {
      start: function (b) {
        function a() {
          d.status = d.Gb.ERROR;
          b({
            code: d.status
          })
        }

        function c(a) {
          var f = atob(a),
            h, e = f.length;
          a = new Uint8Array(e);
          for (h = 0; h < e; ++h) a[h] = f.charCodeAt(h);
          f = a.length;
          h = "";
          for (var l = 0; l < f;) e = a.subarray(l, l + 1024), l += 1024, h += String.fromCharCode.apply(null, e);
          d.success(h, b)
        }
        var d = this;
        "undefined" === typeof f[this.range.start] &&
          (f[this.range.start] = {
            success: c,
            fail: a
          }, window.external.notify(this.url), this.status = this.Gb.dk);
        d.cu()
      }
    };
    d.prototype = b.prototype.extend(d);
    e.prototype = {
      Xq: d,
      Rp: function (b, a) {
        return b + "?" + a.start + "&" + (a.stop ? a.stop : "")
      }
    };
    e.prototype = $.extend(new c, e.prototype);
    a.o.V.gp = e;
    a.o.V.HV = d;
    a.o.V.gp.hA = function (b, a) {
      var c = f[a];
      delete f[a];
      c.success(b)
    };
    a.o.V.gp.gA = function (b, a) {
      var c = f[a];
      delete f[a];
      c.fail()
    }
  })(window);
  (function (a) {
    function e() {
      d.apply(this, arguments)
    }
    var d = a.o.V.Wj;
    e.prototype = $.extend(new d, {
      yF: function () {
        return {
          start: this.XE - a.o.V.Ji.prototype.Xl,
          stop: this.XE
        }
      },
      Qn: function (a) {
        var b = this;
        this.ml(this.url, {
          start: 0,
          stop: 1
        }, function (f, g, h) {
          if (f) return a(f);
          f = h.request.getResponseHeader("Content-Range");
          b.XE = f.split("/")[1];
          d.prototype.Qn.call(b, a)
        })
      }
    });
    a.o.V.EJ = e
  })(window);
  (function (a) {
    function e(b, f, d, g) {
      this.Pd = b;
      this.Tu = !1;
      this.cache = new c(a.kw, b.ni());
      b.decrypt && b.ni() && (this.Nk = new c(a.kw, b.ni()));
      this.J = f;
      this.ja = g;
      this.di = {};
      this.nr = {};
      this.it = {};
      this.At = {};
      this.Tt = [];
      this.fq = {};
      this.ze = d;
      this.Wu = _.bind(this.Wu, this);
      b.bind("partReady", this.Wu)
    }

    function d(b) {
      window._indexedDB = window._indexedDB || window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB;
      window._IDBTransaction = window._IDBTransaction || window.IDBTransaction || window.webkitIDBTransaction;
      window._IDBTransaction && !window._IDBTransaction.READ_WRITE && (window._IDBTransaction.READ_WRITE = "readwrite");
      this.name = b;
      this.db = null;
      this.rE = "1";
      this.Gt = this.Xc = !1
    }

    function c(b, a) {
      this.hR = this.Zq = b;
      this.queue = [];
      this.nO = a
    }

    function b(b, a) {
      this.Df = b;
      this.pH = a;
      this.Pe = {};
      this.ah = {};
      this.Xc = !1;
      for (var c = 0; c < a.length; c++) this.ah[a[c]] = !0
    }

    function f() {
      this.index = 0;
      this.data = {
        functions: [],
        Pe: [],
        done: !1
      };
      this.fc = []
    }

    function g(b) {
      this.data = b;
      this.fc = [];
      this.Lf = []
    }

    function h(b, a) {
      this.Df = b;
      this.Ta = {};
      this.qb =
        null;
      this.La = a
    }
    var l = a.o.V.rw;
    a.By = !1;
    a.o.Uy = function (b, c) {
      if (a.utils.hasObjectURL) {
        "string" === typeof c && (c = a.UF(c));
        var f;
        try {
          f = new Blob([c], {
            type: b
          })
        } catch (d) {
          window.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.uV || window.tV, window.BlobBuilder && (f = new window.BlobBuilder, f.append(c), f = f.getBlob(b))
        }
        if (f) return URL.createObjectURL(f)
      } else return "data:" + b + ";base64," + btoa(c)
    };
    a.o.BF = function (b, c) {
      return a.o.Uy("image/" + ("jpg" === b ? "jpeg" : b), c)
    };
    g.prototype = {
      init: function (b) {
        if (this.data) {
          var c =
            this;
          a.OP(this.data, this.ja, function (a) {
            c.worker = a;
            c.wr();
            c.WX = [];
            c.Yv = !1;
            c.data = null;
            b()
          }, function (b, a) {
            b ? c.Lf.push(b) : c.Yv = !0;
            c.FW = a;
            var f = c.callback;
            c.callback = null;
            f && f()
          })
        } else b()
      },
      cancel: function () {
        for (var b = 0; b < this.fc.length; b++) {
          for (var a = 0; a < this.fc[b].saves; a++) this.fc[b].restore();
          this.fc[b].saves = 0
        }
        this.fc = [];
        this.worker && this.worker.cancel()
      },
      clone: function () {
        return new g(this.data)
      },
      run: function (b, a, c) {
        if (this.Lf.length) {
          -1 === this.fc.indexOf(b) && this.fc.push(b);
          c = Date.now() + c;
          do this.wr(),
            runEval(this.Lf.shift(), b, a); while (this.Lf.length && c > Date.now());
          return !1
        }
        return !0
      },
      Rq: function () {
        var b = this;
        this.worker || this.init(function () {
          b.wr()
        });
        return new Promise(function (a) {
          b.Yv || b.Lf.length ? a() : b.callback = a
        })
      },
      wr: function () {
        if (this.Yv) return !1;
        this.worker.qR()
      },
      Yx: function (b) {
        return new Function("c", "t", b)
      },
      Ey: function (b) {
        var a = this;
        this.init(function () {
          function c() {
            if (a.Lf.length) {
              a.wr();
              var f = a.Lf.map(function (b) {
                return a.Yx(b)
              });
              a.Lf = [];
              b(f)
            } else b()
          }
          a.Yv || a.Lf.length ? c() : a.callback =
            c
        })
      }
    };
    f.prototype = {
      clone: function () {
        var b = new f;
        b.data = this.data;
        b.index = 0;
        return b
      },
      cancel: function () {
        for (var b = 0; b < this.fc.length; b++) {
          for (var a = 0; a < this.fc[b].saves; a++) this.fc[b].restore();
          this.fc[b].saves = 0
        }
        this.fc = []
      },
      gE: function (b) {
        return new g(b)
      },
      Ey: function (b, c) {
        function f() {
          g.Ey(function (b) {
            b ? (d.data.functions = d.data.functions.concat(b), a.setImmediate(f, 0)) : (d.data.done = !0, c());
            b = d.data.Pe.length;
            if (0 < b) {
              for (var g = 0; g < b; ++g) d.data.Pe[g]();
              d.data.Pe = []
            }
          })
        }
        this.data.done = !1;
        var d = this,
          g =
          this.gE(b);
        d.data.functions = [];
        f();
        this.index = 0
      },
      Rq: function () {
        var b = this;
        return new Promise(function (a) {
          b.data.done || b.index < b.data.functions.length ? a() : b.data.Pe.push(a)
        })
      },
      run: function (b, a, c) {
        -1 === this.fc.indexOf(b) && this.fc.push(b);
        if (this.index < this.data.functions.length) {
          c = Date.now() + c;
          var f = this.data.functions[this.index];
          do ++this.index, f(b, a), f = this.data.functions[this.index]; while (f && c > Date.now());
          return !1
        }
        return !0
      },
      zS: g.prototype.zS
    };
    b.prototype = {
      vQ: function () {
        return 0 === _(this.ah).keys().length
      }
    };
    c.prototype = {
      getItem: function (b) {
        return this[b] || null
      },
      setItem: function (b, a, c) {
        if (b in this) this.queue.splice(this.queue.indexOf(b), 1), this.queue.push(b);
        else if (this.nO) this[b] = {
          data: a,
          yb: c
        }, this.queue.push(b);
        else if (a.length < this.hR / 2) {
          for (; this.Zq < a.length;) {
            var f = this.queue[0];
            this.Zq += this[f].data.length;
            delete this[f];
            this.queue.shift()
          }
          this.Zq -= a.length;
          this[b] = {
            data: a,
            yb: c
          };
          this.queue.push(b)
        }
      }
    };
    d.prototype = {
      open: function (b, a) {
        var c = this,
          f = window._indexedDB.open(c.name);
        if (_.isUndefined(f)) a("User declined to increase space");
        else {
          f.onsuccess = function () {
            c.db = f.result;
            if (c.db.setVersion && c.db.version !== c.rE) {
              var b = c.db.setVersion(c.rE);
              b.onsuccess = function () {
                c.db.objectStoreNames.contains(c.name) && c.db.deleteObjectStore(c.name);
                c.db.createObjectStore(c.name, {
                  keyPath: "partName"
                });
                b.result.oncomplete = d
              }
            } else d()
          };
          f.onupgradeneeded = function (b) {
            c.db = b.target.result;
            c.db.objectStoreNames.contains(c.name) && c.db.deleteObjectStore(c.name);
            c.db.createObjectStore(c.name, {
              keyPath: "partName"
            })
          };
          f.onerror = function () {
            a("Error opening database for offline mode")
          };
          var d = function () {
            c.get("NumParts", function (f, d) {
              if (f) c.Gt = !1, b();
              else {
                var g = c.db.transaction([c.name]).objectStore(c.name).count();
                g.onsuccess = function () {
                  c.Gt = g.result === d;
                  b()
                };
                g.onerror = function () {
                  a("Error opening database for offline mode")
                }
              }
            })
          }
        }
      },
      QI: function (b, a, c, f) {
        var d = this.db.transaction([this.name], window._IDBTransaction.READ_WRITE);
        d.oncomplete = function () {
          f && f()
        };
        d.onerror = function () {
          f && f();
          throw Error("Error adding " + b + " to the offline database");
        };
        d.objectStore(this.name).put({
          partName: b,
          partData: a,
          compressed: c
        })
      },
      dU: function (b, a, c, f, d, g) {
        function h(g) {
          b.wf(g, function (b) {
            var c = a.indexOf(b.qa); - 1 < c && delete a[c];
            e() || l.QI(b.qa, b.data, b.yb, function () {
              e() || (A++, d(A / B), A === B && (l.Gt = !0, f()))
            })
          }, !0, c)
        }

        function e() {
          l.Xc && !z && (z = !0, g(a), f());
          return z
        }
        var l = this;
        l.Xc = !1;
        f = f || function () {};
        d = d || function () {};
        g = g || function () {};
        var A = 0,
          B = a.length,
          z = !1;
        l.QI("NumParts", B + 1, !1, function () {
          for (var b = 0; b < B; b++) h(a[b])
        })
      },
      IM: function () {
        this.Xc = !0
      },
      get: function (b, a) {
        var c = this.db.transaction([this.name]).objectStore(this.name).get(b);
        c.onsuccess = function () {
          c.result ? a(!1, c.result.partData, c.result.compressed) : a("Part " + b + " not found in the offline database")
        };
        c.onerror = function () {
          a("Error getting " + b + " from offline database")
        }
      },
      wj: function () {
        return this.Gt
      }
    };
    e.prototype = {
      wf: function (b, c, f, d) {
        function g(b) {
          b = $.extend({}, b);
          l.Nk && d && (b.data = l.Nk.getItem(b.qa).data);
          c(b)
        }
        var h = this.cache.getItem(b);
        if (!d && null !== h) {
          var e = h.yb;
          h.yb && !f ? (f = a.o.V.Ji.inflate(h.data), e = !1) : f = h.data;
          c({
            qa: b,
            data: f,
            qf: !0,
            Xc: !1,
            error: null,
            yb: e
          });
          return c
        }
        if (this.Nk &&
          d && (e = this.Nk.getItem(b))) return c({
          qa: b,
          data: e.data,
          qf: !0,
          Xc: !1,
          error: null,
          yb: e.yb
        }), c;
        var l = this;
        this.bind(b, g);
        this.it[b] = !0;
        this.At[b] = !f;
        this.Pd.request([b], d);
        return g
      },
      Wu: function (b) {
        if (b.error) console.error("Error reading part " + b.qa + ": " + b.error), this.trigger(b.qa, {
          qa: b.qa,
          error: b.error
        }), this.unbind(b.qa);
        else {
          var c = this,
            f = function (f) {
              var d = b.qa.match(/\.([a-zA-Z]+)$/)[1].toLowerCase();
              "jpg" !== d && "png" !== d && (f = a.oj(f));
              b.WG || (c.cache.setItem(b.qa, f, b.yb), c.Nk && c.Nk.setItem(b.qa, b.data, b.yb));
              c.it[b.qa] && ((d = b.yb) && c.At[b.qa] && (f = a.o.V.Ji.inflate(f), d = !1), delete c.it[b.qa], delete c.At[b.qa], c.trigger(b.qa, {
                qa: b.qa,
                data: f,
                qf: !1,
                Xc: !1,
                error: null,
                yb: d
              }), c.unbind(b.qa), delete c._callbacks[b.qa])
            };
          this.Pd.decrypt && !b.WG ? this.Pd.oE ? f(this.Pd.decrypt(b.data, this.Pd.Jk, b.qa)) : this.Pd.decrypt(b.data, this.Pd.Jk, b.qa, f) : f(b.data)
        }
      },
      mz: function (b) {
        return this.Jz ? "Thumbs/" + (b + 1) + ".jpg" : "Thumbs/" + (b + 1) + ".png"
      },
      lz: function (b, a, c) {
        var f = this,
          d = !1,
          g = this.wf(this.mz(b), function (b) {
            d = b.qf;
            f.MH(a);
            c(b)
          });
        d || (this.nr[a] = {
          KM: g,
          Cb: b
        })
      },
      IF: function (b, c) {
        var f = this,
          d = this.J[b].dr[0];
        if (b in f.fq) c(f.fq[b].clone());
        else return f.wf(d, function (d) {
          if (d.error) return console.error("Failed to load part for page " + b + ": " + d.error);
          f.oO(d.data, function (d) {
            if (a.Yl) {
              if (f.Tt.length >= a.Yl) {
                var g = f.Tt.shift();
                delete f.fq[g]
              }
              f.Tt.push(b);
              f.fq[b] = d
            }
            c(d.clone())
          })
        }, !0)
      },
      Zy: function (c, f, d) {
        function g(b) {
          if (b.error) return console.error("Failed to load part for page " + c + ": " + b.error);
          delete z.ah[A];
          u.Yi && 0 !== u.Ep.length ||
            (u.Ep = l.GR(b.qa, b.data).map(function (b) {
              b.PageNumber = c + 1;
              return b
            }));
          e()
        }

        function e() {
          if (z.vQ()) {
            if (null === F.qb) throw Error("Functions have not been generated yet");
            z.Xc || y || (delete l.di[c], l.trigger(c, !1, F), d(!1, F), y = !0, l.unbind(c + ""), l._callbacks && delete l._callbacks[c + ""])
          }
        }
        var l = this;
        this.di[c] = this.di[c] || {
          eo: {}
        };
        var p = 0 < Object.keys(this.di[c].eo).length;
        this.di[c].eo[f] = null;
        if (p) return a.utils.warn("Duplicate request for page " + c), p = function (b, a) {
          var c = $.extend({}, a);
          c.qb = a.qb.clone();
          c.Ta =
            $.extend(!0, {}, c.Ta);
          d(b, c)
        }, this.di[c].eo[f] = p, this.bind(c, p);
        var u = l.J[c],
          w = u.dr[2],
          A = u.dr[1],
          B = u.dr[0],
          z;
        z = this.Tu ? new b(c, [B, A, w]) : new b(c, [B, w]);
        this.di[c].request = z;
        var x = z.Pe,
          y = !1,
          F = new h(c, l);
        x[w] = l.wf(w, function (b) {
          if (b.error) return console.error("Failed to load part for page " + c + ": " + b.error);
          b = l.JR(b.qa, b.data);
          delete z.ah[w];
          _(b).each(function (b) {
            z.ah[b.slice(1)] = !0
          });
          _(b).each(function (b) {
            b = b.slice(1);
            var f = -1 !== b.indexOf(".odttf") || -1 !== b.indexOf(".otf"),
              d = -1 !== b.indexOf(".png") || -1 !==
              b.indexOf(".jpg");
            a.By && f ? (delete z.ah[b], F.Ta[b] = l.Jh(b)) : f && !l.ze.vu(l.Jh(b).name) ? (z.pH.push(b), x[b] = l.wf(b, function (a) {
              if (a.error) return console.error("Failed to load part for page " + c + ": " + a.error);
              delete z.ah[b];
              F.Ta[b] = l.Jh(a.qa, a.data);
              e()
            })) : d && a.By ? (delete z.ah[b], setTimeout(function () {
              l.wf(b, function (b) {
                b = l.Jh(b.qa, b.data);
                var a = new Image;
                a.src = b.data;
                $(a).css({
                  position: "absolute",
                  "z-index": 8,
                  height: "100%",
                  width: "100%"
                }).prependTo("#pageContainer" + c)
              })
            }, 0)) : (delete z.ah[b], F.Ta[b] = l.Jh(b),
              e())
          });
          e()
        });
        this.Tu && (x[A] = l.wf(A, g));
        x[B] = this.IF(c, function (b) {
          F.qb = b;
          delete z.ah[B];
          e()
        })
      },
      oO: function (b, c) {
        if (a.Yl) {
          var f = new a.o.DJ(this.ja);
          f.Ey(b, function () {});
          c(f)
        } else c(new a.o.CJ(this.ja, b))
      },
      Lp: function (b, a) {
        var c = this.di[b];
        if (c) {
          this.Pd.Lx(c.request.pH);
          var f = c.eo[a];
          f && this.unbind(b + "", f);
          delete c.eo[a];
          if (0 === Object.keys(c.eo).length) {
            c.Xc = !0;
            var c = c.Pe,
              d;
            for (d in c) c.hasOwnProperty(d) && this.unbind(d, c[d]);
            delete this._callbacks[b + ""];
            delete this.di[b]
          }
        }
      },
      JM: function (b) {
        var a = this.nr[b];
        a && (this.Pd.Lx([this.mz(a.Cb)]), this.MH(b))
      },
      MH: function (b) {
        var a = this.nr[b];
        a && (this.unbind(this.mz(a.Cb), a.KM), delete this.nr[b])
      },
      Jh: function (b, c) {
        var f, d = b,
          g = b.match(/\.([a-zA-Z]+)$/)[1].toLowerCase();
        switch (g) {
          case "png":
          case "jpg":
            b = "i" + this.ja + "-" + b.match(/Images\/(\d+)/)[1];
            if (c) {
              f = l && this.Pd instanceof l ? this.Pd.path + c : a.o.BF(g, c);
              break
            }
            break;
          case "odttf":
            var h;
            c && (h = this.vN(b, c));
            b = a.Ze.Py(this.ja, parseInt(b.substr(34, 8), 16));
            c && (f = new a.Ze.FontFace(b, h, "opentype"), this.ze.Hz(b) || f.insert());
            g = "font";
            break;
          case "otf":
            b = b.substr(0, b.length - 4);
            b = a.Ze.Py(this.ja, parseInt(b.substr(6), 10));
            if (c) {
              if (l && this.Pd instanceof l) g = this.Pd.path;
              else throw Error("Use an external part retriever for documents with external fonts");
              f = new a.Ze.FontFace(b, null, "opentype", g + c);
              this.ze.Hz(b) || f.insert()
            }
            g = "font";
            break;
          default:
            f = c
        }
        return {
          name: b,
          type: g,
          data: f,
          qa: d
        }
      },
      JR: function (b, c) {
        var f = [],
          d = new a.Je(c);
        for (d.na(); d.advance();) {
          var g = d.K("Target");
          null !== g ? f.push(g) : a.utils.warn("Corrupt rels part: %s", b)
        }
        0 <
          f.length && _(f).last().match(/Thumbs/) && f.pop();
        return f
      },
      GR: function (b, c) {
        var f = [],
          d = new a.Je(c);
        for (d.na(); d.advance();) {
          for (var g = d.ua(), h = d.K("BBox"), h = h.split(","), e = 0; 4 > e; ++e) h[e] = parseFloat(h[e]);
          "Hyperlink" === g ? f.push(new a.Annotations.kd({
            actions: {
              U: [{
                name: "URI",
                uri: d.K("Target")
              }]
            },
            rect: h
          })) : "Link" === g && f.push(new a.Annotations.kd({
            actions: {
              U: [{
                name: "GoTo",
                dest: {
                  page: d.K("ID"),
                  fit: "XYZ",
                  top: d.K("Vpos"),
                  left: d.K("Hpos")
                }
              }]
            },
            rect: h
          }))
        }
        return f
      },
      vN: function (b, a) {
        b = b.split("/")[1].split(".")[0];
        for (var c = b.split("-"), f = [], d = 16, g = 0; g < c.length; ++g)
          for (var h = c[g], e = 0; e < h.length; e += 2) f[--d] = parseInt(h.slice(e, e + 2), 16);
        for (c = 0; 16 > c; ++c) d = f[c], f[c] = String.fromCharCode(a.charCodeAt(c) ^ d), f[c + 16] = String.fromCharCode(a.charCodeAt(c + 16) ^ d);
        return a = f.join("") + a.slice(32)
      }
    };
    _(e.prototype).extend(Backbone.Events);
    a.o.V.kK = e;
    a.o.oK = d;
    a.o.NJ = g;
    a.o.OJ = f
  })(window);
  (function (a) {
    function e(b) {
      this.index = 0;
      this.data = {
        functions: [],
        Pe: [],
        done: !1
      };
      this.fc = [];
      this.uy = new c(b);
      this.ja = b
    }

    function d(b, a) {
      this.data = a;
      this.fc = [];
      this.Lf = [];
      this.uy = new c(b);
      this.ja = b
    }

    function c(b) {
      this.ja = b;
      this.Zh = 0;
      this.Ta = [];
      this.$h = [0, 0]
    }
    c.prototype = {
      fr: function (b, c, d) {
        this.m_c = c;
        this.Bc = d;
        c = b.operators;
        b = b.data;
        var h = c.length;
        this.YA = a.asc(d);
        this.hU = 1 / this.YA;
        for (var e = 0; e < h; ++e) d = c[e], this[d].apply(this, b[e]);
        this.Eu = null
      },
      save: function () {
        this.m_c.save()
      },
      restore: function () {
        this.m_c.restore()
      },
      transform: function (b, c, a, d, e, k) {
        this.m_c.transform(b, c, a, d, e, k)
      },
      translate: function (b, c) {
        this.m_c.translate(b, c)
      },
      fT: function (b, c) {
        this.m_c.lineWidth = Math.max(b, this.hU / c)
      },
      dT: function (b) {
        this.m_c.lineCap = b
      },
      nF: function (b) {
        var c = b.type;
        if (c) switch (c) {
          case 1:
            b = this.createPattern(b);
            break;
          case 2:
            b = this.createLinearGradient(b);
            break;
          case 3:
            b = this.createRadialGradient(b);
            break;
          case 4:
            b = this.gN(b)
        }
        return b
      },
      HT: function (b) {
        this.m_c.strokeStyle = this.nF(b)
      },
      XS: function (b) {
        this.m_c.fillStyle = this.nF(b)
      },
      tS: function (b) {
        var c =
          this.xP(b);
        b = c.cR;
        for (var c = c.bR, a, d = b.length, e = 0; e < d; ++e) a = b[e], this[a].apply(this, c[e])
      },
      ZS: function (b) {
        this.m_c.globalAlpha = b
      },
      hE: function (b, c) {
        for (var a = c.length, d = 0; d < a; ++d) {
          var e = c[d],
            k = c[++d];
          b.addColorStop(e, k)
        }
      },
      jN: function (b) {
        var c = this.m_c,
          a = this.Bc,
          d = b.operators,
          e = this.YA * b.scale,
          k = b.w * e,
          m = b.h * e;
        2 > e * b.minwh && (e = 2 / b.minwh, k = b.w * e, m = b.h * e);
        var n = this.m_c.createCanvas();
        n.width = k;
        n.height = m;
        var k = n.getContext("2d"),
          m = b.x || b.y,
          r = {};
        m && (r.x = b.x, r.y = b.y);
        r.s = 1 / e;
        k.scale(e, e);
        m && k.translate(-b.x,
          -b.y);
        b.strokeAdjust && (this.m_c.lineWidth = e * b.strokeAdjust);
        this.fr(d, k, this.Bc);
        this.m_c = c;
        this.Bc = a;
        return {
          canvas: n,
          transform: r
        }
      },
      createPattern: function (b) {
        var c;
        this.Eu && b === this.Eu.style ? c = this.Eu : (c = this.jN(b), c.style = b, c.pattern = this.m_c.createPattern(c.canvas, b.tm), this.Eu = c);
        b = c.transform;
        b.x && this.m_c.translate(b.x, b.y);
        this.m_c.scale(b.s, b.s);
        return c.pattern
      },
      createLinearGradient: function (b) {
        var c = this.m_c.createLinearGradient(b.x0, b.y0, b.x1, b.y1);
        this.hE(c, b.stops);
        return c
      },
      createRadialGradient: function (b) {
        var c =
          this.m_c.createRadialGradient(b.x0, b.y0, 0, b.x1, b.y1, b.r);
        this.hE(c, b.stops);
        return c
      },
      gN: function (b) {
        return this.m_c.createPattern(a.ci[b.name], b.tm)
      },
      eM: function (b) {
        this.Zh += b
      },
      KT: function (b) {
        this.Zh = b
      },
      addColorStop: function (b, c) {
        this.xX.addColorStop(b, c)
      },
      beginPath: function () {
        this.m_c.beginPath()
      },
      closePath: function () {
        this.m_c.closePath()
      },
      fill: function (b) {
        b ? this.m_c.fill(b) : this.m_c.fill()
      },
      stroke: function () {
        this.m_c.stroke()
      },
      clip: function (b) {
        b ? this.m_c.clip(b) : this.m_c.clip()
      },
      moveTo: function (b,
        c) {
        this.m_c.moveTo(b, c)
      },
      lineTo: function (b, c) {
        this.m_c.lineTo(b, c)
      },
      quadraticCurveTo: function (b, c, a, d) {
        this.m_c.quadraticCurveTo(b, c, a, d)
      },
      bezierCurveTo: function (b, c, a, d, e, k) {
        this.m_c.bezierCurveTo(b, c, a, d, e, k)
      },
      font: function (b) {
        var c = b;
        1 !== window.utils.canvasFontMultiplier && (c = parseFloat(b), c /= window.utils.canvasFontMultiplier, c = b.replace(/\d+/, c));
        this.m_c.font = c
      },
      fillText: function (b, c, a) {
        this.m_c.fillText(b, this.Zh + c, a)
      },
      measureText: function (b) {
        this.Zh += this.m_c.measureText(b).width
      },
      drawImage: function (b) {
        this.m_c.drawImage(window.ci[b],
          0, 0)
      },
      MN: function (b, c) {
        for (var d = window.ci[b], h = Math.log(1 / (this.YA * c)) * a.o.Cx, e = 1, k = 1; k < h; ++k) {
          var m = this.m_c.createCanvas();
          m.width = .5 * d.width;
          m.height = .5 * d.height;
          m.getContext("2d").drawImage(d, 0, 0, m.width, m.height);
          d = m;
          e *= 2
        }
        this.m_c.scale(e, e);
        this.m_c.drawImage(d, 0, 0)
      },
      eT: function (b) {
        this.m_c.lineJoin = b
      },
      $S: function (b) {
        this.m_c.globalCompositeOperation = b
      },
      dM: function (b, c, a) {
        this.Ta.push({
          cR: c,
          bR: a,
          name: b
        })
      },
      xP: function (b) {
        var c = this.Ta.length - 1;
        do {
          var a = this.Ta[c];
          if (a.name === b) return a
        } while (0 <=
          --c)
      },
      iS: function () {
        this.Ta.pop()
      },
      kS: function (b, c, d, h) {
        var e = this.Bc.W({
            x: c.x1,
            y: c.y1
          }),
          k = e.x,
          e = e.y;
        c = this.Bc.W({
          x: c.x2,
          y: c.y2
        });
        var m = c.x,
          n = c.y;
        c = [];
        var r = this.$h[0],
          q = this.$h[1],
          v = r + this.m_c.canvas.width,
          p = q + this.m_c.canvas.height;
        k < m ? (k < r && (k = r), m > v && (m = v), c[0] = Math.floor(k), c[2] = Math.ceil(m - k)) : (m < r && (m = r), k > v && (k = v), c[2] = Math.ceil(k - m), c[0] = Math.floor(m));
        e < n ? (e < q && (e = q), n > p && (n = p), c[1] = Math.floor(e), c[3] = Math.ceil(n - e)) : (n < q && (n = q), e > p && (e = p), c[3] = Math.ceil(e - n), c[1] = Math.floor(n));
        0 < c[2] &&
          0 < c[3] && (k = this.m_c, e = this.m_c.createCanvas(), e.width = c[2], e.height = c[3], m = this.$h, this.$h = c, n = e.getContext("2d"), n.translate(-c[0], -c[1]), n.transform(this.Bc.m_a, this.Bc.m_b, this.Bc.m_c, this.Bc.m_d, this.Bc.m_h, this.Bc.m_v), n.transform.apply(n, b.mtx), this.fr(b, n, this.Bc), h && (b = this.m_c.createCanvas(), b.width = c[2], b.height = c[3], n = b.getContext("2d"), n.beginPath(), n.moveTo(0, 0), n.lineTo(c[2], 0), n.lineTo(c[2], c[3]), n.lineTo(0, c[3]), n.closePath(), n.translate(-c[0], -c[1]), n.transform(this.Bc.m_a, this.Bc.m_b,
            this.Bc.m_c, this.Bc.m_d, this.Bc.m_h, this.Bc.m_v), n.transform.apply(n, h.mtx), this.fr(h, n, this.Bc), n.globalCompositeOperation = "source-in", n.setTransform(1, 0, 0, 1, 0, 0), n.drawImage(e, 0, 0), e = b), this.$h = m, "source-over" === d || a.utils.specialBlendSupported ? (k.save(), k.globalCompositeOperation = d, k.setTransform(1, 0, 0, 1, c[0] - this.$h[0], c[1] - this.$h[1]), k.drawImage(e, 0, 0), k.restore()) : n.bO(k, d, {
            x: c[0] - this.$h[0],
            y: c[1] - this.$h[1]
          }), this.m_c = k)
      },
      kU: function (b) {
        this.m_c.tm(b)
      },
      miterLimit: function (b) {
        this.m_c.miterLimit =
          b
      },
      nN: function () {
        this.m_c.cgb()
      },
      oN: function () {
        this.m_c.cge()
      },
      setTransform: function (b, c, a, d, e, k) {
        this.m_c.setTransform(b, c, a, d, e, k)
      },
      scale: function (b, c) {
        this.m_c.scale(b, c)
      },
      fO: function (b, c, a) {
        this.m_c.xw(b + " ", this.Zh + c, a)
      },
      fillRect: function (b, c, a, d) {
        this.m_c.fillRect(b, c, a, d)
      },
      gO: function (b, c, a) {
        this.m_c.xcw(b + " ", this.Zh + c, a)
      },
      fillTextCustom: function (b, c, a) {
        this.m_c.xc(b, this.Zh + c, a)
      }
    };
    c.prototype[0] = c.prototype.save;
    c.prototype[1] = c.prototype.restore;
    c.prototype[2] = c.prototype.transform;
    c.prototype[3] =
      c.prototype.translate;
    c.prototype[4] = c.prototype.fT;
    c.prototype[5] = c.prototype.dT;
    c.prototype[6] = c.prototype.HT;
    c.prototype[7] = c.prototype.XS;
    c.prototype[8] = c.prototype.ZS;
    c.prototype[9] = c.prototype.dM;
    c.prototype[10] = c.prototype.iS;
    c.prototype[11] = c.prototype.eM;
    c.prototype[12] = c.prototype.tS;
    c.prototype[13] = c.prototype.beginPath;
    c.prototype[14] = c.prototype.closePath;
    c.prototype[15] = c.prototype.fill;
    c.prototype[16] = c.prototype.stroke;
    c.prototype[17] = c.prototype.clip;
    c.prototype[18] = c.prototype.moveTo;
    c.prototype[19] = c.prototype.lineTo;
    c.prototype[20] = c.prototype.quadraticCurveTo;
    c.prototype[21] = c.prototype.bezierCurveTo;
    c.prototype[22] = c.prototype.font;
    c.prototype[23] = c.prototype.fillText;
    c.prototype[24] = c.prototype.measureText;
    c.prototype[25] = c.prototype.KT;
    c.prototype[26] = c.prototype.miterLimit;
    c.prototype[27] = c.prototype.eT;
    c.prototype[28] = c.prototype.drawImage;
    c.prototype[29] = c.prototype.setTransform;
    c.prototype[30] = c.prototype.scale;
    c.prototype[31] = c.prototype.fO;
    c.prototype[32] = c.prototype.nN;
    c.prototype[33] = c.prototype.oN;
    c.prototype[34] = c.prototype.$S;
    c.prototype[35] = c.prototype.kU;
    c.prototype[36] = c.prototype.kS;
    c.prototype[37] = c.prototype.fillRect;
    c.prototype[39] = c.prototype.gO;
    c.prototype[38] = c.prototype.fillTextCustom;
    d.prototype = {
      clone: function () {
        return new d(this.ja, this.data)
      },
      run: function (b, c) {
        return this.Lf.length ? (this.wr(), -1 === this.fc.indexOf(b) && this.fc.push(b), this.m_c = b, this.Bc = c, this.uy.fr(this.Lf.shift(), b, c), !1) : this.Ay = !0
      },
      Yx: function (b) {
        return b
      }
    };
    d.prototype = $.extend(Object.create(a.o.NJ.prototype),
      d.prototype);
    e.prototype = {
      gE: function (b) {
        return new d(this.ja, b)
      },
      clone: function () {
        var b = new e(this.ja);
        b.data = this.data;
        b.index = 0;
        return b
      },
      run: function (b, c) {
        var a = this.data.functions[this.index];
        this.index++; - 1 === this.fc.indexOf(b) && this.fc.push(b);
        return a ? (this.uy.fr(a, b, c), !1) : !0
      }
    };
    e.prototype = $.extend(Object.create(a.o.OJ.prototype), e.prototype);
    a.o.LS = function (b) {
      !0 === b && (b = 1.4);
      a.o.Cx = b;
      c.prototype[28] = b ? c.prototype.MN : c.prototype.drawImage
    };
    a.o.CJ = d;
    a.o.DJ = e
  })(window);
  (function (a) {
    function e() {
      var c, b, a = [];
      a[arguments.length - 1] = null;
      var d = 0;
      0 < arguments.length && (b = arguments[d].endsWith("/") ? arguments[d].length - 1 : arguments[d].length, a[d] = arguments[d].substring(0, b));
      for (d = 1; d < arguments.length - 1; ++d) c = arguments[d].startsWith("/") ? 1 : 0, b = arguments[d].endsWith("/") ? arguments[d].length - 1 : arguments[d].length, a[d] = arguments[d].substring(c, b);
      1 < arguments.length && (c = arguments[d].startsWith("/") ? 1 : 0, a[d] = arguments[d].substring(c, arguments[d].length));
      return a.join("/")
    }
    var d =
      window.o;
    d.Tl = function () {
      this.init()
    };
    d.Tl.prototype = {
      init: function () {
        this.$M = !1;
        this.We = this.Gh = this.Ym = null;
        this.Pm = {};
        this.da = this.Vv = null
      },
      uU: function (c) {
        for (var b = 0; b < c.length; ++b) {
          var a = c[b],
            d;
          switch (a.at) {
            case "create":
              this.Pm[a.author] || (this.Pm[a.author] = a.aName);
              d = this.da.Mn(a.xfdf)[0];
              d["authorId "] = a.author;
              this.da.Zb(d);
              this.da.trigger("updateAnnotationPermission", [d]);
              break;
            case "modify":
              d = this.da.Mn(a.xfdf)[0];
              this.da.Zb(d);
              break;
            case "delete":
              this.da.Mn("<delete><id>" + a.aId + "</id></delete>")
          }
        }
      },
      MP: function (c, b, a) {
        this.Gh && this.Gh(c, b, a)
      },
      SR: function (c) {
        this.one("blackBoxAnnotationsEnabled", this.MP.bind(this, {
          imported: !1
        }, c, "add"))
      },
      qQ: function (c, b, f) {
        var d = this;
        if (c) {
          d.We = b;
          d.da = f.Wa();
          f.on("documentUnloaded", function () {
            d.iy()
          });
          d.MU(c);
          var h = new XMLHttpRequest;
          h.addEventListener("load", function () {
            if (200 === h.status && 0 < h.responseText.length) try {
              var b = JSON.parse(h.responseText);
              d.Ym = a.o.oB(e(d.We, "blackbox/"), "annot");
              d.Vv = b.id;
              d.Pm[b.id] = b.user_name;
              d.da.IA(b.id);
              d.Ym.UA(function (b) {
                b.t &&
                  b.t.startsWith("a_") && b.data && d.uU(b.data)
              }, function () {
                d.Ym.send({
                  t: "a_retrieve",
                  dId: c
                });
                d.trigger("blackBoxAnnotationsEnabled", [d.Pm[b.id], d.Vv])
              }, function () {
                d.iy()
              })
            } catch (f) {
              console.error(f.message)
            }
          });
          h.open("GET", e(this.We, "demo/SessionInfo.jsp"));
          h.withCredentials = !0;
          h.send();
          d.$M = !0;
          d.da.gI(function (b) {
            return d.Pm[b.Author] || b.Author
          })
        } else console.error("Document ID required for collaboration")
      },
      iy: function () {
        this.Gh && (this.da.off("annotationChanged", this.Gh), this.Gh = null);
        this.Ym && this.Ym.close();
        this.da && this.da.IA("Guest");
        this.init();
        this.trigger("blackBoxAnnotationsDisabled")
      },
      MU: function (c) {
        var b = this;
        this.Gh && this.da.off("annotationChanged", this.Gh);
        this.Gh = function (a, d, e) {
          if (!a.imported) {
            a = {
              t: "a_" + e,
              dId: c,
              annots: []
            };
            var l = b.da.Ut(),
              k, m;
            "delete" !== e && (k = (new DOMParser).parseFromString(l, "text/xml"), m = new XMLSerializer);
            for (l = 0; l < d.length; l++) {
              var n = d[l],
                r;
              if ("add" === e) {
                r = k.querySelector('[name="' + n.Id + '"]');
                r = m.serializeToString(r);
                var q = null;
                n.InReplyTo && (q = b.da.nj(n.InReplyTo).authorId ||
                  "default");
                a.annots.push({
                  at: "create",
                  aId: n.Id,
                  author: b.Vv,
                  aName: b.Pm[b.Vv],
                  parent: q,
                  xfdf: "<add>" + r + "</add>"
                })
              } else "modify" === e ? (r = k.querySelector('[name="' + n.Id + '"]'), r = m.serializeToString(r), a.annots.push({
                at: "modify",
                aId: n.Id,
                xfdf: "<modify>" + r + "</modify>"
              })) : "delete" === e && a.annots.push({
                at: "delete",
                aId: n.Id
              })
            }
            0 < a.annots.length && b.Ym.send(a)
          }
        }.bind(b);
        this.da.on("annotationChanged", this.Gh)
      }
    };
    $.extend(d.Tl.prototype, a.utils.eventHandler)
  })(window);
  (function (a) {
    function e(b) {
      return g[b] || "Unknown"
    }
    a.Annotations = a.Annotations || {};
    var d = a.Annotations,
      c;
    if (!(c = !Object.defineProperty)) {
      var b;
      try {
        Object.defineProperty({}, "x", {}), b = !0
      } catch (h) {
        b = !1
      }
      c = !b
    }
    c && (Object.defineProperty = function (b, c, a) {
      if (b !== Object(b)) throw new TypeError("Object.defineProperty called on non-object");
      Object.prototype.__defineGetter__ && "get" in a && Object.prototype.__defineGetter__.call(b, c, a.get);
      Object.prototype.__defineSetter__ && "set" in a && Object.prototype.__defineSetter__.call(b,
        c, a.set);
      "value" in a && (b[c] = a.value);
      return b
    });
    "function" !== typeof Object.defineProperties && (Object.defineProperties = function (b, c) {
      if (b !== Object(b)) throw new TypeError("Object.defineProperties called on non-object");
      for (var a in c) Object.prototype.hasOwnProperty.call(c, a) && Object.defineProperty(b, a, c[a]);
      return b
    });
    var f, g = {
      arrow: "Arrow",
      callout: "Callout",
      caret: "Caret",
      ellipse: "Ellipse",
      freeHand: "Free Hand",
      freetext: "FreeText",
      highlight: "Highlight",
      line: "Line",
      polygon: "Polygon",
      polyline: "Polyline",
      rectangle: "Rectangle",
      redact: "Redaction",
      signature: "Signature",
      squiggly: "Squiggly",
      stamp: "Stamp",
      stickyNote: "Comment",
      strikeout: "Strikeout",
      underline: "Underline",
      custom: "Custom"
    };
    a.MB = function (b) {
      this.Jt = [b]
    };
    a.MB.prototype = {
      writeStartElement: function (b) {
        b = document.createElementNS("", b);
        this.Jt.push(b)
      },
      writeAttributeString: function (b, c) {
        this.top().setAttribute(b, c)
      },
      writeEndElement: function () {
        var b = this.Jt.pop();
        this.top().appendChild(b)
      },
      top: function () {
        return this.Jt[this.Jt.length - 1]
      }
    };
    d.sa = {
      Xj: 1,
      extraSelectorsEnabled: !1,
      wc: function (b) {
        return e(b)
      },
      PS: function (b) {
        e = b
      },
      zE: function (b, c) {
        for (var a = [], f = Math.min(b + 1, c - 1), d = Math.max(0, b - 1); d <= f; ++d) a.push(d);
        return a
      },
      qE: function (b) {
        return null === b ? "" : 0 < b.length ? b.replace(/&[^;]*;/g, function (b) {
            switch (b.charAt(1)) {
              case "q":
                return '"';
              case "a":
                return "&";
              case "l":
                return "<";
              case "g":
                return ">";
              case "#":
                return "x" === b.charAt(2) ? String.fromCharCode(parseInt(b.substring(3, b.length - 1), 16)) : String.fromCharCode(parseInt(b.substring(2, b.length - 1), 10))
            }
            return b
          }) :
          ""
      },
      xN: function (b, c, f) {
        var g = f.u.getDocument(),
          e = c.getAttribute("page"),
          e = parseInt(e, 10),
          r = [],
          q = [];
        if (c.hasAttribute("selidxs")) var v = c.getAttribute("selidxs"),
          r = d.ba.yN(v);
        else a.utils.warn("annot_extra_selectors", "deserializeExtraSelectors: No index-based selector in XFDF.");
        if (c.hasAttribute("surrtxts_0_0"))
          for (v = 0;;) {
            if (c.hasAttribute("surrtxts_" + v + "_0") && c.hasAttribute("surrtxts_" + v + "_1")) {
              var p = c.getAttribute("surrtxts_" + v + "_0");
              if (null === p) break;
              var u = c.getAttribute("surrtxts_" + v + "_1");
              if (null ===
                u) break;
              var w = [];
              w.push(d.sa.qE(p));
              w.push(d.sa.qE(u));
              q.push(w)
            } else break;
            v++
          } else a.utils.warn("annot_extra_selectors", "deserializeExtraSelectors: No surrounding-text-based selector in XFDF.");
        if (0 >= r.length && 0 >= q.length) a.utils.warn("annot_extra_selectors", "deserializeExtraSelectors: No extra selector data deserialized."), b.Rf = !1;
        else {
          b.Rf = !0;
          b.Eg = null;
          b.nf = null;
          b.dD = !1;
          b.jp = !1;
          b.Js = !0;
          var A = function () {
              var c = f.u.getDocument();
              if (c !== g) b.Rf = !1;
              else {
                var c = new XODText.Gi(c),
                  a;
                0 < r.length && (a = c.tP(e,
                  r, b.Tk()), a.status && (b.Eg = a.value));
                0 < q.length && (a = c.sP(e, q, b.Tk()), a.status && (b.nf = a.value, b.PageNumber = a.ul + 1));
                b.trigger("quadsCalculatedFromExtraSelectors");
                b.dD = !0
              }
            },
            B = function () {
              var c = f.u.getDocument();
              if (c !== g) b.Rf = !1;
              else {
                var a = c.Ab() - 1,
                  d = [];
                0 === e && 1 <= a ? (d.push(e + 1), d.push(e), b.Js = !1, c.Hq(d).then(A)) : 0 < e && a >= e + 1 && (d.push(e + 1), d.push(e - 1), d.push(e), b.Js = !1, c.Hq(d).then(A))
              }
            };
          0 === q.length ? (b.Js = !1, g.Hq(e).then(A)) : (b.aD || (f.u.off("layoutChanged", B), f.u.on("layoutChanged", B), f.u.one("documentUnloaded",
            function () {
              f.u.off("layoutChanged", B)
            }), b.aD = !0), g.hc().then(function () {
            f.u.off("layoutChanged", B);
            b.aD = !1;
            var c = f.u.getDocument();
            if (c === g && b.Js) {
              var a = d.sa.zE(e, c.Ab());
              c.Hq(a).then(A)
            } else f.u.off("layoutChanged", B), b.Rf = !1
          }))
        }
      },
      WS: function (b) {
        this.extraSelectorsEnabled = b
      },
      uF: function (b) {
        return !b || b instanceof Date ? b : new Date(b)
      },
      QP: function () {
        function b() {
          return (65536 * (1 + Math.random()) | 0).toString(16).substring(1)
        }
        return b() + b() + "-" + b() + "-" + b() + "-" + b() + "-" + b() + b() + b()
      },
      measureText: function (b,
        c, a, f) {
        var d = document.getElementById("text-width-tester");
        "number" === typeof c && (c += "px");
        b = b.split("\n").join("<br>&nbsp;").split(" ").join("&nbsp;");
        if (d) d.style.fontFamily = a, d.style.fontSize = c, d.style.fontWeight = f, d.innerHTML = b;
        else {
          var g = "display:none;";
          _.isString(a) && (g += "font-family:" + a + ";");
          _.isUndefined(c) || (g += "font-size:" + c + ";");
          _.isUndefined(f) || (g += "font-weight:" + f + ";");
          d = document.createElement("span");
          d.id = "text-width-tester";
          d.cssText = g;
          d.innerHTML = b;
          document.getElementsByTagName("body")[0].appendChild(d)
        }
        b =
          $(d);
        b.show();
        c = {
          width: b.width(),
          height: b.height()
        };
        b.hide();
        return c
      },
      DP: function (b, c) {
        var a = (f || (f = document.createElement("canvas"))).getContext("2d");
        a.font = c;
        return a.measureText(b).width
      },
      aF: function (b, c, a, f) {
        if (c) {
          c.style.fontSize = a + "px";
          b = 0;
          for (var d; b <= a;) d = Math.floor((b + a) / 2), c.style.overflow = "hidden", c.offsetHeight, c.style.fontSize = d + "px", f && (c.style.lineHeight = f(d)), c.style.overflow = "auto", c.scrollHeight > Math.ceil($(c).outerHeight()) ? a = d - 1 : b = d + 1;
          c.scrollHeight > Math.ceil($(c).outerHeight()) &&
            (c.style.fontSize = parseFloat(c.style.fontSize) - 1 + "px");
          return parseFloat(c.style.fontSize)
        }
        return a / 2
      },
      VN: function (b, c) {
        if (a.utils.disableFormCharacterProcessing) $(b).on("change", function () {
          c({
            change: this.value,
            wG: !0
          })
        });
        else $(b).on("input", function (b) {
          b.change = this.value;
          c(b)
        })
      },
      ky: function (b, c, f, d) {
        b.save();
        b.translate(c.x, c.y);
        b.rotate(a.Td.Math.rO(c, f));
        b.moveTo(0, 0);
        f = 5 * d + 2;
        c = Math.cos(.2 * Math.PI) * f;
        f *= Math.sin(.2 * Math.PI);
        b.moveTo(c, -f);
        b.lineTo(0, 0);
        b.lineTo(c, f);
        b.stroke();
        b.restore()
      },
      ht: function (b,
        c) {
        var a = b.W({
            x: 0,
            y: 0
          }),
          f = b.W({
            x: Number(c),
            y: 0
          }),
          d = a.x - f.x,
          a = a.y - f.y;
        return Math.sqrt(d * d + a * a)
      },
      GE: function (b, c, f) {
        c.beginPath();
        var g = a.Td.Math.YM(f);
        a.Td.Math.sH(f) && (g[g.length] = {
          x: g[0].x,
          y: g[0].y
        });
        if (!(2 >= g.length)) {
          var e = b.Intensity;
          e || (e = 2);
          var r = 1 / 8092,
            q = a.Td.Math.qP(g);
          b = 1 !== Math.round(q);
          f = 0;
          for (var v = 6.5 * e, p = g[0], u = v, w = v, A = {
              x: g[1].x - g[0].x,
              y: g[1].y - g[0].y
            }, B = {
              x: g[0].x - g[g.length - 2].x,
              y: g[0].y - g[g.length - 2].y
            }, e = !0, z = !1, x = 0, y, F, L, D = 0; D < g.length - 1; ++D) {
            var H = g[D],
              J = g[D + 1],
              J = {
                x: J.x - H.x,
                y: J.y -
                  H.y
              },
              E = Math.sqrt(J.x * J.x + J.y * J.y);
            if (!(E <= r)) {
              var N = {
                  x: J.x / E,
                  y: J.y / E
                },
                G = Math.max(Math.floor(E / v), 1),
                E = E / G;
              f = a.Td.Math.sO(N.x, N.y);
              if (0 === D && 3 >= g.length) {
                var M = Math.sqrt(A.x * A.x + A.y * A.y);
                if (M < v) {
                  c.arc(g[0].x, g[0].y, M, 0, 2 * Math.PI);
                  return
                }
                if (M < 2 * E) {
                  y = M / 2;
                  c.arc(g[0].x, g[0].y, y, 0, 2 * Math.PI);
                  c.moveTo(g[1].x + y, g[1].y);
                  c.arc(g[1].x, g[1].y, y, 0, 2 * Math.PI);
                  c.moveTo(g[0].x + y, g[0].y);
                  return
                }
                c.arc(g[0].x, g[0].y, E / 2, 0, 2 * Math.PI);
                c.moveTo(g[1].x + E / 2, g[1].y);
                c.arc(g[1].x, g[1].y, E / 2, 0, 2 * Math.PI);
                c.moveTo(g[0].x + E /
                  2, g[0].y)
              }
              0 === D && (x = E, y = {
                x: N.x,
                y: N.y
              });
              H.x -= N.x * E * .5;
              H.y -= N.y * E * .5;
              B = a.Td.Math.lN(B, J);
              M = 0;
              z || (++M, w = E, e = 0 > B * q, H.x += N.x * E, H.y += N.y * E, p = H, c.moveTo(p.x, p.y), F = p.x, L = p.y, z = !0);
              for (u = .25 * (u + E); M < G; ++M) H.x += N.x * E, H.y += N.y * E, L = d.sa.arcTo(F, L, c, u, u, f, 0 === M && 0 > B * q, b, H.x, H.y), F = L.bU, L = L.cU;
              B = J;
              u = E
            }
          }
          z || (c.moveTo(p.x, p.y), F = p.x, L = p.y);
          y && (r = .25 * (w + u), d.sa.arcTo(F, L, c, r, r, f, e, b, g[g.length - 1].x + .5 * x * y.x, g[g.length - 1].y + .5 * x * y.y))
        }
      },
      arcTo: function (b, c, f, d, g, e, q, v, p, u) {
        var w = [],
          A = [];
        a.Td.Math.tM(b, c, w, A, d, g, e, q,
          v, p, u);
        for (g = d = 0; g < A.length; ++g) "c" === A[g] ? (f.bezierCurveTo(w[d], w[d + 1], w[d + 2], w[d + 3], w[d + 4], w[d + 5]), b = w[d + 4], c = w[d + 5], d += 6) : (f.lineTo(w[d], w[d + 1]), b = w[d], c = w[d + 1], d += 2);
        return {
          bU: b,
          cU: c
        }
      }
    }
  })(window);
  (function (a) {
    function e() {
      this.fonts = []
    }

    function d(b, c, a, f) {
      this.url = _.isUndefined(f) ? ["data:", this.kR[a], ";base64,", btoa(c)].join("") : "'" + f + "'";
      this.url = ["url(", this.url, ")"].join("");
      this.yS = ["@font-face { font-family:'", b, "';src:", this.url, "}"].join("");
      this.name = b
    }
    document.head || (document.head = document.getElementsByTagName("head")[0]);
    a.Bg = {};
    var c = /Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent),
      b = c && 14 <= c[1],
      f = atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");
    d.prototype = {
      VA: null,
      styleSheet: null,
      kR: {
        woff: "application/x-font-woff",
        opentype: "font/opentype",
        sfnt: "application/font-sfnt"
      },
      insert: function () {
        if (!a.Bg[this.name]) {
          if (!this.styleSheet) {
            var b = document.createElement("style");
            document.head.appendChild(b);
            d.prototype.styleSheet = b.sheet;
            d.prototype.VA = b
          }
          b = this.styleSheet.cssRules.length;
          this.styleSheet.insertRule(this.yS, b);
          a.Bg[this.name] = this.styleSheet.cssRules[b]
        }
      },
      remove: function () {
        if (!a.utils.ie) {
          var b = a.Bg[this.name];
          if (!b) throw Error("CSS @font-face rule is not in use");
          var c, f = this.styleSheet.cssRules.length,
            d = this.styleSheet.cssRules;
          for (c = 0; c < f; c++)
            if (d[c] === b) {
              this.styleSheet.deleteRule(c);
              delete a.Bg[this.name];
              return
            } throw Error("CSS @font-face stylesheet has been altered externally");
        }
      }
    };
    if ("undefined" !== typeof document && document.fonts) try {
      var g = new d("lt" + Date.now() + "0", f, "opentype");
      "error" === (new window.FontFace(g.name, g.url, {})).status ? a.cq = !1 : a.cq = !0
    } catch (l) {
      a.cq = !1
    } else a.cq = !1;
    e.prototype = {
      iU: 1,
      $L: function (b) {
        this.fonts.push(b)
      },
      TP: function () {
        return 0 !==
          this.fonts.length
      },
      LG: function (c) {
        function d(b, c) {
          return b.charCodeAt(c) << 24 | b.charCodeAt(c + 1) << 16 | b.charCodeAt(c + 2) << 8 | b.charCodeAt(c + 3) & 255
        }

        function g(b, c) {
          p++;
          30 < p ? (console.warn("Load test font never loaded."), c()) : (v.font = "30px " + b, v.fillText(".", 0, 20), 0 < v.getImageData(0, 0, 1, 1).data[3] ? c() : setTimeout(_.bind(g, null, b, c)))
        }
        var e = this,
          h;
        if (_.isEmpty(a.Bg) || b) {
          for (h = 0; h < e.fonts.length; h++) setTimeout(c, 0, e.fonts[h].name);
          e.fonts = []
        } else {
          var q;
          h = document.createElement("canvas");
          h.width = 1;
          h.height = 1;
          var v = h.getContext("2d"),
            p = 0,
            u = "lt" + Date.now() + this.iU++,
            w = f,
            w = w.substr(0, 976) + u + w.substr(976 + u.length),
            A = d(w, 16);
          h = 0;
          for (q = u.length - 3; h < q; h += 4) A = A - 1482184792 + d(u, h) | 0;
          h < u.length && (A = A - 1482184792 + d(u + "XXX", h) | 0);
          var w = w.substr(0, 16) + (String.fromCharCode(A >> 24 & 255) + String.fromCharCode(A >> 16 & 255) + String.fromCharCode(A >> 8 & 255) + String.fromCharCode(A & 255)) + w.substr(20),
            B = new a.Ze.FontFace(u, w, "opentype");
          B.insert();
          w = [];
          h = 0;
          for (q = this.fonts.length; h < q; h++) w.push(this.fonts[h].name);
          w.push(u);
          var z = document.createElement("div");
          z.setAttribute("style", "visibility: hidden;width: 10px; height: 10px;position: absolute; top: 0px; left: 0px;");
          h = 0;
          for (q = w.length; h < q; ++h) A = document.createElement("span"), A.textContent = "Hi", A.style.fontFamily = w[h], z.appendChild(A);
          document.body.appendChild(z);
          g(u, function () {
            document.body.removeChild(z);
            B.remove();
            for (var b = 0; b < e.fonts.length; b++)
              if (c(e.fonts[b].name), !e.fonts[b].url.startsWith("url(data")) {
                var a = e.fonts[b].url;
                if (a.startsWith("url('")) {
                  if (8 > a.length) {
                    console.warn("Invalid font ObjectURL.");
                    return
                  }
                  a = a.substring(5, a.length - 2)
                }
                URL.revokeObjectURL(a);
                e.fonts[b].url = null
              } e.fonts = []
          })
        }
      },
      VQ: function (b, c, a) {
        var f = document.createElement("div");
        f.setAttribute("style", "visibility: hidden;width: 10px; height: 10px;position: absolute; top: 0px; left: 0px;");
        f.innerHTML = "" + ('<span style="font-family:' + b + '">" + testString +"</span>');
        document.body.appendChild(f);
        $.get(c, function () {
          setTimeout(function () {
            a();
            document.body.removeChild(f)
          }, 300)
        })
      }
    };
    if (a.cq) {
      var h = d,
        d = function () {
          h.apply(this, arguments);
          this.Cy = new window.FontFace(this.name, this.url, {})
        };
      d.prototype = h.prototype;
      $.extend(d.prototype, {
        insert: function () {
          document.fonts.add(this.Cy);
          a.Bg[this.name] = this
        },
        remove: function () {
          document.fonts["delete"](this.Cy)
        }
      });
      $.extend(e.prototype, {
        LG: function (b) {
          this.fonts.forEach(function (c) {
            c.Cy.load().then(function () {
              b(c.name);
              if (!c.url.startsWith("url(data")) {
                var a = c.url;
                if (a.startsWith("url('")) {
                  if (8 > a.length) {
                    console.warn("Invalid font ObjectURL.");
                    return
                  }
                  a = a.substring(5, a.length - 2)
                }
                URL.revokeObjectURL(a);
                c.url = null
              }
            })["catch"](function (a) {
              b(c.name);
              console.warn("loadFonts: font failed to load: " + c.name);
              a && console.warn("loadFonts: exception is: " + a.message)
            })
          })
        }
      })
    }
    a.Ze = {
      FontFace: d,
      MJ: e,
      Py: function (b, c) {
        return "f" + b + "-" + c
      }
    }
  })(window);
  (function (a) {
    function e(c, b, a) {
      this.page = c;
      this.sb = b;
      this.ze = a;
      this.VE = b.La.Pd ? b.La.Pd.path : void 0;
      this.ol = this.paused = !1
    }
    var d = {
      Mh: 0,
      Qe: 1,
      Vp: 2,
      Zf: 3
    };
    a.asc = function (c) {
      var b = .707106781 * c.m_a + .707106781 * c.m_b;
      c = .707106781 * c.m_c + .707106781 * c.m_d;
      return Math.sqrt(b * b + c * c)
    };
    e.prototype = {
      pause: function () {
        this.paused = !0;
        this.Qx()
      },
      Qx: function () {
        this.Gu = !1;
        a.clearImmediate(this.MG)
      },
      IE: function (c, b, f, d, e) {
        function l() {
          A = !0;
          n && n.Rq().then(function () {
            if (k.abort) {
              if (w) return m && (m = !1, d(p)), n = k.resume = null,
                k.Qx(), k.abort && k.abort(), f(p);
              k.abort && ((r = 5 < ++v) && q && m && e && (m = !1, d(p)), w = n.run(c, b, 50), !w && n.gQ && d(p), A = !1, k.Gu = !1, k.paused || k.Fv())
            }
          })
        }
        var k = this,
          m = void 0 !== d;
        f = f || function () {};
        var n = this.sb.qb,
          r = !1,
          q = !1,
          v = 0,
          p = c.canvas,
          u = setTimeout(function () {
            q = !0;
            r && m && e && (m = !1, d(p))
          }, 3E3);
        k.abort = function () {
          A = !1;
          k.Qx();
          k.MG = null;
          k.resume = null;
          n && (n.cancel(), n = null);
          k.sb.qb = null;
          clearTimeout(u);
          k.Fv = null;
          _(k.sb.Ta).each(function (b) {
            switch (b.type) {
              case "png":
              case "jpg":
                b && b.data && !b.data.startsWith("url(data") &&
                  (URL.revokeObjectURL(b.data), b.data = null);
                break;
              case "font":
                if (b && b.data && b.data.url && !b.data.url.startsWith("url(data")) {
                  var c = b.data.url;
                  if (c.startsWith("url('")) {
                    if (8 > c.length) {
                      console.warn("Invalid font ObjectURL.");
                      break
                    }
                    c = c.substring(5, c.length - 2)
                  }
                  URL.revokeObjectURL(c);
                  b.data.url = null
                }
            }
          });
          k.abort = null
        };
        var w = !1;
        k.resume = function () {
          !1 !== A || k.Gu || k.Fv();
          k.paused = !1
        };
        k.Fv = function () {
          k.Gu = !0;
          k.MG = a.setImmediate(l, 0)
        };
        var A = !1;
        k.Gu = !1;
        k.paused || k.Fv()
      },
      aN: function (c, b, f, g, e, l, k, m, n) {
        b = b || d.Mh;
        e &&
          0 < e && (e = Math.round(e));
        c = a.o.za.so(this.page, c || 1, b, l, e, k, n);
        this.IE(c.ctx, c.t, f, g, m)
      },
      PF: function (c) {
        var b = [];
        if (c) {
          for (var a = 0; a < c.length; ++a) b[a] = this.sb.La.Jh(c[a]);
          return b
        }
        _(this.sb.Ta).each(function (c) {
          b.push(c)
        });
        return b
      },
      Qz: function (c, b, f) {
        function d(b) {
          var c = k.ze.vu(b.name);
          e(b);
          switch (b.type) {
            case "png":
            case "jpg":
              if (a.ci[b.name]) {
                b.data.startsWith("data") || URL.revokeObjectURL(b.data);
                if (c) {
                  l(b.name);
                  break
                }
                a.ci[b.name].Np.push(function () {
                  l(b.name)
                });
                break
              }
              var f = new Image;
              f.setAttribute("crossOrigin",
                "use-credentials");
              f.onload = function () {
                f.src.startsWith("data") || URL.revokeObjectURL(f.src);
                for (var b = 0; b < this.Np.length; ++b) this.Np[b]();
                f.Np = [];
                f = f.onload = f.onerror = null
              };
              f.onerror = function () {
                a.utils.warn("img error " + b.name);
                f.src.endsWith(a.o.Zk() + "1px.png") || (f.src = a.o.Zk() + "1px.png")
              };
              f.hres = b.hres;
              f.vres = b.vres;
              a.ci[b.name] = f;
              f.Np = [];
              f.Np[0] = function () {
                l(b.name)
              };
              f.Cb = k.sb.Df;
              f.src = b.data;
              break;
            case "font":
              _.isUndefined(k.VE) ? n.$L(b.data) : n.VQ(b.name, k.VE + b.qa, function () {
                l(b.name)
              });
              break;
            default:
              a.utils.warn("unknown resource type: " + b.type), l(b.name)
          }
        }

        function e(b) {
          f && k.ze.UL(b.name)
        }

        function l(a) {
          k.ze.loaded(a);
          if (k.ol && 1 > --m) return k.ol = !1, c(b[0])
        }
        if (this.ol) throw Error("Multiple calls to loadResource");
        var k = this;
        b = this.PF(b);
        var m = b.length;
        this.ol = !0;
        var n = new a.Ze.MJ,
          r = !0;
        _(b).each(function (b) {
          r = !1;
          k.ze.vu(b.name) ? (e(b), l(b.name)) : b.data ? d(b) : k.sb.La.wf(b.qa, function (c) {
            k.ze.vu(b.name) ? (e(b), l(b.name)) : d(k.sb.La.Jh(c.qa, c.data))
          })
        });
        n.TP() && n.LG(_(l).bind(this));
        r && (c(), this.ol = !1)
      },
      RD: function () {
        this.ol && (this.ol = !1)
      },
      $b: function (c) {
        var b = this;
        b.RD();
        c = this.PF(c);
        _(c).each(function (c) {
          if ("font" !== c.type && b.ze.release(c.name)) switch (c.type) {
            case "png":
            case "jpg":
              delete a.ci[c.name];
              break;
            case "font":
              c.data && c.data.remove()
          }
        })
      }
    };
    a.af = a.af || {};
    a.af.EK = e;
    a.af.Rr = function () {
      var c = {};
      return {
        UL: function (b) {
          b in c ? c[b].c++ : c[b] = {
            c: 1,
            l: !1
          }
        },
        loaded: function (b) {
          b in c && (c[b].l = !0)
        },
        Hz: function (b) {
          return b in c ? !0 : !1
        },
        vu: function (b) {
          return b in c ? c[b].l : !1
        },
        release: function (b) {
          if (!(b in
              c)) return !1;
          --c[b].c;
          return c[b].c ? !1 : (delete c[b], !0)
        }
      }
    };
    a.o.Sa = d;
    a.jd = function (c, b, f, g, e, l) {
      g = g || {
        x: 0,
        y: 0
      };
      f.width ? (f.x1 = 0, f.y1 = 0, f.x2 = f.width, f.y2 = f.height) : (f.width = f.x2 - f.x1, f.height = f.y2 - f.y1);
      var k = new XODText.Ca;
      _.isUndefined(e) && (e = !0);
      e && (e = l || a.utils.getCanvasMultiplier(), c *= e, g.x *= e, g.y *= e);
      k.Ha(c, 0, 0, c, g.x, g.y);
      c = new XODText.Ca;
      b === d.Mh ? c.Ha(1, 0, 0, 1, -f.x1, -f.y1) : b === d.Qe ? c.Ha(1, 0, 0, 1, f.y2, -f.x1) : b === d.Vp ? c.Ha(1, 0, 0, 1, f.x2, f.y2) : b === d.Zf && c.Ha(1, 0, 0, 1, -f.y1, f.x2);
      k.concat(c);
      k.concat(XODText.Ca.Al(Math.PI /
        2 * (4 - b)));
      return k
    }
  })(window);
  (function (a) {
    a.Actions || (a.Actions = {});
    var e = a.Actions;
    e.Action = function (c) {
      _.isObject(c) && _.isString(c.name) && (this.tc = c.name)
    };
    e.Action.prototype = {
      elementName: null,
      onTriggered: function () {},
      serialize: function () {
        return document.createElementNS("", this.elementName)
      },
      deserialize: function () {}
    };
    Object.defineProperties(e.Action.prototype, {
      name: {
        get: function () {
          return this.elementName
        }
      }
    });
    e.$e = function (c) {
      e.Action.call(this, c);
      this.Qf = new e.$e.Qo;
      _.isObject(c) && this.Qf.set(c.dest)
    };
    e.$e.prototype = {
      elementName: "GoTo",
      onTriggered: function (c, b, a) {
        e.Action.prototype.onTriggered.call(this, c, b, a);
        this.Qf.MD(a)
      },
      serialize: function (c) {
        var b = e.Action.prototype.serialize.call(this, c);
        $(b).append(this.Qf.serialize(c));
        return b
      },
      deserialize: function (c, b, a) {
        e.Action.prototype.deserialize(c, b);
        this.Qf.deserialize(c, b, a)
      }
    };
    e.$e.prototype = $.extend(Object.create(e.Action.prototype), e.$e.prototype);
    Object.defineProperties(e.$e.prototype, {
      dest: {
        get: function () {
          return this.Qf
        }
      }
    });
    e.$l = function (c) {
      e.Action.call(this, c);
      this.Qf = new e.$e.Qo;
      _.isObject(c) && (this.Qf.set(c.dest), this.ns = c.filename, this.px = c.newWindow)
    };
    e.$l.prototype = {
      elementName: "GoToR",
      onTriggered: function (c, b, a) {
        e.Action.prototype.onTriggered.call(this, c, b, a);
        this.Qf.MD(a)
      },
      serialize: function (c) {
        var b = e.Action.prototype.serialize.call(this, c);
        this.px || b.setAttribute("NewWindow", "false");
        var a = document.createElementNS("", "File");
        this.ns && a.setAttribute("OriginalName", this.ns);
        var d = $(b);
        d.append(a);
        d.append(this.Qf.serialize(c));
        return b
      },
      deserialize: function (c, b, a) {
        e.Action.prototype.deserialize(c,
          b);
        this.Qf.deserialize(c, b, a, !0);
        c = c.getElementsByTagName("GoToR")[0];
        this.px = "false" !== c.getAttribute("NewWindow");
        c = c.getElementsByTagName("File");
        1 === c.length && (this.ns = c[0].getAttribute("OriginalName"))
      }
    };
    e.$l.prototype = $.extend(Object.create(e.Action.prototype), e.$l.prototype);
    Object.defineProperties(e.$l.prototype, {
      dest: {
        get: function () {
          return this.Qf
        }
      },
      filename: {
        get: function () {
          return this.ns
        }
      },
      newWindow: {
        get: function () {
          return this.px
        }
      }
    });
    e.$e.Qo = function (c) {
      this.Gm = 1;
      this.kp = "Fit";
      this.tc = this.Xi =
        this.Dg = this.Hg = this.Me = this.Le = null;
      this.set(c)
    };
    e.$e.Qo.prototype = {
      set: function (c) {
        if (_.isObject(c)) {
          _.isUndefined(c.page) || (this.Gm = Number(c.page));
          var b = c.fit;
          _.isString(b) && (this.kp = b);
          switch (b) {
            case "XYZ":
              _.isUndefined(c.left) || (this.Le = Number(c.left));
              _.isUndefined(c.top) || (this.Me = Number(c.top));
              _.isUndefined(c.zoom) || (this.Xi = Number(c.zoom));
              break;
            case "FitBH":
            case "FitH":
              _.isUndefined(c.top) || (this.Me = Number(c.top));
              break;
            case "FitBV":
            case "FitV":
              _.isUndefined(c.left) || (this.Le = Number(c.left));
              break;
            case "FitR":
              _.isUndefined(c.left) || (this.Le = Number(c.left));
              _.isUndefined(c.top) || (this.Me = Number(c.top));
              _.isUndefined(c.right) || (this.Hg = Number(c.right));
              _.isUndefined(c.bottom) || (this.Dg = Number(c.bottom));
              var b = _.min([this.Le, this.Hg]),
                a = _.min([this.Me, this.Dg]),
                d = _.max([this.Le, this.Hg]),
                e = _.max([this.Me, this.Dg]);
              this.Me = a;
              this.Le = b;
              this.Dg = e;
              this.Hg = d
          }
          c = c.name;
          _.isString(c) && (this.tc = c, this.Gm = null)
        }
      },
      serialize: function (c) {
        var b = document.createElementNS("", "Dest"),
          a = document.createElementNS("",
            this.kp || "Named"),
          d = this.Me || 0,
          e = this.Le || 0,
          l = this.Dg || 0,
          k = this.Hg || 0;
        c = c.inverse();
        e = c.W({
          x: e,
          y: d
        });
        l = c.W({
          x: k,
          y: l
        });
        d = _.isNull(this.Me) ? null : e.y;
        e = _.isNull(this.Le) ? null : e.x;
        k = _.isNull(this.Hg) ? null : l.x;
        l = _.isNull(this.Dg) ? null : l.y;
        _.isNull(this.Gm) || a.setAttribute("Page", this.Gm);
        _.isNull(this.Xi) || a.setAttribute("Zoom", this.Xi);
        d && a.setAttribute("Top", d);
        e && a.setAttribute("Left", e);
        k && a.setAttribute("Right", k);
        l && a.setAttribute("Bottom", l);
        switch (this.kp) {
          case "XYZ":
            _.isNull(e) && a.setAttribute("Left",
              "");
            _.isNull(d) && a.setAttribute("Top", "");
            _.isNull(this.Xi) && a.setAttribute("Zoom", "");
            break;
          case "FitBH":
          case "FitH":
            _.isNull(d) && a.setAttribute("Top", "");
            break;
          case "FitBV":
          case "FitV":
            _.isNull(e) && a.setAttribute("Left", "");
            break;
          case "FitR":
            _.isNull(e) && a.setAttribute("Left", ""), _.isNull(d) && a.setAttribute("Top", ""), _.isNull(k) && a.setAttribute("Right", ""), _.isNull(l) && a.setAttribute("Bottom", "")
        }
        this.tc && a.setAttribute("Name", this.tc);
        $(b).append(a);
        return b
      },
      deserialize: function (c, b, a, d) {
        var e =
          Annotations.ba;
        b = e.getAttribute(c, "PageNum");
        var l, k, m, n, r, q, v;
        k = e.getAttribute(c, "Hpos");
        l = e.getAttribute(c, "Vpos");
        c = c.getElementsByTagName("Dest");
        if (!b || 0 < c.length)
          if (c = c[0], c = e.Oy(c)) b = e.getAttribute(c, "Page"), q = e.au(c), l = e.getAttribute(c, "Top"), k = e.getAttribute(c, "Left"), m = e.getAttribute(c, "Right"), n = e.getAttribute(c, "Bottom"), r = e.getAttribute(c, "Zoom"), "Named" === e.au(c) && (v = e.getAttribute(c, "Name"));
        v || d ? d && (l = _.isNull(l) ? void 0 : l, k = _.isNull(k) ? void 0 : k, m = _.isNull(m) ? void 0 : m, n = _.isNull(n) ?
          void 0 : n) : (d = a.u.Oc(b - 1), a = d.W({
          x: k || 0,
          y: l || 0
        }), d = d.W({
          x: m || 0,
          y: n || 0
        }), l = _.isNull(l) ? void 0 : a.y, k = _.isNull(k) ? void 0 : a.x, m = _.isNull(m) ? void 0 : d.x, n = _.isNull(n) ? void 0 : d.y);
        this.set({
          page: _.isNull(b) ? void 0 : b,
          fit: _.isNull(q) ? void 0 : q,
          top: l,
          left: k,
          right: m,
          bottom: n,
          zoom: _.isNull(r) ? void 0 : r,
          name: v
        })
      },
      MD: function (c) {
        var b = this.Me || 0,
          a = this.Le || 0,
          d = this.Gm || 1;
        switch (this.kp) {
          case "XYZ":
            this.Xi && c.mB(this.Xi);
            c.bn(d, a, b);
            break;
          case "Fit":
          case "FitB":
          case "FitV":
          case "FitBV":
            c.Be(d);
            c.JA(c.zg.uB);
            break;
          case "FitH":
          case "FitBH":
            c.Be(d);
            c.JA(c.zg.vw);
            c.bn(d, 0, b);
            break;
          case "FitR":
            var e = this.Hg && this.Le ? Math.abs(this.Hg - this.Le) : null,
              l = this.Dg && this.Me ? Math.abs(this.Dg - this.Me) : null,
              e = e ? c.Mb().innerWidth() / e : Infinity,
              l = l ? c.Mb().innerHeight() / l : Infinity,
              l = Math.min(e, l);
            Infinity !== l && c.mB(l);
            c.bn(d, a, b);
            break;
          default:
            c.Be(d)
        }
      }
    };
    Object.defineProperties(e.$e.Qo.prototype, {
      page: {
        get: function () {
          return this.Gm
        },
        set: function (c) {
          this.set({
            page: c
          })
        }
      },
      fit: {
        get: function () {
          return this.kp
        }
      },
      top: {
        get: function () {
          return _.isNull(this.Me) ?
            void 0 : this.Me
        }
      },
      left: {
        get: function () {
          return _.isNull(this.Le) ? void 0 : this.Le
        }
      },
      bottom: {
        get: function () {
          return _.isNull(this.Dg) ? void 0 : this.Dg
        }
      },
      right: {
        get: function () {
          return _.isNull(this.Hg) ? void 0 : this.Hg
        }
      },
      zoom: {
        get: function () {
          return _.isNull(this.Xi) ? void 0 : this.Xi
        }
      },
      name: {
        get: function () {
          return this.tc
        }
      }
    });
    e.Hi = function (c) {
      e.Action.call(this, c);
      this.yp = "";
      _.isObject(c) && _.isString(c.uri) && (this.yp = c.uri)
    };
    e.Hi.prototype = {
      elementName: "URI",
      onTriggered: function (c, b, a) {
        e.Action.prototype.onTriggered.call(this,
          c, b, a);
        c = this.yp;
        0 !== c.indexOf("http://") && 0 !== c.indexOf("https://") && 0 !== c.indexOf("ftp://") && 0 !== c.indexOf("mailto:") && 0 !== c.indexOf("tel:") && -1 === c.indexOf("://") && (c = -1 !== c.indexOf("@") ? "mailto:" + c : "http://" + c);
        window.open(c)
      },
      deserialize: function (c, b) {
        e.Action.prototype.deserialize.call(this, c, b);
        var a = Annotations.ba,
          d = a.getAttribute(c, "Target");
        _.isNull(d) && (d = a.Oy(c), d = a.getAttribute(d, "Name"));
        this.yp = d
      },
      serialize: function (c) {
        c = e.Action.prototype.serialize.call(this, c);
        c.setAttribute("Name",
          this.yp);
        return c
      }
    };
    e.Hi.prototype = $.extend(Object.create(e.Action.prototype), e.Hi.prototype);
    Object.defineProperties(e.Hi.prototype, {
      uri: {
        get: function () {
          return this.yp
        }
      }
    });
    e.em = function (c) {
      e.Action.call(this, c);
      this.sm = "";
      _.isObject(c) && _.isString(c.action) && (this.sm = c.action)
    };
    e.em.prototype = {
      elementName: "Named",
      onTriggered: function (c, b, a) {
        e.Action.prototype.onTriggered.call(this, c, b, a);
        switch (this.sm) {
          case "NextPage":
            a.Be(c.Ac() + 1);
            break;
          case "PrevPage":
            a.Be(c.Ac() - 1);
            break;
          case "FirstPage":
            a.Be(1);
            break;
          case "LastPage":
            a.Be(a.Ab());
            break;
          default:
            console.warn("Invalid named action name: " + this.sm)
        }
      },
      deserialize: function (c, b) {
        e.Action.prototype.deserialize.call(this, c, b);
        var a = Annotations.ba,
          d = a.getAttribute(c, "N");
        _.isNull(d) && 0 < c.getElementsByTagName("Named").length && (d = a.getAttribute(c.getElementsByTagName("Named")[0], "Name"));
        this.sm = d
      },
      serialize: function (c) {
        c = e.Action.prototype.serialize.call(this, c);
        c.setAttribute("Name", this.sm);
        return c
      }
    };
    e.em.prototype = $.extend(Object.create(e.Action.prototype),
      e.em.prototype);
    Object.defineProperties(e.em.prototype, {
      action: {
        get: function () {
          return this.sm
        }
      }
    });
    e.bm = function (c) {
      e.Action.call(this, c);
      this.Uw = this.Bs = null;
      this.set(c)
    };
    e.bm.prototype = {
      elementName: "JavaScript",
      set: function (c) {
        _.isObject(c) && _.isString(c.javascript) && (this.Bs = c.javascript)
      },
      onTriggered: function (c, b, a) {
        e.Action.prototype.onTriggered.call(this, c, b, a);
        c = a.getDocument().qp;
        this.Uw || (this.Uw = c.Xm(this.Bs, a));
        c.ho(this.Uw, b, a)
      },
      deserialize: function (c, b) {
        e.Action.prototype.deserialize.call(this,
          c, b);
        var a = Annotations.ba.getAttribute(c, "JavaScript");
        a || (a = c.getElementsByTagName("JavaScript")[0].textContent);
        this.set({
          javascript: a
        })
      },
      serialize: function (c) {
        c = e.Action.prototype.serialize.call(this, c);
        $(c).text(this.Bs);
        return c
      }
    };
    e.bm.prototype = $.extend(!0, new e.Action, e.bm.prototype);
    Object.defineProperties(e.bm.prototype, {
      javascript: {
        get: function () {
          return this.Bs || ""
        }
      }
    });
    e.ck = function (c) {
      e.Action.call(this, c);
      this.Oi = !1;
      this.mb = null;
      _.isObject(c) && (_.isArray(c.fields) && (this.mb = c.fields.slice()),
        _.isUndefined(c.exclude) || (this.Oi = !!c.exclude))
    };
    e.ck.prototype = {
      elementName: "ResetForm",
      onTriggered: function (c, b, a) {
        e.Action.prototype.onTriggered.call(this, c, b, a);
        var d = this,
          h = a.Wa().Xd();
        c = h.vo;
        h.vo = !1;
        this.Oi || _.isNull(this.mb) ? h.ur({
          Sq: function (b, c, a) {
            d.mb && -1 !== d.mb.indexOf(b) || a.TH()
          }
        }) : this.mb.forEach(function (b) {
          var c = h.zb(b);
          c ? c.TH() : console.warn("Missing field during reset:", b)
        });
        h.vo = c;
        h.Ip(null, 0)
      },
      deserialize: function (c, b) {
        e.Action.prototype.deserialize.call(this, c, b);
        var a = Annotations.ba,
          d = [],
          h = !0;
        _.isNull(a.getAttribute(c, "ResetFields")) ? _.isNull(a.getAttribute(c, "ResetExcludedFields")) ? 0 < c.getElementsByTagName("ResetForm").length && (c = c.getElementsByTagName("ResetForm")[0], (d = a.getAttribute(c, "Fields")) && (d = d.split(",")), a = parseInt(a.getAttribute(c, "Flags"), 10), _.isNull(d) || _.isUndefined(d) ? (d = [], h = !0) : h = 1 === a ? !0 : !1) : (d = a.getAttribute(c, "ResetExcludedFields").split(","), h = !0) : (d = a.getAttribute(c, "ResetFields").split(","), h = !1);
        this.mb = d;
        this.Oi = !!h
      },
      serialize: function (c) {
        c = e.Action.prototype.serialize.call(this,
          c);
        this.mb && c.setAttribute("Fields", this.mb.join(","));
        c.setAttribute("Flags", this.Oi ? 1 : 0);
        return c
      }
    };
    e.ck.prototype = $.extend(Object.create(e.Action.prototype), e.ck.prototype);
    Object.defineProperties(e.ck.prototype, {
      fields: {
        get: function () {
          return this.mb
        }
      },
      exclude: {
        get: function () {
          return this.Oi
        }
      }
    });
    e.hk = function (c) {
      e.Action.call(this, c);
      this.Us = "";
      this.mb = [];
      this._format = "xfdf";
      this.vs = !1;
      this._method = "POST";
      this.Oi = !1;
      this.bc = new a.Annotations.Ii({
        mask: "IncludeNoValueFields IncludeAppendSaves IncludeAnnotations CanonicalFormat WxclNonUserAnnots ExclFKey EmbedForm".split(" ")
      });
      this.set(c)
    };
    e.hk.prototype = {
      elementName: "SubmitForm",
      set: function (c) {
        _.isObject(c) && (c.url && (this.Us = String(c.url)), _.isArray(c.fields) && (this.mb = c.fields.slice()), c.format && (this._format = c.format.toLowerCase()), c.includeEmpty && (this.vs = !!c.includeEmpty), c.flags && this.bc.set(c.flags), c.method && (this._method = String(c.method)), c.exclude && (this.Oi = !!c.exclude))
      },
      onTriggered: function (c, b, a) {
        e.Action.prototype.onTriggered.call(this, c, b, a);
        var d = this,
          h = [],
          l = a.Wa(),
          k = l.Xd();
        0 < this.mb.length ? this.mb.forEach(function (b) {
            h.push(k.zb(b))
          }) :
          k.nn(function (b) {
            _.isNull(b.value) && !d.vs || h.push(b)
          });
        c = "";
        "xfdf" === this._format ? c = l.Dk.OK(h) : ("fdf" === this._format && console.warn("FDF Export is not supported. Defaulting to export as HTML Forms"), c = l.Dk.PK(h));
        $.ajax({
          type: "POST",
          url: this.Us,
          data: c,
          success: function (b) {
            if (l.RI) l.RI(b);
            else {
              var c = window.open();
              _.isNull(c) || _.isUndefined(c) ? console.warn("Form popup blocked") : c.document.write(b)
            }
          },
          error: function () {
            console.warn("Failed to submit form data to server.")
          }
        })
      },
      deserialize: function (c, b) {
        e.Action.prototype.deserialize.call(this,
          c, b);
        var a = Annotations.ba,
          d = c.getElementsByTagName("SubmitForm"),
          h = "SubmitURL",
          l = "SubmitFields",
          k = "SubmitFlag";
        0 < d.length && (c = d[0], h = "URL", l = "Fields", k = "Flags");
        d = a.getAttribute(c, h);
        h = null;
        _.isNull(a.getAttribute(c, l)) || (h = a.getAttribute(c, l).split(","));
        l = 0;
        _.isNull(a.getAttribute(c, k)) || (l = parseInt(a.getAttribute(c, k), 10));
        a = "fdf";
        l & 4 && (a = "html");
        l & 32 && (a = "xfdf");
        this.set({
          url: d,
          fields: h || void 0,
          format: a,
          flags: 0 !== (l & 2) ? ["IncludeNoValueFields"] : []
        })
      },
      serialize: function (c) {
        c = e.Action.prototype.serialize.call(this,
          c);
        c.setAttribute("Fields", this.mb.join(","));
        c.setAttribute("Flags", ("xfdf" === this._format ? 32 : 0) | ("html" === this._format ? 4 : 0) | (this.vs ? 2 : 0));
        c.setAttribute("URL", this.Us);
        return c
      }
    };
    e.hk.prototype = $.extend(Object.create(e.Action.prototype), e.hk.prototype);
    Object.defineProperties(e.hk.prototype, {
      url: {
        get: function () {
          return this.Us
        }
      },
      fields: {
        get: function () {
          return this.mb
        }
      },
      format: {
        get: function () {
          return this._format
        }
      },
      includeEmpty: {
        get: function () {
          return this.vs
        }
      },
      flags: {
        get: function () {
          return this.bc
        },
        set: function (c) {
          this.bc.set(c)
        }
      },
      method: {
        get: function () {
          return this._method
        }
      },
      exclude: {
        get: function () {
          return this.Oi
        }
      }
    });
    e.am = function (c) {
      e.Action.call(this, c);
      this.mb = [];
      this._hide = !0;
      this.set(c)
    };
    e.am.prototype = {
      elementName: "Hide",
      set: function (c) {
        _.isObject(c) && (_.isArray(c.fields) && (this.mb = c.fields.slice()), _.isUndefined(c.hide) || (this._hide = !!c.hide))
      },
      onTriggered: function (c, b, a) {
        e.Action.prototype.onTriggered.call(this, c, b, a);
        var d = a.Wa().Xd(),
          h = this;
        this.mb.forEach(function (b) {
          d.zb(b).If(!h.hide)
        })
      },
      deserialize: function (c, b) {
        e.Action.prototype.deserialize.call(this, c, b);
        var a = Annotations.ba,
          d = !0,
          h;
        _.isNull(a.getAttribute(c, "HideField")) ? 0 < c.getElementsByTagName("Hide").length ? (c = c.getElementsByTagName("Hide")[0], h = a.getAttribute(c, "Fields").split(","), d = "false" !== a.getAttribute(c, "Hide")) : (h = [a.getAttribute(c, "ShowField")], d = !1) : h = [a.getAttribute(c, "HideField")];
        this._hide = d;
        this.mb = h
      },
      serialize: function (c) {
        c = e.Action.prototype.serialize.call(this, c);
        c.setAttribute("Fields", this.PW.join(","));
        c.setAttribute("Hide", this.hide ? "true" : "false");
        return c
      }
    };
    e.am.prototype = $.extend(Object.create(e.Action.prototype), e.am.prototype);
    Object.defineProperties(e.am.prototype, {
      fields: {
        get: function () {
          return this.mb
        }
      },
      hide: {
        get: function () {
          return this._hide
        }
      }
    });
    e.tB = function () {
      this.eD = {
        GoTo: e.$e,
        GoToR: e.$l,
        URI: e.Hi,
        Named: e.em,
        JavaScript: e.bm,
        ResetForm: e.ck,
        SubmitForm: e.hk,
        Hide: e.am
      }
    };
    e.tB.prototype = {
      Cz: function (c) {
        if (_.isObject(c)) {
          var b = this.eD[c.name];
          return b ? new b(c) : null
        }
      },
      rQ: function (c, b, a) {
        var d =
          Annotations.ba.qO(c);
        return (d = this.eD[d]) ? (d = new d, d.deserialize(c, b, a), d) : null
      }
    };
    var d = new e.tB;
    e.UW = function () {
      return d
    };
    e.nh = function (c) {
      this.Mi = {};
      this.Zw = null;
      _.isObject(c) && _.isObject(c.actions) && this.Ws(c.actions)
    };
    e.nh.prototype = {
      Ws: function (c, b) {
        b && (this.Mi = {});
        if (_.isObject(c))
          for (var a in c)
            if (c.hasOwnProperty(a))
              for (var d = c[a].length, e = 0; e < d; ++e) this.Ek(a, c[a][e])
      },
      Ek: function (c, b) {
        var a = this.Mi[c] || [];
        if (b instanceof e.Action) - 1 === a.indexOf(b) && a.push(b);
        else if (_.isObject(b)) {
          var g =
            d.Cz(b);
          g && a.push(g)
        }
        this.Mi[c] = a
      },
      lj: function () {
        return this.Mi
      },
      De: function (c, b) {
        var a = this.Mi[c];
        if (a)
          for (var d = a.length, e = 0; e < d; ++e) a[e].onTriggered(this, b, this.Zw)
      },
      mg: function (c) {
        this.Zw = c
      },
      Sg: function () {
        return this.Zw
      },
      AS: function (c, b, a) {
        function d(c, a) {
          a.forEach(function (a) {
            var f = document.createElementNS("", "Action");
            f.setAttribute("Trigger", c);
            var d = $(f);
            if (a = a.serialize(b)) d.append(a), l = !0;
            $(e).append(f)
          })
        }
        var e;
        e = a ? a : document.createElementNS("", "OnActivation");
        var l = !1,
          k;
        for (k in this.Mi) this.Mi.hasOwnProperty(k) &&
          d(k, this.Mi[k]);
        l && !a && $(c).append(e)
      },
      tD: function (c, b, a) {
        var g = Annotations.ba;
        c = g.pO(c);
        for (var e = c.length, l = 0; l < e; ++l) {
          var k = c[l],
            m = g.getAttribute(k, "Trigger") || "U";
          (k = d.rQ(k, b, a)) && this.Ek(m, k)
        }
      }
    }
  })(window);
  (function (a) {
    function e(b, c) {
      return b - c
    }

    function d(b) {
      b = new Blob([b]);
      b.name = "AP.xod";
      var c = new h.V.wB(b),
        a = new h.Ke;
      return new Promise(function (b, f) {
        a.Bf(c, function (c) {
          c ? f(c) : b(a)
        })
      })
    }

    function c(b, c) {
      a.Actions.nh.call(this);
      this.width = b;
      this.height = c;
      this.text = null;
      this.dr = [];
      this.links = [];
      this.eb = null
    }

    function b(b, c, f, d, g, e) {
      var h = {
        getZoom: function () {
          return 1
        },
        getPageRotation: function () {
          return a.o.Sa.Mh
        },
        finishedLoading: function () {
          return !0
        },
        acquireResources: function () {
          return !0
        },
        resourcesLoaded: function () {
          return !0
        },
        getPageTransform: function () {},
        drawProgressive: function () {},
        drawComplete: function () {},
        onError: function () {}
      };
      _.isObject(b) ? (h = $.extend(h, b), h.zoom && (h.getZoom = function () {
        return h.zoom
      }), h.pageRotation && (h.getPageRotation = function () {
        return h.pageRotation
      })) : h = $.extend(h, {
        pageIndex: b,
        getZoom: function () {
          return c
        },
        getPageRotation: function () {
          return f
        },
        drawProgressive: g,
        drawComplete: d,
        canvasNum: e
      });
      return h
    }

    function f() {}

    function g(b) {
      b in this.Uh ? (clearImmediate(this.Uh[b]), delete this.Uh[b]) : this.Ba.nt(b)
    }
    var h = window.o,
      l = a.o.V.Ji,
      k = a.o.V.rw;
    a.ci = a.ci || {};
    a.o.Xo = {
      hK: 0,
      jK: 1,
      AK: 2,
      FK: 10
    };
    a.o.ek = {
      XJ: 1,
      BK: 2,
      SJ: 4,
      iK: 8,
      bK: 16,
      FJ: 32
    };
    c.prototype = $.extend({
      YS: function (b) {
        this.height = b.height;
        this.width = b.width;
        this.eb = b.matrix;
        this.rotation = b.rotation;
        this.id = b.id;
        this.Ra = b.pageNum
      }
    }, Object.create(a.Actions.nh.prototype));
    var m = null,
      n = null;
    a.o.yT = function (b) {
      m = b
    };
    a.o.tI = function (b) {
      n = b
    };
    a.o.MF = function () {
      return m || n
    };
    var r = 6;
    a.o.PJ = function () {
      return r
    };
    a.o.Fw = function (b) {
      r = b;
      a.Ul = 524288 * b * b;
      a.kw = 524288 * b * b;
      a.Yl = 3 * b;
      a.HJ = 50 + 30 * b;
      a.o.za && a.o.za.hI(b);
      switch (b) {
        case 0:
          a.Yl = 0;
          a.Ul = 0;
          a.kw = 0;
          break;
        case 1:
          a.Yl = 0, a.Ul = 0
      }
    };
    a.o.GB = function (b) {
      a.Ju = 1 + 2 * (b - 1);
      a.Ku = b - 1;
      0 > a.Ju && (a.Ju = 0);
      0 > a.Ku && (a.Ku = 0)
    };
    a.o.Fw(6);
    a.o.GB(5);
    h.Xe = function (b, c, a, f, d, g, e) {
      this.children = b;
      this.name = c;
      this.Df = a;
      this.parent = f;
      this.Do = d || 0;
      this.Kn = g || 0;
      this.url = e
    };
    h.Xe.prototype = {
      qF: function () {
        return this.children
      },
      getName: function () {
        return this.name
      },
      Ac: function () {
        return this.Df
      },
      IP: function () {
        return this.url
      },
      getParent: function () {
        return this.parent
      },
      JP: function () {
        return this.Do
      },
      QO: function () {
        return this.Kn
      },
      isValid: function () {
        return !!this.url || _.isNumber(this.Df)
      }
    };
    h.pw = function (b, c) {
      this.eR = b;
      this.fR = c;
      this.lR = 2;
      this.Up = {};
      this.en = [];
      this.Ik = 0;
      this.rA = !1
    };
    h.pw.prototype = {
      OD: function (b, c) {
        var a = this;
        a.Up[b] = c;
        var f = a.en.indexOf(b);
        0 <= f && a.en.splice(f, 1);
        a.en.push(b);
        a.sA();
        c.then(function (b) {
          b = b.J.length;
          a.Ik += b;
          c.numPages = b;
          a.sA()
        })["catch"](function (b) {
          console.warn(b)
        })
      },
      IH: function () {
        var b = this,
          c = b.en.shift(),
          a = b.Up[c];
        delete b.Up[c];
        (c =
          a.numPages) ? b.Ik -= c: (b.rA = !0, a = a.then(function (c) {
          b.Ik -= c.J.length;
          b.rA = !1;
          b.sA()
        }));
        a.then(function (b) {
          b.$b()
        });
        return !!c
      },
      sA: function () {
        if (!this.rA) {
          for (; this.en.length > this.eR;)
            if (!this.IH()) return;
          for (; this.Ik > this.fR && !(this.en.length <= this.lR) && this.IH(););
        }
      },
      xO: function (b) {
        return this.Up[b]
      },
      $b: function () {
        this.Up.forEach(function (b) {
          b.$b()
        })
      }
    };
    h.Document = function (b, c) {
      a.Actions.nh.call(this);
      this.qp = a.Annotations.O.ub.hN();
      _.isUndefined(c) || "xod" === c ? this.v = new h.Ke(b) : "pdf" === c ? this.v = new h.ph :
        "office" === c ? this.v = new h.Pr(b) : "blackbox" === c && (this.v = new h.Ar(b));
      var f = this;
      this.v.VS(function (b) {
        f.trigger(b.type, [b.data])
      });
      this.SK = 20;
      this.Vn = [];
      this.Rv = {}
    };
    h.Document.prototype = {
      bj: function (b) {
        return this.v.bj.apply(this.v, arguments)
      },
      wR: function (b) {
        this.qp.JU(b)
      },
      Fh: function (b) {
        return this.v.Fh.apply(this.v, arguments)
      },
      Ao: function (b) {
        return this.v.Ao.apply(this.v, arguments)
      },
      Tm: function () {
        return this.v.Tm.apply(this.v, arguments)
      },
      Sk: function () {
        return this.v.Sk.apply(this.v, arguments)
      },
      xn: function (b) {
        this.v.xn.apply(this.v,
          arguments)
      },
      yn: function () {
        return this.v.yn.apply(this.v, arguments)
      },
      Ab: function () {
        return this.v.Ab.apply(this.v, arguments)
      },
      zc: function (b) {
        var c = {};
        c.width = this.v.J[b].width;
        c.height = this.v.J[b].height;
        return c
      },
      eu: function (b, c, a) {
        return this.v.eu.apply(this.v, arguments)
      },
      jz: function (b, c, a, f) {
        return this.v.jz.apply(this.v, arguments)
      },
      ou: function (b, c, a) {
        return this.v.ou.apply(this.v, arguments)
      },
      pz: function (b, c, a) {
        return this.v.pz.apply(this.v, arguments)
      },
      getMetadata: function () {
        return {
          title: this.v.ce.title,
          creator: this.v.ce.creator,
          subject: this.v.ce.subject,
          keywords: this.v.ce.keywords,
          created: this.v.ce.created,
          modified: this.v.ce.modified,
          description: this.v.ce.description,
          producer: this.v.ce.producer
        }
      },
      vj: function () {
        return this.v.vj.apply(this.v, arguments)
      },
      bl: function (b) {
        return this.v.bl.apply(this.v, arguments)
      },
      wj: function () {
        return this.v.wj()
      },
      Bf: function (b, c, a) {
        var f = this;
        return this.v.Bf.call(this.v, b, function (b) {
          for (var a = f.Lb(), d = a.length, g = f.Sg(), e = 0; e < d; ++e) a[e].mg(g);
          c(b);
          return f
        }, a)
      },
      $g: function (b,
        c, a, f, d, g) {
        return this.v.$g.apply(this.v, arguments)
      },
      XQ: function (b, c) {
        var a = this;
        this.Kd(b, function (f) {
          c(f.Qa);
          a.Rv[b] || (a.v.J[b].text = null)
        })
      },
      Nh: function (b) {
        return this.v.Nh.apply(this.v, arguments)
      },
      Kq: function (b) {
        return this.v.Kq.apply(this.v, arguments)
      },
      zj: function (b, c) {
        return this.v.zj.apply(this.v, arguments)
      },
      fv: function (b) {
        return this.v.fv.apply(this.v, arguments)
      },
      yv: function (b) {
        return this.v.yv.apply(this.v, arguments)
      },
      zn: function () {
        return this.v.zn.apply(this.v, arguments)
      },
      po: function (b) {
        return this.v.po.apply(this.v,
          arguments)
      },
      yo: function (b, c) {
        return this.v.yo.apply(this.v, arguments)
      },
      $b: function () {
        this.qp.Yc();
        this.Om in this.v && this.Om.$b();
        return this.v.$b.apply(this.v, arguments)
      },
      Rn: function (b, c) {
        return this.v.Rn.apply(this.v, arguments)
      },
      Gq: function (b, c) {
        return this.v.Gq.apply(this.v, arguments)
      },
      il: function () {
        return this.v.il.apply(this.v, arguments)
      },
      cj: function (b) {
        return this.v.cj.apply(this.v, arguments)
      },
      JH: function () {
        var b = this.Vn.shift();
        this.v.J[b].text = null;
        delete this.Rv[b]
      },
      eS: function () {
        for (var b =
            this.Vn.length - 1; 0 <= b; --b) this.JH()
      },
      Kd: function (b, c) {
        this.Rv[b] ? this.Vn.splice(this.Vn.indexOf(b), 1) : (this.Vn.length === this.SK && this.JH(), this.Rv[b] = !0);
        this.Vn.push(b);
        return this.v.Kd.apply(this.v, arguments)
      },
      Hq: function (b) {
        function c(b, a) {
          return new Promise(function (c) {
            b.Kd(a, function () {
              c()
            })
          })
        }
        var a = this;
        b = b.map(function (b) {
          return c(a, b)
        });
        return Promise.all(b)
      },
      getFileData: function (b) {
        return this.v.getFileData.apply(this.v, arguments)
      },
      Cn: function () {
        return this.v.Cn ? this.v.Cn.apply(this.v) : null
      },
      Mv: function () {
        this.v.Mv && this.v.Mv.apply(this.v);
        return null
      },
      hq: function (b) {
        return this.v.hq ? this.v.hq.apply(this.v, arguments) : null
      },
      Nn: function (b, c, a) {
        return this.v.Nn.apply(this.v, arguments)
      },
      Lq: function (b, c) {
        return this.v.Lq.apply(this.v, arguments)
      },
      ao: function (b) {
        return this.v.ao.apply(this.v, arguments)
      },
      ln: function () {
        return this.v.ln.apply(this.v, arguments)
      },
      fo: function (b, c) {
        return this.v.fo.apply(this.v, arguments)
      },
      mn: function (b, c) {
        return this.v.mn.apply(this.v, arguments)
      },
      an: function (b, c,
        a, f, d) {
        return this.v.an.apply(this.v, arguments)
      },
      vn: function () {
        return this.v.vn.apply(this.v, arguments)
      },
      Ev: function (b) {
        return this.v.Ev.apply(this.v, arguments)
      },
      Gv: function (b) {
        return this.v.Gv.apply(this.v, arguments)
      },
      zl: function () {
        return this.v.zl.apply(this, arguments)
      },
      get numPages() {
        return this.v.J.length
      },
      od: function (b) {
        return this.v.J[b].width
      },
      nd: function (b) {
        return this.v.J[b].height
      },
      Oc: function (b) {
        return b >= this.Ab() ? (console.warn("Attempting to get page matrix for page " + (b + 1) + " that doesn't exist."),
          null) : this.v.J[b].eb
      },
      nq: function (b) {
        return this.v.nq.apply(this.v, arguments)
      },
      An: function () {
        return this.v.An.apply(this.v, arguments)
      },
      oq: function (b) {
        return this.v.J[b].rotation
      },
      $y: function (b) {
        return this.v.J[b].text
      },
      sT: function (b, c) {
        this.v.J[b].text = c
      },
      eP: function (b) {
        return this.v.J[b].Ep
      },
      KF: function (b) {
        return this.v.J[b].links
      },
      Lb: function () {
        var b = this;
        this.v.J.forEach(function (c) {
          c.mg(b.Sg())
        });
        return this.v.J
      },
      hc: function () {
        return this.v.hc
      },
      vq: function (b, c, a) {
        return this.v.vq.apply(this.v,
          arguments)
      },
      Dl: function (b) {
        this.v.Dl.apply(this.v, arguments)
      },
      tj: function () {
        return this.v.tj
      },
      Hl: function (b) {
        this.v.Hl.apply(this.v, arguments)
      },
      Mj: function () {
        return this.v.Mj.apply(this.v, arguments)
      },
      Kt: function (b) {
        return this.v.Kt.apply(this.v, arguments)
      },
      Xt: function () {
        return this.v.Xt.apply(this.v, arguments)
      },
      Lt: function (b, c) {
        return this.v.Lt.apply(this.v, arguments)
      },
      Qk: function (b, c) {
        return 0 === b.length ? [] : this.v.Qk.apply(this.v, arguments)
      },
      wo: function () {
        return this.v.wo()
      }
    };
    $.extend(h.Document.prototype,
      Object.create(a.Actions.nh.prototype), a.utils.eventHandler);
    h.zr = function () {
      throw Error("Cannot initialize BaseDocument");
    };
    h.zr.prototype = {
      Kt: f,
      Xt: f,
      Lt: f,
      bj: f,
      Fh: f,
      Ao: f,
      Tm: f,
      Sk: f,
      xn: f,
      yn: f,
      Ab: f,
      zc: f,
      wo: function () {
        return !0
      },
      Mj: function () {
        return !1
      },
      VS: function (b) {
        this.Nt = b
      },
      kj: function (b) {
        this.Nt && this.Nt(b)
      },
      eu: function (b, c, a) {
        c = {
          x: c,
          y: a
        };
        return this.J[b].eb.inverse().W(c)
      },
      jz: function (b, c, a, f) {
        if (a <= c) return console.error("End index must be greater than start index");
        this.Kd(b, function (b) {
          b = b.Re();
          var d = 8 * c,
            g = 8 * a;
          if (d > b.length || g > b.length) return console.error("Index out of bounds");
          for (var e = []; d < g; d += 8) e.push({
            x1: b[d],
            y1: b[d + 1],
            x2: b[d + 2],
            y2: b[d + 3],
            x3: b[d + 4],
            y3: b[d + 5],
            x4: b[d + 6],
            y4: b[d + 7]
          });
          f(e)
        })
      },
      ou: f,
      pz: function (b, c, a) {
        return this.J[b].eb.W({
          x: c,
          y: a
        })
      },
      vj: f,
      bl: f,
      wj: f,
      Bf: f,
      $g: f,
      Nh: f,
      Kq: f,
      zj: f,
      fv: f,
      yv: f,
      po: f,
      yo: f,
      $b: f,
      Rn: f,
      Gq: f,
      cj: f,
      il: function () {
        return !1
      },
      xt: function (b, c) {
        var f = this.J[b],
          d = (4 - f.rotation / 90) % 4;
        0 !== d && (f = a.jd(1, d, f, {
          x: 0,
          y: 0
        }, !1), c.rM(f))
      },
      Kd: f,
      Cn: function () {
        return null
      },
      getFileData: f,
      Nn: f,
      ao: f,
      fo: f,
      ln: f,
      ir: f,
      mn: f,
      an: f,
      Dl: function () {},
      print: function () {},
      nq: function (b) {
        return String(b)
      },
      An: function () {
        return _.range(0, this.J.length).map(String)
      },
      zn: f,
      vn: f,
      Ev: f,
      Gv: f,
      Kp: function () {
        for (var b = 1, c = this.J.length, f = a.utils.getCanvasMultiplier(), f = f * f, d = 0; d < c; ++d) var g = this.J[d],
          b = Math.max(b, g.width * g.height * f);
        return Math.sqrt(8E6 / b)
      },
      aj: function (b) {
        return 0 === b.m_b && 0 === b.m_c ? 0 < b.m_a ? 0 : 180 : 0 > b.m_b ? 270 : 90
      },
      Jp: function (b, c) {
        var a = this.aj(b),
          f = c.w,
          d = c.yf;
        if (90 === a || 270 === a) var g = f,
          f = d,
          d =
          g;
        switch (a) {
          case 0:
            return a = -b.m_h, g = b.m_v, {
              x1: a,
              y1: g - d,
              x2: g - d,
              y2: g
            };
          case 90:
            return g = -b.m_h, a = -b.m_v, {
              x1: a,
              y1: g,
              x2: a + f,
              y2: g + d
            };
          case 180:
            return a = b.m_h, g = -b.m_v, {
              x1: a - f,
              y1: g,
              x2: a,
              y2: g + d
            };
          case 270:
            return g = b.m_h, a = b.m_v, {
              x1: a - f,
              y1: g - d,
              x2: a,
              y2: g
            }
        }
        return null
      },
      Hl: function (b) {
        this.ab = b
      },
      ry: function (b, c) {
        if (this.ab) {
          var a, f, d = this.J[c].width,
            g = this.J[c].height,
            e = b.getContext("2d");
          e.save();
          e.textAlign = "center";
          e.textBaseline = "top";
          var h = function (b) {
              e.font = b.fontSize + "pt " + b.fontFamily;
              e.fillStyle = b.color;
              e.globalAlpha = b.opacity / 100;
              f = 1.5 * b.fontSize
            },
            k = function (b) {
              var c = [""],
                a = 0;
              b.split(" ").forEach(function (b) {
                b.split("\n").forEach(function (b, f, g) {
                  b && (e.measureText(c[a] + b).width >= d / 3 && (c[++a] = ""), c[a] += b + " ");
                  f < g.length - 1 && (c[++a] = "")
                })
              });
              return c
            };
          this.ab.diagonal && (e.save(), h.call(this, this.ab.diagonal), e.translate(d / 2, g / 2), e.rotate(-Math.atan(g / d)), this.ab.diagonal.text && (a = this.ab.diagonal.text.split("\n"), a.forEach(function (b, c) {
            e.fillText(b, 0, (c - a.length / 2) * f)
          })), e.restore());
          if (this.ab.header) {
            e.save();
            h.call(this, this.ab.header);
            var l = function (b) {
              b.forEach(function (b, c) {
                e.fillText(b, 0, c * f)
              })
            };
            e.translate(d / 6, 0);
            this.ab.header.left && l(k(this.ab.header.left));
            e.translate(d / 3, 0);
            this.ab.header.center && l(k(this.ab.header.center));
            e.translate(d / 3, 0);
            this.ab.header.right && l(k(this.ab.header.right));
            e.restore()
          }
          this.ab.footer && (e.save(), h.call(this, this.ab.footer), h = function (b) {
              b.forEach(function (c, a) {
                e.fillText(c, 0, (a - b.length) * f)
              })
            }, e.translate(d / 6, g), this.ab.footer.left && h(k(this.ab.footer.left)),
            e.translate(d / 3, 0), this.ab.footer.center && h(k(this.ab.footer.center)), e.translate(d / 3, 0), this.ab.footer.right && h(k(this.ab.footer.right)), e.restore());
          this.ab.custom && (e.save(), this.ab.custom(e, c, d, g), e.restore());
          e.restore()
        }
      },
      zl: function () {
        return Promise.resolve()
      },
      Qk: function (c, f) {
        for (var d = this, g = c.length, e = [], h = Promise.resolve(this.Om.xO(this.Vt(f)) || this.Wt(c, f)), k = 0; k < g; ++k) {
          var l = c[k],
            m = l.objnum + "-" + l.gennum;
          l.lM && (m += "_" + l.lM);
          l.oM && (m += "-" + l.oM);
          e.push(Promise.all([m, h]).then(function (c) {
            var g =
              c[0],
              e = c[1];
            if (g in e.yz) {
              var h = e.yz[g];
              return new Promise(function (c, g) {
                var k = d.J[f - 1],
                  l = b(h, 1, 0, function () {}),
                  m = _.uniqueId(),
                  n = {};
                n[m] = {
                  Cf: null,
                  paused: !1,
                  Cb: l.pageIndex
                };
                e.Gq(l.pageIndex, m, function (b, f) {
                  b && g(Error("Error loading page " + l.pageIndex + ": " + b));
                  _.isUndefined(n[m]) || (n[m].Cf = f, n[m].paused && f.pause(), l.finishedLoading(b, f) && f.Qz(function () {
                    c({
                      draw: function (b, c, f, d) {
                        var g = this;
                        return new Promise(function (e) {
                          var h = a.jd(c, f, k, void 0, !0, a.utils.getCanvasMultiplier()),
                            l = new XODText.Ca,
                            m = a.asc(k.eb) /
                            1.33333;
                          l.Ha(m, 0, 0, m, d.x, d.y);
                          h.concat(l);
                          b.translate(d.x, d.y);
                          b.scale(m, m);
                          g.Cf.IE(b, h, e)
                        })
                      },
                      Cf: f
                    })
                  }, void 0, !0))
                })
              })
            }
            throw Error("No matching annotation in appearance document.");
          }))
        }
        return e
      }
    };
    var q = 0;
    h.Ke = function (b) {
      this.um = this.Va = null;
      this.Im = new a.af.Rr;
      this.id = b;
      this.Ru = !1;
      this.Ve = null;
      this.Ed = {};
      this.Wz = _.bind(this.Wz, this);
      this.Qt = null;
      this.Mf = 1;
      this.he = {};
      this.ab = null;
      this.hc = Promise.resolve();
      this.yz = {};
      this.Om = new h.pw(10, 400);
      this.ja = (++q).toString(16)
    };
    h.Ke.prototype = Object.create(h.zr.prototype);
    h.Ke.prototype.constructor = h.Ke;
    $.extend(h.Ke.prototype, {
      Of: "Document/FixedDocument.fdoc",
      xg: "Document/DocProps/core.xml",
      Ye: "Document/Structure/DocStruct.struct",
      KJ: "Struct/font.xml",
      UK: "Struct/",
      TK: "Text/",
      Bf: function (b, c) {
        this.Va = b;
        this.pf = [];
        this.ce = {};
        this.J = [];
        this.qd = {};
        this.qd[this.Of] = 0;
        this.qd[this.xg] = 0;
        this.qd[this.Ye] = 0;
        this.Va.ni() && (this.Hj = {});
        var f = this;
        b.bind("partReady", this.Wz);
        this.bind("documentReady", function (b) {
          1.5 > f.Mf && f.FL();
          c(b)
        });
        b instanceof a.o.V.fp ? (this.Ru = !0, this.bl(function () {
          b.db =
            f.Ve;
          b.yl(c)
        })) : b.yl(c)
      },
      Nh: function (b) {
        if (1 !== b.length) throw Error("XOD Document does not support extracting XFDF for multiple input pages");
        var c = this,
          f = b[0] - 1;
        return new Promise(function (b) {
          function d(b) {
            var c = "",
              a = 0,
              f, g, e, h = -1;
            for (2 <= b.length && "{" === b.charAt(0) && "}" === b.charAt(1) && (b = b.substr(2)); a < b.length;) f = b.charCodeAt(a), 128 > f ? (0 > h && (h = a), a++) : (0 <= h && (c += b.substring(h, a), h = -1), 191 < f && 224 > f ? (g = b.charCodeAt(a + 1), c += String.fromCharCode((f & 31) << 6 | g & 63), a += 2) : (g = b.charCodeAt(a + 1), e = b.charCodeAt(a +
              2), c += String.fromCharCode((f & 15) << 12 | (g & 63) << 6 | e & 63), a += 3));
            0 === h ? c = b : 0 <= h && (c += b.substring(h, a));
            return c
          }
          if (1.5 <= c.Mf) {
            var g = c.J[f].wJ;
            c.La.wf("Annot/Annots" + (g.index ? g.index : "") + ".xfdf", function (a) {
              a = d(a.data);
              c.J[0].Ep = a;
              b({
                xfdfString: a,
                pages: _.range(g.start, g.end)
              })
            })
          } else c.La.wf("Annots.xfdf", function (f) {
            f = d(f.data);
            c.J[0].Ep = f;
            var g = a.Annotations.ba.sq(f);
            c.PC(g);
            b({
              xfdfString: f,
              parsedData: g,
              pages: _.range(1, c.J.length + 1)
            })
          })
        })
      },
      Gq: function (b, c, f) {
        var d = this;
        if (!this.La) throw Error("Document is not initialized!");
        1.2 === this.Mf && (this.La.Tu = !0);
        this.La.Zy(b, c, function (c, g) {
          var e = d.J[b],
            h = null;
          g && (h = new a.af.EK(e, g, d.Im));
          f(c, h)
        })
      },
      Rn: function (b, c) {
        if (!this.La) throw Error("Document is not initialized!");
        return this.La.wf(b, c)
      },
      WQ: function (b) {
        var c = this;
        null === c.Qt ? c.Rn(c.KJ, function (a) {
          if (a.error) throw Error("SELECT: Error getting part " + a.qa + ": " + a.error);
          var f = new XODText.ww(c.ja);
          f.pA(a.data);
          c.Qt = f.Dy;
          b(c.Qt)
        }) : b(c.Qt)
      },
      Kd: function (b, c) {
        var a = this;
        null !== a.J[b].text ? c(a.J[b].text) : b in a.he ? a.he[b].push(c) :
          (a.he[b] = [c], 1.4 > a.Mf ? a.Rn(a.TK + (b + 1) + ".xml", function (c) {
            if (c.error) throw Error("SELECT: Error getting part " + c.qa + ": " + c.error);
            var f = new XODTextOld.df;
            f.nQ(c.data);
            c = new XODText.df;
            c.ev(f);
            a.xt(b, c);
            a.J[b].text = c;
            a.he[b].forEach(function (b) {
              b(f)
            });
            delete a.he[b]
          }) : a.WQ(function (c) {
            a.Rn(a.UK + (b + 1) + ".xml", function (f) {
              var d = new XODText.df,
                g = new XODText.Ca;
              g.Ha(1, 0, 0, 1, 0, 0);
              var e = new XODText.km(c);
              a.La.IF(b, function (c) {
                function h() {
                  return c.Rq().then(function () {
                    if (!c.run(e, g)) return h()
                  })
                }
                h().then(function () {
                  d.pA(f.data,
                    e);
                  a.xt(b, d);
                  a.J[b].text = d;
                  a.he[b].forEach(function (b) {
                    b(d)
                  });
                  delete a.he[b]
                })["catch"](function (b) {
                  console.warn("Custom Canvas has encountered an error: " + b.message)
                })
              })
            })
          }))
      },
      il: function () {
        return 1.2 >= this.Mf
      },
      vj: function () {
        return this.In || 0 < this.Oq
      },
      $g: function (c, a, f, d, g, e) {
        var h = this,
          k = b(c, a, f, d, g, e),
          l = _.uniqueId();
        h.Ed[l] = {
          Cf: null,
          paused: !1,
          Cb: k.pageIndex
        };
        h.Gq(k.pageIndex, l, function (b, c) {
          if (b) throw Error("Error loading page " + k.pageIndex + ": " + b);
          _.isUndefined(h.Ed[l]) || (h.Ed[l].Cf = c, h.Ed[l].paused &&
            c.pause(), k.finishedLoading(b, c) && c.Qz(function () {
              k.resourcesLoaded() && c.aN(k.getZoom(), k.getPageRotation(), function (b) {
                k.drawComplete(b, k.pageIndex)
              }, function (b) {
                h.ry(b, k.pageIndex);
                k.drawProgressive(b, k.pageIndex)
              }, k.canvasNum, k.getPageTransform(), k.renderRect, k.useProgress, k.pageCanvas)
            }, void 0, k.acquireResources()))
        });
        return l
      },
      fv: function (b) {
        if (b = this.Ed[b]) b.paused = !0, b.Cf && b.Cf.pause()
      },
      yv: function (b) {
        if (b = this.Ed[b]) b.paused = !1, b.Cf && b.Cf.resume && b.Cf.resume()
      },
      Ao: function (b) {
        this.Fh(b)
      },
      Fh: function (b) {
        var c = this.Ed[b];
        c && (this.nt(c.Cb, b), c = c.Cf) && (c.$b(), c.abort && c.abort());
        this.cj(b)
      },
      cj: function (b) {
        delete this.Ed[b]
      },
      iE: function () {
        return "t" + _.uniqueId()
      },
      GQ: function (b) {
        return _.isString(b) && 0 < b.length && "t" === b[0]
      },
      zj: function (b, c) {
        if (!this.La) throw Error("Document is not initialized!");
        var f = this,
          d;
        if (this.In || this.Oq > b) d = f.iE(), this.La.lz(b, d, function (b) {
          var d = new Image,
            g;
          g = b.data;
          k && f.Va instanceof k ? g = f.Va.path + g : (b = b.qa.match(/\.([a-zA-Z]+)$/)[1].toLowerCase(), g = a.o.BF(b, g));
          d.onload = function () {
            d.src.startsWith("data") || URL.revokeObjectURL(d.src);
            c(d);
            d = d.onload = null
          };
          d.src = g
        }, name);
        else {
          var g = this.J[b];
          d = this.$g({
            pageIndex: b,
            zoom: g.width > g.height ? 150 / g.width : 150 / g.height,
            drawComplete: function (b) {
              b.style.backgroundColor = "white";
              f.Ao(d);
              c(b)
            },
            pageCanvas: !0
          })
        }
        return d
      },
      bl: function (b) {
        if (null === this.Ve) {
          if (_.isUndefined(this.id) || _.isNull(this.id)) {
            this.id = a.top.location.href;
            for (var c = a.top.location.hash.substring(1).split("&"), f = 0; f < c.length; f++) {
              var d = c[f].split("=");
              if ("d" === d[0]) {
                this.id = d[1];
                break
              }
            }
          }
          var g = this;
          this.Ve = new a.o.oK(this.id);
          this.Ve.open(b, function (b) {
            g.Ve = null;
            console.error(b)
          })
        } else console.warn("Offline DB is already initialized!"), b()
      },
      yo: function (b, c) {
        function f(b) {
          d.Va.Lx(b)
        }
        if (!this.La) throw b(), Error("Document is not initialized!");
        if (!this.Ve) throw b(), Error("Offline DB is not initialized!");
        if (this.Va instanceof a.o.V.fp) throw b(), Error("Can't download file while in offline mode!");
        var d = this;
        d.Va.bz(function (a) {
          d.Ve.dU(d.La, a, !!d.Va.decrypt,
            b, c, f)
        })
      },
      wj: function () {
        if (!this.Ve) throw Error("Offline DB is not initialized!");
        return this.Ve.wj()
      },
      Tm: function () {
        if (!this.Ve) throw Error("Offline DB is not initialized!");
        this.Ve.IM()
      },
      yn: function () {
        return this.Ru
      },
      po: function (b) {
        if (!this.Ve) throw Error("Offline DB is not initialized!");
        this.Ru !== b && (!(this.Ru = b) || this.um instanceof a.o.V.fp || (this.um = new a.o.V.fp(this.Ve, this.Va.decrypt, this.Va.Jk), this.um.bind("partReady", this.La.Wu)), this.WA())
      },
      WA: function () {
        if (null !== this.um) {
          var b = this.um;
          this.um = this.Va;
          this.Va = b;
          this.La.Pd = this.Va
        }
      },
      nt: function (b, c) {
        if (!this.La) throw Error("Document is not initialized!");
        this.La.Lp(b, c)
      },
      bj: function (b) {
        this.GQ(b) ? this.La.JM(b) : this.Fh(b)
      },
      Wz: function (b) {
        if (b.error) return this.qd[b.qa] = 3, this.oC();
        var c;
        c = this.Va.decrypt ? this.Va.oE ? this.Va.decrypt(b.data, this.Va.Jk, b.qa) : a.o.oh.tE(b.data, this.Va.Jk, b.qa) : b.data;
        c = a.oj(c);
        this.Va.ni() && (this.Hj[b.qa] = {
          data: c,
          yb: b.yb
        }, this.Va.decrypt && (this.Hj[b.qa].YN = b.data));
        b.yb && (c = l.inflate(c));
        switch (b.qa) {
          case this.Of:
            c =
              new a.Je(c);
            c.na();
            c.advance();
            b = c.K("JPGThumbs");
            this.Jz = "true" === b;
            b = c.K("IncludesThumbs");
            this.In = null === b || "false" !== b;
            !this.In && (b = c.K("NumLeadingThumbs")) && (b = parseInt(b, 10), b = isNaN(b) ? 0 : b, this.Oq = Math.max(b, 0));
            b = c.K("Version");
            this.Mf = parseFloat(b);
            if (1.2 > this.Mf) throw this.qd[this.Of] = null, Error("The XOD version is out of date. Please re-convert the file with the most recent version of PDFNet or the command line converter.");
            if (1.5 < this.Mf) throw Error("The XOD file version is too new for this client. Please update the WebViewer client version.");
            b = 1.5 <= this.Mf;
            var f, d;
            b && (d = c.K("DefaultMatrix").split(","), f = new XODText.Ca, f.Ha(parseFloat(d[0]), parseFloat(d[1]), parseFloat(d[2]), parseFloat(d[3]), parseFloat(d[4]), parseFloat(d[5])), d = this.aj(f));
            this.qd[this.Of] = 1;
            for (var g = {
                index: 0,
                start: 1
              }, e = 1; c.advance();) {
              var h = c.ua();
              if ("PageContent" === h) {
                h = new a.Zo(parseFloat(c.K("Width")), parseFloat(c.K("Height")));
                h.dr = ["Pages/" + e + ".xaml", "Annot/" + e + ".xml", "Pages/_rels/" + e + ".xaml.rels"];
                h.wJ = g;
                var k = c.K("trn:Id");
                k && (h.offsetX = parseFloat(c.K("trn:X")),
                  h.offsetY = parseFloat(c.K("trn:Y")), this.yz[k] = this.J.length);
                this.J.push(h);
                if (b) {
                  (h = c.K("trn:Matrix")) ? (k = h.split(","), h = new XODText.Ca, h.Ha(parseFloat(k[0]), parseFloat(k[1]), parseFloat(k[2]), parseFloat(k[3]), parseFloat(k[4]), parseFloat(k[5])), k = this.aj(h)) : (h = f, k = d);
                  var m = e - 1,
                    n = this.Jp(h, {
                      w: this.J[m].width,
                      yf: this.J[m].height
                    });
                  h.Ha(4 / 3, 0, 0, -4 / 3, -n.x1, n.y2);
                  this.J[m].eb = h;
                  this.J[m].rotation = k
                }++e
              } else if ("trn:AnnotRef" === h) g.end = e, g = {
                index: g.index + 1,
                start: e
              };
              else throw Error("Unsupported XOD document element type: " +
                h);
            }
            g.end = e;
            this.In && (this.Oq = this.J.length);
            this.Jq = this.Kp();
            break;
          case this.xg:
            this.qd[this.xg] = 1;
            c = new a.Je(c);
            c.na();
            for (this.ce = {}; c.advance();) f = c.ua().split(":"), this.ce[1 === f.length ? f[0] : f[1]] = c.current.textContent;
            break;
          case this.Ye:
            this.qd[this.Ye] = 1;
            this.pf = [];
            c = new a.Je(c);
            c.na();
            c.advance();
            c.na();
            c.advance();
            c.na();
            g = 0;
            for (e = null; c.advance();) {
              f = parseInt(c.K("OutlineLevel"), 10);
              d = new a.CoreControls.Bookmark;
              d.children = [];
              d.name = b.yb ? a.utils.utf8_decode(c.K("Description")) : c.K("Description");
              if (g < f) d.parent = e;
              else
                for (d.parent = e.parent; g > f;) d.parent = d.parent.parent, --g;
              d.Do = c.K("trn:Vpos");
              d.Do = null === d.Do ? 0 : parseFloat(d.Do);
              d.Kn = c.K("trn:Hpos");
              d.Kn = null === d.Kn ? 0 : parseFloat(d.Kn);
              g = c.K("OutlineTarget").split("#");
              1 === g.length || 0 === g[1].length ? d.url = g[0] : d.Df = parseInt(g[1], 10);
              null !== d.parent ? d.parent.children[d.parent.children.length] = d : this.pf[this.pf.length] = d;
              g = f;
              e = d
            }
            break;
          default:
            if (this.qd[this.Of]) return this.qd[this.xg] = this.qd[this.xg] || 2, this.qd[this.Ye] = this.qd[this.Ye] || 2,
              this.tC(b)
        }
        this.oC()
      },
      Sk: function () {
        return Promise.resolve(this.pf)
      },
      xn: function (b) {
        return 1.2 === this.Mf ? this.J[b].Ep : this.J[b].links
      },
      Ab: function () {
        return this.J.length
      },
      zc: function (b) {
        var c = {};
        c.width = this.J[b].width;
        c.height = this.J[b].height;
        return c
      },
      eu: function (b, c, a) {
        c = {
          x: c,
          y: a
        };
        return this.J[b].eb.inverse().W(c)
      },
      ou: function (b, c, a) {
        return this.J[b].eb.W({
          x: c,
          y: a
        })
      },
      $b: function () {
        var b = "i" + this.ja + "-",
          c = "f" + this.ja + "-";
        if (document.fonts)
          for (var f in a.Bg) f.startsWith(c) && (a.Bg[f].remove(), delete a.Bg[f]);
        for (var d in a.ci) d.startsWith(b) && delete a.ci[d];
        _.isEmpty(a.Bg) && (b = a.Ze.FontFace.prototype.VA, null !== b && (document.head.removeChild(b), a.Ze.FontFace.prototype.styleSheet = null, a.Ze.FontFace.prototype.VA = null));
        this.Im = new a.af.Rr;
        this.Va instanceof a.o.V.JB && this.Va.abort();
        this.ls()
      },
      ls: function () {
        this.Va.unbind("partReady");
        this.La = new a.o.V.kK(this.Va, this.J, this.Im, this.ja);
        this.La.Jz = this.Jz
      },
      oC: function () {
        this.qd[this.Of] && this.qd[this.xg] && this.qd[this.Ye] && this.tC()
      },
      tC: function (b) {
        this.ls();
        if (this.Va.ni()) {
          for (var c in this.Hj) this.La.cache.setItem(c, this.Hj[c].data, this.Hj[c].yb), this.Va.decrypt && this.La.Nk.setItem(c, this.Hj[c].YN, this.Hj[c].yb);
          delete this.Hj
        }
        this.trigger("documentReady", 3 === this.qd[this.Of]);
        b && this.Va.trigger("partReady", b)
      },
      FL: function () {
        var b = new XODText.Ca;
        b.Ha(4 / 3, 0, 0, -4 / 3, 0, this.J[0].height);
        for (var c = this.J.length, a = 0; a < c; ++a) this.J[a].eb = b, this.J[a].rotation = 0
      },
      PC: function (b) {
        for (var c = this.J.length, a = 0; a < c; ++a) this.J[a].eb = null;
        if (b && b.querySelector("xfdf > pages")) {
          b =
            b.querySelector("xfdf > pages");
          for (var f, d, g, a = 0; a < b.childNodes.length; ++a) {
            var e = b.childNodes[a].localName;
            if (e && (g = b.childNodes[a], "defmtx" === e && (d = g.getAttribute("matrix").split(","), f = new XODText.Ca, f.Ha(parseFloat(d[0]), parseFloat(d[1]), parseFloat(d[2]), parseFloat(d[3]), parseFloat(d[4]), parseFloat(d[5])), d = this.aj(f)), "pgmtx" === e)) {
              e = parseInt(g.getAttribute("page"), 10);
              g = g.getAttribute("matrix").split(",");
              var h = new XODText.Ca;
              h.Ha(parseFloat(g[0]), parseFloat(g[1]), parseFloat(g[2]), parseFloat(g[3]),
                parseFloat(g[4]), parseFloat(g[5]));
              var k = this.aj(h);
              g = this.Jp(h, {
                w: this.J[e].width,
                yf: this.J[e].height
              });
              this.J[e].rotation = k;
              h.Ha(4 / 3, 0, 0, -4 / 3, -g.x1, g.y2);
              this.J[e].eb = h
            }
          }
          for (a = 0; a < c; ++a) null === this.J[a].eb && (b = new XODText.Ca, g = this.Jp(f, {
            w: this.J[a].width,
            yf: this.J[a].height
          }), b.Ha(4 / 3, 0, 0, -4 / 3, -g.x1, g.y2), this.J[a].eb = b, this.J[a].rotation = d)
        }
      },
      Vt: function (b) {
        return this.J[b - 1].wJ.index
      },
      Wt: function (b, c) {
        if (1.5 > this.Mf) return Promise.reject("getAppearanceReferences: XOD with version less than 1.5 has no appearances");
        var f = this,
          g = this.Vt(c);
        new h.Ke;
        var e = "Annot/Appearances" + (g || "") + ".xod",
          k;
        k = new Promise(function (b, c) {
          a.FileReader || c("This browser does not support FileReader");
          f.La.wf(e, function (f) {
            f.error ? c(f.error) : b(d(a.UF(f.data)))
          })
        });
        this.Om.OD(g, k);
        return k
      },
      wo: function () {
        return !this.il()
      }
    });
    h.ph = function () {
      this.pf = [];
      this.ce = {};
      this.J = [];
      this.bv = {};
      this.In = !1;
      this.Oq = 0;
      this.Uh = {};
      this.he = {};
      this.ja = null;
      this.fH = 2;
      this.fI = !1;
      this.ee = [];
      this.ab = null;
      this.Om = new h.pw(10, 400)
    };
    h.ph.prototype = Object.create(h.zr.prototype);
    h.ph.prototype.constructor = h.ph;
    $.extend(h.ph.prototype, {
      jw: function (b) {
        var c = new a.Zo(b.width, b.height);
        c.eb = new XODText.Ca;
        b = b.matrix;
        c.eb.Ha(b[0], b[1], b[2], b[3], b[4], b[5]);
        b = this.aj(c.eb);
        c.eb = this.yA({
          w: c.width,
          yf: c.height
        });
        c.rotation = b;
        return c
      },
      yA: function (b, c) {
        var a = new XODText.Ca;
        a.Ha.apply(a, b);
        var f = this.Jp(a, c);
        a.Ha(1, 0, 0, -1, -f.x1, f.y2);
        return a
      },
      $E: function (b, c) {
        this.ER || this.LD({
          pageDimensions: b
        });
        this.Jq = this.Kp();
        this.tj || this.trigger("documentComplete");
        c()
      },
      aP: function (b, c) {
        var a =
          createPromiseCapability(),
          f = new XMLHttpRequest;
        f.open("GET", b.url);
        f.withCredentials = c;
        var d = b.customHeaders;
        if (d)
          for (var g in d) f.setRequestHeader(g, d[g]);
        f.setRequestHeader("Range", "bytes=1-150");
        f.responseType = "arraybuffer";
        f.onreadystatechange = function () {
          if (this.readyState === this.DONE)
            if (f.response) {
              var b = f.response.byteLength;
              206 !== f.status && 200 !== f.status ? a.reject({
                message: "Received http error code " + f.status
              }) : 150 !== b && a.reject({
                message: "Byte ranges are not supported by the server.",
                data: new Uint8Array(f.response)
              });
              var b = new Uint8Array(f.response),
                c = [76, 105, 110, 101, 97, 114, 105, 122, 101, 100],
                d = f.getResponseHeader("Content-Range") || f.getResponseHeader("content-range");
              if (d) {
                var d = d.split("/")[1],
                  g = 0;
                do {
                  a: {
                    for (var e = b.length; g < e; ++g)
                      if (b[g] === c[0]) break a;g = -1
                  }
                  g += 1;
                  for (e = 1; 10 > e; ++e)
                    if (b[g] === c[e]) ++g;
                    else break;
                  if (10 === e) {
                    a.resolve(parseInt(d, 10));
                    return
                  }
                } while (0 !== g);
                a.reject({
                  message: "The file is not linearized."
                })
              } else a.reject({
                message: "Could not retrieve Content-Range header."
              })
            } else a.reject({
              message: "No response data"
            })
        };
        f.onerror = function () {
          a.reject({
            message: "Network or Cross Domain Access Error."
          })
        };
        f.send();
        return a.promise
      },
      Bf: function (b, c, f) {
        function d(b) {
          E.pf = [];
          E.ce = {};
          E.J = [];
          E.In = !1;
          E.Oq = 0;
          E.tj = !1;
          E.bind("documentReady", c);
          var a, f;
          J.then(function (c) {
            E.Ba = c;
            c = "object" === typeof b && "url" in b;
            var d;
            if (d = N) {
              d = N;
              var g = Object.prototype.toString.call(d);
              d = "object" === typeof d && null !== d && ("[object File]" === g || "[object Blob]" === g)
            }
            d && E.Ba && "ems" === E.Ba.getWorkerType() ? (a = "file", f = N) : c ? (a = "url", f = b, E.tj = !0) : "string" ===
              typeof b ? (a = "filepath", f = b) : "object" === typeof b && null !== b && void 0 !== b.byteLength ? (a = "array", f = b.buffer) : "object" === typeof b && "type" in b && "id" === b.type ? (a = "id", f = b.id) : console.warn("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object");
            l({
              type: a,
              value: f,
              extension: n,
              defaultPageSize: r,
              pageSizes: q
            })
          })
        }

        function g(b, c) {
          console.warn("Could not use incremental download for url " + b + ". Reason: " + c)
        }

        function e(b) {
          G = b;
          E.Ba.BU(E.ja, b).then(function (b) {
            b.success ? k(b.pageDimensions) :
              m(e)
          })
        }

        function h() {
          E.hc = new Promise(function (b) {
            E.bind("documentComplete", function () {
              E.unbind("documentComplete");
              b()
            })
          });
          E.Ba.addEventListener(E.ja, function (b) {
            E.kA(b)
          })
        }

        function k(a) {
          E.tj ? E.Ba.xQ(E.ja).then(function (f) {
            f ? E.$E(a, c) : (g(N.url, "Linearization data is invalid."), E.$b(), b.getFileData(d))
          }) : E.$E(a, c)
        }

        function l(b) {
          E.Ba.dO(b).then(function (b) {
            E.ja = b.docId;
            h();
            k(b.pageDimensions)
          }, function (b) {
            "NeedsPassword" === b.type && m ? (E.ja = b.docId, h(), G ? e(G) : m(e)) : (E.hc = Promise.reject(b), c(b))
          })
        }
        this.Va =
          b;
        var m = f.getPassword,
          n = f.extension,
          r = f.defaultPageSize,
          q = f.pageSizes,
          J = f.workerTransportPromise,
          E = this,
          N = b.getFile();
        a.utils.isJSWorker && a.jsworker ? (N = a.jsworker.worker.getPlatformFormatFilePath(N), d(N)) : N && N.url ? this.aP(N, b.withCredentials).then(function (c) {
          N.size = c;
          N.withCredentials = -1 === N.url.indexOf(window.parent.location.hostname) ? b.withCredentials : !0;
          d(N)
        }, function (c) {
          g(N.url, c.message);
          c.data ? d(c.data) : b.getFileData(d)
        }) : N && !a.utils.isChrome ? d(N) : b.getFileData(d);
        var G = null
      },
      LD: function (b) {
        var a =
          this;
        a.ER = !0;
        b = b.pageDimensions;
        for (var f = Object.keys(b), d = this.J, g = Array(d.length), e = 0; e < d.length; ++e) {
          var h = d[e];
          h.text && (g[e] = h.text)
        }
        this.J.length = 0;
        var k = this.bv,
          l = [],
          m = {};
        f.forEach(function (f) {
          var e = b[f],
            h = !!e.contentChanged,
            e = {
              width: e.width,
              height: e.height,
              matrix: a.yA(e.matrix, {
                w: e.width,
                yf: e.height
              }),
              rotation: 90 * e.rotation,
              id: e.id,
              pageNum: f,
              contentChanged: h
            };
          k[e.id] && l.push({
            before: k[e.id],
            after: e
          });
          k[e.id] = new c(e.width, e.height);
          var n = k[e.id];
          n.YS(e);
          !h && (h = g[f - 1]) && (n.text = h);
          d[f - 1] = n;
          m[e.id] = !0
        });
        this.Jq = this.Kp();
        Object.keys(k).forEach(function (b) {
          b in m || delete k[b]
        });
        return l
      },
      kA: function (b) {
        switch (b.type) {
          case "pagesUpdated":
            b = this.LD(b.data);
            this.kj({
              type: "pagesDiff",
              data: b
            });
            this.kj({
              type: "pagesUpdated",
              data: b.map(function (b) {
                return b.after
              })
            });
            break;
          case "bookmarksUpdated":
            this.kj({
              type: "bookmarksUpdated",
              data: b.data
            });
            break;
          case "documentComplete":
            this.trigger("documentComplete");
            this.kj({
              type: "documentComplete",
              data: b.data
            });
            break;
          default:
            console.warn("Unknown event type: ",
              b.type)
        }
      },
      Sk: function () {
        function b(c) {
          var a = [];
          c.children.forEach(function (c) {
            a.push(b(c))
          });
          return new h.Xe(a, c.name, c.pageNumber, c.parent, c.verticalOffset, c.horizontalOffset, c.url)
        }
        return this.Ba.TQ(this.ja).then(function (c) {
          var a = [];
          c.bookmarks.forEach(function (c) {
            a.push(b(c))
          });
          return a
        })
      },
      Kd: function (b, c) {
        var a = this;
        null !== a.J[b].text ? c(a.J[b].text) : b in a.he ? a.he[b].push(c) : (this.zl(b + 1).then(function () {
          a.Ba.Kd(a.ja, b).then(function (c) {
            var f = new XODText.df;
            f.ev({
              Ya: c.struct,
              Qa: c.str,
              Xb: c.offsets,
              Ea: c.quads,
              jc: !0
            });
            a.xt(b, f);
            a.J[b].text = f;
            a.he[b].forEach(function (b) {
              b(f)
            });
            delete a.he[b]
          }, function (b) {
            console.warn("Text generation failed: " + (b && b.message ? b.message : b))
          })
        }), a.he[b] = [c])
      },
      Nh: function (b) {
        return this.Ba.RQ(this.ja, b).then(function (c) {
          c.pages = b;
          return c
        })
      },
      Kq: function (b) {
        return this.Ba.Kq(this.ja, b)
      },
      getFileData: function (b) {
        var c = this;
        b = b || {};
        "finishedWithDocument" in b || (b.finishedWithDocument = !1);
        "printDocument" in b || (b.printDocument = !1);
        b.docId = c.ja;
        return "filePath" in b ? c.hc.then(function () {
            return c.Ba.DS(b)
          }) :
          c.hc.then(function () {
            return c.Ba.CS(b)
          }).then(function (b) {
            return b.fileData
          })
      },
      Ab: function () {
        return this.J.length
      },
      kG: function (b, c, f, d, g, e, h, k) {
        var l = this,
          m = a.o.Vl === a.o.Vl.Wr;
        if (m) {
          c = a.innerWidth;
          f = a.innerHeight;
          var n = a.utils.getCanvasMultiplier(),
            r = {
              x: h.x,
              y: h.y
            };
          a.jd(d.av, d.$u, {
            x1: d.page.x1,
            x2: d.page.x2,
            y1: d.page.y1,
            y2: d.page.y2,
            width: d.page.width,
            height: d.page.height
          }, r, !0, n);
          r.x = r ? Math.round(r.x) : 0;
          r.y = r ? Math.round(r.y) : 0;
          n = a.o.za.fh;
          a.o.za.Km(n, c, f);
          var q = r.x >= n.width / 2;
          console.log("imagePathReceived for: " +
            b);
          console.log("tCanvas.width: " + n.width);
          console.log("translation.x: " + r.x);
          console.log("isRightPage: " + q);
          "undefined" === typeof l.Eq && (l.Eq = !1);
          if (q && !l.Eq) {
            l.oy = function () {
              var c = a.o.za.so(d.page, d.av, d.$u, h, e, k).canvas,
                f = h ? Math.round(h.x) : 0,
                l = h ? Math.round(h.y) : 0;
              console.log("Drawing: " + b);
              var m = new Image;
              $(m).css("width", d.iH);
              $(m).css("height", d.gH);
              var n = b;
              0 !== n.indexOf("file://") && (n = "file://" + n);
              m.onload = function () {
                var b = c.getContext("2d");
                b.setTransform(1, 0, 0, 1, 0, 0);
                b.drawImage(m, f, l);
                g || $(c).addClass("progressive");
                d.ny(c);
                g && d.ly(c);
                m = null;
                a.utils.isJSWorker && (console.log("[WebViewer|JSWorker]: Deleting file: " + n), a.jsworker.worker.deleteGeneratedImageRenderFile(n))
              };
              m.src = n
            };
            return
          }
        }
        var J = a.o.za.so(d.page, d.av, d.$u, h, e, d.Od, k).canvas,
          E = h ? Math.round(h.x) : 0,
          N = h ? Math.round(h.y) : 0;
        console.log("Drawing: " + b);
        var G = new Image;
        $(G).css("width", d.iH);
        $(G).css("height", d.gH);
        var M = b;
        0 !== M.indexOf("file://") && (M = "file://" + M);
        G.onload = function () {
          var b = J.getContext("2d");
          b.setTransform(1, 0, 0, 1, 0, 0);
          b.drawImage(G, E, N);
          g || $(J).addClass("progressive");
          d.ny(J);
          g && d.ly(J);
          G = null;
          a.utils.isJSWorker && (console.log("[WebViewer|JSWorker]: Deleting file: " + M), a.jsworker.worker.deleteGeneratedImageRenderFile(M));
          m && (q ? l.Eq = !1 : (l.Eq = !0, "function" === typeof l.oy && (l.oy(), l.oy = void 0, l.Eq = !1)))
        };
        G.src = M
      },
      EQ: function (b) {
        if ("Alpha" === b.name) return !0;
        for (var c = 0; c < this.ee.length; ++c)
          if (this.ee[c].name === b.name) return this.ee[c].enabled;
        c = Array(3);
        this.YI(b.color, c);
        b = {
          color: b.color,
          name: b.name,
          rgb: c,
          enabled: !0
        };
        this.ee.push(b);
        this.kj({
          type: "colorSeparationAdded",
          data: b
        });
        return !0
      },
      va: function (b, c) {
        var a = b * c + 128;
        return (a >> 8) + a >> 8
      },
      kb: function (b, c, a) {
        b = b * c + 128;
        b = ((b >> 8) + b >> 8) + a;
        return 255 > b ? b : 255
      },
      YI: function (b, c) {
        var a = b[0],
          f = b[1],
          d = b[2],
          g = b[3],
          e = 255 - a,
          h = 255 - f,
          k = 255 - d,
          l = 255 - g,
          m = this.va(this.va(this.va(e, h), k), l),
          n = m,
          r = m,
          q = m,
          m = this.va(this.va(this.va(e, h), k), g),
          n = this.kb(35, m, n),
          r = this.kb(31, m, r),
          q = this.kb(32, m, q),
          m = this.va(this.va(this.va(e, h), d), l),
          n = this.kb(255, m, n),
          r = this.kb(242, m, r),
          m = this.va(this.va(this.va(e, h), d),
            g),
          n = this.kb(28, m, n),
          r = this.kb(26, m, r),
          m = this.va(this.va(this.va(e, f), k), l),
          n = this.kb(236, m, n),
          q = this.kb(140, m, q),
          m = this.va(this.va(this.va(e, f), k), g),
          n = this.kb(36, m, n),
          m = this.va(this.va(this.va(e, f), d), l),
          n = this.kb(237, m, n),
          r = this.kb(28, m, r),
          q = this.kb(36, m, q),
          m = this.va(this.va(this.va(e, f), d), g),
          n = this.kb(34, m, n),
          m = this.va(this.va(this.va(a, h), k), l),
          r = this.kb(173, m, r),
          q = this.kb(239, m, q),
          m = this.va(this.va(this.va(a, h), k), g),
          r = this.kb(15, m, r),
          q = this.kb(36, m, q),
          m = this.va(this.va(this.va(a, h), d), l),
          r = this.kb(166, m, r),
          q = this.kb(80, m, q),
          m = this.va(this.va(this.va(a, h), d), g),
          r = this.kb(19, m, r),
          m = this.va(this.va(this.va(a, f), k), l),
          n = this.kb(46, m, n),
          r = this.kb(49, m, r),
          q = this.kb(146, m, q),
          m = this.va(this.va(this.va(a, f), k), g),
          q = this.kb(2, m, q),
          m = this.va(this.va(this.va(a, f), d), l);
        c[0] = this.kb(54, m, n);
        c[1] = this.kb(54, m, r);
        c[2] = this.kb(57, m, q)
      },
      AM: function (b, c, a, f) {
        for (var d = this, g = b.length - 1; 0 <= g; --g) this.EQ(b[g]) || b.splice(g, 1);
        return function (b, c, a) {
          return new Promise(function (g) {
            function e() {
              for (var b =
                  Math.min(v + q, a); v < b; ++v)
                for (var B = v * c, z = 4 * B, ba = 0; ba < c; ++ba) {
                  u[0] = 0;
                  u[1] = 0;
                  u[2] = 0;
                  for (p = u[3] = 0; p < n; ++p) {
                    var Q = u,
                      S = l[p],
                      U = k[p][B + ba];
                    Q[0] = Math.min(d.va(S[0], U) + Q[0], 255);
                    Q[1] = Math.min(d.va(S[1], U) + Q[1], 255);
                    Q[2] = Math.min(d.va(S[2], U) + Q[2], 255);
                    Q[3] = Math.min(d.va(S[3], U) + Q[3], 255)
                  }
                  d.YI(u, r);
                  Q = z + 4 * ba;
                  m[Q] = r[0];
                  m[Q + 1] = r[1];
                  m[Q + 2] = r[2];
                  m[Q + 3] = h[B + ba]
                }
              v < a ? (b = setImmediate(e), f && (d.Uh[f.id] = b)) : g(m)
            }
            for (var h, k = [], l = [], m = new Uint8ClampedArray(c * a * 4), n = 0, p = 0; p < b.length; ++p) "Alpha" !== b[p].name ? (l.push(b[p].color),
              k.push(new Uint8Array(b[p].data)), ++n) : h = new Uint8Array(b[p].data);
            var r = Array(3),
              u = [0, 0, 0, 0],
              q = Math.ceil(1E5 / c),
              v = 0;
            e()
          })
        }(b, c, a)
      },
      TD: function (b, c, f, d, g, e, h, k) {
        function l(e) {
          function h() {
            g || $(n).addClass("progressive");
            d.page && m.ry(n, d.page.Ra - 1);
            d.ny(n);
            g && d.ly(n, {
              data: b,
              width: c,
              height: f
            });
            g && delete m.Uh[d.id]
          }
          if (a.utils.supportsImageDataConstructor) {
            var k = new a.ImageData(e, c, f);
            J.putImageData(k, r, q, 0, 0, c, f);
            h()
          } else {
            var B = Math.ceil(1E6 / c),
              z = f,
              x = J.createImageData(c, Math.min(B, f)),
              y = 0,
              R = function () {
                var b =
                  Math.min(B, z),
                  a = f - z,
                  k = b * c * 4;
                x.data.set(e.subarray(y, y + k));
                y += k;
                J.putImageData(x, r, q + a, 0, 0, c, b);
                z -= b;
                0 === z ? h() : (b = setImmediate(R), g && (m.Uh[d.id] = b))
              };
            R()
          }
        }
        var m = this,
          n = d.SN ? d.SN : a.o.za.so(d.page, d.av, d.$u, h, e, d.Od, k).canvas,
          r = h && 0 < h.x ? Math.round(h.x) : 0,
          q = h && 0 < h.y ? Math.round(h.y) : 0,
          J = n.getContext("2d");
        b.length ? this.AM(b, c, f, g ? d : null).then(l) : l(new Uint8ClampedArray(b))
      },
      $g: function (c, f, d, g, e, h) {
        var k = this,
          l = b(c, f, d, g, e, h),
          m = l.pageIndex;
        c = l.getZoom();
        d = l.getPageRotation();
        f = l.renderRect;
        e = d === a.o.Sa.Qe ||
          d === a.o.Sa.Zf;
        var n = a.utils.getCanvasMultiplier(),
          r = l.getPageTransform();
        "undefined" === typeof f ? (g = (e ? k.J[m].height : k.J[m].width) * c, e = (e ? k.J[m].width : k.J[m].height) * c) : (g = (e ? f.y2 - f.y1 : f.x2 - f.x1) * c, e = (e ? f.x2 - f.x1 : f.y2 - f.y1) * c);
        g = Math.round(g);
        e = Math.round(e);
        var q = Math.floor(g * n),
          H = Math.floor(e * n);
        if (!q || !H) return d = k.Ba.mq(), this.Uh[d] = setImmediate(function () {
          var b = document.createElement("canvas");
          b.width = q || 1;
          b.height = H || 1;
          l.drawComplete(b)
        }), d;
        var J, n = k.fI ? a.o.Xo.FK : k.fH;
        a.utils.isJSWorker && a.jsworker.worker.useFilePathForImageRenders() ?
          (J = a.jsworker.worker.generateImageRenderFilePath(m), J = a.jsworker.worker.getPlatformFormatFilePath(J), console.log("imageRenderFilePath for page " + m + ' is: "' + J + '".'), n = k.Ba.zO(k.ja, m, q, H, d, k.Lz, n, f, J)) : n = k.Ba.yO(k.ja, m, q, H, d, k.Lz, n, f);
        var E = n.FM,
          N = {
            ny: l.drawProgressive,
            ly: function (b, c) {
              l.drawComplete(b, m, c)
            },
            iH: g,
            gH: e,
            av: c,
            $u: d,
            page: k.J[m],
            Od: f,
            id: E
          },
          G = 1,
          M;
        l.useProgress && (M = setInterval(function () {
          var b;
          a.utils.isJSWorker && a.jsworker.worker.useFilePathForImageRenders ? (b = a.jsworker.worker.generateNextImageRenderFilePath(J,
            G++), b = a.jsworker.worker.getPlatformFormatFilePath(b), b = k.Ba.pF(E, b)) : b = k.Ba.pF(E);
          b.then(function (b) {
            "undefined" !== typeof b.filePath ? k.kG(b.filePath, b.pageWidth, b.pageHeight, N, !1, h, r, l.pageCanvas) : k.TD(b.pageBuf, b.pageWidth, b.pageHeight, N, !1, h, r, l.pageCanvas)
          }, function (b) {
            "type" in b && "Queued" === b.type || clearInterval(M)
          })
        }, a.o.MF()));
        n.promise.then(function (b) {
          clearInterval(M);
          "undefined" !== typeof b.filePath ? k.kG(b.filePath, b.pageWidth, b.pageHeight, N, !0, h, r, l.pageCanvas) : k.TD(b.pageBuf, b.pageWidth,
            b.pageHeight, N, !0, h, r, l.pageCanvas)
        }, function (b) {
          clearInterval(M);
          l.onError(b)
        });
        return E
      },
      cj: function () {},
      $b: function () {
        this.ja && (this.Ba.QM(this.ja), this.Ba.ey(this.ja), this.ja = null);
        this.Va.abort && this.Va.abort()
      },
      vq: function (b, c, a) {
        var f = this;
        return this.hc.then(function () {
          return f.Ba.vq(f.ja, b, c || 612, a || 792)
        })
      },
      Nn: function (b, c, a) {
        var f = this;
        b instanceof h.Document && (b = b.v.ja);
        return this.hc.then(function () {
          return f.Ba.Nn(f.ja, b, c, a, !0)
        })
      },
      Lq: function (b, c) {
        var a = this;
        return this.hc.then(function () {
          return a.Ba.Lq(a.ja,
            b, c)
        })
      },
      ao: function (b) {
        var c = this;
        b.sort(e);
        return this.hc.then(function () {
          return c.Ba.ao(c.ja, b)
        })
      },
      ln: function () {
        return this.Ba.ln(this.ja, this.Lz)
      },
      fo: function (b, c) {
        var a = this;
        b.sort(e);
        return this.hc.then(function () {
          return a.Ba.fo(a.ja, b, c)
        })
      },
      mn: function (b, c) {
        var a = this;
        return this.hc.then(function () {
          return a.Ba.mn(a.ja, b, c).then(function (b) {
            return b.fileData
          })
        })
      },
      an: function (b, c, a, f, d) {
        var g = this;
        b.sort(e);
        return this.hc.then(function () {
          return g.Ba.an(g.ja, b, c, a, f, d)
        })
      },
      nq: function (b) {
        return this.J[b].id
      },
      An: function () {
        return Object.keys(this.bv)
      },
      zn: function () {
        var b = this;
        if ("undefined" === typeof a.PDFNet) throw Error("getPDFDoc called without PDFNet being loaded. Are you running a lean version of PDFNetJS?");
        return b.Ba.zn(b.ja).then(function (c) {
          c = new a.PDFNet.PDFDoc(c);
          c.documentCompletePromise = b.hc;
          return c
        })
      },
      vn: function () {
        return this.Ba.vn(this.ja).then(function (b) {
          return b
        })
      },
      Ev: function (b) {
        this.Lz = b
      },
      Gv: function (b) {
        this.fH = b
      },
      zl: function (b) {
        if (1 !== arguments.length) throw new RangeError(arguments.length +
          " arguments passed into function 'requirePage'. Expected 1 argument. Function Signature: requirePage(number)");
        if (b instanceof Promise) throw new TypeError("Received a Promise object in 1st input argument 'requirePage'. Promises require a 'yield' statement before being accessed.");
        if ("number" !== typeof b) throw new TypeError("1st input argument '" + b + "' in function 'requirePage' is of type '" + typeof b + "'. Expected type 'number'. Function Signature: requirePage(number).");
        if (0 >= b) throw Error("1st input argument '" +
          b + "' in function 'requirePage' is invalid. Expected number between 1 and number of pages in the document.");
        return this.tj ? this.Ba.zl(this.ja, b) : Promise.resolve()
      },
      zj: function (b, c, f) {
        var d = "page" === f;
        f = this.J[b];
        var g = a.utils.getCanvasMultiplier(),
          d = d ? 2E3 : 150 * g,
          e = f.width > f.height ? d / f.width : d / f.height,
          e = e / g;
        return this.$g({
          pageIndex: b,
          getZoom: function () {
            return e
          },
          getPageRotation: function () {
            return a.o.Sa.Mh
          },
          drawComplete: function (b) {
            c(b)
          },
          drawProgressive: function () {},
          useProgress: !1,
          pageCanvas: !0
        })
      },
      bj: g,
      Fh: g,
      vj: function () {
        return !1
      },
      Dl: function (b) {
        this.tj && this.Ba.Dl(this.ja, b)
      },
      Kt: function (b) {
        this.fI = b
      },
      Xt: function () {
        return this.ee
      },
      Lt: function (b, c) {
        for (var a = 0; a < this.ee.length; ++a)
          if (this.ee[a].name === b) {
            this.ee[a].enabled = c;
            break
          }
      },
      wo: function () {
        return !this.tj
      },
      Vt: function (b) {
        return b
      },
      Wt: function (b, c) {
        var a = this.Vt(c),
          f = this.Ba.Wt(this.ja, b).then(function (b) {
            return d(b.data)
          });
        this.Om.OD(a, f);
        return f
      }
    });
    _(h.zr.prototype).extend(Backbone.Events);
    a.Zo = c
  })(window);
  (function (a) {
    a.Annotations = a.Annotations || {};
    var e = a.Annotations;
    e.Color = function (a, c, b, f) {
      this.A = this.B = this.G = this.R = 0;
      a instanceof e.Color ? (this.R = a.R, this.G = a.G, this.B = a.B, this.A = a.A) : _.isArray(a) ? 1 === a.length ? (this.B = this.G = this.R = a = Math.round(255 * (a[0] || 0)), this.A = 1) : 3 === a.length ? (this.R = Math.round(255 * (a[0] || 0)), this.G = Math.round(255 * (a[1] || 0)), this.B = Math.round(255 * (a[2] || 0)), this.A = 1) : 4 === a.length && (c = a[1] || 0, b = a[2] || 0, f = a[3] || 0, this.R = Math.round(255 * (1 - (a[0] || 0)) * (1 - f)), this.G = Math.round(255 *
        (1 - c) * (1 - f)), this.B = Math.round(255 * (1 - b) * (1 - f)), this.A = 1) : _.isString(a) && "#" === a[0] ? (a = e.ba.hj(a), this.R = a.R, this.G = a.G, this.B = a.B, this.A = 1) : (_.isUndefined(a) || (this.R = Number(a)), _.isUndefined(c) || (this.G = Number(c)), _.isUndefined(b) || (this.B = Number(b)), _.isUndefined(f) ? _.isUndefined(a) && _.isUndefined(c) && _.isUndefined(b) || (this.A = 1) : this.A = Number(f))
    };
    e.Color.prototype = {
      toString: function () {
        var a = this.R + "," + this.G + "," + this.B;
        return "undefined" === typeof this.A ? "rgb(" + a + ")" : "rgba(" + a + "," + this.A + ")"
      },
      toHexString: function () {
        return e.ba.lg(this)
      },
      nU: function () {
        return e.ba.toFixed(this.R / 255, 3) + " " + e.ba.toFixed(this.G / 255, 3) + " " + e.ba.toFixed(this.B / 255, 3) + " rg"
      },
      dl: function () {
        return 0 === this.R && 0 === this.G && 0 === this.B && 1 === this.A
      },
      CG: function () {
        return 0 === this.A
      }
    };
    e.Point = function (a, c) {
      this.x = a;
      this.y = c;
      "string" === typeof a && (this.x = parseFloat(a));
      "string" === typeof c && (this.y = parseFloat(c))
    };
    e.Point.prototype = {
      toString: function () {
        return "[Point: x=" + this.x + " y=" + this.y + "]"
      }
    };
    e.bb = function (a, c, b, f, g,
      e, l, k) {
      this.x1 = a;
      this.y1 = c;
      this.x2 = b;
      this.y2 = f;
      this.x3 = g;
      this.y3 = e;
      this.x4 = l;
      this.y4 = k
    };
    e.bb.prototype = {
      normalize: function () {},
      Gy: function () {
        var a = [];
        a.push(this.x1);
        a.push(this.y1);
        a.push(this.x2);
        a.push(this.y2);
        a.push(this.x3);
        a.push(this.y3);
        a.push(this.x4);
        a.push(this.y4);
        return a
      }
    };
    e.Rect = function (a, c, b, f) {
      a instanceof e.Rect ? (this.x1 = a.x1, this.y1 = a.y1, this.x2 = a.x2, this.y2 = a.y2) : _.isArray(a) ? (this.x1 = a[0], this.y1 = a[1], this.x2 = a[2], this.y2 = a[3]) : _.isObject(a) ? (this.x1 = a.x1, this.y1 = a.y1, this.x2 =
        a.x2, this.y2 = a.y2) : (this.x1 = a, this.y1 = c, this.x2 = b, this.y2 = f)
    };
    e.Rect.prototype = {
      ya: function () {
        return this.x2 - this.x1
      },
      xa: function () {
        return this.y2 - this.y1
      },
      translate: function (a, c) {
        this.x1 += a;
        this.y1 += c;
        this.x2 += a;
        this.y2 += c
      },
      Pt: function (a) {
        var c = 0,
          b = 0;
        if (this.ya() <= a.ya()) {
          var f = a.x2 - this.x2;
          0 > f && (c = f);
          f = a.x1 - this.x1;
          0 < f && (c = f)
        }
        this.xa() <= a.xa() && (f = a.y2 - this.y2, 0 > f && (b = f), a = a.y1 - this.y1, 0 < a && (b = a));
        this.translate(c, b)
      },
      normalize: function () {
        var a;
        0 > this.ya() && (a = this.x1, this.x1 = this.x2, this.x2 = a);
        0 > this.xa() && (a = this.y1, this.y1 = this.y2, this.y2 = a)
      },
      cO: function () {
        var a;
        this.x1 > this.x2 && (a = this.x1, this.x1 = this.x2, this.x2 = a);
        this.y2 > this.y1 && (a = this.y1, this.y1 = this.y2, this.y2 = a)
      },
      isEqual: function (a) {
        return this.x1 === a.x1 && this.y1 === a.y1 && this.x2 === a.x2 && this.y2 === a.y2
      },
      DG: function () {
        return 0 === this.x1 && 0 === this.y1 && 0 === this.x2 && 0 === this.y2
      }
    };
    e.Math = {};
    e.Math.jR = function (a, c) {
      return a instanceof e.Point && c instanceof e.Point ? new e.Point((a.x + c.x) / 2, (a.y + c.y) / 2) : null
    };
    e.Math.distance = function (a,
      c) {
      if (!(a instanceof e.Point && c instanceof e.Point)) return null;
      var b = a.x - c.x,
        f = a.y - c.y;
      return Math.sqrt(b * b + f * f)
    };
    e.ControlHandle = function (a, c, b, f) {
      this.x = a;
      this.y = c;
      this.width = b;
      this.height = f
    };
    e.ControlHandle.handleWidth = 12;
    e.ControlHandle.handleHeight = 12;
    e.ControlHandle.selectionAccuracyPadding = 1;
    e.ControlHandle.prototype = {
      testSelection: function (a, c, b, f, g) {
        a = this.getDimensions(a, c, b);
        c = 0;
        1 < e.ControlHandle.selectionAccuracyPadding && (c = e.ControlHandle.selectionAccuracyPadding);
        return f >= a.x1 - c &&
          f <= a.x1 + a.ya() + c && g >= a.y1 - c && g <= a.y1 + a.xa() + c
      },
      draw: function (a, c, b, f) {
        "undefined" === typeof f && (f = 1);
        this.Ec(a, f);
        var g = this.getDimensions(c, b, f);
        c = g.x1;
        b = g.y1;
        f = g.ya();
        g = g.xa();
        a.beginPath();
        a.arc(c + f / 2, b + g / 2, f / 2, 0, 2 * Math.PI);
        a.stroke();
        a.fill()
      },
      Ec: function (a, c) {
        a.strokeStyle = e.SelectionModel.defaultSelectionOutlineColor.toString();
        a.fillStyle = "rgb(255, 255, 255)";
        a.lineWidth = e.SelectionModel.selectionOutlineThickness / c
      },
      move: function () {
        console.warn("ControlHandle move() not implemented")
      },
      getDimensions: function () {
        console.warn("ControlHandle getDimensions() not implemented");
        return new e.Rect(0, 0, 0, 0)
      }
    };
    e.He = function (a, c, b, f) {
      this.width = a;
      this.height = c;
      this.Af = b;
      this.rg = f
    };
    e.He.prototype = {
      getDimensions: function (a, c, b) {
        a = c.x1;
        var f = c.y1,
          g = this.width / b;
        b = this.height / b;
        this.Af === e.oa.nc.left ? a += -(g / 2) : this.Af === e.oa.nc.ot ? a += (c.ya() - g) / 2 : this.Af === e.oa.nc.right ? a += c.ya() - g / 2 : console.warn("Invalid HorizonalAlignment");
        this.rg === e.oa.Gc.top ? f += -(b / 2) : this.rg === e.oa.Gc.Lu ? f += (c.xa() - b) / 2 : this.rg === e.oa.Gc.bottom ? f += c.xa() - b / 2 : console.warn("Invalid VerticalAlignment");
        return new e.Rect(a,
          f, a + g, f + b)
      },
      move: function (a, c, b) {
        var f = c || b;
        if (!f) return !1;
        var g = a.we();
        if (a.MaintainAspectRatio) {
          var h = a.Width,
            l = a.Height;
          if (h > l) {
            if (b = l / h * (h + c) - l, this.Af === e.oa.nc.left && this.rg === e.oa.Gc.bottom || this.Af === e.oa.nc.right && this.rg === e.oa.Gc.top) b *= -1
          } else if (c = h / l * (l + b) - h, this.Af === e.oa.nc.left && this.rg === e.oa.Gc.bottom || this.Af === e.oa.nc.right && this.rg === e.oa.Gc.top) c *= -1
        }
        this.Af === e.oa.nc.left ? g.x1 += c : this.Af === e.oa.nc.right && (g.x2 += c);
        this.rg === e.oa.Gc.top ? g.y1 += b : this.rg === e.oa.Gc.bottom && (g.y2 +=
          b);
        a.resize(g);
        return f
      }
    };
    e.He.prototype = $.extend(!0, new e.ControlHandle, e.He.prototype);
    e.ik = function (a, c, b, f, g) {
      this.x = a;
      this.y = c;
      this.width = b;
      this.height = f;
      this.hl = g
    };
    e.ik.prototype = {
      getDimensions: function (a, c, b) {
        a = this.width / b;
        b = this.height / b;
        return this.hl ? new e.Rect(this.x - .5 * a, this.y, this.x + .5 * a, this.y + b) : new e.Rect(this.x - .5 * a, this.y - b, this.x + .5 * a, this.y)
      },
      move: function (a, c, b, f, g, e) {
        b = a.Re();
        c = b[0];
        if ("undefined" === typeof c) return !1;
        b = b[b.length - 1];
        e = new window.ia.le(e);
        e.annotation = a;
        e.pageCoordinates[0] =
          g;
        f = Math.min(c.x1, c.x2, c.x3, c.x4);
        a = Math.max(b.x1, b.x2, b.x3, b.x4);
        c = Math.min(c.y1, c.y2, c.y3, c.y4);
        b = Math.max(b.y1, b.y2, b.y3, b.y4);
        this.hl ? c = {
          x: f + 1,
          y: c,
          pageIndex: g.pageIndex
        } : (c = g, g = {
          x: a - 1,
          y: b,
          pageIndex: g.pageIndex
        });
        if (g.y < c.y) return !1;
        (c.x < g.x || c.y < g.y) && e.select(c, g);
        return !0
      },
      draw: function (a, c, b, f) {
        var g, h, l, k;
        this.Ec(a, f);
        g = c.Re();
        this.hl ? (k = g[g.length - 1], g = k.x2, h = k.y2, l = k.x3, k = k.y3) : (k = g[0], g = k.x1, h = k.y1, l = k.x4, k = k.y4);
        a.beginPath();
        a.moveTo(g, h);
        a.lineTo(l, k);
        a.stroke();
        e.ControlHandle.prototype.draw.call(this,
          a, c, b, f)
      }
    };
    e.ik.prototype = $.extend(!0, new e.ControlHandle, e.ik.prototype);
    e.Cg = function (a, c, b, f, g) {
      this.x = a;
      this.y = c;
      this.width = b;
      this.height = f;
      this.Cc = g
    };
    e.Cg.prototype = {
      getDimensions: function (a, c, b) {
        a = this.width / b;
        b = this.height / b;
        c = this.x - .5 * a;
        var f = this.y - .5 * b;
        return new e.Rect(c, f, c + a, f + b)
      },
      move: function (a, c, b) {
        var f = a.Rh(this.Cc);
        a.Hf(this.Cc, f.x + c, f.y + b);
        return !0
      }
    };
    e.Cg.prototype = $.extend(!0, new e.ControlHandle, e.Cg.prototype);
    e.Qr = function (a, c, b, f, g) {
      e.Cg.apply(this, arguments)
    };
    e.Qr.prototype = {
      move: function (a, c, b, f, g) {
        e.Cg.prototype.move.apply(this, arguments);
        if (0 === this.Cc) {
          var h = a.Rh(0);
          a.Hf(a.getPath().length - 1, h.x, h.y)
        }
        return !0
      }
    };
    e.Qr.prototype = $.extend(!0, new e.Cg, e.Qr.prototype);
    e.Cr = function (a, c, b, f, g) {
      this.x = a;
      this.y = c;
      this.width = b;
      this.height = f;
      this.Cc = g
    };
    e.Cr.prototype = {
      move: function (a, c, b, f, g, h) {
        g = a.getPath().length - 4;
        f = g + 1;
        var l = f + 1,
          k = l + 1;
        g = a.Rh(g);
        var m = a.Rh(f),
          n = a.Rh(l),
          r = a.Rh(k);
        if (this.Cc === l) {
          if (r.y < n.y + b || r.x < n.x + c) return
        } else if (this.Cc === k && (r.y + b < n.y || r.x + c < n.x)) return;
        c = e.Cg.prototype.move.call(this, a, c, b);
        this.Cc === l && (r.y < n.y && a.Hf(l, n.x, r.y), r.x < n.x && a.Hf(l, r.x, n.y), a.Hf(f, n.x, n.y + .5 * (r.y - n.y)), c = !0);
        this.Cc === k && (r.y < n.y && a.Hf(l, r.x, n.y), r.x < n.x && a.Hf(l, n.x, r.y), a.Hf(f, m.x, n.y + .5 * (r.y - n.y)), c = !0);
        h = h.Oc(a.Kb());
        h = a.mj(h) / 2;
        b = e.Math.jR(n, r);
        h = [new e.Point(b.x, n.y + h), new e.Point(b.x, r.y - h), new e.Point(n.x + h, b.y), new e.Point(r.x - h, b.y)];
        n = [e.Math.distance(g, h[0]), e.Math.distance(g, h[1]), e.Math.distance(g, h[2]), e.Math.distance(g, h[3])];
        n = n.indexOf(Math.min.apply(Math,
          n));
        if (g.x !== h[n].x || g.y !== h[n].y) a.Hf(f, h[n].x, h[n].y), c = !0;
        return c
      }
    };
    e.Cr.prototype = $.extend(!0, new e.Cg, e.Cr.prototype);
    e.cm = function (a, c, b, f, g) {
      this.x = a;
      this.y = c;
      this.width = b;
      this.height = f;
      this.hl = g
    };
    e.cm.prototype = {
      getDimensions: function (a, c, b) {
        a = this.width / b;
        b = this.height / b;
        c = this.x - .5 * a;
        var f = this.y - .5 * b;
        return new e.Rect(c, f, c + a, f + b)
      },
      move: function (a, c, b) {
        this.hl ? (a.End.x += c, a.End.y += b) : (a.Start.x += c, a.Start.y += b);
        a.adjustRect();
        return !0
      }
    };
    e.cm.prototype = $.extend(!0, new e.ControlHandle, e.cm.prototype);
    e.SelectionModel = function (a, c, b) {
      this.Lc = [];
      this.Sw = c;
      this.hx = b
    };
    e.SelectionModel.selectionOutlineThickness = 2;
    e.SelectionModel.selectionAccuracyPadding = 2;
    e.SelectionModel.defaultSelectionOutlineColor = new e.Color(65, 140, 252);
    e.SelectionModel.defaultNoPermissionSelectionOutlineColor = new e.Color(255, 0, 0);
    e.SelectionModel.selectionOutlineDashSize = 4;
    e.SelectionModel.prototype = {
      testSelection: function (a, c, b) {
        return e.pc.Rm(a, c, b)
      },
      mr: function (a, c, b, f) {
        for (var g = this.Lc.length - 1; 0 <= g; g--) {
          var e = this.Lc[g];
          if (e.testSelection(a, this.getDimensions(a), c, b, f)) return e
        }
      },
      EO: function () {
        return this.Lc
      },
      getDimensions: function (a) {
        return new e.Rect(a.X, a.Y, a.X + a.Width, a.Y + a.Height)
      },
      Dd: function () {
        return this.Sw
      },
      draw: function (a, c, b, f) {
        a.save();
        this.drawSelectionOutline(a, c, b, f);
        a.restore();
        for (f = 0; f < this.Lc.length; f++) this.Lc[f] && this.Lc[f].draw(a, c, this.getDimensions(c), b)
      },
      drawSelectionOutline: function (a, c, b) {
        a.save();
        c = this.getDimensions(c);
        "undefined" === typeof b && (b = 1);
        a.lineWidth = e.SelectionModel.selectionOutlineThickness /
          b;
        this.Dd() ? a.strokeStyle = e.SelectionModel.defaultSelectionOutlineColor.toString() : a.strokeStyle = e.SelectionModel.defaultNoPermissionSelectionOutlineColor.toString();
        a.beginPath();
        a.moveTo(c.x1, c.y1);
        a.lineTo(c.x2, c.y1);
        a.lineTo(c.x2, c.y2);
        a.lineTo(c.x1, c.y2);
        a.closePath();
        a.stroke();
        "undefined" !== typeof a.setLineDash || "undefined" !== typeof a.mozDash ? (b = e.SelectionModel.selectionOutlineDashSize / b, b = [b, b], a.setLineDash ? a.setLineDash(b) : a.mozDash = b) : a.lineWidth /= 2;
        a.strokeStyle = "rgb(255, 255, 255)";
        a.beginPath();
        a.moveTo(c.x1, c.y1);
        a.lineTo(c.x2, c.y1);
        a.lineTo(c.x2, c.y2);
        a.lineTo(c.x1, c.y2);
        a.closePath();
        a.stroke();
        a.restore()
      }
    };
    e.Or = function () {
      e.SelectionModel.call(this, 0, !1, !1)
    };
    e.Or.prototype = {
      testSelection: function () {
        return !1
      },
      getDimensions: function () {
        return new e.Rect(0, 0, 0, 0)
      },
      draw: function () {},
      drawSelectionOutline: function () {}
    };
    e.Or.prototype = $.extend(!0, new e.SelectionModel, e.Or.prototype);
    e.oa = function (a, c, b) {
      e.SelectionModel.call(this, 0, c, b);
      b = e.ControlHandle.handleWidth;
      var f = e.ControlHandle.handleHeight;
      (this.Sw = c) ? (this.Lc = [new e.He(b, f, e.oa.nc.left, e.oa.Gc.top), new e.He(b, f, e.oa.nc.left, e.oa.Gc.Lu), new e.He(b, f, e.oa.nc.left, e.oa.Gc.bottom), new e.He(b, f, e.oa.nc.ot, e.oa.Gc.top), new e.He(b, f, e.oa.nc.ot, e.oa.Gc.bottom), new e.He(b, f, e.oa.nc.right, e.oa.Gc.top), new e.He(b, f, e.oa.nc.right, e.oa.Gc.Lu), new e.He(b, f, e.oa.nc.right, e.oa.Gc.bottom)], a.MaintainAspectRatio && (this.Lc.splice(3, 2), this.Lc.splice(1, 1), this.Lc.splice(-2, 1))) : this.Lc = []
    };
    e.oa.nc = {
      left: 1,
      ot: 2,
      right: 4
    };
    e.oa.Gc = {
      top: 16,
      Lu: 32,
      bottom: 64
    };
    e.oa.prototype = {
      testSelection: function (a, c, b, f) {
        return this.hx ? e.pc.Rm(a, c, b) : e.pc.Mp(a, c, b, f)
      },
      getDimensions: function (a) {
        return new e.Rect(a.X, a.Y, a.X + a.Width, a.Y + a.Height)
      }
    };
    e.oa.prototype = $.extend(!0, new e.SelectionModel, e.oa.prototype);
    e.fm = function (a, c, b) {
      e.SelectionModel.call(this, 0, c, b);
      if (c)
        for (a = a.getPath(), c = 0; c < a.length; c++) b = a[c], this.Lc.push(new e.Cg(b.x, b.y, e.ControlHandle.handleWidth, e.ControlHandle.handleHeight, c))
    };
    e.fm.prototype = {
      testSelection: function (a, c, b, f) {
        return this.hx ? e.pc.Rm(a,
          c, b) : e.pc.Mp(a, c, b, f)
      },
      draw: function (a, c, b) {
        e.SelectionModel.prototype.draw.call(this, a, c, b)
      }
    };
    e.fm.prototype = $.extend(!0, new e.SelectionModel, e.fm.prototype);
    e.Aw = function (a, c, b) {
      e.SelectionModel.call(this, 0, c, b);
      if (c)
        for (a = a.getPath(), c = 0; c < a.length - 1; c++) b = a[c], this.Lc.push(new e.Qr(b.x, b.y, e.ControlHandle.handleWidth, e.ControlHandle.handleHeight, c))
    };
    e.Aw.prototype = $.extend(!0, new e.SelectionModel, e.Aw.prototype);
    e.Vo = function (a, c, b) {
      e.SelectionModel.call(this, 0, c, b);
      this.Lc = c ? [new e.cm(a.Start.x,
        a.Start.y, e.ControlHandle.handleWidth, e.ControlHandle.handleHeight, 0), new e.cm(a.End.x, a.End.y, e.ControlHandle.handleWidth, e.ControlHandle.handleHeight, 1)] : []
    };
    e.Vo.prototype = {
      testSelection: function (a, c, b, f) {
        return e.pc.Mp(a, c, b, f)
      },
      drawSelectionOutline: function (a, c, b, f) {
        "undefined" === typeof b && (b = 1);
        a.lineWidth = e.SelectionModel.selectionOutlineThickness / b;
        var g = Math.atan((c.End.y - c.Start.y) / (c.End.x - c.Start.x)),
          h = Math.max(.5 * c.mj(f), 1) * Math.sin(g);
        f = Math.max(.5 * c.mj(f), 1) * Math.cos(g);
        this.Dd() ? a.strokeStyle =
          e.SelectionModel.defaultSelectionOutlineColor.toString() : a.strokeStyle = e.SelectionModel.defaultNoPermissionSelectionOutlineColor.toString();
        a.beginPath();
        a.moveTo(c.Start.x + h, c.Start.y - f);
        a.lineTo(c.End.x + h, c.End.y - f);
        a.stroke();
        a.beginPath();
        a.moveTo(c.Start.x - h, c.Start.y + f);
        a.lineTo(c.End.x - h, c.End.y + f);
        a.stroke();
        "undefined" !== typeof a.setLineDash || "undefined" !== typeof a.mozDash ? (b = e.SelectionModel.selectionOutlineDashSize / b, b = [b, b], a.setLineDash ? a.setLineDash(b) : a.mozDash = b) : a.lineWidth /= 2;
        a.strokeStyle =
          "rgb(255, 255, 255)";
        a.beginPath();
        a.moveTo(c.Start.x + h, c.Start.y - f);
        a.lineTo(c.End.x + h, c.End.y - f);
        a.stroke();
        a.beginPath();
        a.moveTo(c.Start.x - h, c.Start.y + f);
        a.lineTo(c.End.x - h, c.End.y + f);
        a.stroke()
      }
    };
    e.Vo.prototype = $.extend(!0, new e.oa, e.Vo.prototype);
    e.To = function (a, c, b) {
      e.oa.apply(this, arguments)
    };
    e.To.prototype = {
      getDimensions: function (a) {
        return e.SelectionModel.prototype.getDimensions.apply(this, arguments)
      },
      testSelection: function (a, c, b) {
        return e.pc.Rm(a, c, b)
      }
    };
    e.To.prototype = $.extend(!0, new e.oa,
      e.To.prototype);
    e.Dr = function (a, c, b) {
      e.SelectionModel.call(this, 0, c, b);
      if (c)
        for (a = a.getPath(), c = 0; c < a.length; c++) c !== a.length - 3 && (b = a[c], this.Lc.push(new e.Cr(b.x, b.y, e.ControlHandle.handleWidth, e.ControlHandle.handleHeight, c)))
    };
    e.Dr.prototype = {
      testSelection: function (a, c, b, f) {
        if (this.hx) return e.pc.Rm(a, c, b);
        var g = a.getPath().slice(-2),
          h = g[0],
          g = g[1];
        return c < h.x || c > g.x || b < h.y || b > g.y ? e.pc.Mp(a, c, b, f) : !0
      }
    };
    e.Dr.prototype = $.extend(!0, new e.SelectionModel, e.Dr.prototype);
    e.jk = function (a, c, b, f, g) {
      e.SelectionModel.call(this,
        0, c, b);
      this.Sw = c;
      if (a = a.Re()) _.isUndefined(f) && (f = !0), _.isUndefined(g) && (g = !0), this.Lc = [], c && (c = a[0], a = a[a.length - 1], c && (this.Lc = [], f && this.Lc.push(new e.ik(c.x1, c.y3, e.ControlHandle.handleWidth, e.ControlHandle.handleHeight, !1)), g && this.Lc.push(new e.ik(a.x3, a.y1, e.ControlHandle.handleWidth, e.ControlHandle.handleHeight, !0))))
    };
    e.jk.prototype = {
      testSelection: function (a, c, b) {
        return e.pc.XI(a, c, b)
      },
      getDimensions: function (a) {
        var c = a.X - 2,
          b = a.Y - 2;
        return new e.Rect(c, b, c + (a.Width + 4), b + (a.Height + 4))
      }
    };
    e.jk.prototype =
      $.extend(!0, new e.SelectionModel, e.jk.prototype);
    e.ep = function (a, c, b) {
      e.SelectionModel.call(this, 0, c, b)
    };
    e.ep.prototype = {
      testSelection: function (a, c, b, f, g) {
        f = a.NoZoom ? g : 1;
        a = new e.Rect(a.wn(), a.Dn(), a.wn() + a.SIZE / f, a.Dn() + a.SIZE / f);
        return c >= a.x1 && c <= a.x2 && b >= a.y1 && b <= a.y2
      },
      getDimensions: function (a) {
        return new e.Rect(a.X, a.Y, a.X + a.SIZE, a.Y + a.SIZE)
      }
    };
    e.ep.prototype = $.extend(!0, new e.SelectionModel, e.ep.prototype);
    e.pc = {
      Rm: function (a, c, b) {
        a = a.we();
        return c >= a.x1 && c <= a.x2 && b >= a.y1 && b <= a.y2
      },
      Mp: function (a,
        c, b, f) {
        var g;
        e.pc.jG ? g = e.pc.jG : (g = document.createElement("canvas"), e.pc.jG = g);
        var h = g.getContext("2d");
        g.width = 4;
        g.height = 4;
        h.setTransform(1, 0, 0, 1, -(c - a.Gn()), -(b - a.Hn()));
        c = a.StrokeThickness;
        a.Li = c + e.pc.canvasVisibilityPadding;
        h.translate(-1 * a.Gn(), -1 * a.Hn());
        a.draw(h, f);
        f = 1 < h.getImageData(0, 0, 1, 1).data[3];
        h.setTransform(1, 0, 0, 1, 0, 0);
        h.clearRect(0, 0, 2, 2);
        a.Li = c;
        return f
      },
      XI: function (a, c, b) {
        a = a.Quads;
        for (var f = 0; f < a.length; f++) {
          var g = a[f],
            e = Math.min(g.y1, g.y2, g.y3, g.y4),
            l = Math.max(g.y1, g.y2, g.y3,
              g.y4),
            k = Math.max(g.x1, g.x2, g.x3, g.x4);
          if (c >= Math.min(g.x1, g.x2, g.x3, g.x4) && c <= k && b >= e && b <= l) return !0
        }
        return !1
      }
    };
    e.pc.canvasVisibilityPadding = 5
  })(window);
  (function (a) {
    function e() {
      return "url(" + a.o.Zk() + "dragginghand.cur), url(" + a.o.Zk() + "dragginghand.png), pointer"
    }

    function d() {
      return "url(" + a.o.Zk() + "hand.cur), url(" + a.o.Zk() + "hand.png), pointer"
    }

    function c(b, a) {
      g !== a && (b.Qc().css("cursor", a), g = a)
    }
    var b = XODText,
      f = "../core/assets/";
    a.o.BT = function (b) {
      b.lastIndexOf("/") !== b.length - 1 && (b += "/");
      f = b
    };
    a.o.Zk = function () {
      return f
    };
    var g;
    a.ia = function () {};
    var h = a.ia;
    h.xV = {};
    h.Tool = function (b) {
      this.Bb = this.Ld = null;
      this.u = this.docViewer = b;
      this.pageCoordinates = []
    };
    h.Tool.ENABLE_TEXT_SELECTION = !0;
    h.Tool.ENABLE_AUTO_SWITCH = !0;
    h.Tool.ENABLE_ANNOTATION_HOVER_CURSORS = !0;
    h.Tool.ALLOW_ANNOTS_OUTSIDE_PAGE = !1;
    h.Tool.prototype = {
      bg: function (b) {
        var a = {},
          c = this.u.Mb(),
          f = c.scrollLeft() || 0,
          c = c.scrollTop() || 0;
        b.originalEvent && b.originalEvent.touches ? (b = 0 === b.originalEvent.touches.length ? b.originalEvent.changedTouches[0] : b.originalEvent.touches[0], a.x = f + b.clientX, a.y = c + b.clientY) : (a.x = f + b.pageX, a.y = c + b.pageY);
        return a
      },
      mouseLeftDown: function (b) {
        var a = this.bg(b),
          f = this.u.da;
        this.Ld = a;
        this.Bb = {
          x: a.x,
          y: a.y
        };
        this.pageCoordinates[0] = this.Zd(this.Ld);
        this.pageCoordinates[1] = this.pageCoordinates[0];
        b.data = {
          mouseCoordinate: {
            x: a.x,
            y: a.y
          },
          pageCoordinate: this.pageCoordinates[0]
        };
        (b = f.pn(b)) && (b instanceof Annotations.Hb ? c(this.u, this.cursor) : c(this.u, "move"))
      },
      mouseLeftUp: function (b) {
        var a = this.bg(b);
        this.Bb = a;
        this.pageCoordinates[1] = this.Zd(this.Bb);
        b.data = {
          mouseCoordinate: {
            x: a.x,
            y: a.y
          },
          pageCoordinate: this.pageCoordinates[1]
        }
      },
      mouseMove: function (b) {
        var a = this.bg(b),
          c = this.u.da;
        this.Bb = a;
        var f = this.Zd(this.Bb);
        f && (this.iJ(c, f), this.hJ(c, b), this.yU(c, f));
        if (null !== this.Ld) {
          c = this.Zd(this.Ld);
          if (null === c) return;
          var d = c.pageIndex,
            c = this.u.od(d),
            f = this.u.nd(d),
            d = this.Zd(this.Bb, d);
          h.Tool.ALLOW_ANNOTS_OUTSIDE_PAGE || (0 > d.x && (d.x = 0), 0 > d.y && (d.y = 0), d.x > c && (d.x = c), d.y > f && (d.y = f));
          this.pageCoordinates[1] = d
        } else this.pageCoordinates[1] = this.Zd(this.Bb);
        b.data = {
          mouseCoordinate: {
            x: a.x,
            y: a.y
          },
          pageCoordinate: this.pageCoordinates[1]
        }
      },
      iJ: function (b, a) {
        if (h.Tool.ENABLE_TEXT_SELECTION && h.Tool.ENABLE_AUTO_SWITCH) {
          var c =
            this.u.mu();
          !this.Sc && (c instanceof h.Tj || c instanceof h.lm) && (this.qe && 0 < Object.keys(this.qe).length || 0 < b.ae().length || this.u.dI(a.pageIndex, a, function (b, a) {
            0 < a.length ? this.u.PA(this.u.nz("TextSelect")) : 0 === a.length && this.u.PA(this.u.nz("AnnotationEdit"))
          }.bind(this)))
        }
      },
      hJ: function (b, a) {
        if (h.Tool.ENABLE_ANNOTATION_HOVER_CURSORS) {
          var f = b.pn(a);
          f && f.Listable ? b.cl(f) ? f instanceof Annotations.Hb ? c(this.u, this.cursor) : c(this.u, "move") : c(this.u, "pointer") : c(this.u, this.cursor)
        }
      },
      yU: function (b, a) {
        if (h.Tool.ENABLE_ANNOTATION_HOVER_CURSORS)
          for (var f =
              b.ae(), d = 0; d < f.length; d++) {
            var g = f[d],
              e = (new g.selectionModel(g, b.Dd(g))).mr(g, this.u.tb(g.PageNumber - 1), a.x, a.y);
            if (!e) break;
            g = this.u.ue(g.PageNumber);
            e instanceof Annotations.He ? c(this.u, (e.rg === Annotations.oa.Gc.Lu ? 0 === g % 2 ? "ew" : "ns" : e.Af === Annotations.oa.nc.ot ? 0 === g % 2 ? "ns" : "ew" : e.rg === Annotations.oa.Gc.top ? e.Af === Annotations.oa.nc.right ? 0 === g % 2 ? "nesw" : "nwse" : 0 === g % 2 ? "nwse" : "nesw" : e.Af === Annotations.oa.nc.right ? 0 === g % 2 ? "nwse" : "nesw" : 0 === g % 2 ? "nesw" : "nwse") + "-resize") : e instanceof Annotations.ik ?
              0 === g % 2 ? c(this.u, "ew-resize") : c(this.u, "ns-resize") : c(this.u, "default")
          }
      },
      mouseDoubleClick: function (b) {
        var a = this.bg(b);
        this.Ld = {
          x: a.x,
          y: a.y
        };
        this.Bb = {
          x: a.x,
          y: a.y
        };
        var a = this.u.da,
          c = this.Zd(this.Bb);
        c && (this.Lm = c.x, this.Mm = c.y, (b = a.pn(b)) && !b.Wh() && b.kl() && a.trigger("annotationDoubleClicked", b))
      },
      mouseLeave: function () {},
      tap: function () {},
      keyDown: function () {},
      contextMenu: function () {},
      switchIn: function () {},
      switchOut: function () {
        c(this.u, "default");
        this.u.da.Gd()
      },
      Sg: function () {
        return this.u
      },
      Zd: function (b,
        a) {
        var c = this.docViewer.Wk().ku(b, b);
        if ("undefined" === typeof a) {
          if (c = null === c.first ? c.last : c.first, null === c) return null
        } else c = a;
        c = this.docViewer.Wk().Oj(b, c);
        return {
          pageIndex: c.pageIndex,
          x: c.x,
          y: c.y
        }
      },
      Ec: function (b) {
        var a = this.defaults;
        if (b = b(a)) this.defaults = Object.assign({}, a, b), this.u.trigger("toolUpdated", [this])
      },
      jT: function (b) {
        this.name = b;
        this.u.trigger("toolUpdated", [this])
      }
    };
    var l = h.Tool;
    h.AnnotationSelectTool = function (b) {
      l.call(this, b);
      this.Mm = this.Lm = 0;
      this.Ti = {
        x: 0,
        y: 0
      };
      this.dj = this.vc =
        null;
      this.state = h.AnnotationSelectTool.Qb.NONE;
      this.rf = NaN;
      this.Sc = !1;
      this.cursor = "default";
      this.overrideSelection = !1
    };
    h.AnnotationSelectTool.Qb = {
      NONE: 0,
      mw: 1,
      EB: 2,
      Kr: 3,
      lw: 4
    };
    h.AnnotationSelectTool.PAGE_PADDING = new Annotations.Rect(2, 2, 2, 2);
    h.AnnotationSelectTool.prototype = $.extend(new l, {
      mouseLeftDown: function (b) {
        l.prototype.mouseLeftDown.call(this, b);
        if (this.overrideSelection) this.state = h.AnnotationSelectTool.Qb.NONE;
        else {
          this.Sc = !0;
          this.state = h.AnnotationSelectTool.Qb.NONE;
          var a = this.u.da,
            c = this.Zd(this.Bb);
          if (c) {
            this.rf = c.pageIndex;
            this.Lm = c.x;
            this.Mm = c.y;
            this.Ti.x = this.Lm;
            this.Ti.y = this.Mm;
            for (var f = a.ae(), d = 0; d < f.length; d++) {
              var g = f[d];
              if ("undefined" !== typeof g.selectionModel) {
                var e = (new g.selectionModel(g, a.Dd(g))).mr(g, this.u.tb(g.Kb()), c.x, c.y);
                if (e) {
                  this.vc = g;
                  this.dj = e;
                  !this.vc.NoResize && a.Dd(this.vc) ? this.state = h.AnnotationSelectTool.Qb.lw : (this.state = h.AnnotationSelectTool.Qb.NONE, a.Gd());
                  return
                }
              } else if (console.warn("no selection model for annotation"), this.dj = a.sF(this.rf, c)) {
                this.vc = this.dj.jM;
                !this.vc.NoResize && a.Dd(this.vc) ? this.state = h.AnnotationSelectTool.Qb.EB : (this.state = h.AnnotationSelectTool.Qb.NONE, a.Gd());
                return
              }
            }
            if (0 < a.ae().length && (c = a.kF(b), 0 < c.length)) {
              this.vc = null;
              for (f = 0; f < c.length; ++f)
                if (a.cl(c[f])) {
                  this.vc = c[f];
                  break
                } this.vc || (this.vc = c[0]);
              c = a.cl(this.vc);
              !this.vc.NoMove && a.Dd(this.vc) && c ? this.state = h.AnnotationSelectTool.Qb.mw : b.ctrlKey ? this.state = h.AnnotationSelectTool.Qb.Kr : (this.state = h.AnnotationSelectTool.Qb.NONE, a.Gd());
              return
            }
          }
          a.Gd()
        }
      },
      mouseMove: function (b) {
        l.prototype.mouseMove.call(this,
          b);
        !this.Sc || !this.isSelecting() && (this instanceof h.$o || this instanceof h.Tj) || document.activeElement instanceof HTMLTextAreaElement || document.activeElement instanceof HTMLInputElement || b.preventDefault();
        if (!this.overrideSelection && this.state !== h.AnnotationSelectTool.Qb.NONE) {
          b = this.u.da;
          var a = this.pageCoordinates[1];
          if (a && this.rf === a.pageIndex) {
            var f = a.x - this.Ti.x,
              d = a.y - this.Ti.y;
            if (this.state === h.AnnotationSelectTool.Qb.mw && this.vc) {
              c(this.u, "move");
              var g = b.ae(),
                e, p, u, w, A, B, z, x = !1;
              for (e = 0; e < g.length; e++) u =
                g[e], b.Dd(u) && !u.NoMove && (p = u.we(), x ? (p.x1 < w && (w = p.x1), p.y1 < A && (A = p.y1), p.x2 > B && (B = p.x2), p.y2 > z && (z = p.y2)) : (w = p.x1, A = p.y1, B = p.x2, z = p.y2, x = !0));
              p = this.u.od(this.rf);
              u = this.u.nd(this.rf);
              e = new Annotations.Rect;
              this.u.tb(this.vc.Kb());
              e.x1 = 1 * h.AnnotationSelectTool.PAGE_PADDING.x1;
              e.y1 = 1 * h.AnnotationSelectTool.PAGE_PADDING.y1;
              e.x2 = p - 1 * h.AnnotationSelectTool.PAGE_PADDING.x2;
              e.y2 = u - 1 * h.AnnotationSelectTool.PAGE_PADDING.y2;
              w = Math.max(0 + h.AnnotationSelectTool.PAGE_PADDING.x1, w);
              A = Math.max(0 + h.AnnotationSelectTool.PAGE_PADDING.y1,
                A);
              B = Math.min(B, p - h.AnnotationSelectTool.PAGE_PADDING.x2);
              z = Math.min(z, u - h.AnnotationSelectTool.PAGE_PADDING.y2);
              if (x) {
                w = w + f >= e.x1 || h.Tool.ALLOW_ANNOTS_OUTSIDE_PAGE ? f : e.x1 - w;
                A = A + d >= e.y1 || h.Tool.ALLOW_ANNOTS_OUTSIDE_PAGE ? d : e.y1 - A;
                B = B + f <= e.x2 || h.Tool.ALLOW_ANNOTS_OUTSIDE_PAGE ? f : e.x2 - B;
                z = z + d <= e.y2 || h.Tool.ALLOW_ANNOTS_OUTSIDE_PAGE ? d : e.y2 - z;
                f = 0 <= f ? Math.min(w, B) : Math.max(w, B);
                d = 0 <= d ? Math.min(A, z) : Math.max(A, z);
                this.Ti.x = a.x;
                this.Ti.y = a.y;
                a = {};
                for (e = 0; e < g.length; e++)
                  if (u = g[e], b.Dd(u) && !u.NoMove && (p = u.we(),
                      p.x1 += f, p.y1 += d, p.x2 += f, p.y2 += d, 0 !== f || 0 !== d)) u.resize(p), u.ED = !0, a[u.Ac()] = !0;
                for (var y in a) this.u.da.Hd(parseInt(y, 10))
              }
            } else this.state === h.AnnotationSelectTool.Qb.lw && this.dj && this.vc && (y = this.dj.move(this.vc, f, d, this.Zd(new Annotations.Point(this.Ld.x, this.Ld.y)), a, this.u), this.Ti.x = a.x, this.Ti.y = a.y, y && this.u.da.Zb(this.vc))
          }
        }
      },
      mouseLeftUp: function () {
        if (!this.overrideSelection) {
          this.Sc = !1;
          var b = this.u.da,
            a = b.ae();
          if (this.state === h.AnnotationSelectTool.Qb.mw) {
            for (var f = [], d = 0; d < a.length; d++) {
              var g =
                a[d];
              g.ED && (g.ED = void 0, f.push(g))
            }
            0 < f.length && b.trigger("annotationChanged", [f, "modify"])
          } else this.state === h.AnnotationSelectTool.Qb.EB ? (f = this.dj.jM, this.dj && b.trigger("annotationChanged", [
            [f], "modify"
          ])) : this.state === h.AnnotationSelectTool.Qb.lw && this.vc && b.trigger("annotationChanged", [
            [this.vc], "modify"
          ]);
          0 < a.length ? c(this.u, "default") : c(this.u, this.cursor);
          this.state = h.AnnotationSelectTool.Qb.NONE
        }
      },
      vA: function () {
        this.u.da.gj(this.annotation);
        this.annotation = null
      },
      keyDown: function (b) {
        27 === b.which &&
          void 0 !== this.annotation && null !== this.annotation && this.vA();
        46 !== b.which && 8 !== b.which || a.utils.isEditableElement($(b.target)) || (b = this.u.Wa().ae(), this.u.Wa().cy(b))
      },
      tap: function (b) {
        if (!this.overrideSelection) {
          var a = this.u.Wa(),
            c = a.pn(b);
          if (c) {
            var f = a.cl(c);
            b.originalEvent.ctrlKey || b.originalEvent.metaKey ? f ? a.Tp(c) : a.jo(c) : f || (a.Gd(), a.jo(c));
            this.u.jr("none");
            b.preventDefault()
          }
        }
      },
      isSelecting: function () {
        return this.state !== h.AnnotationSelectTool.Qb.NONE
      }
    });
    h.$o = function (b, a) {
      h.AnnotationSelectTool.call(this,
        b);
      this.sx = {
        x: 0,
        y: 0
      };
      this.zs = !1;
      this.cursor = d();
      this.name = a || "PanTool"
    };
    h.$o.prototype = $.extend(new h.AnnotationSelectTool, {
      switchIn: function () {
        c(this.u, this.cursor)
      },
      mouseLeftDown: function (b) {
        h.AnnotationSelectTool.prototype.mouseLeftDown.call(this, b);
        this.isSelecting() || (this.sx = this.bg(b), this.zs = !0, this.cursor = e(), c(this.u, this.cursor))
      },
      mouseLeftUp: function (b) {
        h.AnnotationSelectTool.prototype.mouseLeftUp.call(this, b);
        this.isSelecting() || (this.cursor = d(), c(this.u, this.cursor), this.zs = !1)
      },
      mouseMove: function (b) {
        h.AnnotationSelectTool.prototype.mouseMove.call(this,
          b);
        if (!this.isSelecting() && this.zs) {
          var a = this.u.Mb(),
            f = this.bg(b);
          b = this.sx.x - f.x;
          f = this.sx.y - f.y;
          this.u.scrollTo((a.scrollLeft() || 0) + b, (a.scrollTop() || 0) + f);
          c(this.u, e())
        }
      },
      mouseLeave: function () {
        this.zs = !1;
        c(this.u, this.cursor)
      }
    });
    h.Sb = function (b) {
      l.call(this, b);
      this.Sc = !1;
      this.cursor = "text"
    };
    h.Sb.SELECTION_MODE = "structural";
    h.Sb.prototype = {
      switchIn: function () {
        this.UD(null, this.u.ue());
        this.u.on("rotationUpdated.textTool", _.bind(this.UD, this))
      },
      switchOut: function (b) {
        l.prototype.switchOut.call(this,
          b);
        this.u.off("rotationUpdated.textTool")
      },
      UD: function (b, f) {
        this.cursor = f === a.o.Sa.Qe || f === a.o.Sa.Zf ? "vertical-text" : "text";
        c(this.u, this.cursor)
      },
      mouseLeftDown: function (b) {
        h.AnnotationSelectTool.prototype.mouseLeftDown.call(this, b);
        this.isSelecting() || (b.altKey && (h.Sb.SELECTION_MODE = "rectangular"), this.Sc = !0, this.u.Qp())
      },
      mouseMove: function (b) {
        h.AnnotationSelectTool.prototype.mouseMove.call(this, b);
        this.isSelecting() || !0 !== this.Sc || (1 !== b.which && 0 !== b.which ? this.Sc = !1 : (b.data && (this.pageCoordinates[1] =
          this.Zd(b.data.mouseCoordinate)), this.select(this.pageCoordinates[0], this.pageCoordinates[1])))
      },
      select: function (a, c) {
        var f = this.u;
        if (a && c) {
          var d, g;
          c.pageIndex >= a.pageIndex ? (d = a, g = c) : (d = c, g = a);
          var e = d.pageIndex,
            l = g.pageIndex;
          if (null !== e && null !== l) {
            var u = new b.Na,
              w = f.v.zc(e);
            1 <= l - e ? u.Ha(d.x, d.y, w.width, w.height) : u.Ha(d.x, d.y, g.x, g.y);
            this.u.Pn = "rectangular" === h.Sb.SELECTION_MODE ? (new XODText.Gi(this.u.getDocument())).eI : (new XODText.Gi(this.u.getDocument())).cI;
            this.u.ii = [
              [e, u]
            ];
            this.u.ko(e, u, _.bind(this.textSelected,
              this));
            for (d = e + 1; d < l; d++) this.u.ii.unshift([d, u]), w = f.v.zc(d), u = new b.Na, u.Ha(0, 0, w.width, w.height), f.ko(d, u, _.bind(this.textSelected, this));
            e !== l && (u = new b.Na, u.Ha(0, 0, g.x, g.y), this.u.ii.unshift([l, u]), f.ko(l, u, _.bind(this.textSelected, this)))
          }
        }
      },
      textSelected: function () {},
      mouseLeftUp: function (b) {
        h.AnnotationSelectTool.prototype.mouseLeftUp.call(this, b);
        this.isSelecting() || (b.altKey && "rectangular" === h.Sb.SELECTION_MODE && (h.Sb.SELECTION_MODE = "structural"), this.Sc = !1)
      }
    };
    h.Sb.prototype = $.extend(new h.AnnotationSelectTool,
      h.Sb.prototype);
    h.lm = function (b, a) {
      h.Sb.call(this, b);
      this.qe = {};
      this.xC = this.oD = this.vm = null;
      this.name = a || "TextSelectTool"
    };
    h.lm.prototype = $.extend(new h.Sb, {
      select: function () {
        this.u.$D();
        this.qe = {};
        h.Sb.prototype.select.apply(this, arguments)
      },
      mouseLeftDown: function (b) {
        this.vm = null;
        var a = this.Zd(this.bg(b));
        if (a) {
          var c = a.pageIndex,
            f = this.wL(c),
            d = this;
          f.Re = function () {
            return d.qe[c]
          };
          var g = !1,
            e = !1,
            l = this.ax();
          0 < l.length && (c === l[0] && (g = !0), c === l[l.length - 1] && (e = !0));
          if (a = (new Annotations.jk(f, !0, !1,
              g, e)).mr(f, this.u.tb(c), a.x, a.y)) this.vm = a, this.vm.hl ? this.oD = this.yL() : this.xC = this.xL()
        }
        this.vm || (h.Sb.prototype.mouseLeftDown.apply(this, arguments), this.qe = {});
        this.Sc = !0
      },
      mouseMove: function (b) {
        b.preventDefault();
        if (this.Sc && this.vm) {
          var a = this.Zd(this.bg(b));
          if (a) {
            var c;
            this.vm.hl ? c = this.oD : (c = a, a = this.xC);
            this.qe = {};
            this.select(c, a)
          }
        } else h.Sb.prototype.mouseMove.apply(this, arguments)
      },
      mouseLeftUp: function () {
        h.Sb.prototype.mouseLeftUp.apply(this, arguments);
        0 < Object.keys(this.qe).length ? (c(this.u,
          "default"), this.ux()) : 0 === this.u.Wa().ae().length && c(this.u, this.cursor)
      },
      textSelected: function (b, a, f) {
        this.u.iv(b, a, f);
        0 < a.length && (c(this.u, "default"), this.qe[b] = a.map(function (b) {
          return b.Vg()
        }));
        this.Sc || this.ux()
      },
      mouseDoubleClick: function () {
        var b = this.pageCoordinates[0];
        if (b) {
          var a = this;
          this.u.dI(b.pageIndex, b, function () {
            a.textSelected.apply(a, arguments);
            a.ux()
          })
        }
      },
      Qp: function () {
        this.qe = {}
      },
      ux: function () {
        var b = this.GC();
        b.quad && this.trigger("selectionComplete", [b, this.qe])
      },
      ax: function () {
        return Object.keys(this.qe).map(function (b) {
          return parseInt(b,
            10)
        }).sort(function (b, a) {
          return b - a
        })
      },
      GC: function () {
        var b = this.ax()[0],
          a = this.qe[b];
        return {
          quad: a ? a[0] : null,
          pageIndex: b
        }
      },
      yL: function () {
        var b = this.GC(),
          a = b.quad;
        return {
          x: a.x1,
          y: (a.y1 + a.y3) / 2,
          pageIndex: b.pageIndex
        }
      },
      xL: function () {
        var b = this.ax(),
          b = b[b.length - 1],
          a = this.qe[b],
          a = a[a.length - 1];
        return {
          x: a.x3,
          y: (a.y1 + a.y3) / 2,
          pageIndex: b
        }
      },
      wL: function (b) {
        var a = Infinity,
          c = Infinity,
          f = 0,
          d = 0;
        if (b = this.qe[b])
          for (var g = 0; g < b.length; ++g) var e = b[g],
            a = Math.min(a, e.x1, e.x2, e.x3, e.x4),
            c = Math.min(c, e.y1, e.y2, e.y3, e.y4),
            f = Math.max(f, e.x1, e.x2, e.x3, e.x4),
            d = Math.max(d, e.y1, e.y2, e.y3, e.y4);
        return {
          X: a,
          Y: c,
          Width: f - a,
          Height: d - c
        }
      }
    }, a.utils.eventHandler);
    h.Fb = function (b, a, c) {
      h.AnnotationSelectTool.call(this, b);
      this.annotation = null;
      this.Ex = a;
      this.cN = c;
      this.cursor = "crosshair";
      this.defaults = {
        StrokeColor: new Annotations.Color(0, 0, 0),
        FillColor: new Annotations.Color(0, 0, 0, 0),
        StrokeThickness: 1,
        Opacity: 1
      }
    };
    h.Fb.prototype = $.extend(new h.AnnotationSelectTool, {
      switchIn: function () {
        c(this.u, this.cursor);
        this.u.fe({
          annotMode: !0
        })
      },
      switchOut: function (b) {
        null !==
          this.annotation && void 0 !== this.annotation && (this.Pp && this.Pp(), this.u.da.gj(this.annotation), this.annotation = null);
        h.AnnotationSelectTool.prototype.switchOut.call(this, b);
        this.u.fe({
          annotMode: !1
        })
      },
      mouseLeftDown: function (b) {
        h.AnnotationSelectTool.prototype.mouseLeftDown.call(this, b);
        if (!this.isSelecting() && !this.annotation && (b = this.pageCoordinates[0])) {
          var a = this.u.da;
          this.annotation = new this.Ex(this.cN);
          this.annotation.X = b.x;
          this.annotation.Y = b.y;
          this.annotation.PageNumber = b.pageIndex + 1;
          this.annotation.Author =
            a.Uk();
          null !== this.annotation.StrokeColor && (b = this.defaults.StrokeColor, this.annotation.StrokeColor = new Annotations.Color(b.R, b.G, b.B, b.A));
          null !== this.annotation.StrokeThickness && (this.annotation.StrokeThickness = this.defaults.StrokeThickness);
          null !== this.annotation.FillColor && (b = this.defaults.FillColor, this.annotation.FillColor = new Annotations.Color(b.R, b.G, b.B, b.A));
          this.annotation.Opacity = this.defaults.Opacity;
          this.annotation.ToolName = this.name;
          this.trigger("annotationCreated", [this.annotation])
        }
      },
      mouseLeftUp: function (b) {
        h.AnnotationSelectTool.prototype.mouseLeftUp.call(this, b);
        this.isSelecting() || this.finish()
      },
      mouseMove: function (b) {
        h.AnnotationSelectTool.prototype.mouseMove.call(this, b);
        if (!this.isSelecting() && this.annotation && "undefined" !== typeof this.pageCoordinates) {
          b = this.pageCoordinates[0];
          var a = this.pageCoordinates[1];
          null !== a && null !== b && b.pageIndex === a.pageIndex && (b = new Annotations.Rect(b.x, b.y, a.x, a.y), b.normalize(), this.annotation.Gl(b), this.u.da.Zb(this.annotation))
        }
      },
      finish: function () {
        if (this.annotation) {
          var b =
            this.annotation.ya(),
            a = this.annotation.xa(),
            c = 2 * (this.annotation.getRectPadding() + 1);
          b <= c && a <= c ? this.u.da.gj(this.annotation) : (this.u.da.Lg(this.annotation), this.trigger("annotationAdded", [this.annotation]));
          this.annotation = null
        }
      }
    }, a.utils.eventHandler);
    new h.Fb;
    h.Tj = function (b, a) {
      h.AnnotationSelectTool.call(this, b);
      this.Aj = null;
      this.name = a || "AnnotationEditTool"
    };
    h.Tj.prototype = $.extend(new h.AnnotationSelectTool, {
      switchIn: function () {
        c(this.u, "default");
        this.u.jr("auto")
      },
      switchOut: function (b) {
        l.prototype.switchOut.call(this,
          b);
        this.u.jr("none")
      },
      jA: function (b) {
        this.pointerType = b.originalEvent.pointerType
      },
      mouseLeftDown: function (b) {
        h.AnnotationSelectTool.prototype.mouseLeftDown.call(this, b);
        if (!this.isSelecting()) {
          this.Sc = !0;
          this.state = h.AnnotationSelectTool.Qb.NONE;
          var c = this.u.da,
            f = this.Zd(this.Bb);
          !f || (b.originalEvent.touches || this.pointerType && "mouse" !== this.pointerType) && this.u.Wk().ic().mode !== a.o.wd.Nf || (this.rf = f.pageIndex, c.Gd(), this.state = h.AnnotationSelectTool.Qb.Kr)
        }
      },
      mouseMove: function (b) {
        h.AnnotationSelectTool.prototype.mouseMove.call(this,
          b);
        if (this.state === h.AnnotationSelectTool.Qb.Kr && (b = this.pageCoordinates[1]) && this.rf === b.pageIndex) {
          var c = b.x,
            f = b.y;
          b = 0 > c - this.Lm ? c : this.Lm;
          var d = 0 > f - this.Mm ? f : this.Mm,
            c = Math.abs(c - this.Lm),
            f = Math.abs(f - this.Mm),
            g = $("#annoteditselectrect");
          0 === g.length && (g = $("<div id='annoteditselectrect' class='ui-selectable-helper'></div>").appendTo(this.u.Qc()));
          var e = this.Bb.x - this.Ld.x,
            l = this.Bb.y - this.Ld.y,
            u = this.u.Mb(),
            w = u.scrollLeft() || 0,
            u = u.scrollTop() || 0,
            A = this.Ld.x - w,
            B = this.Ld.y - u,
            z = this.Bb.x - w,
            x = this.Bb.y -
            u,
            y = this.u.od(this.rf),
            F = this.u.nd(this.rf),
            B = Math.min(x, B),
            A = Math.min(z, A),
            z = this.docViewer.Wk().Ff({
              x: 0,
              y: 0
            }, this.rf),
            L = this.docViewer.Wk().Ff({
              x: y,
              y: F
            }, this.rf),
            y = Math.min(z.x, L.x),
            F = Math.min(z.y, L.y),
            x = Math.max(z.x, L.x),
            z = Math.max(z.y, L.y),
            y = y - w,
            F = F - u;
          F > B && (l += F - B, B = F);
          y > A && (e += y - A, A = y);
          e = a.Td.Math.WD(Math.abs(e), 0, x - w - A);
          l = a.Td.Math.WD(Math.abs(l), 0, z - u - B);
          w = "inline";
          if (5 > e || 5 > l) w = "none";
          g.css({
            width: e,
            height: l,
            top: B,
            left: A,
            "z-index": "44",
            position: "absolute",
            border: "1px dotted black",
            display: w
          });
          this.Aj = a.Td.QG(b, d, c, f)
        }
      },
      mouseLeftUp: function (b) {
        if (this.state !== h.AnnotationSelectTool.Qb.Kr) h.AnnotationSelectTool.prototype.mouseLeftUp.call(this, b);
        else {
          var a = this;
          this.Sc = !1;
          var c = function () {
            a.Aj = null;
            a.state = h.AnnotationSelectTool.Qb.NONE;
            $("#annoteditselectrect").css("display", "none")
          };
          if (!this.Aj || !this.u.Yp) {
            c();
            return
          }
          if (this.Aj.x1 === this.Aj.x2 && this.Aj.y1 === this.Aj.y2) h.AnnotationSelectTool.prototype.mouseLeftUp.call(this, b);
          else {
            var f = this.uL(this.rf, this.Aj);
            this.u.Wa().CA(f)
          }
          c()
        }
        if (c =
          this.pageCoordinates[1]) f = this.u.da, this.iJ(f, c), this.hJ(f, b)
      },
      uL: function (b, c) {
        for (var f, d = [], g = this.u.Wa().Wd.filter(function (a) {
            return a.Kb() === b && a.kl()
          }), e = 0; e < g.length; e++) {
          f = g[e];
          var h = 1;
          !0 === f.NoZoom && (h = this.u.tb(f.Kb()));
          a.Td.bS(c, a.Td.QG(f.wn(), f.Dn(), f.ya() / h, f.xa() / h)) && d.push(f)
        }
        return d
      }
    });
    h.dm = function (b, c) {
      h.Fb.call(this, b, a.Annotations.ke);
      delete this.defaults.FillColor;
      this.name = c || "LineCreateTool"
    };
    h.dm.prototype = $.extend(new h.Fb, {
      mouseLeftDown: function (b) {
        h.Fb.prototype.mouseLeftDown.call(this,
          b);
        this.isSelecting() || this.annotation && (this.annotation.Start = {
          x: this.pageCoordinates[0].x,
          y: this.pageCoordinates[0].y
        })
      },
      mouseMove: function (b) {
        h.AnnotationSelectTool.prototype.mouseMove.call(this, b);
        if (!this.isSelecting() && this.annotation && "undefined" !== typeof this.pageCoordinates) {
          b = this.pageCoordinates[0];
          var a = this.pageCoordinates[1];
          null !== a && null !== b && b.pageIndex === a.pageIndex && (this.annotation.End = {
            x: a.x,
            y: a.y
          }, this.annotation.adjustRect(), this.u.da.Zb(this.annotation))
        }
      }
    });
    h.fw = function (b,
      a) {
      h.dm.call(this, b);
      this.name = a || "ArrowCreateTool"
    };
    h.fw.prototype = $.extend(new h.dm, {
      mouseLeftDown: function (b) {
        h.dm.prototype.mouseLeftDown.call(this, b);
        this.annotation && this.annotation.gr("OpenArrow")
      }
    });
    h.Bw = function (b, c) {
      h.Fb.call(this, b, a.Annotations.bk);
      this.name = c || "RectangleCreateTool"
    };
    h.Bw.prototype = new h.Fb;
    h.qw = function (b, c) {
      h.Fb.call(this, b, a.Annotations.Wl);
      this.name = c || "EllipseCreateTool"
    };
    h.qw.prototype = new h.Fb;
    h.FreeHandCreateTool = function (b, c) {
      h.Fb.call(this, b, a.Annotations.FreeHandAnnotation);
      this.Cc = 0;
      this.yt = null;
      this.Sc = !1;
      this.pointerType = null;
      delete this.defaults.FillColor;
      this.name = c || "FreeHandCreateTool"
    };
    h.FreeHandCreateTool.prototype = $.extend(new h.Fb, {
      createDelay: 1500,
      simplifyPen: !1,
      mouseLeftDown: function (b) {
        h.AnnotationSelectTool.prototype.mouseLeftDown.call(this, b);
        if (!this.isSelecting() && this.pageCoordinates[0]) {
          this.Sc = !0;
          if (this.annotation)
            if (this.pageCoordinates[0].pageIndex === this.annotation.PageNumber - 1) {
              var a = this.pageCoordinates[0].x,
                c = this.pageCoordinates[0].y,
                f = !1,
                d = this.annotation.getPath(this.Cc);
              d && 0 < d.length && (d = d[d.length - 1], d.x === a && d.y === c && (f = !0));
              f || this.annotation.dc(a, c, this.Cc)
            } else {
              var g = this;
              this.complete().then(function () {
                h.FreeHandCreateTool.prototype.mouseLeftDown.call(g, b)
              })
            }
          else h.Fb.prototype.mouseLeftDown.call(this, b);
          clearTimeout(this.yt)
        }
      },
      complete: function () {
        var b = this;
        if (this.annotation && 0 < this.annotation.Yk().length) return this.u.da.Zb(this.annotation).then(function () {
          b.annotation.finish();
          h.Fb.prototype.mouseLeftUp.call(b, null);
          b.fD()
        });
        this.annotation = null;
        return Promise.resolve()
      },
      Mu: function () {
        this.complete()
      },
      switchOut: function (b) {
        var a = this;
        this.complete().then(function () {
          h.Fb.prototype.switchOut.call(a, b)
        })
      },
      mouseLeftUp: function () {
        h.AnnotationSelectTool.prototype.mouseLeftUp.apply(this, arguments);
        if (!this.isSelecting() && (this.Sc = !1, this.annotation)) {
          var b = this.u.da,
            a = this.annotation.getPath(this.Cc);
          if (a) {
            if (4 > a.length) this.annotation.Yk().pop(), this.annotation.adjustRect(), b.Zb(this.annotation);
            else {
              if ("pen" !== this.pointerType ||
                this.simplifyPen) this.annotation.XT(.75), b.Zb(this.annotation);
              this.Cc++
            }
            this.yt = setTimeout(_.bind(this.complete, this), this.createDelay)
          }
          0 === this.annotation.Yk().length && (this.complete(), clearTimeout(this.yt))
        }
      },
      mouseMove: function (b) {
        h.AnnotationSelectTool.prototype.mouseMove.call(this, b);
        !this.isSelecting() && !1 !== this.Sc && this.annotation && null !== this.pageCoordinates && null !== this.pageCoordinates[1] && this.pageCoordinates[0].pageIndex === this.pageCoordinates[1].pageIndex && (this.annotation.dc(this.pageCoordinates[1].x,
          this.pageCoordinates[1].y, this.Cc), this.u.da.Zb(this.annotation))
      },
      fD: function () {
        this.Cc = 0;
        this.Sc = !1;
        clearTimeout(this.yt)
      },
      vA: function () {
        this.fD();
        h.AnnotationSelectTool.prototype.vA.call(this)
      },
      contextMenu: function (b) {
        b.preventDefault()
      },
      jA: function (b) {
        this.pointerType = b.originalEvent.pointerType
      }
    });
    h.SignatureCreateTool = function (b, a) {
      h.Tool.call(this, b);
      this.Ei = 100;
      this.location = null;
      this.Xp = !1;
      this.Wv = this.Cc = 0;
      this.visible = !1;
      this.by = null;
      this.cursor = "crosshair";
      this.TN = 3;
      var c = this;
      $(document).on("mouseup",
        function () {
          c.Xp && (c.visible = !0);
          c.AC()
        });
      this.defaults = {
        StrokeColor: new Annotations.Color(0, 0, 0),
        StrokeThickness: 1,
        Opacity: 1
      };
      this.name = a || "SignatureCreateTool"
    };
    h.SignatureCreateTool.OA = function (b) {
      h.SignatureCreateTool.prototype.lp = b
    };
    h.SignatureCreateTool.prototype = {
      switchIn: function () {
        c(this.u, this.cursor);
        this.initAnnot()
      },
      EC: function (b) {
        var a, c = this.canvas[0].getBoundingClientRect();
        b.originalEvent && b.originalEvent.touches && (b = 0 === b.originalEvent.touches.length ? b.originalEvent.changedTouches[0] :
          b.originalEvent.touches[0]);
        a = b.clientX;
        b = b.clientY;
        return {
          x: a - c.left,
          y: b - c.top
        }
      },
      pC: function () {
        this.ctx.setTransform(1, 0, 0, 1, 0, 0);
        this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height)
      },
      WM: function () {
        this.pC();
        this.freeHandAnnot.UN();
        this.Wv = this.Cc = 0
      },
      AC: function () {
        this.Xp && (this.Cc++, this.visible && (this.Wv++, this.visible = !1));
        this.Xp = !1
      },
      lp: function () {
        return "Sign Here"
      },
      drawBackground: function () {
        var b = window.utils.getCanvasMultiplier();
        this.ctx.scale(b, b);
        this.ctx.save();
        var a = 2 /
          3 * this.ctx.canvas.height / b;
        this.ctx.strokeStyle = "#000";
        this.ctx.lineCap = "square";
        this.ctx.lineWidth = 1;
        this.ctx.beginPath();
        this.ctx.moveTo(10, a);
        this.ctx.lineTo(this.ctx.canvas.width / b - 10, a);
        this.ctx.stroke();
        this.ctx.fillStyle = "#000";
        var c = this.lp();
        this.ctx.textAlign = "center";
        this.ctx.textBaseline = "top";
        this.ctx.font = "15px Verdana,Arial,sans-serif";
        this.ctx.fillText(c, this.ctx.canvas.width / b / 2, a - 20);
        this.ctx.restore()
      },
      uC: function () {
        this.pC();
        this.drawBackground();
        this.ctx.save();
        var b = this.u.Oc(0);
        this.freeHandAnnot.draw(this.ctx, b);
        this.ctx.restore()
      },
      initAnnot: function () {
        var b = this.u.Wa();
        this.freeHandAnnot = new Annotations.FreeHandAnnotation;
        this.freeHandAnnot.Author = b.Uk();
        this.freeHandAnnot.StrokeColor = this.defaults.StrokeColor;
        this.freeHandAnnot.StrokeThickness = this.defaults.StrokeThickness * this.TN;
        this.freeHandAnnot.Opacity = this.defaults.Opacity;
        this.freeHandAnnot.Subject = Annotations.sa.wc("signature");
        this.freeHandAnnot.ToolName = this.name;
        this.freeHandAnnot.MaintainAspectRatio = !0
      },
      mG: function (b) {
        this.by =
          b = $.extend(!0, [], b)
      },
      QL: function (b) {
        this.mG(b);
        this.trigger("saveDefault", [b])
      },
      RP: function () {
        return this.by ? !0 : !1
      },
      zR: function () {
        this.initAnnot();
        this.drawBackground()
      },
      YL: function () {
        var b = this.by;
        if (b) {
          for (var b = $.extend(!0, [], b), a = 0; a < b.length; ++a) {
            for (var c = 0; c < b[a].length; ++c) b[a][c] = new Annotations.Point(b[a][c].x, b[a][c].y);
            this.freeHandAnnot.setPath(b[a], a)
          }
          this.Wv = b.length;
          this.AD()
        }
      },
      AD: function (b) {
        if (this.vG()) return !1;
        b && this.QL(this.freeHandAnnot.Yk());
        b = this.u.Wa();
        var c = this.location.pageIndex +
          1;
        this.freeHandAnnot.PageNumber = c;
        this.freeHandAnnot.StrokeThickness = this.defaults.StrokeThickness;
        c = this.u.ue(c);
        c !== a.o.Sa.Mh && this.freeHandAnnot.rotate(c * -Math.PI / 2, this.location);
        var f = this.freeHandAnnot.Width,
          d = this.freeHandAnnot.Height,
          g, e;
        f > d ? (c = this.location.x - this.Ei, g = this.location.y - d / f * this.Ei, e = this.location.x + this.Ei, d = this.location.y + d / f * this.Ei) : (c = this.location.x - f / d * this.Ei, g = this.location.y - this.Ei, e = this.location.x + f / d * this.Ei, d = this.location.y + this.Ei);
        f = this.u.getDocument().zc(this.location.pageIndex);
        c = new Annotations.Rect(c, g, e, d);
        c.Pt(new Annotations.Rect(0, 0, f.width, f.height));
        this.freeHandAnnot.resize(c);
        b.Lg(this.freeHandAnnot);
        b.Zb(this.freeHandAnnot);
        this.trigger("annotationAdded", [this.freeHandAnnot]);
        this.initAnnot();
        return !0
      },
      vG: function () {
        return 0 === this.Wv
      },
      GT: function (b) {
        var a = this;
        this.canvas = b;
        this.canvas[0].style.touchAction = "none";
        this.ctx = b[0].getContext("2d");
        this.canvas.on("mousedown touchstart", function (b) {
          if (1 === b.which || 0 === b.which) b = a.EC(b), a.freeHandAnnot.dc(b.x, b.y, a.Cc),
            a.uC(), a.Xp = !0
        });
        this.canvas.on("touchmove", function (b) {
          b.preventDefault()
        });
        this.canvas.on("mousemove touchmove", _.throttle(function (b) {
          a.Xp && (b = a.EC(b), a.freeHandAnnot.dc(b.x, b.y, a.Cc), a.uC(), a.visible = !0)
        }, 20));
        this.canvas.on("mouseup touchend", function () {
          a.AC()
        })
      },
      mouseLeftDown: function (b) {
        b.preventDefault();
        h.Tool.prototype.mouseLeftDown.apply(this, arguments);
        this.u.da.Gd()
      },
      mouseLeftUp: function (b) {
        b.preventDefault();
        h.Tool.prototype.mouseLeftUp.apply(this, arguments);
        var a = this.pageCoordinates[1];
        a && (this.location = a, this.trigger("locationSelected", a))
      }
    };
    h.SignatureCreateTool.prototype = $.extend(new h.Tool, h.SignatureCreateTool.prototype, a.utils.eventHandler);
    h.le = function (b, a) {
      h.Sb.call(this, b);
      this.text = this.annotation = null;
      this.Ex = a;
      this.defaults = {
        Opacity: 1,
        StrokeColor: new Annotations.Color(255, 0, 0)
      }
    };
    h.le.AUTO_SET_TEXT = !0;
    h.le.prototype = $.extend(new h.Sb, {
        switchIn: function (b) {
          h.Sb.prototype.switchIn.call(this, b);
          this.u.fe({
            annotMode: !0
          })
        },
        switchOut: function (b) {
          h.Sb.prototype.switchOut.call(this,
            b);
          this.u.fe({
            annotMode: !1
          })
        },
        mouseLeftDown: function (b) {
          h.Sb.prototype.mouseLeftDown.call(this, b);
          this.isSelecting() || this.annotation || !this.pageCoordinates || (b = this.u.da, this.annotation = new this.Ex, this.annotation.Author = b.Uk(), b = this.defaults.StrokeColor, this.annotation.StrokeColor = new Annotations.Color(b.R, b.G, b.B, b.A), this.annotation.Opacity = this.defaults.Opacity || 1, this.annotation.ToolName = this.name, this.trigger("annotationCreated", [this.annotation]))
        },
        textSelected: function (b, a, c) {
          this.annotation &&
            this.pageCoordinates[0].pageIndex === b && 0 < a.length && (this.annotation.Jv(a.map(function (b) {
              return b.Vg()
            })), this.annotation.PageNumber = b + 1, this.text = c, h.le.AUTO_SET_TEXT && this.annotation.no(this.text), this.u.da.Zb(this.annotation))
        },
        mouseLeftUp: function (b) {
          h.Sb.prototype.mouseLeftUp.call(this, b);
          !this.isSelecting() && this.annotation && (b = this.u.da, !this.text || 1 > this.text.length ? b.gj(this.annotation) : (b.Lg(this.annotation), this.trigger("annotationAdded", [this.annotation])), this.annotation = this.text = null)
        }
      },
      a.utils.eventHandler);
    h.Jw = function (b, c) {
      h.le.call(this, b, a.Annotations.rh);
      this.defaults.StrokeColor = new Annotations.Color(255, 255, 0);
      delete this.defaults.Opacity;
      this.name = c || "TextHighlightCreateTool"
    };
    h.Jw.prototype = new h.le;
    h.Mw = function (b, c) {
      h.le.call(this, b, a.Annotations.pm);
      this.name = c || "TextUnderlineCreateTool"
    };
    h.Mw.prototype = new h.le;
    h.Lw = function (b, c) {
      h.le.call(this, b, a.Annotations.om);
      this.name = c || "TextStrikeoutCreateTool"
    };
    h.Lw.prototype = $.extend(new h.le, {
      mouseLeftUp: function () {
        h.le.prototype.mouseLeftUp.apply(this,
          arguments);
        if (!this.isSelecting()) {
          var b = this.annotation,
            a = this.u.da;
          b && a.sj(b) && a.Zb(b)
        }
      }
    });
    h.Kw = function (b, c) {
      h.le.call(this, b, a.Annotations.nm);
      this.name = c || "TextSquigglyCreateTool"
    };
    h.Kw.prototype = new h.le;
    h.Hw = function (b, a) {
      l.call(this, b);
      this.annotation = null;
      this.defaults = {
        StrokeColor: new Annotations.Color(255, 255, 0),
        Opacity: 1
      };
      this.cursor = "crosshair";
      this.name = a || "StickyCreateTool"
    };
    h.Hw.prototype = $.extend(new h.Tool, {
      switchIn: function () {
        c(this.u, this.cursor)
      },
      mouseLeftUp: function (b) {
        l.prototype.mouseLeftUp.call(this,
          b);
        var a = this.pageCoordinates[1];
        if (a) {
          var c = this.u.da;
          c.Gd();
          this.annotation = new Annotations.Fi;
          var f = this.u.tb(a.pageIndex);
          this.annotation.X = a.x - this.annotation.ya() / 2 / f;
          this.annotation.Y = a.y - this.annotation.xa() / 2 / f;
          this.annotation.PageNumber = a.pageIndex + 1;
          this.annotation.Author = c.Uk();
          a = this.defaults.StrokeColor;
          this.annotation.StrokeColor = new Annotations.Color(a.R, a.G, a.B, a.A);
          this.annotation.Opacity = this.defaults.Opacity;
          this.annotation.ToolName = this.name;
          this.trigger("annotationCreated", [this.annotation]);
          c.Lg(this.annotation);
          this.trigger("annotationAdded", [this.annotation]);
          c.Zb(this.annotation);
          this.annotation = null;
          b.preventDefault()
        }
      }
    }, a.utils.eventHandler);
    h.cp = function (b, a) {
      l.call(this, b);
      this.annotation = null;
      this.defaults = {
        Opacity: 1
      };
      this.cursor = "crosshair";
      this.name = a || "StampCreateTool"
    };
    h.cp.ACCEPTED_IMAGE_TYPES = ".jpg,.jpeg,.png";
    h.cp.prototype = $.extend(new h.Tool, {
      switchIn: function () {
        c(this.u, this.cursor)
      },
      mouseLeftDown: function (b) {
        if (!this.annotation) {
          l.prototype.mouseLeftDown.call(this,
            b);
          this.u.Wa().Gd();
          var a = this.pageCoordinates[0];
          if (a) {
            var c = this.Zd(this.Bb).pageIndex,
              f = document.createElement("input");
            f.setAttribute("type", "file");
            f.setAttribute("accept", h.cp.ACCEPTED_IMAGE_TYPES);
            f.setAttribute("display", "none");
            f.onchange = function () {
              if (f.files && f.files[0])
                if ("image/png" !== f.files[0].type && "image/jpeg" !== f.files[0].type) console.warn("Invalid file type. Please choose a png/jpg/jpeg file.");
                else {
                  var b = new FileReader;
                  b.onload = function (b) {
                    var f = this.u.da;
                    this.annotation = new Annotations.gk;
                    this.annotation.X = a.x;
                    this.annotation.Y = a.y;
                    this.annotation.PageNumber = a.pageIndex + 1;
                    this.annotation.Author = f.Uk();
                    this.annotation.ImageData = b.target.result;
                    var d = 90 * this.u.ue(this.annotation.PageNumber);
                    this.annotation.Rotation = d;
                    var g = new Image;
                    g.onload = function () {
                      var b = g.width,
                        a = g.height;
                      if (90 === d || 270 === d) var e = b,
                        b = a,
                        a = e;
                      var h = b / a,
                        e = this.u.od(c),
                        l = this.u.nd(c),
                        b = Math.min(b, e),
                        a = Math.min(a, l);
                      b / a !== h && (a * h < b ? b = a * h : a = b / h);
                      this.annotation.Width = b;
                      this.annotation.Height = a;
                      this.annotation.X -= this.annotation.Width /
                        2;
                      this.annotation.Y -= this.annotation.Height / 2;
                      b = this.annotation.we();
                      b.Pt(new Annotations.Rect(0, 0, e, l));
                      this.annotation.resize(b);
                      this.annotation.ToolName = this.name;
                      this.annotation.Opacity = this.defaults.Opacity;
                      this.trigger("annotationCreated", [this.annotation]);
                      f.Lg(this.annotation);
                      this.trigger("annotationAdded", [this.annotation]);
                      f.Zb(this.annotation);
                      this.annotation = null
                    }.bind(this);
                    g.src = b.target.result
                  }.bind(this);
                  b.readAsDataURL(f.files[0]);
                  document.body.removeChild(f)
                }
            }.bind(this);
            document.body.appendChild(f);
            f.click()
          }
        }
      }
    }, a.utils.eventHandler);
    h.hm = function (b, c) {
      h.Fb.call(this, b, a.Annotations.gm);
      this.annotation = null;
      this.wl = !1;
      delete this.defaults.FillColor;
      this.name = c || "PolylineCreateTool"
    };
    h.hm.prototype = $.extend(new h.Fb, {
      mouseLeftDown: function (b) {
        var a;
        h.Fb.prototype.mouseLeftDown.call(this, b);
        !this.isSelecting() && this.annotation && ((a = b.data.pageCoordinate, a && a.pageIndex === this.annotation.Kb()) ? null !== a.x && null !== a.y && (0 === this.annotation.la.length ? this.annotation.dc(a.x, a.y) : this.wl || (this.annotation.Jj(),
          this.annotation.dc(a.x, a.y)), this.wl = !0) : this instanceof h.CalloutCreateTool ? (this.Pp(), this.u.da.gj(this.annotation), this.annotation = null) : this.mouseDoubleClick(b))
      },
      mouseLeftUp: function (b) {
        h.AnnotationSelectTool.prototype.mouseLeftUp.call(this, b)
      },
      mouseMove: function (b) {
        h.AnnotationSelectTool.prototype.mouseMove.call(this, b);
        if (this.annotation && !this.isSelecting() && b.data && (b = b.data.pageCoordinate, null !== b && null !== b.x && null !== b.y && b.pageIndex === this.annotation.Kb())) {
          this.wl || this.annotation.Jj();
          var a = this.annotation.getPath();
          0 === a.length ? (this.annotation.dc(b.x, b.y), this.wl = !1) : 0 < a.length && (a[a.length - 1].x !== b.x || a[a.length - 1].y !== b.y) && (this.annotation.dc(b.x, b.y), this.wl = !1);
          this.annotation.X = this.annotation.Za.x;
          this.annotation.Y = this.annotation.Za.y;
          this.u.da.Zb(this.annotation)
        }
      },
      mouseDoubleClick: function () {
        this.annotation && (this.annotation.finish(), this.finish())
      },
      Mu: function (b) {
        this.annotation && this.mouseDoubleClick(b)
      },
      contextMenu: function (b) {
        b.preventDefault()
      },
      tap: function () {},
      Pp: function () {
        for (; 0 < this.annotation.getPath().length;) this.annotation.Jj()
      }
    });
    h.Zj = function (b, c) {
      h.Fb.call(this, b, a.Annotations.Ci);
      this.annotation = null;
      this.wl = !1;
      this.name = c || "PolygonCreateTool"
    };
    h.Zj.prototype = {
      Pp: function () {
        for (; 0 < this.annotation.getPath().length;) this.annotation.Jj()
      }
    };
    h.Zj.prototype = $.extend(new h.hm, h.Zj.prototype);
    h.bp = function (b, c) {
      h.Fb.call(this, b, a.Annotations.Ci);
      this.annotation = null;
      this.wl = !1;
      this.name = c || "PolygonCloudCreateTool"
    };
    h.bp.prototype = {
      mouseLeftDown: function () {
        h.Zj.prototype.mouseLeftDown.apply(this,
          arguments);
        this.annotation && (this.annotation.Style = "cloudy", this.annotation.Intent = "PolygonCloud")
      }
    };
    h.bp.prototype = $.extend(new h.Zj, h.bp.prototype);
    h.CalloutCreateTool = function (b, c) {
      h.Fb.call(this, b, a.Annotations.Ja, Annotations.Ja.oc.FreeTextCallout);
      this.defaults.TextColor = new Annotations.Color(255, 0, 0);
      this.defaults.FontSize = "9pt";
      this.defaults.Width = 150;
      this.defaults.Height = 30;
      this.name = c || "CalloutCreateTool"
    };
    h.CalloutCreateTool.prototype = $.extend(new h.hm, {
      lineCount: 2,
      yq: function () {
        return this.u.Wa().My().tq
      },
      mouseLeftDown: function (b) {
        var a = 0 < this.u.Wa().ae().length;
        if (this.yq() || a) this.annotation = null;
        else if (h.hm.prototype.mouseLeftDown.call(this, b), null !== this.annotation && (this.annotation.CalloutLineCount = this.lineCount, this.annotation.getPath().length >= this.annotation.CalloutLineCount + 1)) {
          this.annotation.getPath().length > this.annotation.CalloutLineCount + 1 && this.annotation.Jj();
          var a = this.annotation.getPath()[this.annotation.CalloutLineCount],
            c = 90 * this.u.ue(this.annotation.PageNumber),
            f = this.defaults.Width,
            d = this.defaults.Height / 2,
            g = this.u.od(this.annotation.Kb()),
            e = this.u.nd(this.annotation.Kb());
          a.x + f > g && (a.x -= f);
          a.y + d > e ? a.y -= d : 0 > a.y - d && (a.y += d);
          90 === c || 270 === c ? (this.annotation.dc(a.x - d, a.y), this.annotation.dc(a.x + d, a.y + f)) : (this.annotation.dc(a.x, a.y - d), this.annotation.dc(a.x + f, a.y + d));
          this.annotation.Rotation = c;
          a = this.defaults.TextColor;
          this.annotation.TextColor = new Annotations.Color(a.R, a.G, a.B, a.A);
          this.annotation.FontSize = this.defaults.FontSize;
          this.u.da.Zb(this.annotation);
          this.finish();
          b.preventDefault()
        }
      },
      mouseDoubleClick: function (b) {
        this.annotation || h.Tool.prototype.mouseDoubleClick.call(this, b)
      },
      Mu: function () {
        null !== this.annotation && (this.Pp(), this.u.da.gj(this.annotation), this.annotation = null)
      },
      contextMenu: function (b) {
        b.preventDefault()
      }
    });
    h.Zl = function (b, c) {
      h.Fb.call(this, b, a.Annotations.Ja);
      this.defaults.StrokeThickness = 0;
      this.defaults.TextColor = new Annotations.Color(255, 0, 0);
      this.defaults.FontSize = "9pt";
      this.name = c || "FreeTextCreateTool"
    };
    h.Zl.OA = function (b) {
      h.Zl.prototype.lp = b
    };
    h.Zl.prototype =
      $.extend(new h.Fb, {
        initialText: "Insert text here",
        lp: function () {
          return this.initialText
        },
        yq: function () {
          return this.u.Wa().My().tq
        },
        mouseLeftDown: function (b) {
          var a = 0 < this.u.Wa().ae().length;
          h.Fb.prototype.mouseLeftDown.call(this, b);
          this.isSelecting() || (this.yq() || a ? this.annotation = null : this.annotation && (this.annotation.StrokeThickness = Math.max(this.annotation.StrokeThickness, 1), this.annotation.FillColor = new Annotations.Color(200, 220, 250, .2), this.annotation.oo(Annotations.Ja.oc.FreeText), this.annotation.no(this.lp()),
            this.annotation.Rotation = 90 * this.u.ue(this.annotation.PageNumber), b = this.defaults.TextColor, this.annotation.TextColor = new Annotations.Color(b.R, b.G, b.B, b.A), this.annotation.FontSize = this.defaults.FontSize))
        },
        mouseMove: function (b) {
          h.AnnotationSelectTool.prototype.mouseMove.call(this, b);
          if (!this.isSelecting() && !this.yq() && this.annotation && "undefined" !== typeof this.pageCoordinates) {
            b = this.pageCoordinates[0];
            var a = this.pageCoordinates[1];
            null !== a && null !== b && b.pageIndex === a.pageIndex && (b = new Annotations.Rect(b.x,
              b.y, a.x, a.y), b.normalize(), this.annotation.Gl(b), this.annotation.qo(new Annotations.Rect(0, 0, 0, 0)), this.u.da.Zb(this.annotation))
          }
        },
        mouseLeftUp: function (b) {
          h.AnnotationSelectTool.prototype.mouseLeftUp.call(this, b);
          if (!this.isSelecting()) {
            if (this.u.Wa().pn(b) && this.annotation) {
              b = this.annotation.ya();
              var a = this.annotation.xa(),
                c = 2 * (this.annotation.getRectPadding() + 1);
              if (b <= c || a <= c) {
                this.annotation = null;
                return
              }
            }
            if (this.yq()) this.annotation = null;
            else if (this.annotation) {
              b = this.annotation.ya();
              a = this.annotation.xa();
              c = 2 * (this.annotation.getRectPadding() + 1);
              if (b <= c || a <= c) a = Number(this.annotation.FontSize.split("pt")[0]), b = 10 * a, a *= 5, 0 !== this.annotation.Rotation % 180 && (c = b, b = a, a = c), this.annotation.AI(b), this.annotation.hr(a);
              this.annotation.StrokeThickness = this.defaults.StrokeThickness;
              b = this.defaults.FillColor;
              this.annotation.FillColor = new Annotations.Color(b.R, b.G, b.B, b.A);
              b = this.annotation.getRectPadding();
              this.annotation.qo(new Annotations.Rect(b, b, b, b));
              this.u.da.Zb(this.annotation);
              this.u.da.Lg(this.annotation);
              this.trigger("annotationAdded", [this.annotation]);
              this.annotation = null
            }
          }
        }
      })
  })(window);
  (function (a) {
    function e(b) {
      var a = this;
      this.Xf = b;
      this.tq = !1;
      this.onEditBoxAnnotationChanged = function (b, c, d) {
        for (var e = 0; e < c.length; ++e) {
          var m = c[e];
          "add" === d && a.bG(m) && a.Xf.Kx(m) ? (a.oG(m), b.imported || (a.cF(m), m.sd.select())) : "delete" === d && m.sd && (m.sd.remove(), delete m.sd)
        }
      };
      this.onEditBoxAnnotationDoubleClicked = function (b, c) {
        a.Xf.Kx(c) && a.bG(c) && (c.sd || a.oG(c), a.tq && c.sd.val() !== c.Tk() && a.Xf.LA(c, c.sd.val()), a.cF(c))
      };
      this.Xf.on("annotationChanged.editbox", this.onEditBoxAnnotationChanged);
      this.Xf.on("annotationDoubleClicked.editbox",
        this.onEditBoxAnnotationDoubleClicked)
    }

    function d(b) {
      this.Xf = b;
      this.Cl = []
    }
    var c = window.o;
    c.ka = function (b) {
      if (!b) throw Error("AnnotationManager requires DocumentViewer to initialize");
      var c = this;
      c.zt = "";
      c.Ez = !1;
      c.readOnly = !1;
      c.OW = !1;
      c.rD = !0;
      c.u = b;
      c.Ig = new d(c);
      c.wC = new e(c);
      c.Dk = new a.o.$K(c);
      c.init();
      c.Pg = new a.Annotations.O.yi(this);
      c.FD = function (b) {
        return b.Author
      };
      c.iA = {
        get: function (b, a) {
          return this[b] && this[b][a]
        },
        set: function (b, a, c) {
          this[b] = this[b] || {};
          this[b][a] = c
        },
        "delete": function (b, a) {
          delete this[b][a]
        }
      };
      c.Ht = {
        get: function (b, a) {
          return this[b] && this[b][a]
        },
        set: function (b, a, c) {
          this[b] = this[b] || {};
          this[b][a] = c
        },
        "delete": function (b, a) {
          delete this[b][a]
        }
      };
      b.on("contentRemoved.annotManager", function () {
        c.Wd.forEach(function (b) {
          b.trigger("contentRemoved")
        })
      });
      b.on("documentLoaded", function () {
        c.IN()
      });
      c.GW = {};
      c.Zi = {
        line: [Annotations.ke],
        circle: [Annotations.Wl],
        square: [Annotations.bk],
        freetext: [Annotations.Ja],
        stamp: [Annotations.gk],
        text: [Annotations.Fi],
        ink: [Annotations.FreeHandAnnotation],
        polyline: [Annotations.gm],
        polygon: [Annotations.Ci],
        strikeout: [Annotations.om],
        highlight: [Annotations.rh],
        redact: [Annotations.Ur],
        underline: [Annotations.pm],
        squiggly: [Annotations.nm],
        caret: [Annotations.No],
        widget: [Annotations.kk, Annotations.yg, Annotations.zi, Annotations.Di, Annotations.mh, Annotations.ak, Annotations.fk],
        link: [Annotations.kd],
        custom: [Annotations.Po]
      };
      c.controlPointSize = 8;
      c.controlPointHitBoxScale = 1;
      c.on("annotationChanged", function (b, a, c) {
        "add" === c && a.forEach(function (b) {
          if (b.Listable && !b.ToolName) switch (b.elementName) {
            case "line":
              b.ToolName =
                "None" === b.sn() && "None" === b.Sh() ? "AnnotationCreateLine" : "AnnotationCreateArrow";
              break;
            case "circle":
              b.ToolName = "AnnotationCreateEllipse";
              break;
            case "square":
              b.ToolName = "AnnotationCreateRectangle";
              break;
            case "freetext":
              b.ToolName = b.Oh() === Annotations.Ja.oc.kV ? "AnnotationCreateFreeText" : "AnnotationCreateCallout";
              break;
            case "stamp":
              b.ToolName = "AnnotationCreateStamp";
              break;
            case "ink":
              b.DV === Annotations.sa.wc("signature") ? b.ToolName = "AnnotationCreateSignature" : b.ToolName = "AnnotationCreateFreeHand";
              break;
            case "polyline":
              b.ToolName = "AnnotationCreatePolyline";
              break;
            case "polygon":
              b.ToolName = "cloudy" === b.CV && "PolygonCloud" === b.oc ? "AnnotationCreatePolygonCloud" : "AnnotationCreatePolygon";
              break;
            case "strikeout":
              b.ToolName = "AnnotationCreateTextStrikeout";
              break;
            case "highlight":
              b.ToolName = "AnnotationCreateTextHighlight";
              break;
            case "underline":
              b.ToolName = "AnnotationCreateTextUnderline";
              break;
            case "squiggly":
              b.ToolName = "AnnotationCreateTextSquiggly";
              break;
            case "text":
              b.ToolName = "AnnotationCreateSticky"
          }
        })
      });
      c.on("annotationChanged", function (b, a, d, e) {
        if (!e && !b.eX && Annotations.sa.extraSelectorsEnabled && a && 0 !== a.length && !(1 < a.length)) {
          var m = a[0],
            n = c.u.getDocument(),
            r = m.Kb();
          if (-1 !== r && c.u.Pn && 0 !== c.u.ii.length && m.Mj())
            if (c.u.ii[c.u.ii.length - 1][0] !== r) c.u.Pn = null, c.u.ii = [];
            else {
              var q = c.u.ii.pop(),
                v = function () {
                  if (m && q && c.u.Pn) {
                    var b = c.u.getDocument();
                    b === n && c.nj(m.oV) && (b = new XODText.Gi(b), c.u.Pn.apply(b, q), m.TextIndices = b.Gs, m.SurroundingTexts = b.Hs, m.lb(!0), c.trigger("annotationChanged", [
                      [m], "modify", !0
                    ]))
                  }
                };
              n.hc().then(function () {
                var b = c.u.getDocument();
                if (b === n) {
                  var a = Annotations.sa.zE(r, b.Ab());
                  b.Hq(a).then(v)
                }
              })
            }
        }
      })
    };
    c.ka.prototype = {
      init: function () {
        this.Wd = [];
        this.fy = [];
        this.Cp = [];
        this.Bt = {};
        this.Ig.Gd();
        this.Yn = null
      },
      IN: function () {
        this.cn = !1
      },
      Uk: function () {
        return this.zt
      },
      IA: function (b) {
        this.zt = b;
        this.trigger("updateAnnotationPermission")
      },
      WO: function () {
        return this.Ez
      },
      cT: function (b) {
        this.Ez = b;
        this.trigger("updateAnnotationPermission")
      },
      NF: function () {
        return this.readOnly
      },
      zT: function (b) {
        this.readOnly =
          b;
        this.trigger("updateAnnotationPermission")
      },
      GU: function () {
        return this.rD
      },
      BN: function () {
        this.rD = !1;
        this.wC.disable()
      },
      xT: function (b) {
        this.pE = b
      },
      QD: function (b) {
        return (this.pE ? this.pE(b.Author, b) : this.Ez || b.Author === this.zt || null === b.Author || "undefined" === typeof b.Author) && !this.readOnly && !b.ReadOnly
      },
      Dd: function (b) {
        return this.QD(b) && !b.Locked
      },
      Kx: function (b) {
        return this.QD(b) && !b.LockedContents
      },
      IT: function (b) {
        this.RI = b
      },
      Xd: function () {
        return this.Pg
      },
      qA: function (b) {
        b = b.map(Number);
        var a = [];
        this.Wd =
          this.Wd.filter(function (c) {
            return -1 !== b.indexOf(c.PageNumber) && c.Dz ? (a.push(c), c.Tv(), !1) : !0
          });
        if (0 < a.length) {
          var c = this;
          setTimeout(function () {
            c.trigger("annotationChanged", [a, "delete"])
          }, 0)
        }
      },
      gS: function (b) {
        var a = this;
        b.on("layoutChanged", function (b, c) {
          a.qA(c.removed);
          a.Wd.forEach(function (b) {
            var a = c.moved[b.PageNumber];
            a && (b.PageNumber = a)
          })
        });
        b.on("pageContentChanged", function (b, c) {
          0 < c.length && a.qA(c)
        });
        b.on("pageDiff", function (b, c) {
          var d = {};
          a.Wd.forEach(function (b) {
            var a = b.Ac();
            a in d ? d[a].push(b) :
              d[a] = [b]
          });
          c.forEach(function (b) {
            var a = b.before;
            b = b.after;
            var c = d[b.pageNum];
            if (c) {
              var f = new XODText.Ca;
              f.al(b.matrix);
              f.concat(a.eb.inverse());
              c.forEach(function (b) {
                var a = b.IsModified,
                  c = b.we(),
                  d = c.x1,
                  g = c.y1,
                  e = c.x2,
                  h = c.y2;
                b.lh(f);
                a || c.x1 !== d || c.x2 !== e || c.y1 !== g || c.y2 !== h || (b.IsModified = a)
              })
            }
          })
        })
      },
      EI: function (b) {
        return (!(b instanceof Annotations.HTMLAnnotation) || b instanceof Annotations.Di) && b.uf()
      },
      Hd: function (b, c, d, e) {
        var l = b;
        _.isObject(b) || (l = {
          pageNumber: b,
          overrideCanvas: c,
          majorRedraw: d,
          overrideContainer: e
        });
        b = l.pageNumber;
        c = l.namespace || "default";
        l.namespace = c;
        e = a.o.za.pj(b - 1);
        l.Um = e;
        if (!this.Ht.get(e, c)) return this.aR(l);
        this.iA.set(e, c, {
          Df: b,
          dR: d
        });
        return this.Ht.get(e, c)
      },
      aR: function (b) {
        var c = b.pageNumber,
          d = b.overrideCanvas,
          e = b.overrideContainer,
          l = b.majorRedraw,
          k = b.namespace,
          m = b.Um,
          n = c - 1;
        if (isNaN(n)) throw Error("Invalid page index given");
        var r = this.u.tb(n);
        b = this.Qk(c);
        var q = !!d,
          v = d;
        q || (v = this.u.Zm(n)) && this.u.uo(n, $(v));
        if (!v || !this.u.Rk(n) && !q) return Promise.resolve();
        var p = v.getContext("2d"),
          u = this.u.ue(n + 1),
          w = 90 * u,
          A = this.u.Oc(c - 1);
        q || (w = this.u.Xk(n + 1), this.PM(v, n, w));
        for (var B = e || a.o.za.rz(n), z = Promise.resolve(), x = 0; x < this.Wd.length; x++) {
          var y = this.Wd[x];
          y.Kb() === n && (z = z.then(this.HE.bind(this, y, p, A, w, u, b, q, d, l, B)))
        }
        this.Yn && this.Yn.PageNumber === c && (this.sj(this.Yn) ? this.Yn = null : z = z.then(this.HE.bind(this, this.Yn, p, A, w, u, b, q, d, l, B)));
        var F = this,
          c = z.then(function () {
            q || F.u.hG(n, v);
            F.Ht["delete"](m, k);
            q || r !== F.u.tb(n) || F.u.nv(n, v);
            var b = F.iA.get(m, k);
            if (b) return F.iA["delete"](m, k), F.Hd({
              pageNumber: b.Df,
              overrideCanvas: d,
              overrideContainer: e,
              majorRedraw: b.dR,
              namespace: k
            })
          });
        this.Ht.set(m, k, c);
        return c
      },
      PM: function (b, c, d) {
        var e = this.u.gu(c);
        c = e.width;
        e = e.height;
        if (90 === d || 270 === d) d = c, c = e, e = d;
        a.o.za.Op(b, c, e)
      },
      JN: function (b, c, d, e, l, k, m, n, r, q) {
        var v = this;
        return new Promise(function (p) {
          if (v.u.Yp || b.xG())
            if (n ? b.Printable && b.kl() : b.kl()) {
              if (r) {
                var u = n ? 1 : v.u.tb(b.PageNumber - 1) / a.utils.getCanvasMultiplier();
                b.render(q, v, u, n)
              }
              v.KN(m, b, c, d, e, l, k).then(function () {
                p()
              })
            } else n || b.Tv(), p();
          else p()
        })
      },
      KN: function (b,
        a, c, d, e, k, m) {
        return this.EI(a) ? b.pM[b.Yf.indexOf(a)].then(function (b) {
          c.save();
          return b.draw(c, m, k, a.uf().offset).then(function () {
            c.restore()
          })
        })["catch"](function () {
          a.draw(c, d, e)
        }) : (a.draw(c, d, e), Promise.resolve())
      },
      HE: function (b, a, c, d, e, k, m, n, r, q) {
        a.save();
        var v = this.u.tb(b.Kb());
        this.ST(b, a, m);
        a.save();
        var p = this;
        return b.UH().then(function () {
          return p.JN(b, a, c, d, e, v, k, m, r, q)
        }).then(function () {
          a.restore();
          m || p.py(b, a, c);
          a.restore()
        })
      },
      ST: function (b, a, c) {
        var d = this.u.tb(b.Kb());
        !0 === b.NoZoom && (a.translate(b.Gn(),
          b.Hn()), c || (a.scale(1 / d, 1 / d), c = this.u.$d(b.PageNumber), 0 < c && (3 === c ? a.translate(b.ya(), 0) : 2 === c ? a.translate(b.ya(), b.xa()) : 1 === c && a.translate(0, b.xa()), a.rotate(-1 * c * Math.PI / 2))))
      },
      py: function (b, a, c) {
        if ("undefined" !== typeof b.selectionModel) {
          if (this.cl(b) && b.kl()) {
            var d = new b.selectionModel(b, this.Dd(b)),
              e = this.u.tb(b.Kb());
            !0 === b.NoZoom && (a.translate(-b.Gn(), -b.Hn()), e = 1);
            d.draw(a, b, e, c)
          }
        } else(b = this.Ig.aX(b)) && b.draw(a)
      },
      Qk: function (b) {
        var a = this,
          c = this.Qg().filter(function (c) {
            return c.PageNumber ===
              b && a.EI(c)
          }),
          d = c.map(function (b) {
            return b.uf()
          });
        return {
          pM: this.u.getDocument().Qk(d, b),
          Yf: c
        }
      },
      Zb: function (b) {
        this.sj(b) || (this.Yn = b);
        return this.Hd(b.PageNumber)
      },
      AT: function (b) {
        this.Zb = _.throttle(c.ka.prototype.Zb.bind(this), b)
      },
      MQ: function (b) {
        this.u.EG(b.Ac() - 1, [{
          x4: b.wn(),
          y4: b.Dn(),
          x2: b.QF(),
          y2: b.mF()
        }])
      },
      bQ: function (b) {
        this.gG([b])
      },
      gG: function (b) {
        0 !== b.length && (b.forEach(function (b) {
          b.Hidden = !0
        }), this.Gd(), this.gn(b), this.trigger("annotationHidden", [b, !0]))
      },
      VT: function (b) {
        this.JI([b])
      },
      JI: function (b) {
        b.forEach(function (b) {
          b.Hidden = !1
        });
        this.gn(b);
        this.trigger("annotationHidden", [b, !1])
      },
      sj: function (b) {
        return -1 < this.Wd.indexOf(b)
      },
      LA: function (b, a) {
        b.no(a);
        this.trigger("annotationChanged", [
          [b], "modify"
        ])
      },
      Lg: function (b, a) {
        this.Bh([b], a)
      },
      Bh: function (b, a) {
        if (b) {
          for (var c = 0; c < b.length; ++c) {
            var d = b[c];
            0 >= d.PageNumber && console.warn("Invalid annotation PageNumber: " + d.PageNumber);
            this.Wd.push(d);
            this.BI(d)
          }
          0 < b.length && (c = $.Event("annotationChanged"), c.imported = a, this.trigger(c, [b, "add"]))
        }
      },
      tU: function (b, a) {
        this.BI(b);
        if (b.Wh()) {
          var c =
            this.pq(b);
          this.trigger("setNoteText", [b, c])
        } else this.trigger("setNoteText", b);
        c = $.Event("annotationChanged");
        c.imported = a;
        this.trigger(c, [
          [b], "modify"
        ])
      },
      BI: function (b) {
        function a() {
          return (65536 * (1 + Math.random()) | 0).toString(16).substring(1)
        }
        b.Id || (b.Id = a() + a() + "-" + a() + "-" + a() + "-" + a() + "-" + a() + a() + a());
        b.mg && b.mg(this.u);
        b.xj() && b.Db(b.zb().value)
      },
      CI: function (b) {
        function a(b, c) {
          return c.DateCreated - b.DateCreated
        }
        var c = [],
          d;
        for (d = 0; d < b.length; ++d) {
          var e = b[d];
          if (e instanceof Annotations.Annotation)
            if (e.Wh()) {
              var k =
                this.nj(e.InReplyTo);
              k && k.Ax(e)
            } else c.push(e)
        }
        for (d = 0; d < c.length; ++d)
          if (b = c[d], 0 !== b.hu().length)
            for (e = [], e.push({
                Yi: b,
                hy: null
              }); 0 < e.length;) {
              var m = e.pop(),
                k = m.Yi;
              null !== m.hy && this.trigger("addReply", [k, m.hy, b]);
              for (var m = k.hu().sort(a), n = 0; n < m.length; ++n) e.push({
                Yi: m[n],
                hy: k
              })
            }
      },
      QT: function (b) {
        if (b.Wh()) {
          var a = this.nj(b.InReplyTo);
          a && (a.Ax(b), this.trigger("addReply", [b, a, this.pq(b)]))
        }
      },
      pq: function (b) {
        for (; null !== b && b.Wh();) b = this.nj(b.InReplyTo);
        return b
      },
      fN: function (b, a) {
        var c = new Annotations.Fi;
        c.InReplyTo = b.Id;
        c.X = b.X;
        c.Y = b.Y;
        c.PageNumber = b.PageNumber;
        c.Author = this.Uk();
        c.no(a || "");
        b.Ax(c);
        this.Lg(c);
        this.trigger("addReply", [c, b, this.pq(b)]);
        return c
      },
      gJ: function (b) {
        this.sj(b) && this.Hd(b.Ac())
      },
      gj: function (b, a, c) {
        this.cy([b], a, c)
      },
      cy: function (b, a, c) {
        var d = this,
          e = {};
        if (!a && this.NF()) this.u.trigger("notify", "readOnlyDelete");
        else {
          var k = [],
            m = !1;
          b = b.slice();
          for (var n = 0; n < b.length; n++) {
            var r = b[n];
            r.Tv();
            if (this.sj(r))
              if (c || a || this.Dd(r)) {
                this.Ig.Tp(r);
                this.trigger("annotationSelected", [
                  [r],
                  "deselected"
                ]);
                var q = this.Wd.splice(this.Wd.indexOf(r), 1);
                k.push(q[0]);
                r.IsAdded || a || this.fy.push(q[0]);
                r.Wh() && (r.cG && (q = this.pq(r), this.trigger("deleteReply", [r, q])), this.nj(r.InReplyTo).uN(r));
                r.hu().forEach(function (b) {
                  d.trigger("setNoteText", [b]);
                  b.InReplyTo = null;
                  d.CI([b])
                });
                e[r.Ac()] = !0
              } else m = !0;
            else e[r.Ac()] = !0
          }
          0 < k.length && (c = $.Event("annotationChanged"), c.imported = a, this.trigger(c, [k, "delete"]));
          m && this.u.trigger("notify", "permissionDelete");
          $.each(e, function (b) {
            d.Hd(parseInt(b, 10))
          })
        }
      },
      wU: function () {
        if (!this.readOnly) {
          this.Cp = [];
          for (var b = this.ae(), a = 0; a < b.length; a++)
            if (!(b[a] instanceof Annotations.Hb)) {
              var c = this.Fy(b[a]);
              this.Cp.push(c)
            } this.fs = 0
        }
      },
      MR: function () {
        if (!this.readOnly && "undefined" !== typeof this.fs) {
          this.fs++;
          for (var b = [], a = 0; a < this.Cp.length; a++) {
            var c = this.Fy(this.Cp[a]);
            b.push(c);
            var d = this.u.rn(),
              e = this.u.v.od(d - 1),
              k = this.u.v.nd(d - 1),
              e = new Annotations.Rect(0, 0, e, k),
              k = c.we();
            c.Ac() === d ? k.translate(5 * this.fs, 5 * this.fs) : c.qI(d);
            k.Pt(e);
            c.resize(k)
          }
          this.Bh(b);
          this.Cp =
            b;
          this.Gd();
          this.CA(b)
        }
      },
      Fy: function (b) {
        function a() {
          return (65536 * (1 + Math.random()) | 0).toString(16).substring(1)
        }
        var c = this.uP(b);
        if (null === c) return null;
        var d = b.Kb(),
          d = this.u.Oc(d),
          e = d.inverse(),
          k = document.createElementNS("", b.elementName),
          k = b.serialize(k, e);
        b = new c;
        b.deserialize(k, d, this);
        b.Id = a() + a() + "-" + a() + "-" + a() + "-" + a() + "-" + a() + a() + a();
        b.Author = this.zt;
        b.DateCreated = new Date;
        b.DateModified = new Date;
        b.IsAdded = !0;
        b.IsModified = !1;
        return b
      },
      tO: function (b) {
        return b.lV()
      },
      cl: function (b) {
        return this.Ig.GD(b)
      },
      jo: function (b) {
        b.Listable && this.sj(b) && (this.Ig.jo(b), this.Hd(b.Ac()), this.trigger("annotationSelected", [
          [b], "selected"
        ]))
      },
      CA: function (b) {
        var a = [],
          c = {};
        if (b && $.isArray(b)) {
          for (var d = 0; d < b.length; d++) {
            var e = b[d];
            e.Listable && this.sj(e) && (this.Ig.jo(e), c[e.Ac()] = e.Ac(), a.push(e))
          }
          var k = this;
          $.each(c, function (b) {
            k.Hd(parseInt(b, 10))
          })
        }
        0 < a.length && this.trigger("annotationSelected", [a, "selected"])
      },
      Gd: function () {
        if (0 !== this.ae().length) {
          this.Ig.Gd();
          for (var b = this.u.ea.be(), a = 0; a < b.length; a++) this.Hd(b[a] +
            1);
          this.trigger("annotationSelected", [null, "deselected"])
        }
      },
      Tp: function (b) {
        this.Ig.Tp(b);
        this.Hd(b.Ac());
        this.trigger("annotationSelected", [
          [b], "deselected"
        ])
      },
      ae: function () {
        return this.Ig.ae()
      },
      Qg: function () {
        return this.Wd
      },
      nj: function (b, a) {
        a = a || this.Wd;
        if (_.isUndefined(b) || _.isNull(b)) return null;
        for (var c = 0; c < a.length; c++)
          if (a[c].Id === b) return a[c];
        return null
      },
      jF: function (b, a, c) {
        c = c || this.Wd;
        if (_.isUndefined(b) || _.isNull(b)) return [];
        for (var d = [], e = 0; e < c.length; e++) c[e].Id === b && d.push(c[e]);
        return _.isUndefined(a) ?
          d : d.filter(function (b) {
            return b.PageNumber - 1 === a
          })
      },
      pn: function (b) {
        b = this.kF(b);
        return 0 < b.length ? b[0] : null
      },
      kF: function (b) {
        if (!this.u.Yp) return [];
        var a = new window.ia.Tool(this.u);
        b = a.Zd({
          x: a.bg(b).x,
          y: a.bg(b).y
        });
        a = [];
        if (null !== b)
          for (var c = this.Qg(), d = new Annotations.Rect(b.x, b.y, b.x, b.y), e = c.length - 1; 0 <= e; e--) {
            var k = c[e];
            if (k.selectionModel && k.kl() && k.Ac() - 1 === b.pageIndex) {
              var m = Annotations.pc.canvasVisibilityPadding,
                n = k.we();
              n.translate(-m, -m);
              n.x2 += 2 * m;
              n.y2 += 2 * m;
              if (window.utils.isRectIntersecting(n,
                  d) || k.IsClickableOutsideRect) {
                var m = this.u.tb(k.Kb()),
                  n = this.u.Oc(k.Kb()),
                  r = this.cl(k),
                  q = new k.selectionModel(k, this.Dd(k), r);
                q.testSelection(k, b.x, b.y, n, m) ? a.push(k) : r && q.mr(k, m, b.x, b.y) && a.push(k)
              }
            }
          }
        return a
      },
      sF: function (b, a) {
        return this.Ig.sF(b, a)
      },
      UE: function (b) {
        this.u.JD || console.warn("exportAnnotations was called before all annotations were loaded.");
        return this.Dk.QK(b)
      },
      Ut: function () {
        return this.Dk.Ut()
      },
      ZE: function (b) {
        this.CI(b);
        this.u.OF().hi("DocumentViewer.renderRequest", {
          type: "annotations",
          pages: _.uniq(b.map(function (b) {
            return b.Ac() - 1
          }))
        })
      },
      hQ: function (b, c) {
        var d = a.Annotations.ba.sq(b),
          d = this.Dk.ZJ(d, c && c.Dz);
        this.ZE(d);
        return d
      },
      lG: function (b, c, d) {
        c = c || function () {};
        var e = this;
        b = a.Annotations.ba.sq(b);
        d = $.extend({
          gl: function () {
            return e.cn
          },
          batchSize: 100,
          batchDelay: 0
        }, d);
        this.Dk.$J(b, function (b) {
          e.cn ? c([]) : (b = b.Yf, e.ZE(b), c(b))
        }, d)
      },
      Mn: function (b) {
        b = a.Annotations.ba.sq(b);
        b = this.Dk.Mn(b);
        var c = [];
        b.bt && (c = c.concat(b.bt), 0 < b.bt.length && this.QT(b.bt[0]));
        b.wE && (c = c.concat(b.wE));
        b.RG &&
          (c = c.concat(b.RG));
        return c
      },
      gn: function (b) {
        b = _.uniq(b.map(function (b) {
          return b.PageNumber
        }));
        for (var a = 0; a < b.length; a++) this.Hd(b[a], void 0, !0)
      },
      Yc: function () {
        this.Qg().forEach(function (b) {
          b.off();
          b.sd && b.sd.off();
          b.innerElement && b.innerElement.off();
          b.element && b.element.off()
        });
        this.init();
        this.cn = !0;
        this.Pg.Yc();
        return Promise.resolve()
      },
      fS: function (b, a) {
        if ("string" !== typeof b || !a) return !1;
        "undefined" === typeof this.Zi[b] && (this.Zi[b] = []);
        this.Zi[b].push(a);
        return !0
      },
      wN: function (b, a) {
        if ("string" !==
          typeof b || !a) return !1;
        this.Zi[b] = $.grep(this.Zi[b], function (b) {
          return b !== a
        });
        return !0
      },
      vP: function () {
        return this.Zi
      },
      uP: function (b) {
        if (!b || !b.elementName) return null;
        var a = this.Zi[b.elementName];
        if (a && 0 < a.length)
          for (var c = 0; c < a.length; c++) {
            var d = a[c];
            if (b instanceof d) return d
          }
        return null
      },
      UQ: function (b) {
        var a = this.Bt[b];
        if (a) {
          var c = a.length;
          b = this.u.Oc(b);
          for (var d = [], e = 0; e < c; ++e) {
            var k = a[e].Yi,
              m = a[e].data;
            k.isImporting = !0;
            k.deserialize(m, b, this);
            k.isImporting = !1;
            k.IsAdded = !1;
            k.IsModified = !1;
            d.push(k)
          }
          this.Bh(d,
            !0);
          this.gn(d)
        }
      },
      My: function () {
        return this.wC
      },
      OS: function (b, a) {
        var c = "StrokeColor TextColor FillColor FontSize Opacity StrokeThickness".split(" ").reduce(function (a, c) {
            if (b[c] || 0 === b[c]) a[c] = b[c];
            return a
          }, {}),
          d = a(c);
        d && (Object.keys(d).forEach(function (a) {
          b[a] = d[a]
        }), this.gJ(b), this.trigger("annotationChanged", [
          [b], "modify"
        ]))
      },
      gI: function (b) {
        this.FD = b
      },
      HO: function (b) {
        return this.FD(b)
      }
    };
    $.extend(c.ka.prototype, a.utils.eventHandler);
    d.prototype = {
      jo: function (b) {
        this.GD(b) || this.Cl.push(b)
      },
      Tp: function (b) {
        this.Cl =
          $.grep(this.Cl, function (a) {
            return a !== b
          })
      },
      Gd: function () {
        this.Cl = []
      },
      GD: function (b) {
        for (var a = 0; a < this.Cl.length; a++)
          if (b === this.Cl[a]) return !0;
        return !1
      },
      ae: function () {
        return this.Cl.slice()
      }
    };
    e.prototype = {
      disable: function () {
        this.Xf.off("annotationChanged.editbox");
        this.Xf.off("annotationDoubleClicked.editbox")
      },
      bG: function (b) {
        return b instanceof Annotations.Ja
      },
      oG: function (b) {
        var a = this.Xf,
          c = this;
        b.sd = $('<textarea class="freetext">');
        b.sd.on("blur", function () {
          c.tq = !1;
          a.LA(b, b.sd.val());
          b.sd.hide();
          a.gn([b])
        });
        b.sd.on("touchstart touchmove touchend mousedown mousemove mouseup", function (b) {
          b.stopPropagation()
        })
      },
      cF: function (b) {
        this.tq = !0;
        var c = b.Kb();
        a.o.za.rz(c).append(b.sd);
        var d = this.Xf.u.Oc(c),
          e = Annotations.sa.ht(d, parseFloat(b.FontSize) || 12),
          l = b.Ry(),
          c = this.Xf.u.tb(c) / a.utils.getCanvasMultiplier(),
          e = e * c * .75 + l,
          d = b.mj(d) * c,
          k = b.getPath().slice(-2),
          l = k[0].x * c,
          m = Math.min(k[0].y, k[1].y) * c,
          n = Math.abs(k[1].x - k[0].x) * c,
          k = Math.abs(k[1].y - k[0].y) * c,
          r = 360 - b.Rotation;
        if (90 === r || 270 === r) var q = n,
          n = k,
          k =
          q;
        var v = q = 0;
        switch ((360 - r) % 360) {
          case 90:
            v = n;
            break;
          case 180:
            q = n;
            v = k;
            break;
          case 270:
            q = k
        }
        q = "translate(" + q + "px," + v + "px) rotate(" + r + "deg)";
        r = Math.abs(r % 360 / 90);
        r === a.o.Sa.Mh ? (l += d, m += d) : r === a.o.Sa.Qe ? (l -= d, m += d) : r === a.o.Sa.Vp ? (l -= d, m -= d) : r === a.o.Sa.Zf && (l += d, m -= d);
        r = 1 > b.FillColor.A ? new Annotations.Color(255, 255, 255) : b.FillColor;
        b.sd.css({
          top: m,
          left: l,
          width: n - 2 * d,
          height: k - 2 * d,
          font: e + " " + b.Font,
          color: b.TextColor.toString(),
          background: r.toString(),
          transform: q,
          "transform-origin": "top left",
          "line-height": a.utils.ie ?
            1 : "normal",
          "padding-top": a.utils.ie ? Math.max(1, 1 + 1.5 * (c - 1)) : 0
        });
        b.sd.val(b.Tk() || "");
        this.WT(b)
      },
      WT: function (b) {
        b.sd.show().focus()
      }
    }
  })(window);
  (function (a) {
    a.Td = {
      QG: function (a, d, c, b) {
        return null === a || null === d || null === c || null === b ? null : {
          x1: a,
          y1: d,
          x2: a + c,
          y2: d + b
        }
      },
      RX: function (a, d) {
        if (!d || !a) return !1;
        var c, b;
        "undefined" !== typeof d.x1 && "undefined" !== typeof d.y1 && "undefined" !== typeof d.x2 && "undefined" !== typeof d.y2 || console.warn("rect points are undefined");
        c = a.x >= d.x1 && a.x <= d.x2;
        b = a.y >= d.y1 && a.y <= d.y2;
        return c && b
      },
      bS: function (a, d) {
        return a && d ? a.x1 <= d.x2 && a.x2 >= d.x1 && a.y1 <= d.y2 && a.y2 >= d.y1 ? !0 : !1 : !1
      },
      LX: function (a, d, c, b, f) {
        a = f.W(new XODText.xd(a,
          d));
        c = f.W(new XODText.xd(c, b));
        return {
          x: Math.min(a.x, c.x),
          y: Math.min(a.y, c.y),
          w: Math.abs(a.x - c.x),
          yf: Math.abs(a.y - c.y)
        }
      },
      Math: {
        QQ: function (a, d, c, b) {
          function f(b, a, c) {
            return (c.y - b.y) * (a.x - b.x) > (a.y - b.y) * (c.x - b.x)
          }
          return f(a, c, b) !== f(d, c, b) && f(a, d, c) !== f(a, d, b)
        },
        rO: function (a, d) {
          var c = Math.atan(Math.abs(a.y - d.y) / Math.abs(a.x - d.x));
          d.x < a.x && d.y > a.y ? c = Math.PI - c : d.x <= a.x && d.y < a.y ? (c = Math.PI - c, c *= -1) : d.x >= a.x && d.y < a.y && (c *= -1);
          0 === c && a.x > d.x && (c = Math.PI);
          return c
        },
        xS: function (a, d, c) {
          c = c || {
            x: 0,
            y: 0
          };
          var b =
            a.x - c.x;
          a = a.y - c.y;
          return {
            x: Math.cos(d) * b - Math.sin(d) * a + c.x,
            y: Math.sin(d) * b + Math.cos(d) * a + c.y
          }
        },
        WD: function (a, d, c) {
          c = void 0 !== c ? c : Infinity;
          d = void 0 !== d ? d : -Infinity;
          return Math.max(Math.min(a, c), d)
        },
        sO: function (a, d) {
          return Math.atan2(d, a)
        },
        qP: function (a) {
          if (!(3 > a.length)) {
            for (var d = a[0], c = 0, b = 1; b < a.length; b++) var f = a[b],
              c = c + (f.x - d.x) * (f.y + d.y),
              d = f;
            return 0 <= c ? 1 : -1
          }
        },
        YM: function (a) {
          for (var d = [], c = 0; c < a.length; c++) d.push({
            x: a[c].x,
            y: a[c].y
          });
          return d
        },
        sH: function (a) {
          if (1 > a.length) return !1;
          var d = Math.abs(a[a.length -
            1].y - a[0].y);
          return 1.2358E-4 < Math.abs(a[a.length - 1].x - a[0].x) || 1.2358E-4 < d ? !0 : !1
        },
        Al: function (a) {
          var d = Math.cos(a);
          a = Math.sin(a);
          return {
            m_a: d,
            m_b: -a,
            m_c: a,
            m_d: d,
            m_h: 0,
            m_v: 0
          }
        },
        translate: function (a, d, c) {
          a.m_h += d;
          a.m_v += c;
          return a
        },
        W: function (a, d, c) {
          return {
            x: d * a.m_a + c * a.m_c + a.m_h,
            y: d * a.m_b + c * a.m_d + a.m_v
          }
        },
        tM: function (a, d, c, b, f, g, h, l, k, m, n) {
          0 > f && (f = -f);
          0 > g && (g = -g);
          var r = (a - m) / 2,
            q = (d - n) / 2,
            v = Math.cos(h),
            p = Math.sin(h),
            u = v * r + p * q,
            r = -p * r + v * q,
            q = f * f,
            w = g * g,
            A = u * u,
            B = r * r,
            z = A / q + B / w;
          1 < z && (f *= Math.sqrt(z), g *= Math.sqrt(z),
            q = f * f, w = g * g);
          if (z = q * B + w * A) {
            q = (q * w - q * B - w * A) / z;
            l = (l === k ? -1 : 1) * Math.sqrt(0 > q ? 0 : q);
            w = f * r / g * l;
            A = l * -(g * u / f);
            l = (a + m) / 2 + (v * w - p * A);
            v = (d + n) / 2 + (p * w + v * A);
            p = (u - w) / f;
            q = (r - A) / g;
            w = (-u - w) / f;
            r = (-r - A) / g;
            A = Math.sqrt(p * p + q * q);
            u = (0 > q ? -1 : 1) * Math.acos(p / A);
            A = Math.sqrt((p * p + q * q) * (w * w + r * r));
            q = (0 > p * r - q * w ? -1 : 1) * Math.acos(Math.max(Math.min((p * w + q * r) / A, 1), -1));
            !k && 0 < q ? q -= 2 * Math.PI : k && 0 > q && (q += 2 * Math.PI);
            r = [];
            p = !1;
            if (1E-9 > Math.abs(q)) k = 4, p = !0, r[0] = f * Math.cos(u), r[1] = g * Math.sin(u), r[2] = f * Math.cos(u + q), r[3] = g * Math.sin(u + q);
            else {
              w =
                0;
              k = 2;
              B = !1;
              do {
                0 > q ? (z = w, A = .5 * -Math.PI, w -= .5 * Math.PI, w <= q + .01 && (A = q - z, B = !0)) : (z = w, A = .5 * Math.PI, w += .5 * Math.PI, w >= q - .01 && (A = q - z, B = !0));
                var x = Math.cos(A / 2),
                  y = Math.sin(A / 2),
                  F = 4 * (1 - x) / 3,
                  L = y - F * x / y,
                  z = [],
                  D = [];
                z[0] = x;
                D[0] = -y;
                z[1] = x + F;
                D[1] = -L;
                z[2] = x + F;
                D[2] = L;
                z[3] = x;
                D[3] = y;
                x = Math.sin(u + A / 2);
                y = Math.cos(u + A / 2);
                for (F = 0; 4 > F; F++) r[k - 2 + 2 * F] = f * (z[F] * y - D[F] * x), r[k - 1 + 2 * F] = g * (z[F] * x + D[F] * y);
                k += 6;
                u += A
              } while (!B && 26 > k)
            }
            f = this.Al(-h);
            this.translate(f, l, v);
            for (g = 2; g < k - 2; g += 2) h = void 0 === r[g] ? this.W(f, 0, 0) : this.W(f, r[g], r[g + 1]),
              r[g] = h.x, r[g + 1] = h.y;
            r[0] = a;
            r[1] = d;
            2 < k && (r[k - 2] = m, r[k - 1] = n);
            if (p) b.push("l"), b.push("l"), c.push(r[0]), c.push(r[1]), c.push(r[2]), c.push(r[3]);
            else
              for (b.push("l"), c.push(r[0]), c.push(r[1]), a = 2; a < k; a += 6) b.push("c"), c.push(r[a]), c.push(r[a + 1]), c.push(r[a + 2]), c.push(r[a + 3]), c.push(r[a + 4]), c.push(r[a + 5])
          }
        },
        lN: function (a, d) {
          return a.x * d.y - a.y * d.x
        },
        DX: function (a) {
          return 1E4 * (a + 2 * Math.PI) % 2 * Math.PI * 1E4 / 1E4
        }
      }
    }
  })(window);
  (function (a) {
    function e(b) {
      if (!b) throw Error("XfdfManager requires AnnotationManager to initialize");
      this.ec = b;
      this.ai = null
    }

    function d(b, a) {
      this.jB = b;
      this.Mt = a || function () {
        return !0
      }
    }
    String.prototype.trim || function () {
      var b = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;
      String.prototype.trim = function () {
        return this.replace(b, "")
      }
    }();
    d.prototype.Sq = function (b, a, d) {
      b = this.jB;
      b.writeStartElement("field");
      b.writeAttributeString("name", c.escape(a));
      a = d.value;
      _.isNull(a) || (b.writeStartElement("value"), b.writeString(c.escape(a)),
        b.writeEndElement());
      b.writeEndElement()
    };
    d.prototype.Vu = function (b, a, d) {
      b = c.escape(a);
      a = this.jB;
      d.value && (a.writeStartElement("field"), a.writeAttributeString("name", b), a.writeStartElement("value"), a.writeString(c.escape(d.value)), a.writeEndElement(), a.writeEndElement());
      a.writeStartElement("field");
      a.writeAttributeString("name", b)
    };
    d.prototype.Yz = function () {
      this.jB.writeEndElement()
    };
    e.prototype = {
      ND: function (b) {
        return b && 0 < b.getElementsByTagName("annots").length ? (c.xF(b, "link"), c.xF(b, "widget"),
          b.getElementsByTagName("annots")[0].childNodes) : []
      },
      Ny: function (b) {
        return b ? b.querySelector("xfdf > fields") : null
      },
      HF: function (b) {
        return b && (b = b.getElementsByTagName("pdf-info"), 0 < b.length) ? b[0] : null
      },
      xD: function (b, c, d) {
        var e = this;
        a.bf.parse(new a.Je(b), function (b) {
          return e.ec.u.Oc(b - 1)
        }, function (b) {
          var a = e.ec,
            d = a.Pg,
            g = a.u;
          if (g.getDocument()) {
            d.QS(b.calculationOrder);
            var r = b.fields;
            Object.keys(r).forEach(function (b) {
              var a = r[b],
                c = d.du(a.name);
              a.Ce(c.Xa());
              d.Ys(r[b], !0)
            });
            a.Bh(b.widgets, !0);
            a.Bh(b.custom,
              !0);
            g = g.getDocument();
            g.Ws(b.documentActions);
            for (var a = b.pages, g = g.Lb(), q = 0; q < a.length; ++q) {
              var v = a[q],
                p = Number(v.number);
              0 < p && p < g.length + 1 ? g[p - 1].Ws(v.actions) : console.warn("Invalid page number on PDFInfo page:", p)
            }
            c(b)
          }
        }, d)
      },
      ZJ: function (b, c) {
        function d() {
          var a = e.HF(b);
          a && e.xD(a, function (b) {
            l = b.widgets;
            l = l.concat(b.custom)
          }, !0)
        }
        var e = this,
          l = [],
          k = this.ND(b),
          m = this.Ny(b);
        m ? this.zx(new a.Je(m), d, !0) : d();
        return null !== k ? l.concat(this.ew(k, !0, c)) : l
      },
      $J: function (b, c, d) {
        function e() {
          var a = l.HF(b);
          a ? l.xD(a,
            function (b) {
              l.vD(k, function (a) {
                a.Yf = a.Yf.concat(b.widgets);
                a.Yf = a.Yf.concat(b.custom);
                c(a)
              }, d)
            }) : l.vD(k, function () {
            c.apply(this, arguments)
          }, d)
        }
        var l = this,
          k = this.ND(b),
          m = this.Ny(b);
        m ? this.zx(new a.Je(m), e, !1) : e()
      },
      Mn: function (b) {
        var c = {};
        if (b) {
          var d = this.Ny(b);
          d && this.zx(new a.Je(d), function () {}, !0);
          var d = b.getElementsByTagName("add"),
            e = b.getElementsByTagName("modify");
          b = b.getElementsByTagName("delete");
          0 < d.length && (c.bt = this.ew(d[0].childNodes, !0));
          0 < b.length && (c.wE = this.IJ(b[0]));
          0 < e.length && (c.RG =
            this.eK(e[0].childNodes))
        }
        return c
      },
      IJ: function (b) {
        var a = [];
        b = b.getElementsByTagName("id");
        for (var c = 0; c < b.length; ++c) {
          var d = this.ec.nj(b[c].textContent);
          d && (a.push(d), this.ec.gj(d, !0))
        }
        return a
      },
      eK: function (b) {
        return this.ew(b, !0)
      },
      ew: function (b, a, c) {
        var d = [];
        this.uD(b, d, 0, b.length, a, c);
        return d
      },
      Lg: function (b, a, c, d, e) {
        var k = this.ec,
          m = null,
          n = !1,
          r = k.Zi[b];
        if (r) {
          var q = a.getAttribute("page"),
            q = parseInt(q, 10),
            v;
          q < k.u.Ab() && (v = k.u.Oc(q));
          for (var p = 0; p < r.length; p++)
            if (r[p].prototype.Eh(a)) {
              m = null;
              if (c) {
                c =
                  a.getAttribute("name");
                var u = parseInt(a.getAttribute("page"), 10),
                  m = this.ec.jF(c, u)[0];
                if (!m && this.ec.jF(c, u, d)[0]) break
              }
              if (!m) {
                var w;
                "widget" === b && (b = a.getAttribute("title"), w = k.Pg.du(b));
                m = new r[p](w);
                n = !0
              }
              try {
                if (v) m.isImporting = !0, m.deserialize(a, v, k), m.isImporting = !1;
                else return k.Bt[q] || (k.Bt[q] = []), k.Bt[q].push({
                  data: a,
                  Yi: m
                }), {
                  Yi: null,
                  DI: !1
                };
                m.aT(e)
              } catch (A) {
                console.warn("Error parsing annotation", A);
                n = !1;
                m = null;
                break
              }
              n || k.tU(m, !0);
              m.IsAdded = !1;
              m.IsModified = !1;
              break
            }
        } else console.warn("Unsupported annotation type.",
          b);
        return {
          Yi: m,
          DI: n
        }
      },
      uD: function (b, a, d, e, l, k) {
        for (var m = []; d < e; ++d)
          if (b[d].nodeType === Node.ELEMENT_NODE) {
            var n = this.Lg(c.au(b[d]), b[d], l, a, k),
              r = n.Yi;
            r && (a.push(r), n.DI && m.push(r))
          } 0 < m.length && (this.ec.Bh(m, !0), m.forEach(function (b) {
          b.IsAdded = !1;
          b.IsModified = !1
        }))
      },
      zx: function (b, c, d) {
        function e(a) {
          var c = b.K("name");
          if (!c) return console.warn("Invalid field name part:", c, b.current), null;
          a = a ? a + "." + c : c;
          var c = {
              name: a
            },
            f = [c],
            d = null;
          for (b.na(); b.advance();) {
            var g = b.ua();
            switch (g) {
              case "value":
                _.isNull(d) ?
                  d = b.current.textContent : (_.isArray(d) || (d = [d]), d.push(b.current.textContent));
                break;
              case "field":
                (g = e(a)) && 0 < g.length && (f = f.concat(g));
                break;
              default:
                console.warn("unknown field child node: ", g)
            }
          }
          b.Aa();
          _.isNull(d) || (c.value = d);
          return f
        }
        var l = this.ec.Pg;
        b.na();
        b.advance() ? a.busyLoop(function () {
          "field" === b.ua() && e("").forEach(function (b) {
            l.Ys(b, !0)
          });
          var a = b.advance();
          a || b.Aa();
          return a
        }, c, d) : c()
      },
      lH: function (b) {
        var a = [];
        $(b).each(function (b, c) {
          a.push(c.textContent.trim())
        });
        return a
      },
      vD: function (b,
        a, c) {
        function d() {
          if (c.gl()) a({
            Yf: []
          });
          else {
            e.uD(b, r, k, Math.min(k + n, b.length), !0, c.Dz);
            if (k > m) {
              m += 1E3;
              for (var q = e.ec.u.Wk().be(), v = 0; v < q.length; v++) e.ec.Hd(q[v] + 1)
            }
            setTimeout(function () {
              k += n;
              k < b.length ? d() : a({
                Yf: r
              })
            }, c.batchDelay)
          }
        }
        var e = this,
          k = 0,
          m = 1E3,
          n = 2 * c.batchSize,
          r = [];
        d()
      },
      Tr: function (b, a, c) {
        var d = this.ec.u.Oc(b.Ac() - 1).inverse(),
          e = document.createElementNS("", b.elementName);
        b.serialize(e, d, c);
        b = new XMLSerializer;
        e.WE && this.ai.push(e.WE);
        e = b.serializeToString(e);
        a.writeString(e)
      },
      MK: function (b) {
        var c =
          this.ec,
          d = c.Xd(),
          e = c.u,
          l = e.getDocument(),
          k = [];
        d.ur({
          Sq: function (b, a, c) {
            void 0 !== c.type && k.push(c)
          },
          Vu: function (b, a, c) {
            void 0 !== c.type && k.push(c)
          }
        });
        var m = l.Lb().map(function (b, a) {
          return {
            number: a + 1,
            actions: b.lj()
          }
        }).filter(function (b) {
          return 0 < Object.keys(b.actions).length
        });
        a.bf.write(b, {
          calculationOrder: d.Jx,
          widgets: c.Qg().filter(function (b) {
            return b.xj()
          }),
          fields: k,
          documentActions: l.lj(),
          pages: m
        }, function (b) {
          return 1 > b ? (console.warn("Invalid page number:", b), b = new XODText.Ca, b.al(1, 0, 0, 1, 0, 0), b) :
            e.Oc(b - 1)
        })
      },
      QK: function (b) {
        var a = this;
        b = b || {};
        var d = new XMLWriter("UTF-8", "1.0");
        d.formatting = "none";
        this.ai = [];
        var e, l, k;
        b.annotList ? (e = b.fields || !1, l = b.widgets || !1, k = b.links || !1) : (e = !1 !== b.fields, l = !1 !== b.widgets, k = !1 !== b.links);
        d.writeStartDocument();
        d.writeStartElement("xfdf");
        d.writeAttributeString("xmlns", "http://ns.adobe.com/xfdf/");
        d.writeAttributeString("xml:space", "preserve");
        l && this.MK(d);
        e && this.JK(d);
        d.writeStartElement("annots");
        e = this.ec;
        b = b.annotList || e.Qg();
        for (var m = 0; m < b.length; ++m) e =
          b[m], e instanceof Annotations.kd ? k && this.Tr(e, d, !0) : e instanceof Annotations.WidgetAnnotation || this.Tr(e, d, !0);
        d.writeEndElement();
        d.writeEndElement();
        this.NK(d);
        d = d.flush();
        m = 0;
        this.ai.length && (d = d.replace(c.PH, function () {
          return a.ai[m++]
        }));
        this.ai = null;
        return d
      },
      NK: function (b) {
        var a = this.ec;
        b.writeStartElement("pages");
        var c = a.u.getDocument().Lb();
        if (c) {
          var d = a.u.Oc(0);
          b.writeStartElement("defmtx");
          b.writeAttributeString("matrix", "" + (d.m_a + "," + d.m_b + "," + d.m_c + "," + d.m_d + "," + d.m_h + "," + d.m_v));
          b.writeEndElement();
          for (var e = 1; e < c.length; ++e) {
            var k = a.u.Oc(e);
            if (!k.SE(d)) {
              b.writeStartElement("pgmtx");
              var m = "",
                m = m + (k.m_a + "," + k.m_b + "," + k.m_c + "," + k.m_d + "," + k.m_h + "," + k.m_v);
              b.writeAttributeString("matrix", m);
              b.writeAttributeString("page", e.toString());
              b.writeEndElement()
            }
          }
        }
        b.writeEndElement()
      },
      HK: function (b) {
        b.writeStartElement("add");
        for (var a = this.ec.Qg(), c = 0; c < a.length; ++c) {
          var d = a[c];
          d.IsAdded && (this.Tr(d, b), d.IsAdded = !1)
        }
        b.writeEndElement()
      },
      LK: function (b) {
        b.writeStartElement("modify");
        for (var a = this.ec, c = a.Qg(),
            d = 0; d < c.length; ++d) {
          var e = c[d];
          e.IsModified && a.Dd(e) && (this.Tr(e, b), e.IsModified = !1)
        }
        b.writeEndElement()
      },
      IK: function (b) {
        b.writeStartElement("delete");
        for (var a = this.ec, c = this.QJ(), d = 0; d < c.length; ++d) b.writeStartElement("id"), b.writeAttributeString("page", c[d].Cb), b.writeString(c[d].id), b.writeEndElement();
        a.fy.length = 0;
        b.writeEndElement()
      },
      JK: function (b) {
        b.writeStartElement("fields");
        this.ec.Pg.ur(new d(b));
        b.writeEndElement()
      },
      KK: function (b) {
        b.writeStartElement("fields");
        var a = [];
        this.ec.Pg.ur(new d(b,
          function (b) {
            a.push(b);
            return b.IsModified
          }));
        a.forEach(function (b) {
          b.IsModified = !1
        });
        b.writeEndElement()
      },
      OK: function (b) {
        var c = new XMLWriter("UTF-8", "1.0");
        c.writeStartDocument();
        c.writeStartElement("xfdf");
        c.writeAttributeString("xmlns", "http://ns.adobe.com/xfdf/");
        c.writeAttributeString("xml:space", "preserve");
        c.writeStartElement("fields");
        var g = new a.Annotations.O.yi;
        b.forEach(function (b) {
          g.Ys(b)
        });
        g.ur(new d(c));
        c.writeEndElement();
        c.writeEndElement();
        b = c.flush();
        return b = b.replace(/\t/g, "")
      },
      PK: function (b) {
        for (var a = [], c = 0; c < b.length; ++c) {
          var d = b[c];
          _.isUndefined(d.name) || a.push(d.name + "=" + encodeURIComponent(d.value))
        }
        return a.join("&")
      },
      Ut: function () {
        var b = this;
        this.ai = [];
        var a = new XMLWriter("UTF-8", "1.0");
        a.writeStartDocument();
        a.writeStartElement("xfdf");
        a.writeAttributeString("xmlns", "http://ns.adobe.com/xfdf/");
        a.writeAttributeString("xml:space", "preserve");
        this.KK(a);
        this.HK(a);
        this.LK(a);
        this.IK(a);
        a.writeEndElement();
        var a = a.flush(),
          a = a.replace(/\t/g, ""),
          d = 0;
        this.ai.length && (a =
          a.replace(c.PH, function () {
            return b.ai[d++]
          }));
        this.ai = null;
        return a
      },
      QJ: function () {
        return _.map(this.ec.fy, function (b) {
          return {
            id: b.Id,
            Cb: b.Kb()
          }
        })
      }
    };
    a.o.$K = e;
    var c = {
      PH: /<replace-element-please ?\/>|<replace-element-please><\/replace-element-please>/g,
      lS: "replace-element-please",
      sq: function (b) {
        if ("string" === typeof b) {
          for (var a = (new DOMParser).parseFromString(b, "text/xml"), c = a.getElementsByTagName("contents-richtext"), d = 0, e = 0; 0 < (d = b.indexOf("<contents-richtext>", d)); ++e)
            if (e < c.length) {
              var k = b.indexOf("</contents-richtext>",
                d);
              c[e].BR = b.substring(d + 19, k);
              d = k
            } else {
              console.warn("contents-richtext: More elements found by searching!");
              break
            } e < c.length && console.warn("contents-richtext More elements found by getElementsByTagName!");
          return a
        }
        return b
      },
      bB: function (b) {
        var a;
        a = "D:" + b.getFullYear().toString();
        a += this.Ud((b.getMonth() + 1).toString());
        a += this.Ud(b.getDate().toString());
        a += this.Ud(b.getHours().toString());
        a += this.Ud(b.getMinutes().toString());
        a += this.Ud(b.getSeconds().toString());
        b = b.getTimezoneOffset();
        0 === b ? a += "Z00'00'" :
          (0 > b ? (a += "+", b *= -1) : a += "-", a += this.Ud(parseInt(b / 60, 10).toString()) + "'", a += this.Ud((b % 60).toString()) + "'");
        return a
      },
      toDateString: function (b) {
        return b.getFullYear().toString() + "-" + this.Ud((b.getMonth() + 1).toString()) + "-" + this.Ud(b.getDate().toString()) + " " + this.Ud(b.getHours().toString()) + ":" + this.Ud(b.getMinutes().toString()) + ":" + this.Ud(b.getSeconds().toString())
      },
      Ud: function (b) {
        return 2 > b.length ? "0" + b : b
      },
      escape: function (b) {
        b && (b = _.escape(b), b = b.replace(/(?:\r\n|\r|\n)/g, "&#xA;"));
        return b
      },
      toFixed: function (b,
        a) {
        _.isUndefined(a) && (a = 2);
        return parseFloat(b.toFixed(a)).toString()
      },
      getAttribute: function (b, a) {
        return b.getAttribute(a) || b.getAttribute(a.toLowerCase())
      },
      au: function (b) {
        return b.localName || b.baseName || b.nodeName
      },
      xF: function (b, a) {
        var c = [],
          d = b.getElementsByTagName(a);
        if (0 === d.length) return c;
        for (var e = 0; e < d.length; ++e) {
          var k = d[e].outerHTML || d[e].xml;
          if (_.isUndefined(k) || 0 !== k.indexOf("<" + a + " ")) k = (new XMLSerializer).serializeToString(d[e]);
          0 > k.indexOf("</" + a + ">") && "/" !== k.charAt(k.length - 2) && (k =
            k.slice(0, k.length - 1) + "/" + k.slice(k.length - 1));
          c.push(k)
        }
        return c
      },
      bX: function (b) {
        return c.getAttribute(b, "ActionType") ? !0 : 0 < b.getElementsByTagName("OnActivation").length
      },
      pO: function (b) {
        return c.getAttribute(b, "ActionType") ? [b] : b.getElementsByTagName("Action")
      },
      qO: function (b) {
        if (!b) return null;
        var a = c.getAttribute(b, "ActionType");
        return a ? a : (b = c.Oy(b)) ? c.au(b) : null
      },
      Oy: function (b) {
        b = _.filter(b.childNodes, function (b) {
          return 1 === b.nodeType
        });
        return 0 < b.length ? b[0] : null
      },
      qn: function (b, a, d) {
        a = c.getAttribute(b,
          a);
        _.isNull(a) && (a = b.getElementsByTagName(d), a = 0 < a.length ? a[0].textContent : null);
        return a
      },
      iW: function (b, a, c) {
        c = c.W({
          x: _.isNull(b) ? 0 : parseFloat(b),
          y: _.isNull(a) ? 0 : parseFloat(a)
        });
        return {
          x: _.isNull(b) ? null : c.x,
          y: _.isNull(a) ? null : c.y
        }
      },
      JW: function (b, a, c) {
        b = b.split(";");
        for (var d = [], e = 0; e < b.length; ++e) {
          var k = b[e].split(","),
            k = new XODText.xd(k[0], k[1]),
            k = new Annotations.Point(k.x, k.y);
          a.W(k);
          "function" === typeof c && c(k);
          d.push(k)
        }
        return d
      },
      Bv: function (b, a, d) {
        if ("undefined" === typeof d || null === d) d = ",";
        if (!(b instanceof Annotations.Point)) return null;
        b = new Annotations.Point(b.x, b.y);
        a && a.W(b);
        return c.toFixed(b.x) + d + c.toFixed(b.y)
      },
      yE: function (b, a, c) {
        if ("undefined" === typeof c || null === c) c = ",";
        if ("string" !== typeof b) return null;
        b = b.split(c);
        c = null;
        2 === b.length ? (c = new Annotations.Point(parseFloat(b[0]), parseFloat(b[1])), a && a.W(c)) : console.warn("Invalid serialized string format.");
        return c
      },
      mo: function (b, a, d, e) {
        if ("undefined" === typeof e || null === e) e = ";";
        if ("undefined" === typeof d || null === d) d = ",";
        for (var l = "", k = 0; k < b.length; k++) {
          var m =
            new Annotations.Point(b[k].x, b[k].y);
          a && a.W(m);
          l += c.toFixed(m.x) + d;
          l += c.toFixed(m.y) + e
        }
        return l.substring(0, l.length - 1)
      },
      Kk: function (b, a, c, d) {
        var e = [];
        if ("undefined" === typeof d || null === d) d = ";";
        if ("undefined" === typeof c || null === c) c = ",";
        var k;
        b = b.split(d);
        if (d === c)
          for (d = 0; d + 1 < b.length; d += 2) k = new Annotations.Point(b[d], b[d + 1]), a && a.W(k), e.push(k);
        else
          for (d = 0; d < b.length; ++d) k = b[d].split(c), k = new Annotations.Point(k[0], k[1]), a && a.W(k), e.push(k);
        return e
      },
      FA: function (b, a, d) {
        if ("undefined" === typeof d ||
          null === d) d = ",";
        var e = new Annotations.Point(b.x1, b.y1);
        b = new Annotations.Point(b.x2, b.y2);
        a.W(e);
        a.W(b);
        return c.toFixed(e.x, 6) + d + c.toFixed(e.y, 6) + d + c.toFixed(b.x, 6) + d + c.toFixed(b.y, 6)
      },
      Ct: function (b, a, c) {
        if ("undefined" === typeof c || null === c) c = ",";
        c = b.split(c);
        b = new Annotations.Point(c[0], c[1]);
        c = new Annotations.Point(c[2], c[3]);
        a && (a.W(b), a.W(c));
        return new Annotations.Rect(b.x, b.y, c.x, c.y)
      },
      EA: function (b, a, d) {
        var e = new XODText.Ca;
        e.al(a);
        e.m_d *= -1;
        e.m_h = 0;
        e.m_v = 0;
        return c.FA(b, e, d)
      },
      xE: function (b,
        a, d) {
        var e = new XODText.Ca;
        e.al(a);
        e.m_d *= -1;
        e.m_h = 0;
        e.m_v = 0;
        return c.Ct(b, e, d)
      },
      $X: function (b, a) {
        for (var d = "", e = 0; e < b.length; e++) {
          var l = b[e],
            l = new Annotations.Point(l.x, l.y);
          a.inverse().W(l);
          d += c.toFixed(l.x) + ",";
          d += c.toFixed(l.y) + ";"
        }
        return d.substring(0, d.length - 1)
      },
      KW: function (b, a) {
        var c = b.split(","),
          d = new Annotations.Point(c[0], c[1]),
          c = new Annotations.Point(c[2], c[3]);
        "undefined" !== typeof a && (a.W(d), a.W(c));
        return new Annotations.Rect(d.x, d.y, c.x, c.y)
      },
      aY: function (b, a) {
        var d = new Annotations.Point(b.x1,
            b.y1),
          e = new Annotations.Point(b.x2, b.y2),
          l = a.inverse();
        l.W(d);
        l.W(e);
        return c.toFixed(d.x) + "," + c.toFixed(d.y) + "," + c.toFixed(e.x) + "," + c.toFixed(e.y)
      },
      lg: function (b) {
        if ("undefined" === typeof b || null === b || !(b instanceof Annotations.Color) || 0 === b.A) return null;
        var a = b.R.toString(16).toUpperCase();
        2 > a.length && (a = "0" + a);
        var c = b.G.toString(16).toUpperCase();
        2 > c.length && (c = "0" + c);
        b = b.B.toString(16).toUpperCase();
        2 > b.length && (b = "0" + b);
        return "#" + a + c + b
      },
      hj: function (b) {
        return (new RegExp(/^#[0-9a-f]{6}$/i)).test(b) ?
          new Annotations.Color(parseInt(b.substr(1, 2), 16), parseInt(b.substr(3, 2), 16), parseInt(b.substr(5, 2), 16)) : null
      },
      gy: function (b) {
        if (b) {
          var a = new Date(Date.UTC(parseInt(b.substring(2, 6), 10), parseInt(b.substring(6, 8), 10) - 1, parseInt(b.substring(8, 10), 10), parseInt(b.substring(10, 12), 10), parseInt(b.substring(12, 14), 10), parseInt(b.substring(14, 16), 10), 0));
          b = b.substring(16);
          if (7 === b.length) {
            var c = b.substring(0, 1);
            if ("Z" !== c) {
              var c = "-" === c ? 1 : -1,
                d = parseInt(b.substring(4, 6), 10);
              a.setUTCHours(a.getUTCHours() + c *
                parseInt(b.substring(1, 3), 10));
              a.setUTCMinutes(a.getUTCMinutes() + c * d)
            }
          }
          return a
        }
      },
      oF: function (b, a, d) {
        b = "#" + c.Ud(b.toString(16));
        b += c.Ud(a.toString(16));
        return b += c.Ud(d.toString(16))
      },
      HS: function (b, a) {
        return "/" + b + " " + a + " Tf"
      },
      GS: function (b) {
        return "font: " + b.Font + " " + b.Qy() + "pt; text-align: " + b.TextAlign + "; color: " + c.lg(b.TextColor)
      },
      ZX: function (b) {
        return "font-family: " + b.Font + "; font-size: " + b.Qy() + "pt; text-align: " + b.TextAlign + "; color: " + c.lg(b.TextColor)
      },
      sN: ["Tf", "rg"],
      mH: function (b) {
        var a = {
          ge: b
        };
        if (!_.isNull(b))
          for (b = b.split(" "); 0 < b.length;) {
            var d = b.pop();
            if (-1 !== c.sN.indexOf(d)) switch (d) {
              case "Tf":
                var d = b.pop(),
                  e = b.pop().slice(1);
                a.font = {
                  size: d + "pt",
                  name: c.Uq(e),
                  UX: e
                };
                break;
              case "rg":
                var d = parseInt(255 * b.pop(), 10),
                  e = parseInt(255 * b.pop(), 10),
                  l = parseInt(255 * b.pop(), 10);
                a.color = c.oF(l, e, d)
            }
          }
        return a
      },
      yW: function (b) {
        if (4 === b.length) return {
          r: parseInt(b.charAt(1), 16) / 16,
          g: parseInt(b.charAt(2), 16) / 16,
          b: parseInt(b.charAt(3), 16) / 16
        };
        if (7 === b.length) return {
          r: parseInt(b.slice(1, 3), 16) / 255,
          g: parseInt(b.slice(3, 5), 16) / 255,
          b: parseInt(b.slice(5, 7), 16) / 255
        }
      },
      HR: function (b) {
        var a = {};
        _.isNull(b) || b.split(";").forEach(function (b) {
          var d = b.split(":");
          if (!(2 > d.length)) switch (b = d[0].trim(), d = d[1].trim(), b) {
            case "text-align":
              a.textAlign = d;
              break;
            case "color":
              d.startsWith("rgb") ? (b = /rgb\((\d{1,3}), (\d{1,3}), (\d{1,3})\)/.exec(d), null !== b && (a.color = c.oF(parseInt(b[1], 10), parseInt(b[2], 10), parseInt(b[3], 10)))) : a.color = d;
              break;
            case "font":
              b = d.split(" "), a.font = {
                name: c.Uq(b[0]),
                size: b[1]
              }
          }
        });
        return a
      },
      Uq: function (b) {
        function a(c, d) {
          var f = b;
          0 === f.indexOf(c) && (f = d);
          return f
        }
        b = a("Arial", "Arial");
        b = a("Courier", "Courier");
        b = a("Helv", "Arial");
        return b = a("Times", "Times New Roman")
      },
      oH: function (b) {
        return 0 < b.indexOf("Bold") ? "bold" : "normal"
      },
      nH: function (b) {
        return 0 < b.indexOf("Italic") || 0 < b.indexOf("Oblique") ? "italic" : "normal"
      },
      yN: function (b) {
        var a = [];
        b = b.split(";");
        for (var c = 0; c < b.length; ++c) {
          var d = b[c].split(",");
          2 === d.length && 0 < d[0].length && 0 < d[1].length && a.push(d)
        }
        return a
      },
      JS: function (b) {
        for (var a =
            "", c = 0; c < b.length; c++) a += b[c][0] + ",", a += b[c][1] + ";";
        return a.substring(0, a.length - 1)
      },
      IS: function (b) {
        for (var a = [], c = 0; c < b.length; c++) {
          var d = [];
          d.push(this.escape(b[c][0]));
          d.push(this.escape(b[c][1]));
          a.push(d)
        }
        return a
      }
    };
    a.Annotations.ba = c
  })(window);
  (function (a) {
    a.o = a.o || {};
    var e = a.o;
    e.Nw = function (a) {
      this.v = a;
      this.J = [];
      this.Ej = {};
      this.pu = e.Sa.Mh;
      this.dg = 1;
      if (a) {
        this.EH();
        this.FH();
        var c = this;
        a.on("pagesDiff", function (b, a) {
          c.trigger("pageDiff", [a]);
          c.trigger("pageContentChanged", [a.filter(function (b) {
            return b.after.contentChanged
          }).map(function (b) {
            return b.after.pageNum
          })])
        });
        a.on("pagesUpdated", function (b, a) {
          function d(b) {
            var a = {};
            Object.keys(b).forEach(function (c) {
              a[c] = b[c].Ra
            });
            return a
          }
          var e = d(c.Ej);
          c.EH();
          c.FH();
          e = c.DM(e, d(c.Ej));
          e.contentChanged =
            a.filter(function (b) {
              return b.contentChanged
            }).map(function (b) {
              return b.pageNum
            });
          c.trigger("layoutChanged", [e])
        })
      }
    };
    e.Nw.prototype = $.extend({
      qW: function () {
        return this.J.length
      },
      DM: function (a, c) {
        var b = {
            added: [],
            removed: [],
            moved: {}
          },
          f = {};
        Object.keys(a).forEach(function (b) {
          f[b] = f[b] || {};
          f[b].before = a[b]
        });
        Object.keys(c).forEach(function (b) {
          f[b] = f[b] || {};
          f[b].after = c[b]
        });
        Object.keys(f).forEach(function (a) {
          a = f[a];
          a.before && !a.after ? b.removed.push(a.before) : !a.before && a.after ? b.added.push(a.after) : a.before &&
            a.after && a.before !== a.after && (b.moved[a.before] = a.after)
        });
        return b
      },
      EH: function () {
        var a = this.v.An(),
          c = {};
        a.forEach(function (b) {
          c[b] = !0
        });
        var b = this.Ej;
        Object.keys(b).forEach(function (a) {
          a in c || delete b[a]
        });
        a.forEach(function (a) {
          b[a] || (b[a] = {
            rotation: null,
            zoom: null,
            tg: null,
            ug: null,
            og: null,
            oi: null,
            lo: null,
            ye: null,
            Ra: null,
            id: a
          })
        })
      },
      FH: function () {
        for (var a = this.v.numPages, c = this.v, b = [], f = 0; f < a; ++f) {
          var e = this.Ej[c.nq(f)];
          e.Ra = f + 1;
          b.push(e)
        }
        this.J = b
      },
      KA: function (a) {
        this.pu = a
      },
      WW: function () {
        return this.pu
      },
      pi: function (a) {
        this.dg = a;
        this.trigger("zoomChanged", [a])
      },
      XW: function () {
        return this.dg
      },
      rI: function (a, c) {
        var b = this.J[a];
        if (b) b.lo = c;
        else throw Error("Invalid page text selected " + a);
      },
      kP: function (a) {
        var c = this.J[a];
        if (c) return c.lo;
        throw Error("Selected text requested for invalid page index: " + a);
      },
      lP: function (a) {
        var c = this.J[a];
        if (c) return c.og.map(function (b) {
          return {
            x1: b.x1,
            x2: b.x2,
            x3: b.Nl,
            x4: b.Ol,
            y1: b.y1,
            y2: b.y2,
            y3: b.Pl,
            y4: b.Ql
          }
        });
        throw Error("Selected text quads requested for invalid page index: " +
          a);
      },
      Tx: function () {
        this.J.forEach(function (a) {
          a.lo = null
        })
      },
      lu: function () {
        return this.J.map(function (a) {
          return a.lo
        }).filter(function (a) {
          return null !== a
        }).join("\n")
      },
      hz: function () {
        var a = {};
        this.J.filter(function (a) {
          return null !== a.og
        }).forEach(function (c) {
          a[c.Ra - 1] = c.og.map(function (b) {
            return {
              x1: b.x1,
              x2: b.x2,
              x3: b.Nl,
              x4: b.Ol,
              y1: b.y1,
              y2: b.y2,
              y3: b.Pl,
              y4: b.Ql
            }
          })
        });
        return a
      },
      pd: function (a) {
        var c = this.J[a];
        if (c) {
          var b = this.v.od(a);
          a = this.v.nd(a);
          var f = _.isNull(c.rotation) ? this.pu : c.rotation;
          if (f === e.Sa.Qe ||
            f === e.Sa.Zf) {
            var g = b,
              b = a;
            a = g
          }
          return {
            width: b,
            height: a,
            rotation: f,
            zoom: _.isNull(c.zoom) ? this.dg : c.zoom,
            tg: c.tg,
            ug: c.ug,
            og: c.og,
            oi: c.oi,
            lo: c.lo,
            ye: c.ye,
            Ra: c.Ra,
            id: c.id
          }
        }
        return {
          width: 0,
          height: 0
        }
      },
      be: function () {
        for (var a = [], c = this.J.length, b = 0; b < c; ++b) a.push(this.pd(b));
        return a
      },
      Hv: function (a, c) {
        var b = this.J[a];
        if (b) b.zoom = c;
        else throw Error("Invalid page index zoomed " + a);
      },
      fP: function (a) {
        var c = this.J[a];
        if (c) return !_.isNull(c.zoom);
        throw Error("Invalid page index get has individual zoom " + a);
      },
      ir: function (a,
        c) {
        var b = this.J[a];
        if (b) b.rotation = c;
        else throw Error("Invalid page index rotated " + a);
      },
      tT: function (a, c) {
        var b = this.J[a];
        if (b) b.og = c;
        else throw Error("Invalid page index set text quads " + a);
      },
      rT: function (a, c) {
        var b = this.J[a];
        if (b) b.oi = [c];
        else throw Error("Invalid page index set search quads " + a);
      },
      AU: function (a, c) {
        var b = this.J[a];
        if (b) {
          var f = b.oi || [];
          f.push(c);
          b.oi = f
        } else throw Error("Invalid page index update search quads " + a);
      },
      Sx: function () {
        this.J.forEach(function (a) {
          a.oi = null
        })
      },
      ZD: function () {
        this.J.forEach(function (a) {
          a.og =
            null
        })
      },
      gP: function (a) {
        var c = this.J[a];
        if (c) return !!c.og || !!c.oi;
        throw Error("Invalid page index get has text quads " + a);
      },
      pT: function (a, c) {
        var b = this.J[a];
        if (b) b.tg = c.tg, b.ug = c.ug;
        else throw Error("Tried to set offsets of invalid page" + a);
      },
      SO: function () {
        var a = {};
        this.J.forEach(function (c, b) {
          _.isNull(c.rotation) || (a[b] = c.rotation)
        });
        return a
      },
      RM: function () {
        this.J.forEach(function (a) {
          a.rotation = null
        })
      },
      eF: function (a) {
        this.J.forEach(function (c) {
          _.isNull(c.rotation) || a(c)
        })
      },
      MA: function (a, c) {
        var b =
          this.J[a];
        if (b) b.ye = c;
        else throw Error("Invalid page index set preview canvas " + a);
      },
      JF: function () {
        var a = [];
        this.J.forEach(function (c, b) {
          _.isNull(c.og) && _.isNull(c.oi) || a.push(b)
        });
        return a
      },
      iP: function () {
        var a = [];
        this.J.forEach(function (c, b) {
          _.isNull(c.og) || a.push(b)
        });
        return a
      },
      SM: function () {
        this.J.forEach(function (a) {
          a.width = 0;
          a.height = 0;
          a.ye && (a.ye.width = 0, a.ye.height = 0, a.ye = null)
        })
      },
      yG: function (a) {
        return !!this.Ej[a]
      },
      ad: function (a) {
        var c = this.Ej[a];
        if (c) return this.pd(c.Ra - 1);
        throw Error("Unknown page ID " +
          a);
      },
      vf: function (a) {
        var c = this.J[a];
        if (c) return c.id;
        throw Error("Page index is not loaded " + a);
      },
      Yc: function () {
        this.off()
      }
    }, a.utils.eventHandler)
  })(window);
  (function (a) {
    function e(a, b) {
      this.handlers = a;
      this.state = _.isUndefined(b) ? null : b;
      this.Hh = [];
      this.nA = !0
    }

    function d() {
      this.dF = [];
      this.gF = [];
      this.vl = {};
      this.Xv = !1;
      Promise.resolve();
      Promise.resolve();
      this.cn = !1;
      this.ct = null
    }
    e.prototype = {
      hi: function (a) {
        this.Hh.push(a)
      },
      II: function () {
        return 0 < this.Hh.length
      },
      FI: function () {
        return this.nA || 0 < this.Hh.length
      },
      read: function () {
        this.state = this.handlers.read(this.state);
        this.nA = !1
      },
      write: function () {
        var a = this.Hh;
        this.handlers.consolidateChanges && (a = this.handlers.consolidateChanges(a));
        this.Hh = [];
        this.state = this.handlers.write(this.state, a);
        this.nA = !0
      }
    };
    d.prototype = {
      Yc: function () {
        this.Xv = !1;
        window.cancelAnimationFrame(this.ct);
        this.ct = null;
        this.cn = !0
      },
      GH: function (a, b, d, g) {
        _.isUndefined(g) && (g = !0);
        if (this.vl[a]) throw Error("Tried to register pipeline " + a + " twice");
        this.vl[a] = new e(b, d);
        g && this.tA()
      },
      WP: function (a) {
        return !!this.vl[a]
      },
      pP: function (a) {
        if (!this.vl[a]) throw Error("Tried to get non-existent pipeline " + a);
        return this.vl[a]
      },
      tA: function () {
        var a = this;
        this.Xv || this.cn || (this.Xv = !0, this.ct = window.requestAnimationFrame(function () {
          a.ct = null;
          var b = Object.keys(a.vl).map(function (b) {
            return a.vl[b]
          });
          b.forEach(function (b) {
            b.FI() && b.read()
          });
          b.forEach(function (b) {
            b.II() && b.write()
          });
          b = b.some(function (b) {
            return b.FI() || b.II()
          });
          a.Xv = !1;
          b ? a.tA() : (a.gF.forEach(function (b) {
            b()
          }), a.gF = []);
          a.dF.forEach(function (b) {
            b()
          });
          a.dF = []
        }))
      },
      hi: function (a, b) {
        this.pP(a).hi(b);
        this.tA()
      }
    };
    a.ap = d;
    a.yV = e
  })((window.o ? window.o : window.o = {}).jm = {});
  (function (a) {
    function e(b) {
      this.lJ = !0;
      this.xq = this.tv = this.HI = this.sg = !1;
      this.ud = [];
      this.Hc = {};
      this.rk = {};
      this.Vd = .5;
      this.u = b;
      this.v = null;
      this.qv = Promise.resolve();
      this.zu = !1;
      this.bo = null;
      this.paused = !1;
      this.Rz = null
    }

    function d(b) {
      this.rotation = b.rotation;
      this.zoom = b.zoom;
      this.width = b.width;
      this.height = b.height;
      this.ee = this.canvas = null;
      this.gh = this.Gx = this.kg = !1;
      this.GI = !0;
      this.rd = this.$k = this.zo = this.request = null
    }

    function c(b, a) {
      this.Fa = b;
      this.Fj = a;
      this.lA = createPromiseCapability()
    }
    c.prototype = {
      cancel: function () {
        var b =
          this.Fa.Nc(this.Fj);
        try {
          if (b.gh) {
            b.rd && (b.rd.RD(), b.rd.abort && b.rd.abort());
            if (b.request) try {
              this.Fa.v.Fh(b.request)
            } finally {
              b.request = null, b.rd = null
            }
            if (b.zo) try {
              this.Fa.v.bj(b.zo)
            } finally {
              b.zo = null
            }
            if (b.$k) try {
              this.Fa.v.Fh(b.$k)
            } finally {
              b.$k = null
            }
          }
        } finally {
          b.gh = !1, b.GI = !0, this.lA.resolve("canceled")
        }
      },
      dJ: function () {
        this.cancel();
        var b = this.Fa.Nc(this.Fj);
        b.rd && (b.rd.$b(void 0, this.Fa.u.N.ad(this.Fj).Ra - 1), b.rd = null)
      },
      render: function (b) {
        var a = this;
        b.then(function () {
          a.lA.resolve("complete")
        })
      },
      cz: function () {
        return this.lA.promise
      }
    };
    d.prototype = {
      lq: function (b) {
        return (this.canvas || b ? 1 : 0) * (this.width * this.height * this.zoom * this.zoom * (window.devicePixelRatio ? window.devicePixelRatio : 1) * 4 + 1E5) / 4
      },
      isValid: function () {
        return !!this.canvas || !a.o.za.Nj
      },
      update: function (b) {
        if (this.rotation !== b.rotation || this.zoom !== b.zoom) this.ee = this.canvas = null, this.GI = !0;
        this.rotation = b.rotation;
        this.zoom = b.zoom;
        this.width = b.width;
        this.height = b.height;
        this.Ra = b.Ra
      }
    };
    e.prototype = {
      init: function () {
        this.Px();
        this.v = this.u.getDocument()
      },
      Yc: function () {
        this.xq = !0;
        this.lr();
        return this.qv
      },
      Px: function () {
        this.lr();
        Object.keys(this.Hc).forEach(this.tu.bind(this))
      },
      TM: function () {
        Object.keys(this.Hc).forEach(this.rG.bind(this))
      },
      FT: function (b) {
        this.HI = !!b
      },
      qG: function (b) {
        var a = this.Hc[b];
        a && (a.canvas && (document.body.contains(a.canvas) || (a.canvas.width = 0, a.canvas.height = 0), a.canvas = null), a.ee = null);
        this.xo(b)
      },
      rG: function (b) {
        if (b = this.Hc[b]) b.kg = !1
      },
      tu: function (b) {
        this.qG(b);
        this.rG(b)
      },
      mt: function (b) {
        var a = this.u,
          c = a.rn() - 1;
        b = a.N.ad(b).Ra - 1;
        a = a.Ab();
        c = b - c;
        0 >
          c && (c -= .5);
        return a - Math.abs(c)
      },
      dz: function (b) {
        return this.rk[b] || null
      },
      yD: function (b, a) {
        var d = this;
        if (this.Nc(b).gh) return this.dz(b);
        var e = new c(this, b);
        this.xo(b);
        var l;
        l = d.HI && a ? a.then(function () {
          if (!d.tv) return d.NH(b, function () {})
        }) : this.NH(b, function () {});
        e.render(l);
        return this.rk[b] = e
      },
      wO: function () {
        var b = this;
        return Object.keys(this.Hc).reduce(function (a, c) {
          return a + b.Nc(c).lq()
        }, 0)
      },
      gM: function (b, c) {
        for (var d = this.Nc(c), e = this, l = Object.keys(this.Hc).sort(function (b, a) {
              return e.mt(b) - e.mt(a)
            }),
            k = this.wO(), m = d.lq(b) + k, n = 0; m > a.Ul && n < l.length;) m -= this.Nc(l[n]).lq(), ++n;
        if (m < a.Ul) {
          for (k = 0; k < n; ++k) this.qG(l[k]);
          d.canvas = b
        } else console.warn("Could not fit " + c + " with size " + d.lq(b) + " into cache of size " + k + " with max size " + a.Ul)
      },
      Nc: function (b) {
        if (this.u.N.yG(b)) {
          this.Hc[b] = this.Hc[b] || new d(this.u.N.ad(b));
          var a = this.u.N.ad(b);
          this.Hc[b].update(a);
          return this.Hc[b]
        }
        return this.Hc[b] ? this.Hc[b] : new d({})
      },
      bV: function (b) {
        this.tu(b)
      },
      yu: function (b) {
        return !!this.Nc(b).canvas
      },
      pause: function () {
        this.paused = !0
      },
      resume: function () {
        this.paused = !1;
        var b = this.Hc;
        Object.keys(b).forEach(function (a) {
          a = b[a];
          a.rd && (a.rd.paused = !1, a.rd.resume && a.rd.resume())
        })
      },
      Co: function (b) {
        this.ud = b || this.u.ea.be()
      },
      uM: function (b) {
        var a = this;
        return b.some(function (b) {
          return -1 === a.ud.indexOf(b)
        }) || a.ud.some(function (a) {
          return -1 === b.indexOf(a)
        })
      },
      wP: function () {
        var b = this;
        return Object.keys(this.Hc).map(function (a) {
          return {
            id: a,
            page: b.Hc[a]
          }
        }).filter(function (b) {
          return b.page.kg
        }).map(function (a) {
          return b.u.N.ad(a.id).Ra - 1
        })
      },
      EE: function (b) {
        var c =
          this.u.N.vf(b),
          d = this.Nc(c);
        if (this.sg) {
          c = d.Od;
          if (d.gh || !d.kg || !c) return !0;
          var d = this.u.ea,
            e = this.Vd / 2;
          return (b = d.Fn(b, d.qz(e, e))) && !a.utils.containsRect(c, b.Od)
        }
        return !d.gh && !d.kg
      },
      $F: function (b) {
        for (var a = [], c = [], d = b.length, e = 0; e < d; ++e) {
          var k = b[e];
          this.EE(k) ? c.push(k) : a.push(k)
        }
        return {
          jH: a,
          fA: c
        }
      },
      wz: function () {
        var b = this;
        return b.xq ? [] : b.u.ea.be(b.Vd, b.Vd).some(function (a) {
          return b.EE(a)
        })
      },
      NM: function () {
        !this.bo && this.wz() && this.uE()
      },
      uE: function () {
        var b = this;
        this.bo || (this.bo = setTimeout(function () {
          this.bo =
            null;
          var a = b.u.ea.be(b.Vd, b.Vd);
          b.lr(a);
          b.zu || (b.qv = b.qv.then(function () {
            return b.OH()
          })["catch"](function (a) {
            console.error(a);
            b.qv = Promise.resolve()
          }))
        }, 80))
      },
      PR: function (b) {
        var a = this;
        return Promise.resolve().then(function () {
          var c = a.u.N.ad(b).Ra - 1,
            d = a.Nc(b);
          if (!d.canvas) throw Error("Tried to place uncached page from cache " + b);
          d.kg = !0;
          a.u.Gp(d.canvas, c);
          a.jj(c, d);
          a.u.trigger("pageComplete", [c, d.canvas])
        })
      },
      lz: function (b) {
        var a = this;
        return new Promise(function (c) {
          var d = a.Nc(b),
            e = a.u.N.ad(b).Ra - 1;
          d.zo || a.u.YP(e) ? c() : d.zo = a.v.zj(e, function (c) {
            a.Nc(b).zo = null;
            a.u.KD(c, e, -1 !== a.ud.indexOf(e), !1)
          })
        })
      },
      RO: function (b) {
        var c = this;
        return new Promise(function (d) {
          var e = c.Nc(b),
            l = c.u.N.ad(b).Ra - 1;
          if (e.$k || c.u.VP(l)) d();
          else {
            var k = a.utils.getCanvasMultiplier(),
              m = e.width,
              n = e.height,
              r = m > n ? 2E3 / m : 2E3 / n,
              r = r / k;
            e.$k = c.v.$g({
              pageIndex: l,
              getZoom: function () {
                return r
              },
              getPageRotation: function () {
                return a.o.Sa.Mh
              },
              drawComplete: function (b) {
                c.v.cj(e.$k);
                e.$k = null;
                c.u.KD(b, l, -1 !== c.ud.indexOf(l), !0);
                d()
              },
              useProgress: !1
            })
          }
        })
      },
      OH: function () {
        var b = this;
        return this.xq ? Promise.resolve() : Promise.resolve().then(function () {
          var c = b.u.ea.be(b.Vd, b.Vd),
            d = b.$F(c);
          b.lr(c);
          b.KH(d.jH);
          b.zu = !0;
          b.u.trigger("beginRendering");
          var e = Promise.resolve();
          !b.v.vj() && a.o.za.Nj || c.forEach(function (a) {
            a = b.u.N.vf(a);
            b.lz(a)
          });
          b.tv = !1;
          return Promise.all(d.fA.map(function (a) {
            a = b.u.N.vf(a);
            return b.yu(a) && !b.sg ? b.PR(a) : e = b.yD(a, e).cz()
          }))
        }).then(function () {
          b.tv = !1;
          b.zu = !1;
          var a = b.wz();
          b.u.trigger("finishedRendering", a);
          if (!b.xq) return new Promise(function (a,
            c) {
            window.requestAnimationFrame(function () {
              try {
                var d;
                if (b.wz()) return d = b.OH(), a(d);
                b.zQ() && b.RR();
                a()
              } catch (f) {
                c(f)
              }
            })
          })
        })["catch"](function (a) {
          b.zu = !1;
          console.error(a);
          throw a;
        })
      },
      zQ: function () {
        return a.o.za.Nj && (0 !== a.Ku || 0 !== a.Ju)
      },
      CM: function () {
        var b = this;
        return _.range(b.u.Ab()).map(function (a) {
          return b.u.N.vf(a)
        }).sort(function (a, c) {
          return b.mt(c) - b.mt(a)
        })
      },
      PD: function () {
        var b = this,
          c = _.min(b.ud),
          d = _.max(b.ud),
          e = c - a.Ku,
          l = d + a.Ju,
          c = this.CM().filter(function (a) {
            a = b.u.N.ad(a).Ra - 1;
            return e < a &&
              l > a
          });
        if (b.sg) return [c[0]];
        for (var d = [], k = c.length, m = 0, n = 0; n < k; ++n) {
          var r = b.Nc(c[n]),
            m = m + r.lq(!0);
          if (m < a.Ul) d.push(c[n]);
          else break
        }
        return d
      },
      EM: function () {
        var b = this;
        return b.xq ? [] : b.PD().filter(function (a) {
          return !b.Nc(a).isValid()
        })
      },
      RR: function () {
        var b = this;
        return Promise.resolve().then(function () {
          return b.sg ? Promise.all(b.ud.map(function (a) {
            a = b.u.N.vf(a);
            return b.RO(a)
          })) : Promise.all(b.EM().map(function (a) {
            return b.yD(a).cz()
          }))["catch"](function (b) {
            console.error("error pre-rendering", b);
            throw b;
          })
        })
      },
      NH: function (b, a) {
        a = a || function () {};
        var c = this;
        return new Promise(function (d) {
          c.jS(b, function (b) {
            !b || b.type && "Cancelled" === b.type || console.warn(b);
            d()
          }, a)
        })
      },
      KH: function (b) {
        var c = this,
          d = this.PD();
        b || (b = c.u.ea.be(c.Vd, c.Vd), b = c.$F(b).jH);
        b && b.length && (b = b.map(function (b) {
          return c.u.N.vf(b)
        }), d = d.concat(b));
        Object.keys(this.Hc).forEach(function (b) {
          var e = c.Nc(b);
          if (c.u.N.yG(b)) {
            var k = c.u.N.ad(b).Ra - 1;
            if (a.o.za.Nj) - 1 === d.indexOf(b) && (c.fJ(b), e.kg && (c.u.hS(k), e.kg = !1));
            else {
              var m = -1 !== c.ud.indexOf(k);
              !e.kg && !e.Gx || m || (a.o.za.$n(k), e.Gx = !1, e.kg = !1, c.fJ(b))
            }
          }
        })
      },
      jS: function (b, c, d) {
        var e = this,
          l = this.Nc(b);
        c = c || function () {};
        d = d || function () {};
        if (l.gh) a.utils.warn("renderPage: Another request for page ID", b), c("renderPage: Another request for page ID " + b);
        else {
          var k = e.u.N.ad(b),
            m = k.zoom,
            n = k.rotation;
          if (e.v !== e.u.getDocument()) c("Document changed");
          else {
            var r = !0,
              q = null,
              v = !1,
              p, u = e.u.ea.Bn(k.Ra - 1);
            if (e.sg || u && u.viewportRender)
              if (u = e.u.ea, p = u.Fn(k.Ra - 1, u.qz(e.Vd, e.Vd)), null === p) {
                c("Page " + (k.Ra - 1) + " no longer visible");
                return
              } this.Rz = window.setTimeout(function () {
              $("#pageContainer" + (k.Ra - 1)).addClass("loading")
            }, 300);
            var w = {
              pageIndex: this.u.N.ad(b).Ra - 1,
              getZoom: function () {
                return e.u.N.ad(b).zoom
              },
              getPageRotation: function () {
                return e.u.N.ad(b).rotation
              },
              finishedLoading: function (a, d) {
                if (e.v !== e.u.getDocument()) return c(Error("Document changed")), !1;
                if (a) return console.warn("Error loading page " + b), c(Error("Error loading page " + b)), !1;
                r = null === l.rd;
                l.rd = d;
                e.paused && l.rd.pause();
                return !0
              },
              acquireResources: function () {
                return r
              },
              resourcesLoaded: function () {
                if (e.v !== e.u.getDocument()) return c(Error("Document changed")), !1;
                if (!1 === l.gh) return !1;
                var a = e.u.N.ad(b);
                m === a.zoom && n === a.rotation || e.jj(a.Ra - 1, l);
                return !0
              },
              drawComplete: function (d, g, m) {
                e.v !== e.u.getDocument() || _.isNull(q) ? c(Error("Document changed, or progress event not received")) : (k = e.u.N.ad(b), l.gh = !1, l.kg = !!v, l.ee = m, l.Od = p ? p.Od : null, v ? e.u.trigger("pageComplete", [g, q]) : a.o.za.$n(g), a.o.za.Nj && !e.sg && e.gM(q, b, k), e.v.cj(l.request), clearTimeout(this.Rz), $("#pageContainer" +
                  (k.Ra - 1)).removeClass("loading"), d = -1 !== e.ud.indexOf(g), e.v.il() && d && e.jj(k.Ra - 1, l), c())
              },
              drawProgressive: function (l) {
                if (e.v !== e.u.getDocument()) c(Error("Document changed"));
                else {
                  var k = e.u.N.ad(b),
                    u = k.Ra - 1;
                  if (m === k.zoom) {
                    if (!_.isUndefined(p)) {
                      var r = $(l);
                      r.css("top", p.Sv.y + "px");
                      r.css("left", p.Sv.x + "px")
                    }
                    r = e.v.zc(u);
                    q = a.o.za.zF(l, u, m, n, w.getPageTransform(), r);
                    v = !!e.u.Gp(q, u)
                  } else a.utils.warn("bad zoom: " + u);
                  $("#pageContainer" + (k.Ra - 1)).removeClass("loading");
                  e.u.trigger("pageProgressiveUpdate", [u,
                    q
                  ]);
                  d(u)
                }
              },
              getPageTransform: function () {
                return e.u.ea.Bn(k.Ra - 1)
              },
              onError: function (b) {
                c(b)
              },
              useProgress: !e.sg && a.o.MF(),
              renderRect: _.isUndefined(p) ? void 0 : p.Od
            };
            l.request = -1;
            l.gh = !0;
            l.request = e.v.$g(w);
            e.jj(k.Ra - 1, l)
          }
        }
      },
      jj: function (b, a) {
        this.u.jj(b);
        a.Gx = !0
      },
      dN: function () {
        for (var b = [], c = 0; c < this.u.Ab(); ++c) {
          var d = this.u.N.vf(c);
          b.push(d)
        }
        this.eJ(b);
        this.lr();
        a.o.za.Yq()
      },
      eJ: function (b) {
        var a = this;
        Object.keys(this.Hc).forEach(function (c) {
          if (-1 === b.indexOf(c)) {
            var d = a.rk[c];
            d && (d.cancel(), d.dJ(), delete a.rk[c]);
            delete a.Hc[c]
          } else a.Hc[c].kg = !1
        })
      },
      eB: function (b) {
        this.v && ((this.sg = this.lJ && b > this.v.v.Jq) && 1 < a.utils.getCanvasMultiplier() ? this.Vd = 0 : this.Vd = .5)
      },
      lr: function (b) {
        var c = this,
          d = {};
        "undefined" !== typeof b && $.each(b, function (b, a) {
          d[c.u.N.vf(a)] = !0
        });
        var e = [];
        Object.keys(this.rk).forEach(function (b) {
          b in d && a.o.za.Nj ? e[b] = c.rk[b] : c.xo(b)
        });
        this.rk = e;
        this.tv = !0;
        clearTimeout(this.bo);
        this.bo = null
      },
      xo: function (b) {
        var c = this.dz(b);
        clearTimeout(this.Rz);
        $("#pageContainer" + b).removeClass("loading");
        c && (this.Nc(b).gh &&
          (b = this.u.N.ad(b).Ra - 1, $(document.getElementById("pageContainer" + b)).find(".progressive").remove()), c.cancel(), a.o.za.Rx())
      },
      fJ: function (b) {
        (b = this.dz(b)) && b.dJ()
      },
      RA: function (b) {
        this.lJ = !!b;
        this.eB()
      },
      vI: function () {}
    };
    a.o.DK = e
  })(window);
  (function (a) {
    function e(b, a) {
      this.Pi = !b;
      this.height = this.width = 0;
      this.jh = null;
      b && (this.width = a.width, this.height = a.height, this.rotation = a.rotation, this.Cb = a.Ra - 1, this.Fj = b, this.zoom = a.zoom, this.ye = a.ye)
    }

    function d(b, a) {
      this.J = a;
      this.index = b;
      this.height = a.reduce(function (b, a) {
        return a.xa() > b ? a.xa() : b
      }, 0);
      this.width = a.reduce(function (b, a) {
        return b + a.ya()
      }, 0)
    }

    function c(b) {
      this.rows = b.rows;
      this.ql = b.ql;
      this.si = b.si;
      this.cd = b.cd;
      this.Tn = b.Tn;
      this.Ih = b.Ih;
      this.J = b.J;
      this.ih = b.ih;
      b = this.rows;
      this.width =
        this.Ih.reduce(function (b, a) {
          return b + a
        }, 2 * this.si * this.ql);
      this.height = b.reduce(function (b, a) {
        return b + a.xa()
      }, this.rows.length * this.si * 2)
    }

    function b(b, a) {
      var c = a.zoom,
        d = a.rotation,
        f = a.width * c,
        c = a.height * c,
        e = null;
      d === window.o.Sa.Qe || d === window.o.Sa.Zf ? (e = "rotate(" + 90 * d + "deg)", e = d === window.o.Sa.Qe ? " translate(" + f + "px, 0)  " + e : " translate(0," + c + "px)  " + e, b.css("height", f), b.css("width", c)) : (d === window.o.Sa.Vp && (e = "translate(" + f + "px," + c + "px) scale(-1,-1)"), b.css("width", f), b.css("height", c));
      null !==
        e && b.css({
          position: "absolute",
          transform: e,
          "transform-origin": "top left",
          "ms-transform": e,
          "ms-transform-origin": "top left",
          "-moz-transform": e,
          "-moz-transform-origin": "top left",
          "-webkit-transform-origin": "top left",
          "-webkit-transform": e,
          "-o-transform": e,
          "-o-transform-origin": "top left"
        })
    }

    function f(b, a, c) {
      if (a)
        for (a = b - 1; 0 <= a; --a) c(a);
      else
        for (a = 0; a < b; ++a) c(a)
    }

    function g(b, a, c) {
      var d = document.createElement("div");
      d.id = "pageContainer" + b.qj();
      2 === c ? 0 === a ? d.style.marginLeft = "auto" : 1 === a && (d.style.marginRight =
        "auto") : (d.style.marginLeft = "auto", d.style.marginRight = "auto");
      d.className = "pageContainer";
      return d
    }

    function h(b, a, c) {
      var d = document.createElement("div");
      d.id = "pageSection" + b.qj();
      d.style.cssFloat = "left";
      d.style.position = "relative";
      d.className = "pageSection";
      d.appendChild(g(b, a, c));
      return d
    }

    function l(b, a, c) {
      var d = document.createDocumentFragment(),
        e = b.Lb();
      f(e.length, c, function (b) {
        d.appendChild(h(e[b], b, a))
      });
      b = document.createElement("div");
      b.style.clear = "both";
      d.appendChild(b);
      return d
    }

    function k(a,
      c) {
      if (c.ye) {
        var d = c.ye,
          f = parseFloat(d.css("width")),
          e = parseFloat(d.css("height")),
          g = parseFloat(a.style.width) / f,
          h = d.attr("id");
        if (h && 0 <= h.indexOf("hrthumb")) {
          h = c.rotation;
          if (h === window.o.Sa.Qe || h === window.o.Sa.Zf) g = parseFloat(a.style.width) / e;
          b(d, c)
        }
        d.each(function () {
          var b = $(this);
          b.css({
            top: parseFloat(b.css("top")) * g,
            width: f * g,
            height: e * g
          });
          a.appendChild(this)
        })
      }
    }

    function m(b, a, c, d, e, g) {
      var h = a.Lb(),
        l = b;
      f(h.length, e, function (b) {
        if (!l) throw Error("Tried to update non-existent page section");
        var f =
          l,
          e = h[b],
          m = a.xa();
        f.style.width = Math.floor(c[b]) + "px";
        f.style.height = Math.floor(m) + "px";
        f.style.margin = d + "px";
        g || (b = f.firstChild, f = Math.floor(e.xa()) + "px", b.style.width = Math.floor(e.ya()) + "px", b.style.height = f, b.style.top = Math.floor(m - e.xa()) / 2 + "px", $(b).children().detach(), k(b, e));
        l = l.nextSibling
      });
      return l = l.nextSibling
    }

    function n(b, a, c) {
      var d = a.Lb(),
        e = b;
      f(d.length, c, function (b) {
        if (!e) throw Error("Tried to skip non-existent page section");
        k(e.firstChild, d[b]);
        e = e.nextSibling
      });
      return e = e.nextSibling
    }

    function r(b, a, c) {
      var d = a.Lb().length,
        e = b;
      q(e);
      a = document.createRange();
      f(d, c, function () {
        if (!e) throw Error("Tried to remove non-existent page section");
        e = e.nextSibling;
        q(e)
      });
      c = e.nextSibling;
      a.setStartBefore(b);
      a.setEndAfter(e);
      a.deleteContents();
      return c
    }

    function q(b) {
      $(b.querySelector(".pageContainer")).children().detach()
    }

    function v(b) {
      this.Hh = [];
      this.state = b
    }
    e.eE = function (b, a) {
      var c = new e(null, {});
      c.Cb = "b" + b;
      c.width = 0;
      c.height = 0;
      c.zoom = a.zoom;
      c.rotation = 0;
      c.ye = null;
      c.aQ = a.width;
      c.dX = a.height;
      return c
    };
    e.prototype = {
      RF: function () {
        return this.jh
      },
      Wg: function () {
        return this.zoom
      },
      $d: function () {
        return this.rotation
      },
      ya: function () {
        return this.width * this.zoom
      },
      Sy: function () {
        var b = this.width;
        this.Pi && (b = this.aQ);
        return b * this.zoom
      },
      xa: function () {
        return this.height * this.zoom
      },
      qj: function () {
        return this.Cb
      },
      CQ: function (b) {
        return this.Pi && b.Pi || this.Fj === b.Fj
      },
      Iz: function (b) {
        return this.Pi !== b.Pi || !this.Pi && (this.Fj !== b.Fj || this.ya() !== b.ya() || this.xa() !== b.xa() || this.Wg() !== b.Wg() || this.$d() !== b.$d())
      }
    };
    d.prototype = {
      Lb: function () {
        return this.J
      },
      xa: function () {
        return this.height
      },
      ya: function () {
        return this.width
      },
      qj: function () {
        return this.index
      },
      Iz: function (b) {
        var a = b.Lb();
        return this.J.length !== b.Lb().length || this.J.some(function (b, c) {
          return b.Iz(a[c])
        })
      },
      DQ: function (b) {
        var a = b.Lb();
        return this.J.length === b.Lb().length && this.J.every(function (b, c) {
          return b.CQ(a[c])
        })
      }
    };
    c.prototype = {
      Lb: function () {
        return this.J
      },
      ya: function () {
        return this.width
      },
      xa: function () {
        return this.height
      },
      RF: function (b) {
        return this.rows[b]
      }
    };
    v.prototype = {
      make: function (b, a, c) {
        this.Hh.push({
          Zz: b,
          Mg: {
            jh: a,
            vR: c
          }
        })
      },
      qM: function (b) {
        var a = this,
          c = b.firstChild,
          d = [];
        b.style.width = Math.ceil(this.state.ya()) + "px";
        this.Hh.forEach(function (f) {
          switch (f.Zz) {
            case "addRow":
              d = d.concat(f.Mg.jh.Lb());
              c = a.zD(c, f.Mg, b);
              break;
            case "updateRow":
              d = d.concat(f.Mg.jh.Lb());
              c = a.CU(c, f.Mg, b);
              break;
            case "updateColumns":
              c = a.vU(c, f.Mg, b);
              break;
            case "skipRow":
              c = a.YT(c, f.Mg, b);
              break;
            case "replaceRow":
              d = d.concat(f.Mg.jh.Lb());
              c = a.mS(c, f.Mg, b);
              break;
            case "removeRow":
              c = a.LH(c,
                f.Mg, b);
              break;
            default:
              console.warn("Unsupported layout change operation:", f.Zz)
          }
        });
        if (c && "annoteditselectrect" !== c.id) throw Error("Nodes left after applying changes");
        d = d.filter(function (b) {
          return !b.Pi
        }).map(function (b) {
          return b.qj()
        });
        return {
          fA: d
        }
      },
      hP: function () {
        var b = [];
        this.Hh.forEach(function (a) {
          switch (a.Zz) {
            case "updateRow":
              b = b.concat(a.Mg.jh.Lb())
          }
        });
        return b.filter(function (b) {
          return !b.Pi
        }).map(function (b) {
          return b.qj()
        })
      },
      zD: function (b, a, c) {
        a = a.jh;
        var d = l(a, this.state.Ih.length, this.state.ih);
        m(d.firstChild, a, this.state.Ih, this.state.si, this.state.ih);
        b ? c.insertBefore(d, b) : c.appendChild(d);
        return b
      },
      CU: function (b, a) {
        return m(b, a.jh, this.state.Ih, this.state.si, this.state.ih)
      },
      YT: function (b, a) {
        return n(b, a.jh, this.state.ih)
      },
      mS: function (b, a, c) {
        b = this.LH(b, a);
        return this.zD(b, a, c)
      },
      LH: function (b, a) {
        return r(b, a.vR, this.state.ih)
      },
      vU: function (b, a) {
        return m(b, a.jh, this.state.Ih, this.state.si, this.state.ih, !0)
      }
    };
    a.ZO = function (b) {
      var a = b.IU,
        f = b.si,
        g = {
          width: 0,
          height: 0
        },
        h = {
          width: 0,
          height: 0
        };
      a &&
        0 < a.length && (g = {
          width: a[0].width,
          height: a[0].height,
          zoom: a[0].zoom
        }, h = {
          width: a[a.length - 1].width,
          height: a[a.length - 1].height,
          zoom: a[a.length - 1].zoom
        });
      var l = b.ZT || 0,
        k = [],
        m;
      for (m = 0; m < l; ++m) k.push(e.eE(m, g));
      var k = k.concat(a.map(function (b) {
          return new e(b.id, b)
        })),
        n = b.ql;
      n > k.length && (n = k.length);
      a = b.cd || 0;
      g = Math.ceil(k.length / b.ql);
      _.isUndefined(b.Tn) || (g = b.Tn < g ? b.Tn : g);
      var r = Array(n),
        l = k.reduce(function (b, a, c) {
          var d;
          0 === b.length ? (d = [], b.push(d)) : d = b[b.length - 1];
          d.length === n && (d = [], b.push(d));
          d.push(a);
          if (c === k.length - 1 && (a = n - d.length, 0 < a))
            for (var f = 0; f < a; ++f) d.push(e.eE(c + f + 1, h));
          return b
        }, []).slice(a, a + g).map(function (b, a) {
          var c = new d(a, b);
          c.Lb().forEach(function (b, a) {
            r[a] = r[a] ? b.Sy() > r[a] ? b.Sy() : r[a] : b.Sy()
          });
          return c
        });
      return new c({
        rows: l,
        si: f,
        ql: n,
        cd: a,
        Tn: g,
        Ih: r,
        J: k,
        ih: b.ih
      })
    };
    a.YO = function (b, a) {
      var c = new v(a);
      if (!b) return a.rows.forEach(function (b) {
        c.make("addRow", b, null)
      }), c;
      var d = b.rows,
        f, e = b.Ih,
        g = a.Ih;
      f = e.length === g.length ? e.every(function (b, a) {
        return b === g[a]
      }) : !1;
      e = a.rows;
      e.forEach(function (b) {
        var a =
          d[b.qj()];
        a ? a.DQ(b) ? a.Iz(b) ? c.make("updateRow", b, a) : f ? c.make("skipRow", b, a) : c.make("updateColumns", b, a) : c.make("replaceRow", b, a) : c.make("addRow", b, a)
      });
      if (e.length < d.length)
        for (e = e.length; e < d.length; ++e) c.make("removeRow", null, d[e]);
      return c
    };
    a.Yo = e;
    a.AV = d;
    a.sV = c;
    a.rV = v
  })((window.o = window.o || {}).CB = {});
  (function (a) {
    var e = XODText,
      d = window.o,
      c = {
        HB: "Single",
        Oo: "Continuous",
        sB: "Facing",
        uw: "FacingContinuous",
        Er: "Cover",
        Fr: "CoverFacing",
        Nf: "Custom"
      };
    d.vd = function (b, a, d) {
      this.mode = null;
      this.u = b;
      this.Fd = this.dh = this.Ob = null;
      this.$f = this.cd = 0;
      this.yj = null;
      this.ud = [];
      this.ld = {};
      b = a === c.Nf;
      this.io = _.isUndefined(d) ? !b : d;
      _.isNull(a) || _.isUndefined(a) || (this.mode = a)
    };
    d.vd.prototype = {
      wT: function (b, a, d, e, l) {
        this.mode = c.Nf;
        this.Ob = b;
        this.dh = a;
        this.Fd = d;
        this.cd = e;
        this.$f = l
      },
      SS: function (b) {
        this.ld = b
      },
      Gz: function () {
        return this.mode ===
          c.Oo || this.mode === c.uw || this.mode === c.Er
      },
      Kb: function (b, a) {
        if (!this.yj) return -1;
        var c = this.yj.RF(b - this.yj.cd);
        if (this.u.fz()) var d = this.yj.ql,
          c = c.Lb()[d - (a + 1)];
        else c = c.Lb()[a];
        return c && _.isNumber(c.qj()) ? c.qj() : -1
      },
      Ff: function (b, a) {
        if (this.ld.pageToWindow) return this.ld.pageToWindow(b, a);
        b = this.u.gz(b, a);
        var c = this.u.N.pd(a);
        return {
          x: b.x + c.tg,
          y: b.y + c.ug
        }
      },
      DR: function (b, a) {
        if (this.ld.pageToWindow) return this.ld.pageToWindow(b, a);
        b = this.u.zP(b, a);
        var c = this.u.N.pd(a);
        return {
          x: b.x + c.tg,
          y: b.y + c.ug
        }
      },
      Oj: function (b, c) {
        if (this.ld.windowToPage) return this.ld.windowToPage(b, c);
        var d = this.u.tb(c),
          h = this.u.N.pd(c),
          l = new e.xd;
        l.x = b.x - h.tg;
        l.y = b.y - h.ug;
        d = a.jd(d, this.u.ue(c + 1), {
          width: this.u.od(c),
          height: this.u.nd(c)
        }, 0, !1);
        d = d.inverse();
        l = d.W(l);
        return {
          pageIndex: c,
          x: l.x,
          y: l.y
        }
      },
      OU: function (b, c) {
        if (this.ld.windowToPage) return this.ld.windowToPage(b, c);
        var d = this.u.tb(c),
          h = this.u.N.pd(c),
          l = new e.xd;
        l.x = b.x - h.tg;
        l.y = b.y - h.ug;
        d = a.jd(d, this.u.$d(c + 1), this.u.v.zc(c), 0, !1);
        d = d.inverse();
        l = d.W(l);
        return {
          pageIndex: c,
          x: l.x,
          y: l.y
        }
      },
      ku: function (b, a) {
        if (this.ld.getSelectedPages) return this.ld.getSelectedPages(b, a);
        var c = null,
          d = null;
        b = _.isUndefined(b) ? this.u.Ld : b;
        a = _.isUndefined(a) ? this.u.Bb : a;
        a: for (var e = this.cd; e < this.$f; e++)
          for (var k = 0; k < this.Ob; k++) {
            var m = this.Kb(e, k);
            if (!(0 > m)) {
              var n = this.u.N.pd(m),
                r = n.tg,
                q = n.ug,
                v = n.tg + n.width * this.u.zoom,
                n = n.ug + n.height * this.u.zoom;
              null === c && b.x <= v && b.x >= r && b.y <= n && b.y >= q && (c = m);
              null === d && a.x <= v && a.x >= r && a.y <= n && a.y >= q && (d = m);
              if (null !== c && null !== d) break a
            }
          }
        c > d && (e = c, c = d, d = e);
        return {
          first: c,
          last: d
        }
      },
      be: function (b, a) {
        if (this.ld.getVisiblePages) return this.ld.getVisiblePages(b, a);
        if (0 === this.u.Mb().length) return [];
        for (var c, d = [], e = this.getVisibleRegionRect(b, a), k = this.getVisibleRegionRect(0, 0), m = this.cd; m < this.$f; m++)
          for (var n = 0; n < this.Ob; n++)
            if (c = this.Kb(m, n), !(0 > c)) {
              var r = this.Fn(c, e, k);
              null !== r && d.push({
                Cb: c,
                rH: r.NR
              })
            } d.sort(function (b, a) {
          return a.rH - b.rH
        });
        c = d.length;
        for (e = 0; e < c; ++e) d[e] = d[e].Cb;
        return d
      },
      getVisibleRegionRect: function (b, a) {
        b = _.isUndefined(b) ? .5 : b;
        a =
          _.isUndefined(a) ? .5 : a;
        var c = this.u.iu();
        if (null === c) return [];
        var d = c.getBoundingClientRect(),
          e = d.width,
          k = d.height,
          m = c.scrollTop + d.top - k * b,
          c = c.scrollLeft + d.left - e * a;
        return {
          x1: c,
          y1: m,
          x2: c + e * (1 + 2 * a),
          y2: m + k * (1 + 2 * b)
        }
      },
      Fn: function (b, c, d) {
        var e = this.u.v.zc(b),
          l = this.pageToWindowNoRotate({
            x: 0,
            y: 0
          }, b),
          k = this.pageToWindowNoRotate({
            x: e.width,
            y: e.height
          }, b),
          e = a.utils.normalizeRect(l, k);
        c = a.utils.getRectIntersection(e, c);
        if (c.x1 !== c.x2) {
          var m;
          d && (d = a.utils.getRectIntersection(e, d), m = (d.x2 - d.x1) * (d.y2 - d.y1) / ((e.x2 -
            e.x1) * (e.y2 - e.y1)));
          l = this.windowToPageNoRotate({
            x: c.x1,
            y: c.y1
          }, b);
          k = this.windowToPageNoRotate({
            x: c.x2,
            y: c.y2
          }, b);
          return {
            Od: a.utils.normalizeRect(l, k),
            Sv: {
              x: c.x1 - e.x1,
              y: c.y1 - e.y1
            },
            NR: m
          }
        }
        return null
      },
      Bn: function (b) {
        if (this.ld.getPageTransform) return this.ld.getPageTransform(b);
        b = this.u.gu(b);
        return {
          x: 0,
          y: 0,
          width: b.width,
          height: b.height
        }
      },
      Yy: function () {
        return {
          x: 0,
          y: 0
        }
      },
      $m: function () {
        return d.CB.ZO({
          si: this.u.SF(),
          IU: this.u.N.be(),
          ql: this.Ob,
          cd: this.cd,
          Tn: this.$f - this.cd,
          ZT: this.mode === c.Er || this.mode ===
            c.Fr ? 1 : 0,
          ih: this.u.fz()
        })
      },
      yu: function (b) {
        var a = this.u.N.vf(b);
        return this.u.Fa.yu(a) || this.u.N.pd(b).ye
      },
      YD: function (b) {
        var c = this;
        this.Rt(function (d) {
          var e = d.id.slice(13),
            l = parseInt(e, 10);
          0 === e.indexOf("b") || c.yu(l) || $(d).children().each(function () {
            0 > this.className.indexOf("auxiliary") && (this.height = this.width = 0)
          });
          a.o.za.Ox(l);
          b && $(d).children().detach()
        })
      },
      $q: function (b) {
        b ? this.mode === c.Nf ? this.u.Qc().children().detach() : this.YD(!0) : (this.yj = null, this.YD(), this.u.Qc().empty(), this.u.trigger("contentRemoved"))
      },
      qg: function () {
        if (this.ld.createPageSections) return this.$q(!1), this.ld.createPageSections(), _.range(0, this.u.Ab());
        var b = this;
        if (this.mode !== c.Nf) {
          var a = this.$m(),
            e = d.CB.YO(this.yj, a);
          e.hP().forEach(function (a) {
            var c = document.getElementById("pageContainer" + a),
              c = b.u.oJ ? $(c).find("#hrthumb" + a) : $(c).find(".canvas" + a + ":not(.progressive)");
            0 < c.length && b.u.N.MA(a, c)
          });
          this.yj = a;
          a = e.qM(this.u.Qc().get(0)).fA;
          this.u.Bx(this.yj.xa());
          return a
        }
        return _.range(0, this.u.Ab())
      },
      Rt: function (b) {
        var c = this.u.Qc();
        if (0 !== c.length)
          for (c = c[0], c = c.firstChild; c;) a.utils.hasClass(c, "pageSection") && b(c.firstChild), c = c.nextSibling
      },
      Jf: function () {
        var b = this.u.N;
        this.Rt(function (a) {
          var c = a.parentNode,
            d = Number(a.id.slice(13));
          _.isNaN(parseInt(d, 10)) || b.pT(d, {
            tg: c.offsetLeft + a.offsetLeft,
            ug: c.offsetTop + a.offsetTop
          })
        })
      }
    };
    d.Ro = function (b) {
      if (!b) throw Error("DisplayModeManager requires DocumentViewer to initialize");
      this.u = b;
      this.ga = new a.o.vd(this.u, c.Oo)
    };
    d.Ro.prototype = {
      ic: function () {
        return this.ga
      },
      kI: function (b) {
        this.ga.$q();
        null === this.u.v ? (this.ga = b, this.u.trigger("displayModeUpdated")) : (this.lD(b), this.u.N.pi(this.u.tf()), this.u.trigger("zoomUpdated", this.u.Wg()), this.u.ki(), this.ga.Gz() && (this.qg(), this.ga.Jf()), this.u.Be(this.u.Tb + 1))
      },
      lD: function (b) {
        this.ga = b;
        this.FB();
        this.u.N.ZD();
        this.u.trigger("displayModeUpdated")
      },
      FB: function () {
        var b = this.ga.mode;
        _.isNull(b) || (b === c.HB ? (this.ga.Ob = 1, this.ga.dh = Math.ceil(this.u.v.numPages / this.ga.Ob), this.ga.Fd = Math.ceil(this.u.Tb / this.ga.Ob), this.ga.cd = this.ga.Fd, this.ga.$f =
          this.ga.Fd + 1) : b === c.Oo ? (this.ga.Ob = 1, this.ga.dh = Math.ceil(this.u.v.numPages / this.ga.Ob), this.ga.Fd = -1, this.ga.cd = 0, this.ga.$f = this.ga.dh) : b === c.sB ? (this.ga.Ob = 2, this.ga.Fd = Math.floor(this.u.Tb / this.ga.Ob), this.ga.dh = Math.ceil(this.u.v.numPages / this.ga.Ob), this.ga.cd = this.ga.Fd, this.ga.$f = this.ga.Fd + 1) : b === c.uw ? (this.ga.Ob = 2, this.ga.Fd = -1, this.ga.dh = Math.ceil(this.u.v.numPages / this.ga.Ob), this.ga.cd = 0, this.ga.$f = this.ga.dh) : b === c.Er ? (this.ga.Ob = 2, this.ga.Fd = -1, this.ga.dh = Math.ceil((this.u.v.numPages +
          1) / this.ga.Ob), this.ga.cd = 0, this.ga.$f = this.ga.dh) : b === c.Fr && (this.ga.Ob = 2, this.ga.Fd = Math.floor(this.u.Tb / this.ga.Ob), this.ga.dh = Math.ceil(this.u.v.numPages / this.ga.Ob), this.ga.cd = this.ga.Fd, this.ga.$f = this.ga.Fd + 1))
      },
      ku: function (b, a) {
        return this.ga.getSelectedPages(b, a)
      },
      be: function (b, a) {
        return this.ga.getVisiblePages(b, a)
      },
      Fn: function (b, a, c) {
        return this.ga.Fn(b, a, c)
      },
      qz: function (b, a) {
        return this.ga.getVisibleRegionRect(b, a)
      },
      Ff: function (b, a) {
        return this.ga.pageToWindow(b, a)
      },
      Oj: function (b, a) {
        return this.ga.windowToPage(b,
          a)
      },
      Bn: function (b) {
        return this.ga.getPageTransform(b)
      },
      Yy: function (b) {
        return this.ga.getPageOffset(b)
      },
      $m: function () {
        return this.ga.$m()
      },
      qg: function (b) {
        return this.ga.qg(b)
      },
      $q: function (b) {
        return this.ga.$q(b)
      },
      Rt: function (b) {
        return this.ga.Rt(b)
      },
      Jf: function () {
        return this.ga.Jf()
      }
    };
    a.o.wd = c
  })(window);
  (function (a) {
    function e() {}
    var d = window.o,
      c = XODText;
    e.prototype = Object.create(Error.prototype);
    d.aa = function () {
      var b = this;
      this.select = _.bind(this.select, this);
      this.ib = c.ib;
      this.v = null;
      this.defaults = {
        FitMode: this.zg.vw,
        DisplayMode: new a.o.vd(this, a.o.wd.Oo),
        Zoom: 1
      };
      this.da = new a.o.ka(this);
      this.ea = new a.o.Ro(this);
      this.iI();
      this.TE = this.iM = this.Yp = !1;
      this.cursor = "default";
      this.Pn = null;
      this.ii = [];
      this.kH = function (b, a, c) {
        c(b)
      };
      a.o.Fw(5);
      this.AB = function (a) {
        this.trigger("mouseLeftUp", a);
        b.wa && b.wa.mouseLeftUp &&
          b.wa.mouseLeftUp(a);
        for (var c in b.links)
          if (b.links.hasOwnProperty(c)) {
            a = b.links[parseInt(c, 10)];
            for (var d = 0; d < a.length; ++d) a[d].style && (a[d].style.border = "")
          }
      };
      this.zB = function (a) {
        this.trigger("mouseLeftDown", a);
        b.wa && b.wa.mouseLeftDown && (b.wa.mouseLeftDown(a), b.wa.isSelecting && b.wa.isSelecting() || !(b.wa instanceof Tools.Tj) ? b.jr("none") : b.jr("auto"))
      };
      this.pK = function (b) {
        this.trigger("click", b)
      };
      this.zK = function (a) {
        this.trigger("tap", a);
        b.wa && b.wa.tap && b.wa.tap(a)
      };
      this.rK = function (a) {
        this.trigger("dblClick",
          a);
        b.wa && b.wa.mouseDoubleClick && b.wa.mouseDoubleClick(a)
      };
      this.sK = function (a) {
        this.trigger("keyDown", a);
        b.wa && b.wa.keyDown && b.wa.keyDown(a)
      };
      this.tK = function (a) {
        this.trigger("keyUp", a);
        b.wa && b.wa.NQ && b.wa.NQ(a)
      };
      this.qK = function (a) {
        b.wa && b.wa.contextMenu && b.wa.contextMenu(a)
      };
      this.uK = function (a) {
        this.trigger("mouseEnter", a);
        b.wa && b.wa.mR && b.wa.mR(a)
      };
      this.BB = function (a) {
        this.trigger("mouseMove", a);
        b.wa && b.wa.mouseMove && b.wa.mouseMove(a)
      };
      this.vK = function (a) {
        this.trigger("mouseLeave", a);
        b.wa && b.wa.mouseLeave &&
          b.wa.mouseLeave(a)
      };
      this.wK = function (a) {
        this.trigger("mouseRightDown", a);
        b.wa && b.wa.Mu && b.wa.Mu(a)
      };
      this.xK = function (a) {
        this.trigger("mouseRightUp", a);
        b.wa && b.wa.nR && b.wa.nR(a)
      };
      this.yK = function (a) {
        b.wa && b.wa.jA && b.wa.jA(a)
      };
      this.ZI = {
        AnnotationCreateArrow: new a.ia.fw(this, "AnnotationCreateArrow"),
        AnnotationCreateCallout: new a.ia.CalloutCreateTool(this, "AnnotationCreateCallout"),
        AnnotationCreateEllipse: new a.ia.qw(this, "AnnotationCreateEllipse"),
        AnnotationCreateFreeHand: new a.ia.FreeHandCreateTool(this,
          "AnnotationCreateFreeHand"),
        AnnotationCreateFreeText: new a.ia.Zl(this, "AnnotationCreateFreeText"),
        AnnotationCreateLine: new a.ia.dm(this, "AnnotationCreateLine"),
        AnnotationCreatePolygon: new a.ia.Zj(this, "AnnotationCreatePolygon"),
        AnnotationCreatePolygonCloud: new a.ia.bp(this, "AnnotationCreatePolygonCloud"),
        AnnotationCreatePolyline: new a.ia.hm(this, "AnnotationCreatePolyline"),
        AnnotationCreateRectangle: new a.ia.Bw(this, "AnnotationCreateRectangle"),
        AnnotationCreateSignature: new a.ia.SignatureCreateTool(this,
          "AnnotationCreateSignature"),
        AnnotationCreateStamp: new a.ia.cp(this, "AnnotationCreateStamp"),
        AnnotationCreateSticky: new a.ia.Hw(this, "AnnotationCreateSticky"),
        AnnotationCreateTextHighlight: new a.ia.Jw(this, "AnnotationCreateTextHighlight"),
        AnnotationCreateTextSquiggly: new a.ia.Kw(this, "AnnotationCreateTextSquiggly"),
        AnnotationCreateTextStrikeout: new a.ia.Lw(this, "AnnotationCreateTextStrikeout"),
        AnnotationCreateTextUnderline: new a.ia.Mw(this, "AnnotationCreateTextUnderline"),
        AnnotationEdit: new a.ia.Tj(this,
          "AnnotationEdit"),
        Pan: new a.ia.$o(this, "Pan"),
        TextSelect: new a.ia.lm(this, "TextSelect")
      }
    };
    d.aa.prototype = {
      yM: function () {
        function b(b) {
          l = !0;
          var d = c.v.Lb()[b - 1];
          if (d) {
            var e, g, h = c.Wa().Qg();
            if (k && k !== d) {
              for (e = 0; e < h; ++e) g = h[e], g.xj() && g.pageNumber === m && h[e].De("PC", new a.Annotations.O.ub.Events.Yo("Close", c, {}));
              k.De("C", new a.Annotations.O.ub.Events.Yo.create("Close", c, {}))
            }
            k = d;
            m = b;
            d.De("O", new a.Annotations.O.ub.Events.Yo.create("Open", c, {}));
            for (e = 0; e < h; ++e) g = h[e], g.xj() && g.pageNumber === b && h[e].De("PO",
              new a.Annotations.O.ub.Events.Yo("Close", c, {}))
          }
        }
        var c = this;
        c.Qc().on("dragstart", function (b) {
          "IMG" === b.target.nodeName && b.preventDefault()
        });
        c.Qc().on("touchstart", function (b) {
          c.zB(b)
        });
        c.Qc().on("touchmove", function (b) {
          c.Bb = {
            x: b.originalEvent.touches[0].pageX,
            y: b.originalEvent.touches[0].pageY
          };
          c.BB(b)
        });
        c.Qc().on("touchend", function (b) {
          c.AB(b);
          c.gx = !1
        });
        c.Qc().on("pointerdown", function (b) {
          c.yK(b)
        });
        c.Qc().dblclick(function (b) {
          c.rK(b)
        });
        c.Qc().click(function (b) {
          c.pK(b)
        });
        c.Qc().on("tap", function (b) {
          c.zK(b)
        });
        $(window).on("keydown", function (b) {
          c.sK(b)
        });
        $(window).on("keyup", function (b) {
          c.tK(b)
        });
        c.Qc().on("contextmenu", function (b) {
          c.qK(b)
        });
        c.Qc().mouseenter(function (b) {
          c.uK(b)
        });
        var d = c.Qc(),
          e = c.Mb();
        0 < e.length && (d = e);
        d.mousedown(function (b) {
          if (0 < e.length) {
            var a = e[0].clientHeight;
            if (b.clientX > e[0].offsetLeft + e[0].clientWidth || b.clientY > e[0].offsetTop + a) return
          }
          1 === b.which ? (c.zB(b), c.gx = !0) : 3 === b.which && (c.wK(b), c.LC = !0)
        });
        $(document).on("mouseup", function (b) {
          1 === b.which && c.gx ? (c.AB(b), c.gx = !1) : 3 === b.which &&
            c.LC && (c.xK(b), c.LC = !1)
        });
        $(document).mousemove(function (b) {
          c.Bb = {
            x: b.pageX,
            y: b.pageY
          };
          c.BB(b)
        });
        c.Qc().mouseleave(function (b) {
          c.vK(b)
        });
        if (c.ea.ic().io) c.Mb().on("scroll", _.bind(c.onscroll, c));
        $(a).on("resize", _.bind(c.resize, c));
        c.on("PAUSE", function () {
          c.Fa.pause()
        });
        c.on("RESUME", function () {
          c.Fa.resume()
        });
        var l = !1,
          k = null,
          m;
        c.on("documentReady", function () {
          c.v.De("Init", new a.Annotations.O.ub.Events.rB.create("Open", c, {}));
          c.v.De("Open", new a.Annotations.O.ub.Events.rB.create("Open", c, {}));
          l || b(1)
        });
        c.on("pageNumberUpdated", function (a, d) {
          b(d);
          c.v.Dl({
            currentPage: d
          })
        });
        c.on("visiblePagesChanged", function (b, a) {
          c.v.Dl({
            visiblePages: a
          });
          var d = _.intersection(a, c.Dp);
          d.length && (clearTimeout(c.nM), c.nM = setTimeout(function () {
            c.li.hi("DocumentViewer.renderRequest", {
              type: "annotations",
              pages: d
            })
          }, 80))
        });
        c.on("endOfDocumentResult", function (b, a) {
          c.jl = !1;
          c.qr();
          a ? (c.loop = !0, c.ZA(c.nE, c.mN, !1)) : c.loop = !1
        })
      },
      resize: function (b) {
        b && b.target !== window || !this.v || !this.ea.ic().io || (this.tf === this.zg.Zoom ? (this.Bx(),
          this.ea.ic().Jf(), this.onscroll()) : (b = this.tf(), b !== this.N.dg ? (this.Ap(b), this.Mx()) : (this.ea.ic().Jf(), this.Mx(), this.onscroll())))
      },
      Mx: function () {
        var b = this.Mb(),
          a = (b[0].scrollWidth - b.width() + this.ju()) / 2;
        b.scrollLeft(a)
      },
      FS: function () {
        this.resize()
      },
      aE: function () {
        var b = this;
        return this.Ft = this.Ft.then(function () {
          if (b.v) return b.trigger("documentUnloaded"), b.ki(!0), Promise.resolve(b.Yc()).then(function () {
            b.iI()
          });
          b.ll && b.ll.$b();
          return Promise.resolve()
        })
      },
      iI: function () {
        this.v = null;
        this.Ft = Promise.resolve();
        this.Fa = new a.o.DK(this);
        this.ea.kI(this.defaults.DisplayMode);
        this.tf = this.defaults.FitMode;
        this.XH = !1;
        this.GG = [];
        this.Tb = 0;
        this.links = {};
        this.pf = [];
        this.ab || (this.ab = Promise.resolve(null));
        this.N = new d.Nw(null);
        this.Bb = this.Ld = null;
        this.margin = 4;
        this.$H = this.aI = 0;
        this.rr = new c.me;
        this.bd = this.YG = this.Su = null;
        this.TG = this.Sz = this.jl = this.vz = this.loop = !1;
        this.UG = this.VG = null;
        this.wq = !1;
        this.VI = "rgba(0, 0, 200, 0.3)";
        this.AA = "rgba(255, 255, 0, 0.5)";
        this.xx = "rgba(248, 153, 57, 0.5)";
        this.li = new a.o.jm.ap;
        var b = this;
        this.li.GH("DocumentViewer.renderRequest", {
          read: function (a) {
            a.Ix && b.ea.Jf();
            b.xU();
            a = b.ea.be();
            b.Fa.Co(a);
            return {
              ud: a,
              ES: b.ZR()
            }
          },
          consolidateChanges: function (b) {
            var a = b.filter(function (b) {
                return "pages" === b.type
              }),
              c = b.filter(function (b) {
                return "annotations" === b.type
              }),
              d = b.filter(function (b) {
                return "layout" === b.type
              });
            b = b.filter(function (b) {
              return "retainScroll" === b.type
            });
            var e = [];
            a.length && e.push({
              type: "pages",
              pages: _.union.apply(null, a.map(function (b) {
                return b.pages || []
              })),
              useVisiblePages: a.some(function (b) {
                return !!b.useVisiblePages
              }),
              check: a.every(function (b) {
                return !!b.check
              })
            });
            c.length && e.push({
              type: "annotations",
              pages: _.union.apply(null, c.map(function (b) {
                return b.pages || []
              }))
            });
            d.length && e.push({
              type: "layout",
              pages: _.union.apply(null, d.map(function (b) {
                return b.pages || []
              }))
            });
            return e = e.concat(b)
          },
          write: function (a, c) {
            var d = {
              Ix: !1
            };
            c.forEach(function (c) {
              var e;
              "pages" === c.type ? (e = c.useVisiblePages ? _.union(a.ud, c.pages) : _.intersection(a.ud, c.pages), 0 < e.length && (c.check ? b.Fa.NM() : b.Ll(e))) : "annotations" === c.type ? (e = _.intersection(a.ud,
                c.pages), b.Dp = _.difference(b.Dp, e), b.Fa.KH(), e.forEach(function (a) {
                b.jj(a)
              })) : "layout" === c.type ? (d.Ix = !0, e = b.ea.qg().concat(c.pages), c.pages.forEach(function (a) {
                b.N.MA(a, void 0)
              }), e.length && (e.forEach(function (a) {
                b.Fa.tu(b.N.vf(a))
              }), b.li.hi("DocumentViewer.renderRequest", {
                type: "pages",
                pages: e
              })), b.Fa.eB(b.Wg())) : "retainScroll" === c.type && b.RU(a.ES)
            });
            return d
          }
        }, {
          Ix: !0
        }, !1);
        this.cv = [];
        this.Dp = [];
        this.dt = null;
        this.HD = Promise.resolve()
      },
      ZR: function () {
        var b = this.rn() - 1,
          a = this.Mb(),
          c = a.scrollLeft() || 0,
          a = a.scrollTop() || 0,
          d = document.getElementById("pageContainer" + b);
        d && (c -= d.offsetLeft + d.parentNode.offsetLeft, a -= d.offsetTop + d.parentNode.offsetTop);
        return {
          Cb: b,
          x: c,
          y: a
        }
      },
      RU: function (b) {
        var a = document.getElementById("pageContainer" + b.Cb),
          c = b.x;
        b = b.y;
        a && (c += a.offsetLeft + a.parentNode.offsetLeft, b += a.offsetTop + a.parentNode.offsetTop);
        this.scrollTo(c, b)
      },
      RJ: function (b) {
        var a = {};
        _.isUndefined(b) || (_.isObject(b) ? a = b : a.docId = b);
        "onError" in a || (a.onError = function (b) {
          throw Error("Error loading document: " + b);
        });
        "getPassword" in a || (a.getPassword = function () {
          throw Error("Document requires a password. If you wish to process this type of document please define a getPassword callback.");
        });
        "docId" in a || (a.docId = null);
        "workerTransportPromise" in a || ("pdf" === a.type ? a.workerTransportPromise = d.qu(a.pdfBackendType, a.workerHandlers, a.l) : "office" === a.type && (a.workerTransportPromise = d.nG(a.officeBackendType, a.workerHandlers, a.l)));
        return a
      },
      DH: function (b) {
        this.li.hi("DocumentViewer.renderRequest", {
          type: "layout",
          pages: b
        });
        this.li.hi("DocumentViewer.renderRequest", {
          type: "retainScroll"
        })
      },
      OF: function () {
        return this.li
      },
      YE: function () {
        for (var b = this.Tb, a = this.sl, c = b; !_.isUndefined(a[b]) || !_.isUndefined(a[c]);) {
          if (!1 === a[b]) return b;
          if (!1 === a[c]) return c;
          --c;
          ++b
        }
        return null
      },
      iO: function (b) {
        var a = this;
        b = b.pages;
        a.dG || -1 === b.indexOf(1) || (a.trigger("documentReady"), a.dG = !0);
        var c = a.Fa.wP();
        b.forEach(function (b) {
          --b;
          a.sl[b] = !0;
          0 <= c.indexOf(b) && a.jj(b)
        });
        var d = a.YE();
        null === d && a.trigger("annotationsLoaded");
        a.wu = !1;
        a.Dp = a.Dp.concat(b.map(function (b) {
          return b -
            1
        }));
        a.wt(d)
      },
      wt: function (b) {
        this.wu || (b = _.isUndefined(b) ? this.YE() : b, null !== b ? this.SQ([b], this.v) : this.wu = !1)
      },
      SQ: function (b, a) {
        var c = this;
        c.wu = !0;
        this.cv = this.cv.concat(b);
        this.dt || (this.dt = setTimeout(function () {
          if (c.ll === a) {
            var d = c.cv;
            c.cv = [];
            c.dt = null;
            c.hW = c.HD.then(function () {
              if (c.ll === a) {
                var b = d.map(function (b) {
                  return b + 1
                });
                c.da.qA(b);
                for (var e = d.length, m = 0; m < e; ++m) c.da.UQ(d[m]);
                return c.getDocument().Nh(b)
              }
            }).then(function (d) {
              return new Promise(function (e) {
                c.ll === a && d ? c.kH(d.xfdfString, b, function (b) {
                  c.ll !==
                    a || _.isUndefined(b) ? e() : c.da.lG(b, function () {
                      c.iO(d);
                      e()
                    }, c.uO(d.xfdfString === b))
                }) : (c.trigger("annotationsLoaded"), e())
              })
            })
          }
        }, 20))
      },
      Bf: function (b, c) {
        var g = this;
        c = g.RJ(c);
        var h = new a.CoreControls.Document(c.docId, c.type);
        this.ll = h;
        h.mg(g);
        g.Ft.then(function () {
          return g.ab
        }).then(function (b) {
          h.Hl(b)
        }).then(function () {
          return new Promise(function (a, d) {
            g.dG = !1;
            g.JD = !1;
            h.Bf(b, function (b) {
              h !== g.ll ? (h.$b(), d(new e)) : b ? d(b) : null !== g.v ? a(g.aE().then(function () {
                return h
              })) : a(h)
            }, {
              annotationManager: g.da,
              getPassword: c.getPassword,
              workerTransportPromise: c.workerTransportPromise,
              extension: c.extension,
              defaultPageSize: c.defaultPageSize,
              pageSizes: c.pageSizes
            })
          })
        }).then(function (b) {
          g.v = b;
          var e = b.numPages;
          g.JX = e;
          g.sl = Array(e);
          g.wu = !1;
          e = b.wo();
          g.sl.fill(e ? !1 : 1);
          e && g.wt(0);
          g.N = new d.Nw(b);
          g.defaults.FitMode === g.zg.Zoom && g.N.pi(g.defaults.Zoom);
          g.v.on("bookmarksUpdated", function () {
            g.trigger("bookmarksUpdated")
          });
          g.v.on("officeAnnotationsUpdated", function (b, a) {
            g.da.Bh(a);
            g.da.gn(a)
          });
          g.N.on("layoutChanged", g.PQ.bind(g));
          g.N.on("zoomChanged",
            function (b, a) {
              g.oJ = g.Fa.sg;
              g.Fa.eB(a)
            });
          g.da.gS(g.N);
          g.trigger("beforeDocumentLoaded");
          c.type && "pdf" === c.type && a.o.lE !== a.o.Vl.Wr || g.Fa.FT(!0);
          g.Fa.init();
          g.ea.lD(g.ea.ic());
          g.TE || (g.TE = !0, g.yM());
          g.ea.ic().mode !== a.o.wd.Nf && (g.N.pi(g.Rs(g.tf)), g.ki(), g.ea.qg(), g.ea.Jf(), g.Ll(), b = g.Mb(), e = (b[0].scrollWidth + g.ju() - b.innerWidth()) / 2, b.scrollLeft(e));
          g.mM = new Promise(function (b) {
            g.off("annotationsLoaded.internal").on("annotationsLoaded.internal", function () {
              g.JD = !0;
              b()
            })
          });
          g.trigger("documentLoaded");
          1.2 >= g.v.v.Mf && g.trigger("documentReady")
        })["catch"](function (b) {
          if (!(b instanceof e)) c.onError(b)
        })
      },
      vO: function () {
        return this.mM
      },
      jr: function (b) {
        this.ea.ic().mode !== a.o.wd.Nf && this.Mb().css("touch-action", b)
      },
      Mb: function () {
        return $(this.iu())
      },
      iu: function () {
        this.bI || this.wI(document.getElementById("DocumentViewer"));
        return this.bI
      },
      wI: function (b) {
        this.bI = b
      },
      Qc: function () {
        return $(this.VF())
      },
      VF: function () {
        this.nJ || this.zI(document.getElementById("viewer"));
        return this.nJ
      },
      zI: function (b) {
        this.nJ =
          b
      },
      ju: function () {
        var b = $('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div></div>');
        $("body").append(b);
        var a = $("div", b).innerWidth();
        b.css("overflow-y", "auto");
        var c = $("div", b).innerWidth();
        $(b).remove();
        return a - c
      },
      Yc: function () {
        var b = this;
        if (this.v) {
          var a = this.v;
          clearTimeout(this.dt);
          this.da.Yc().then(function () {
            return Promise.all([b.HD, b.li ? b.li.Yc() : null, b.Fa ? b.Fa.Yc() : null, b.N ? b.N.Yc() : null])
          }).then(function () {
            b.off("documentReady.annotsLoaded");
            a.off();
            return a.$b()
          })
        }
      },
      nd: function (b) {
        var a = this.v.oq(b);
        return 90 === a || 270 === a ? this.v.od(b) : this.v.nd(b)
      },
      od: function (b) {
        var a = this.v.oq(b);
        return 90 === a || 270 === a ? this.v.nd(b) : this.v.od(b)
      },
      Oc: function (b) {
        return this.v.Oc(b)
      },
      Wa: function () {
        return this.da
      },
      NS: function (b) {
        this.kM = b
      },
      uO: function (b) {
        return $.extend({
          Dz: b
        }, this.kM)
      },
      bT: function () {},
      vT: function (b) {
        this.kH = b
      },
      uT: function (b) {
        this.hH = b
      },
      VD: function () {
        if (this.hH) {
          for (var b = this.GG, a = this.ea.be(0, 0), b = _.difference(a, b), c = 0; c < b.length; ++c) this.hH(b[c] +
            1);
          this.GG = a
        }
      },
      Wk: function () {
        return this.ea
      },
      Iv: function (b, c) {
        a.o.za.Iv(b, c)
      },
      fe: function (b) {
        "undefined" !== typeof b.enableAnnotations && (this.Yp = !!b.enableAnnotations);
        "undefined" !== typeof b.annotMode && (this.iM = !!b.annotMode)
      },
      Wg: function () {
        return this.N.dg
      },
      bu: function () {
        return this.margin
      },
      SF: function () {
        return this.margin * this.Wg()
      },
      iT: function (b) {
        this.margin = b
      },
      lu: function (b) {
        return b ? this.N.kP(b - 1) : this.N.lu()
      },
      hz: function (b) {
        return b ? this.N.lP(b - 1) : this.N.hz()
      },
      JT: function (b) {
        this.VI = b
      },
      ET: function (b) {
        this.AA =
          b.searchResult || this.AA;
        this.xx = b.activeSearchResult || this.xx
      },
      mu: function () {
        return this.wa
      },
      FP: function () {
        return this.ZI
      },
      nz: function (b) {
        return this.ZI[b]
      },
      $d: function (b) {
        return _.isUndefined(b) ? this.N.pu : this.N.pd(b - 1).rotation
      },
      ue: function (b) {
        var a = this.$d(b);
        if (_.isUndefined(b)) return a;
        b = this.Xk(b) / 90;
        return (a + b) % 4
      },
      DT: function (b, a) {
        var c;
        0 <= b && 3 >= b && (_.isUndefined(a) ? (this.N.KA(b), this.N.RM()) : (c = a - 1, this.N.ir(c, b)), this.rotate(c))
      },
      Xk: function (b) {
        --b;
        return 0 > b || _.isNaN(b) ? 0 : this.v.oq ? this.v.oq(b) :
          0
      },
      qT: function (b) {
        var a = this;
        Object.keys(b).forEach(function (c) {
          a.N.ir(c, b[c])
        });
        this.Ap(this.tf(), void 0, void 0, !0)
      },
      jP: function () {
        return this.N.SO()
      },
      getDocument: function () {
        return this.v
      },
      rq: function (b) {
        var a = null;
        this.Fa.sg && (a = this.ea, a = a.Fn(b, a.qz(this.Fa.Vd, this.Fa.Vd)));
        return a
      },
      KP: function (b) {
        var a = null;
        if (b = this.rq(b)) a = b.Od;
        return a
      },
      uo: function (b, c) {
        var d = this.v.zc(b),
          e = this.tb(b),
          l = this.ea.Bn(b),
          k, m = this.rq(b);
        m && (k = m.Od, l = m.Sv);
        return a.o.za.uo(c, {
          width: d.width,
          height: d.height
        }, e, this.$d(b +
          1), l, k, this.Xk(b + 1) / 90)
      },
      Rk: function (b) {
        var c = this.v.zc(b),
          d = this.tb(b),
          e = this.ea.Bn(b),
          l, k = this.rq(b);
        k && (l = k.Od, e = k.Sv);
        return a.o.za.Rk(b, {
          width: c.width,
          height: c.height
        }, d, this.$d(b + 1), e, l, this.Xk(b + 1) / 90)
      },
      MO: function () {
        return this.tf
      },
      fz: function () {
        return this.XH
      },
      CT: function (b) {
        this.XH = b
      },
      EN: function (b) {
        if (b.url)(new Actions.Hi({
          uri: b.url
        })).onTriggered(b, null, this);
        else b.isValid() ? this.bn(b.Df, b.Kn, b.Do) : console.warn("Tried to go to invalid bookmark destination")
      },
      bn: function (b, a, c, d) {
        if (this.ea.ic().io) {
          this.rn() !==
            b && this.Be(b);
          var e = this.od(b - 1),
            k = this.nd(b - 1);
          b = this.ea.Ff({
            x: a > e ? 0 : 0 > a ? 0 : a,
            y: c > k ? 0 : 0 > c ? 0 : c
          }, b - 1);
          a = this.Mb();
          c = a.offset();
          if (d && (d = b.x - c.left - (a.scrollLeft() || 0), e = b.y - c.top - (a.scrollTop() || 0), 0 < d && d < a.outerWidth() && 0 < e && e < a.outerHeight())) return;
          this.scrollTo(b.x - c.left, b.y - c.top)
        } else this.trigger("displayPageLocation", [b, c, a, d])
      },
      scrollTo: function (b, a) {
        this.Mb().scrollLeft(b).scrollTop(a)
      },
      eU: function (b, a, c) {
        if (b !== this.Su || a !== this.YG) this.VG = b, this.UG = a, this.Sz = !0, this.TG = c
      },
      jU: function (b) {
        var a = !1;
        if (null === this.Su || this.Su !== b) a = !0;
        if (null === this.loop || !0 === this.loop) a = !0;
        this.Su = b;
        this.bd !== this.Tb && (this.bd = this.Tb, a = !0);
        return a
      },
      ZA: function (b, a, d, e) {
        d = d || !1;
        this.zA = !1;
        var l = this,
          k = !0;
        this.nE !== b && (this.nE = b, this.vz = !1);
        this.mN = a;
        for (var m = 0; m < b.length; ++m) {
          var n = b.charCodeAt(m);
          if (!(1424 <= n && 1535 >= n || 1536 <= n && 1791 >= n || 1872 <= n && 1919 >= n || 64336 <= n && 65023 >= n || 65136 <= n && 65279 >= n)) {
            k = !1;
            break
          }
        }
        k && (b = b.split("").reverse().join(""));
        l.eY = l.Tb;
        if (!0 === this.jl) this.eU(b, a, d);
        else {
          d ? (k = function () {},
            l.N.Sx(), l.wq = !1) : (l.wq = !0, k = function (b) {
            b.xv === c.ac.Wp ? (l.jy(b), l.vz = !0) : b.xv === c.ac.Mk && (l.vz ? l.trigger("notify", "endOfDocumentSearch") : l.trigger("notify", "noMatchesFound"))
          });
          e = e || k;
          if (d || this.jU(b)) d ? (k = this.bd = 0, m = this.v.numPages - 1) : 0 < (a & c.ib.sy) ? (m = !0 === this.loop ? this.v.numPages - 1 : this.bd, k = 0) : (k = !0 === this.loop ? 0 : this.bd, m = this.v.numPages - 1), this.rr.xM(this.v, b, a, k, m);
          this.rr.setMode(a);
          this.YG = a;
          this.lU(d, e)
        }
      },
      uH: function (b) {
        null === this.v.$y(b) && this.v.Kd(b, function () {})
      },
      qr: function () {
        this.trigger("searchInProgress",
          [this.jl, !this.wq])
      },
      lU: function (b, a) {
        function d() {
          function g() {
            m = [];
            k = l.rr.run(m);
            n = k.xv;
            k.TX = m;
            var d = k;
            d.ambient_str = k.DD;
            d.result_str = k.wA;
            d.result_str_start = k.WH;
            d.result_str_end = k.VH;
            d.page_num = k.eA;
            d.resultCode = n;
            d.quads = m;
            if (l.zA) l.zA = !1, l.jl = !1, l.qr();
            else if (!0 === l.Sz) l.Sz = !1, l.jl = !1, l.qr(), setTimeout(function () {
              l.ZA(l.VG, l.UG, l.TG, a)
            }, 0);
            else {
              if (n === c.ac.It) {
                var p, u;
                if (l.rr.Yg()) {
                  if (0 < l.bd)
                    for (l.bd--, u = 0; 3 > u; ++u) p = l.bd - u, 0 < p && l.uH(p)
                } else if (l.bd < l.v.numPages - 1)
                  for (l.bd++, u = 0; 3 > u; ++u) p =
                    l.bd + u, p < l.v.numPages - 1 && l.uH(p)
              } else n !== c.ac.Wp || b || (l.N.Tx(), l.N.rI(k.eA, k.wA));
              a(d);
              n === c.ac.Mk || !b && n === c.ac.Wp ? (l.jl = !1, l.qr()) : null !== l.v.$y(l.bd) ? setTimeout(g, 0) : l.v.Kd(l.bd, e)
            }
          }
          var n = -1;
          null !== l.v.$y(l.bd) ? setTimeout(g, 0) : l.v.Kd(l.bd, e)
        }

        function e(b) {
          n === l.v && (l.v.sT(l.bd, b), d())
        }
        var l = this;
        this.jl = !0;
        this.qr();
        !0 === this.loop && (l.bd = this.rr.Yg() ? this.v.numPages - 1 : 0, this.loop = !1);
        var k, m = [],
          n = this.v;
        d()
      },
      EG: function (b, a) {
        b !== this.Tb && this.Be(b + 1);
        if (0 < a.length) {
          a = a.map(function (b) {
            return b.Vg ?
              b.Vg() : b
          });
          for (var c = a[0].y4, d = a[0].x4, e = a[0].y2, k = a[0].x2, m = 1; m < a.length; m++) a[m].x4 < d && (d = a[m].x4), a[m].y4 < c && (c = a[m].y4), a[m].x2 > k && (k = a[m].x2), a[m].y2 > e && (e = a[m].y2);
          var m = this.Mb(),
            n = m.offset(),
            r = n.top + (m.scrollTop() || 0),
            q = r + m.innerHeight(),
            n = n.left + (m.scrollLeft() || 0),
            v = n + m.innerWidth(),
            c = this.ea.Ff({
              x: d,
              y: c
            }, b),
            p = this.ea.Ff({
              x: k,
              y: e
            }, b),
            k = c.x < p.x ? c.x : p.x,
            e = c.y < p.y ? c.y : p.y,
            d = c.x > p.x ? c.x : p.x,
            c = c.y > p.y ? c.y : p.y;
          if (k < n || e < r || d > v || c > q) r = d - k, q = c - e, r = k - m.innerWidth() / 2 + r / 2 - m.offset().left, m = e - m.innerHeight() /
            2 + q / 2 - m.offset().top, this.scrollTo(r, m)
        }
      },
      FG: function (b, a) {
        var c = b.page_num;
        "undefined" !== typeof a ? a(c, b.quads) : this.EG(c, b.quads)
      },
      jy: function (b, a) {
        var c = this;
        this.wq = !0;
        this.sD = b;
        this.Bo(function () {
          var d = b.page_num;
          c.N.Sx();
          c.N.rT(d, b);
          c.FG(b, a)
        })
      },
      DN: function (b) {
        var a = this;
        this.Bo(function () {
          a.N.AU(b.page_num, b)
        })
      },
      KS: function (b) {
        this.wq ? this.jy(b) : (this.sD = b, this.FG(b), this.Bo())
      },
      UM: function () {
        var b = this;
        this.Bo(function () {
          b.N.Sx()
        });
        this.zA = !0
      },
      dI: function (b, a, d) {
        var e = new c.Na;
        e.Ha(a.x, a.y,
          a.x + 1, a.y + 1);
        var l = this,
          k = new c.Gi(this.v),
          m = this.v;
        m.Kd(b, function () {
          m === l.v && (k.jD(b, e), l.Pn = k.jD, l.ii = [
            [b, e]
          ], d(b, k.Re(), k.Pa))
        })
      },
      ko: function (b, a, d) {
        if (a.constructor !== c.Na) {
          var e = new c.Na;
          e.Ha(a.x1, a.y1, a.x2, a.y2);
          a = e
        }
        var l = this,
          k = new c.Gi(this.v),
          m = this.v;
        m.Kd(b, function () {
          if (m === l.v) {
            "rectangular" === Tools.Sb.SELECTION_MODE ? k.eI(b, a) : k.cI(b, a);
            var c = k.Pa,
              e = k.Re();
            d && d(b, e, c)
          }
        })
      },
      iv: function (b, a, c) {
        this.N.rI(b, c);
        this.N.tT(b, a);
        this.trigger("textSelected", [a, c, b]);
        this.Bo()
      },
      py: function (b) {
        this.hG(b -
          1)
      },
      iG: function (b, a, c) {
        for (var d = 0; d < a.length; d++) {
          var e = a[d];
          e.Vg && (e = e.Vg());
          b.fillStyle = c;
          b.beginPath();
          b.moveTo(e.x1, e.y1);
          b.lineTo(e.x2, e.y2);
          b.lineTo(e.x3, e.y3);
          b.lineTo(e.x4, e.y4);
          b.closePath();
          b.fill()
        }
      },
      dQ: function (b, a) {
        var c = this.N.pd(b).og;
        if (c && 0 !== c.length) {
          var d = a.getContext("2d");
          this.iG(d, c, this.VI);
          var e = {
              Re: function () {
                return c.map(function (b) {
                  return b.Vg()
                })
              }
            },
            k = this.N.iP(),
            m = !1,
            n = !1;
          b === k[0] && (m = !0);
          b === k[k.length - 1] && (n = !0);
          d.save();
          k = new Annotations.jk(e, !0, !1, m, n);
          m = this.Oc(b);
          k.draw(d, e, this.tb(b), m);
          d.restore()
        }
      },
      cQ: function (b, a) {
        var c = this.N.pd(b).oi;
        if (c && 0 !== c.length) {
          var d = a.getContext("2d"),
            e = this;
          c.forEach(function (b) {
            e.iG(d, b.quads, b === e.sD ? e.xx : e.AA)
          })
        }
      },
      hG: function (b, a) {
        a = a || this.Rk(b);
        null !== a && (this.dQ(b, a), this.cQ(b, a))
      },
      Bo: function (b) {
        var a = this.N.JF();
        b && b();
        b = this.N.JF();
        a = _.uniq(a.concat(b));
        for (b = 0; b < a.length; ++b) this.da.Hd(a[b] + 1)
      },
      select: function (b, a) {
        if (null !== this.Ld && null !== this.Bb || b || a) {
          this.N.Tx();
          var d;
          b && a ? (b.Cb = b.pageIndex, b.x = b.x, b.y = b.y,
            a.Cb = a.pageIndex, a.x = a.x, a.y = a.y, d = {
              first: b.Cb,
              last: a.Cb
            }) : (console.error("deprecated"), d = this.ea.ku());
          var e = d.first;
          d = d.last;
          if (null !== e && null !== d) {
            var l = new c.Na,
              k = b || this.ea.Oj(this.Ld, e),
              m = a || this.ea.Oj(this.Bb, e),
              n;
            k.y > m.y && (n = k, k = m, m = n);
            n = this.od(e);
            var r = this.nd(e);
            1 <= d - e ? l.Ha(k.x, k.y, n, r) : l.Ha(k.x, k.y, m.x, m.y);
            this.ko(e, l, _.bind(this.iv, this));
            for (k = e + 1; k < d; k++) l = new c.Na, n = this.od(k), r = this.nd(k), l.Ha(0, 0, n, r), this.ko(k, l, _.bind(this.iv, this));
            e !== d && (k = b || this.ea.Oj(this.Ld, d), m = a || this.ea.Oj(this.Bb,
              d), k.y > m.y && (m = k), l = new c.Na, l.Ha(0, 0, m.x, m.y), this.ko(d, l, _.bind(this.iv, this)))
          }
        }
      },
      VM: function (b) {
        if (0 !== this.lu().length || this.N.gP(b)) {
          var c = this.Rk(b);
          null !== c && (a.o.za.Op(c, this.od(b), this.nd(b)), this.Yp && this.da.Hd(b + 1))
        }
      },
      $D: function () {
        this.N.Tx();
        this.N.ZD()
      },
      Qp: function () {
        var b = this;
        this.Bo(function () {
          b.$D();
          b.trigger("textSelected", [null, ""]);
          b.mu() instanceof Tools.lm && b.mu().Qp()
        })
      },
      BO: function (b, c, d) {
        var e = [],
          l = b - 1;
        b = this.N.vf(l);
        if ((b = this.Fa.Nc(b)) && b.ee)
          for (c = this.gz({
              x: c,
              y: d
            }, l),
            d = b.Od ? this.gz({
              x: b.Od.x1,
              y: b.Od.y1
            }, l) : {
              x: 0,
              y: 0
            }, l = a.utils.getCanvasMultiplier(), c.x *= l, c.y *= l, d.x *= l, d.y *= l, c = Math.round(c.y - d.y) * b.ee.width + Math.round(c.x - d.x), b = b.ee.data, d = 0; d < b.length; ++d)
            if (l = b[d], "Alpha" !== l.name) {
              var k = new Uint8Array(l.data);
              c < k.length && 0 <= c && e.push({
                name: l.name,
                value: Math.round(k[c] / 255 * 100)
              })
            } return e
      },
      gz: function (b, c) {
        var d = this.tb(c),
          e = this.ue(c + 1);
        b = a.jd(d, e, {
          width: this.od(c),
          height: this.nd(c)
        }, null, !1).W(b);
        return {
          x: b.x,
          y: b.y
        }
      },
      zP: function (b, c) {
        var d = this.tb(c),
          e = this.$d(c +
            1);
        b = a.jd(d, e, this.v.zc(c), 0, !1).W(b);
        return {
          x: b.x,
          y: b.y
        }
      },
      zg: {
        vw: function () {
          var b = this.ju(),
            a = this.Mb(),
            c;
          c = 1 === this.ea.ic().Ob ? this.N.pd(this.Tb).width : this.ea.$m().ya() / this.Wg();
          return parseFloat(a.innerWidth() - b) / (c + 1 + this.bu() * this.ea.ic().Ob * 2)
        },
        uB: function () {
          var b = this.Mb(),
            a = this.N.pd(this.Tb),
            c = parseFloat(b.innerHeight()) / (a.height + 2 * this.bu()),
            a = 1 === this.ea.ic().Ob ? a.width : this.ea.$m().ya() / this.Wg(),
            b = parseFloat(b.innerWidth() - this.ju()) / (a + 1 + this.bu() * this.ea.ic().Ob * 2);
          return c < b ? c :
            b
        },
        Zoom: function () {
          this.Bx();
          return this.N.dg
        }
      },
      PA: function (b) {
        if (b && this.wa !== b) {
          b instanceof Tools.Tj || b instanceof Tools.lm || b instanceof Tools.$o || this.Qp();
          var a;
          this.wa && (this.wa.switchOut && this.wa.switchOut(b), a = this.wa);
          b.switchIn && b.switchIn(this.wa);
          this.wa = b;
          this.trigger("toolModeUpdated", [b, a])
        }
      },
      EU: function () {
        var b = this.Mb();
        this.aI = parseFloat(b.scrollTop()) / b[0].scrollHeight;
        this.$H = parseFloat(b.scrollLeft() + b.innerWidth() / 2) / b[0].scrollWidth
      },
      DU: function () {
        var b = this.Mb(),
          a = this.aI *
          b[0].scrollHeight,
          b = this.$H * b[0].scrollWidth - b.innerWidth() / 2;
        this.scrollTo(b, a)
      },
      JA: function (b) {
        null === this.v ? (this.tf = b, this.trigger("fitModeUpdated", this.tf)) : (b = this.Rs(b), this.ea.ic().mode === a.o.wd.Nf ? this.N.pi(b) : b !== this.N.dg && (this.Ap(b), this.Mx()))
      },
      Rs: function (b) {
        this.tf = b;
        b = this.tf();
        this.trigger("fitModeUpdated", this.tf);
        return b
      },
      rotate: function (b) {
        var a;
        _.isUndefined(b) || (a = b + 1);
        this.Ap(this.tf(), void 0, void 0, !0);
        this.trigger("rotationUpdated", [this.ue(a), a])
      },
      En: function (b, a) {
        return a ?
          (b + 1) % 4 : (b - 1 + 4) % 4
      },
      vS: function (b) {
        var a = this,
          c;
        _.isUndefined(b) ? (this.N.KA(this.En(this.$d(), !0)), this.N.eF(function (b) {
          b.rotation = a.En(b.rotation, !0)
        })) : (c = b - 1, this.N.ir(c, this.En(this.$d(b), !0)));
        this.rotate(c)
      },
      wS: function (b) {
        var a = this,
          c;
        _.isUndefined(b) ? (this.N.KA(this.En(this.$d(), !1)), this.N.eF(function (b) {
          b.rotation = a.En(b.rotation, !1)
        })) : (c = b - 1, this.N.ir(c, this.En(this.$d(b), !1)));
        this.rotate(c)
      },
      Ap: function (b, a, c, d) {
        this.N.pi(b);
        this.ea.ic().io && ("undefined" !== typeof a && "undefined" !== typeof c ?
          (this.ki(!1, d, !0), this.ea.qg(), this.ea.Jf(), this.scrollTo(a, c)) : (this.EU(), this.ki(!1, d, !0), this.ea.qg(), this.ea.Jf(), this.DU()), this.Fa.Px(), this.Ll(), this.trigger("zoomUpdated", this.N.dg))
      },
      mB: function (b, a, c) {
        this.Rs(this.zg.Zoom);
        null === this.v ? (this.N.pi(b), this.trigger("zoomUpdated", b)) : this.Ap(b, a, c)
      },
      aV: function (b, a, c) {
        this.Rs(this.zg.Zoom);
        this.N.pi(b);
        b = this.Mb();
        a = this.Bb.x - a;
        c = this.Bb.y - c;
        var d = (parseFloat(b.scrollTop()) + c) / b[0].scrollHeight,
          e = (parseFloat(b.scrollLeft()) + a) / b[0].scrollWidth;
        this.ki(!1, !1, !0);
        this.ea.qg();
        this.ea.Jf();
        this.scrollTo(e * b[0].scrollWidth - a, d * b[0].scrollHeight - c);
        this.Ll();
        this.trigger("zoomUpdated", this.N.dg)
      },
      tb: function (b) {
        return this.N.pd(b).zoom
      },
      Hv: function (b, a) {
        var c = this.N.vf(b);
        this.Fa.bV(c);
        this.N.Hv(b, a)
      },
      ki: function (b, c, d) {
        this.Fa.dN(this.N.dg, c);
        this.links = [];
        if (this.ea.ic().mode !== a.o.wd.Nf) {
          var e = this.Fa.ud;
          if (!c)
            for (var l = 0; l < e.length; l++) {
              var k = e[l],
                m;
              m = this.oJ ? $("#pageContainer" + k).find("#hrthumb" + k) : $("#pageContainer" + k).find(".canvas" +
                k + ":not(.progressive)");
              0 < m.length && this.N.MA(k, m)
            }
          d && !c || this.N.SM()
        }
        this.ea.$q(!b)
      },
      hS: function (b) {
        if (this.ea.ic().io) {
          var c = $("#pageContainer" + b),
            d = $(document.activeElement);
          0 < d.closest("#pageWidgetContainer" + b).length && d.trigger("focusout");
          c.children().detach();
          a.o.za.Ox(b)
        }
        b in this.links && delete this.links[b]
      },
      Qs: function (b) {
        if (0 > b || b >= this.N.J.length) return !1;
        this.Tb !== b && (this.Tb = b, this.trigger("pageNumberUpdated", b + 1));
        return !0
      },
      Be: function (b) {
        if (!this.ea.ic().io) this.trigger("changePage",
          b);
        else if (!1 !== this.Qs(parseInt(b, 10) - 1)) {
          this.mE = !0;
          b = this.Tb;
          var c = this.ea.ic();
          c.Gz() || c.mode === a.o.wd.Nf || (this.ea.ic().mode === a.o.wd.Fr && b++, c.Fd = Math.floor(parseFloat(b) / c.Ob), c.cd = c.Fd, c.$f = c.Fd + 1, this.ki(), this.ea.qg(), this.ea.Jf());
          b = this.v.zc(this.Tb);
          0 < this.Xk(this.Tb) / 90 % 2 && (c = b.width, b.width = b.height, b.height = c);
          var c = this.ea.Ff({
              x: 0,
              y: 0
            }, this.Tb),
            d = this.ea.Ff({
              x: b.width,
              y: b.height
            }, this.Tb);
          b = c.x < d.x ? c.x : d.x;
          c = c.y < d.y ? c.y : d.y;
          d = this.Mb().offset();
          this.scrollTo(b - d.left, c - this.SF() -
            d.top);
          this.Ll()
        }
      },
      rn: function () {
        return this.Tb + 1
      },
      Ab: function () {
        return this.v.numPages
      },
      GN: function () {
        this.Be(this.N.J.length)
      },
      FN: function () {
        this.Be(1)
      },
      Bx: function (b) {
        b = b || this.ea.$m().xa();
        var a = 0,
          c = document.getElementById("docpad");
        if (null !== c) {
          var d = this.iu(),
            d = d ? parseFloat(d.style.height) : 0;
          d > b && (a = Math.floor((d - b) / 2));
          c.style.marginBottom = parseInt(a, 10) + "px"
        }
      },
      sM: function (b, c) {
        var d = this.tb(c),
          e = this.N.pd(c),
          l = this.$d(c + 1),
          k = Math.floor(e.width * d),
          d = Math.floor(e.height * d),
          e = null;
        l === a.o.Sa.Qe ||
          l === a.o.Sa.Zf ? (e = "rotate(" + 90 * l + "deg)", e = l === a.o.Sa.Qe ? " translate(" + k + "px, 0)  " + e : " translate(0," + d + "px)  " + e, b.css("height", k), b.css("width", d)) : (l === a.o.Sa.Vp && (e = "translate(" + k + "px," + d + "px) scale(-1,-1)"), b.css("width", k), b.css("height", d));
        null !== e && b.css({
          position: "absolute",
          transform: e,
          "transform-origin": "top left",
          "ms-transform": e,
          "ms-transform-origin": "top left",
          "-moz-transform": e,
          "-moz-transform-origin": "top left",
          "-webkit-transform-origin": "top left",
          "-webkit-transform": e,
          "-o-transform": e,
          "-o-transform-origin": "top left"
        })
      },
      KD: function (b, c, d, e) {
        this.trigger("appendThumb", c);
        b.id = (e ? "hrthumb" : "thumb") + c;
        b.style.position = "absolute";
        var l = $(b);
        this.sM(l, c);
        d && (l.css("z-index", e ? "10" : "7"), d = $("#pageContainer" + c), 0 < d.length ? 0 === d.find("#" + b.id).length && d.prepend(b) : a.utils.warn("appendThumb: Page container " + c + " missing"))
      },
      jj: function (b) {
        this.et(b);
        this.VM(b);
        this.iN(b);
        this.zU(b);
        this.da.Hd(b + 1, void 0, !0);
        var c = a.o.za;
        2 === c.Gj && c.pj(b) === c.pj(b + 1) && b + 2 <= this.Ab() && this.da.Hd(b + 2)
      },
      Gp: function (b,
        c) {
        var d = this.N.pd(c).ye;
        (d = a.o.za.Gp(b, c, d)) || a.utils.warn("appendAllCanvas: Page container for page " + c + " does not exist.");
        return d
      },
      et: function (b) {
        var c, d = this.rq(b);
        d && (c = d.Od);
        var d = this.v.zc(b),
          e = this.Xk(b + 1);
        if (90 === e || 270 === e) e = d.width, d.width = d.height, d.height = e;
        a.o.za.et(b, d, this.tb(b), this.ue(b + 1), c)
      },
      Zm: function (b) {
        var c, d = this.rq(b);
        d && (c = d.Od);
        var d = this.v.zc(b),
          e = this.Xk(b + 1);
        if (90 === e || 270 === e) e = d.width, d.width = d.height, d.height = e;
        return a.o.za.Zm(b, d, this.tb(b), this.ue(b + 1), c)
      },
      nv: function (b, c) {
        var d = this.gu(b);
        a.o.za.nv(b, c, d)
      },
      zv: function (b, c) {
        a.o.za.zv(b, c)
      },
      iN: function (b) {
        var c = this.v.zc(b),
          d = c.width,
          c = c.height,
          e = this.v.oq(b);
        if (90 === e || 270 === e) e = d, d = c, c = e;
        var e = this.tb(b) / a.utils.getCanvasMultiplier(),
          d = d * e,
          c = c * e,
          l = a.jd(1, this.ue(b + 1), {
            width: d,
            height: c
          }),
          e = $("#pageWidgetContainer" + b);
        0 === e.length && (e = $('<div id="pageWidgetContainer' + b + '" />'), a.o.za.XF(b).append(e));
        l = "matrix(" + l.m_a.toFixed(10) + "," + l.m_b.toFixed(10) + "," + l.m_c.toFixed(10) + "," + l.m_d.toFixed(10) + "," +
          l.m_h.toFixed(10) + "," + l.m_v.toFixed(10) + ")";
        b = this.ea.Yy(b);
        e.css({
          position: "absolute",
          top: b.y,
          left: b.x,
          width: d,
          height: c,
          "z-index": 40,
          transform: l,
          "transform-origin": "top left",
          "-webkit-transform": l,
          "-webkit-transform-origin": "top left",
          "-ms-transform": l,
          "-ms-transform-origin": "top left",
          "-moz-transform": l,
          "-moz-transform-origin": "top left",
          overflow: "hidden"
        });
        return e
      },
      gu: function (b) {
        return this.N.pd(b)
      },
      cS: function () {
        this.trigger("layoutChanged", {
          contentChanged: _.range(1, this.Ab() + 1),
          removed: [],
          added: [],
          moved: {}
        });
        this.Fa.Px()
      },
      dS: function (b) {
        this.trigger("layoutChanged", {
          contentChanged: [b],
          removed: [],
          added: [],
          moved: {}
        });
        this.Fa.tu(this.gu(b - 1).id)
      },
      zU: function (b) {
        b = this.v.eP(b);
        _.isArray(b) && this.da.Bh(b, !0)
      },
      Ll: function (b, a) {
        _.isUndefined(a) || this.Qs(a);
        this.Co(b);
        this.Fa.uE(b);
        this.VD()
      },
      Co: function (b) {
        b = b || this.ea.be();
        var a = this.Fa.uM(b);
        this.Fa.Co(b);
        a && this.trigger("visiblePagesChanged", [b])
      },
      xo: function (b) {
        this.Fa.xo(b)
      },
      onscroll: function () {
        this.v && this.li.hi("DocumentViewer.renderRequest", {
          type: "pages",
          useVisiblePages: !0,
          check: !0
        });
        this.VD()
      },
      YP: function (b) {
        return 0 < $("#pageContainer" + b).find("#thumb" + b).length
      },
      VP: function (b) {
        return 0 < $("#pageContainer" + b).find("#hrthumb" + b).length
      },
      xU: function () {
        if (this.mE) this.mE = !1;
        else {
          var b = 0,
            c;
          this.Co();
          for (var d = this.Fa.ud, e = 0; e < d.length; e++) {
            var l = this.Mb(),
              k = l.scrollTop() || 0,
              m = k + l.innerHeight(),
              n = l.scrollLeft() || 0,
              l = n + l.innerWidth(),
              m = {
                x1: n,
                y1: k,
                x2: l,
                y2: m
              },
              l = d[e];
            0 > l || (k = this.v.zc(l), n = this.ea.Ff({
              x: 0,
              y: 0
            }, l), l = this.ea.Ff({
                x: k.width,
                y: k.height
              },
              l), m = a.utils.getRectIntersection(m, {
              x1: n.x < l.x ? n.x : l.x,
              y1: n.y < l.y ? n.y : l.y,
              x2: n.x > l.x ? n.x : l.x,
              y2: n.y > l.y ? n.y : l.y
            }), k = parseFloat((m.x2 - m.x1) * (m.y2 - m.y1)) / (k.width * k.height), k > b && (c = d[e], b = k))
          }
          0 < b && this.Qs(c)
        }
      },
      RA: function (b) {
        this.Fa.RA(b)
      },
      vI: function () {},
      PQ: function (b, a) {
        var c = this;
        c.DH(a.contentChanged.map(function (b) {
          return b - 1
        }));
        var d = !1,
          e = a.added;
        0 < e.length && (e.forEach(function (b) {
          c.sl.splice(b - 1, 0, !0)
        }), d = !0);
        e = a.removed;
        0 < e.length && (e.reverse().forEach(function (b) {
            c.sl.splice(b - 1, 1)
          }), c.Fa.eJ(c.v.An()),
          d = !0, c.wt(), c.Tb >= c.Ab() && c.Qs(c.Ab() - 1));
        d && (c.Fa.TM(), e = c.Mb(), d = e.offset(), e = c.ea.Oj({
          x: (e.scrollLeft() || 0) + d.left,
          y: (e.scrollTop() || 0) + d.top
        }, c.Tb), c.ea.FB(), c.ea.qg(), c.ea.Jf(), e = c.ea.Ff(e, c.Tb), c.scrollTo(e.x - d.left, e.y - d.top), c.Ll());
        d = a.contentChanged;
        0 < d.length && (d.forEach(function (b) {
          1 === c.sl[b - 1] && (c.sl[b - 1] = !1)
        }), c.wt());
        c.trigger("layoutChanged", [a])
      },
      Hl: function (b) {
        this.ab = Promise.resolve(b);
        if (this.v) {
          var a = this;
          this.ab.then(function (b) {
            a.v.Hl(b)
          })
        }
      },
      WF: function () {
        return this.ab
      }
    };
    $.extend(d.aa.prototype, a.utils.eventHandler);
    Object.defineProperty(d.aa.prototype, "zoom", {
      get: function () {
        return this.Wg()
      },
      set: function (b) {
        this.N.pi(b)
      }
    });
    a.o = a.o || {}
  })(window);
  window.o.aa.prototype.version = "4.1.0.69813";
  (function (a) {
    var e = a.Annotations || {};
    a.Annotations = e;
    e.O = e.O || {};
    e.O.getUsableInputWidth = function (a) {
      return a
    };
    e.O.yi = function (a) {
      this.da = a;
      this.init()
    };
    e.O.yi.prototype = {
      init: function () {
        this.mb = {};
        this.Jx = [];
        this.ex = !1;
        this.vo = this.BC = !0;
        this.Dx = null
      },
      QS: function (a) {
        this.Jx = a
      },
      zb: function (a) {
        if (!a) return null;
        a = a.split(".");
        var c = this.mb[a[0]];
        if (c)
          for (var b = 1; b < a.length && (c = c.Iy(a[b]), c); ++b);
        return c ? c : null
      },
      Ys: function (a, c) {
        if (c) {
          var b = this.du(a.name);
          b.set(a);
          a = b;
          a.widgets.forEach(function (b) {
            b.mI(a)
          });
          a.off("change")
        } else b = a.name.split("."), 1 === b.length ? this.mb[a.name] = a : this.du(b.slice(0, -1).join(".")).wD(new e.O.fa(a.name, a));
        a.set({
          fieldManager: this
        });
        this.da && a.mg(this.da.u);
        a.on("change", _.bind(this.xy, this));
        return a
      },
      Ip: function (a, c) {
        if (!this.ex && this.vo) {
          this.ex = !0;
          var b = this.Jx;
          if (!c || this.BC) c = 0, this.BC = !1;
          for (var e = c; e < b.length; ++e) {
            var g = b[e],
              h = this.zb(g);
            h ? h.trigger("calculate", [a]) : console.warn("Non-existent field referenced in calculation order", g, h)
          }
          this.ex = !1
        }
      },
      xy: function (a,
        c) {
        this.Ip(c, 0);
        this.da.trigger("fieldChanged", [c, c.value])
      },
      du: function (d) {
        if (!d) return null;
        d = d.split(".");
        var c = this.mb[d[0]];
        c || (c = new a.Annotations.O.fa(d[0], {
          fieldManager: this
        }), c.on("change", _.bind(this.xy, this)), this.mb[d[0]] = c);
        for (var b = 1; b < d.length; ++b) {
          var e = d[b],
            g = c.Iy(e);
          g ? c = g : (g = new a.Annotations.O.fa(c.name + "." + e, {
            fieldManager: this
          }), c.wD(g), c = g, c.on("change", _.bind(this.xy, this)))
        }
        this.da && c.mg(this.da.u);
        return c
      },
      ur: function (a) {
        this.nn(function (c) {
          c.fB(a)
        })
      },
      nn: function (a) {
        var c =
          this;
        Object.keys(this.mb).forEach(function (b) {
          a(c.mb[b])
        })
      },
      Yc: function () {
        this.nn(function (a) {
          a.off()
        });
        this.init()
      },
      alert: function (a) {
        this.Dx ? this.Dx(a) : window.alert(a)
      },
      MS: function (a) {
        this.Dx = a
      }
    }
  })(window);
  (function (a) {
    a.Annotations || (a.Annotations = {});
    var e = a.Annotations;
    e.O = e.O || {};
    e.O.fa = function (d, c) {
      if (c instanceof e.O.fa) return c;
      a.Actions.nh.call(this, c);
      this.tc = d;
      this.hf = [];
      this.Wi = [];
      this.wk = !1;
      this.Pg = null;
      this.ym = new e.Ag;
      this.bc = new e.Ii({
        mask: ["ReadOnly", "Required", "NoExport"]
      });
      this.mf = -1;
      this.cc || (this.cc = new e.O.fa.Rb(this));
      this.initialize(c);
      this.on("calculate", _.bind(this.Ip, this));
      this.on("commit", _.bind(this.Vx, this))
    };
    e.O.fa.prototype = {
      initialize: function (a) {
        _.isObject(a) && (a.type &&
          this.xI(a.type), _.isArray(a.children) && $.extend(this.hf, a.children), a.widgets && $.extend(this.Wi, a.widgets), a.fieldManager && (this.Pg = a.fieldManager), a.font && this.ym.set(a.font), _.isUndefined(a.maxLen) || (this.mf = Number(a.maxLen)), this.cc.set(a))
      },
      set: function (a) {
        this.initialize(a);
        _.isObject(a) && _.isObject(a.actions) && this.Ws(a.actions, !0)
      },
      fF: function (a) {
        this.Wi.forEach(a)
      },
      xI: function (a) {
        "Tx" === a ? this.cc = new e.O.fa.Iw(this, this.cc) : "Ch" === a ? this.cc = new e.O.fa.iw(this, this.cc) : "Btn" === a ? this.cc = new e.O.fa.gw(this,
          this.cc) : "Sig" === a ? this.cc = new e.O.fa.Gw(this, this.cc) : console.warn("Unrecognised field type: " + a);
        this.Ts = a
      },
      If: function (a) {
        this.Wi.forEach(function (c) {
          c.If(a)
        })
      },
      qF: function () {
        return this.hf
      },
      FQ: function () {
        return 0 === this.hf.length
      },
      hM: function (a, c) {
        -1 === this.Wi.indexOf(a) && (_.isUndefined(c) ? this.Wi.push(a) : this.Wi[c] = a)
      },
      fg: function (a) {
        this.cc.fg(a)
      },
      Db: function (a, c) {
        this.cc.Db(a, c)
      },
      Xa: function () {
        return this.cc.Xa()
      },
      iq: function () {
        return this.cc.iq()
      },
      fe: function (a) {
        this.cc.fe(a)
      },
      $s: function (a,
        c) {
        this.cc.$s(a, c)
      },
      Ug: function () {
        return this.cc.Ug()
      },
      Dv: function (a) {
        this.cc.Dv(a)
      },
      gq: function () {
        return this.cc.gq()
      },
      az: function () {
        var a = this.tc.split(".");
        return a[a.length - 1]
      },
      mP: function () {
        var a, c = this.tc.split(".");
        1 < c.length && (a = c.slice(0, c.length - 1).join("."));
        return a
      },
      fB: function (a, c) {
        var b = this.az();
        (c = (c ? c + "." : "") + b) || (c = "");
        if (this.FQ()) {
          if (a.Sq) {
            var e = !0;
            a.Mt && (a.Mt(this) || (e = !1));
            e && a.Sq(c, b, this)
          }
        } else {
          var g;
          a.Mt ? (g = [], this.hf.forEach(function (b) {
            a.Mt(b) && g.push(b)
          })) : g = this.hf;
          0 <
            g.length && (a.Vu && a.Vu(c, b, this), g.forEach(function (b) {
              b.fB(a, c)
            }), a.Yz && a.Yz(c, b, this))
        }
      },
      Iy: function (a) {
        for (var c = this.hf, b = c.length, e = 0; e < b; ++e) {
          var g = c[e];
          if (g.az() === a) return g
        }
        if (a.match(/^\d+$/)) return this.Wi[parseInt(a, 10)]
      },
      removeChild: function (a) {
        a = this.hf.indexOf(a); - 1 !== a && this.hf.splice(a, 1)
      },
      wD: function (a) {
        var c = this.Iy(a.az());
        c && this.removeChild(c);
        this.hf.push(a)
      },
      TH: function () {
        this.Db(this.gq())
      },
      Ip: function (d, c) {
        var b = new a.Annotations.O.ub.Events.fa.create("Calculate", this, {
            value: this.value,
            source: c,
            rc: !0
          }),
          e = this.Xa();
        this.De("C", b);
        var g = this.yX;
        this.mf = -1;
        var h = b.value;
        b.rc && h !== e && this.Db(h);
        this.mf = g
      },
      mv: function () {
        this.fF(function (a) {
          a.refresh()
        })
      },
      Vx: function (d, c, b) {
        d = a.Annotations.O.ub.Events.fa.create("Keystroke", this, {
          value: c,
          change: "",
          willCommit: !0,
          selStart: -1,
          selEnd: -1
        });
        this.De("K", d);
        d.rc && (c = a.Annotations.O.ub.Events.tn(d), d = new a.Annotations.O.ub.Events.fa.create("Validate", this, {
          value: c
        }), this.De("V", d), d.rc && this.Db(d.value, b))
      },
      Ce: function (a) {
        this.cc.Ce(a)
      }
    };
    $.extend(e.O.fa.prototype,
      Object.create(a.utils.eventHandler));
    Object.defineProperties(e.O.fa.prototype, {
      name: {
        get: function () {
          return this.tc
        }
      },
      value: {
        get: function () {
          return this.Xa()
        },
        set: function (a) {
          this.Db(a)
        }
      },
      widgets: {
        get: function () {
          return this.Wi
        }
      },
      children: {
        get: function () {
          return this.hf
        }
      },
      options: {
        get: function () {
          return this.Ug()
        },
        set: function (a) {
          this.fe(a)
        }
      },
      exportValue: {
        get: function () {
          return this.iq()
        }
      },
      actions: {
        get: function () {
          return this.lj()
        }
      },
      defaultValue: {
        get: function () {
          return this.gq()
        },
        set: function (a) {
          this.Dv(a)
        }
      },
      flags: {
        get: function () {
          return this.cc.bc
        }
      },
      IsModified: {
        set: function (a) {
          a !== this.wk && this.hf.forEach(function (c) {
            c.IsModified = a
          });
          this.wk = a
        },
        get: function () {
          return this.wk || this.hf.reduce(function (a, c) {
            return a || c.IsModified
          }, !1)
        }
      },
      font: {
        get: function () {
          return this.ym
        }
      },
      maxLen: {
        get: function () {
          return this.mf
        },
        set: function (a) {
          this.mf = Number(a);
          0 < this.mf && this.Db(this.Xa())
        }
      },
      type: {
        get: function () {
          return this.Ts
        }
      },
      userName: {
        get: function () {
          return this.SL
        },
        set: function (a) {
          this.SL = a
        }
      }
    });
    $.extend(e.O.fa.prototype,
      a.Actions.nh.prototype);
    e.O.fa.Rb = function (a) {
      this.Ia = a;
      this._value = this.Yw = "";
      this.bc = new e.Ii({
        mask: ["ReadOnly", "Required", "NoExport"]
      })
    };
    e.O.fa.Rb.prototype = {
      Db: function (d, c) {
        var b = this.Ia,
          e = typeof d;
        "number" === e ? d = a.Annotations.ba.toFixed(d, 6) : d && "string" !== e && (d = d.toString());
        e = this._value !== d;
        this.Ce(d);
        e && (d = this._value, this.QA(d, c), b.IsModified = !0, b.trigger("change", [b]))
      },
      QA: function (a) {
        this.Ia.fF(function (c) {
          c.Db(a)
        })
      },
      Ce: function (a) {
        this._value = a
      },
      fg: function (a) {
        this.Ce(a)
      },
      set: function (a) {
        _.isObject(a) &&
          (_.isNull(a.value) || _.isUndefined(a.value) || (this._value = a.value), _.isNull(a.defaultValue) || _.isUndefined(a.defaultValue) || (this.Yw = a.defaultValue), a.flags && (_.isArray(a.flags) ? this.bc.set(a.flags, !0) : _.isObject(a.flags) && this.bc.set(a.flags.toArray(), !0)))
      },
      Xa: function () {
        return this._value
      },
      gq: function () {
        return this.Yw
      },
      Dv: function (a) {
        this.Yw = a
      },
      $s: function () {},
      Ug: function () {
        return null
      },
      fe: function () {},
      iq: function () {
        return this._value
      }
    };
    Object.defineProperties(e.O.fa.Rb.prototype, {
      value: {
        get: function () {
          return this.Xa()
        },
        set: function (a) {
          this.Db(a)
        }
      },
      defaultValue: {
        get: function () {
          return this.gq()
        },
        set: function (a) {
          this.Dv(a)
        }
      }
    });
    e.O.fa.Iw = function (a, c) {
      if (c instanceof e.O.fa.Iw) return c;
      e.O.fa.Rb.call(this, a);
      this.bc.$p("Multiline Password FileSelect DoNotSpellCheck DoNotScroll Comb RichText".split(" "));
      this.set(c)
    };
    e.O.fa.Iw.prototype = $.extend(Object.create(e.O.fa.Rb.prototype), {
      Ce: function (a) {
        var c = this.Ia.maxLen;
        0 < c && !_.isNull(a) && (a = String(a), a.length > c && (a = a.slice(0, c)));
        e.O.fa.Rb.prototype.Ce.call(this, a)
      }
    });
    e.O.fa.iw = function (a, c) {
      if (c instanceof e.O.fa.iw) return c;
      e.O.fa.Rb.call(this, a);
      this.bc.$p("Combo Edit Sort MultiSelect DoNotSpellCheck CommitOnSelChange".split(" "));
      this.Vf = [];
      this.set(c)
    };
    e.O.fa.iw.prototype = $.extend(Object.create(e.O.fa.Rb.prototype), {
      set: function (a) {
        _.isObject(a) && a.options && this.fe(a.options);
        e.O.fa.Rb.prototype.set.call(this, a)
      },
      cP: function (a) {
        for (var c = 0; c < this.Vf.length; ++c) {
          var b = this.Vf[c];
          if (b.value === a) return b
        }
        return null
      },
      Ce: function (a) {
        a = a.replace(/\n/g, " ");
        this.bc.get("Edit") ||
          !_.isNull(this.cP(a)) ? e.O.fa.Rb.prototype.Ce.call(this, a) : e.O.fa.Rb.prototype.Ce.call(this, null)
      },
      Ug: function () {
        return this.Vf
      },
      $s: function (a, c) {
        for (var b = this.Vf, e = 0; e < b.length; ++e)
          if (b[e].value === b.value) return;
        this.Vf.splice(c, 0, a);
        this.bc.get("Combo") || this.Db(a.value)
      },
      fe: function (a) {
        this.Vf = a.map(function (a) {
          var b = a.value;
          a = a.displayValue;
          return {
            value: b,
            displayValue: _.isUndefined(a) ? b : a
          }
        })
      }
    });
    e.O.fa.gw = function (a, c) {
      if (c instanceof e.O.fa.gw) return c;
      e.O.fa.Rb.call(this, a);
      this.bc.$p(["NoToggleToOff",
        "Radio", "PushButton", "RadiosInUnison"
      ]);
      this.Vf = null;
      this.set(c);
      "" === this._value && (this._value = "Off")
    };
    e.O.fa.gw.prototype = $.extend(Object.create(e.O.fa.Rb.prototype), {
      set: function (a) {
        e.O.fa.Rb.prototype.set.call(this, a);
        _.isObject(a) && a.options && this.fe(a.options)
      },
      Ug: function () {
        return this.Vf
      },
      fg: function (a) {
        ("" === this._value || "Off" !== a || this.Ia.widgets.every(function (a) {
          return !a.appearance
        })) && e.O.fa.Rb.prototype.fg.call(this, a)
      },
      Ce: function (a) {
        "Off" !== a ? "" === a ? e.O.fa.Rb.prototype.Ce.call(this,
          "Off") : e.O.fa.Rb.prototype.Ce.call(this, a) : this.bc.get("NoToggleToOff") && this.bc.get("Radio") || e.O.fa.Rb.prototype.Ce.call(this, a)
      },
      iq: function () {
        return this.Vf ? this.Vf[Number(this.Xa())] : e.O.fa.Rb.prototype.iq.call(this)
      },
      fe: function (a) {
        this.Vf = a.slice()
      },
      QA: function (a, c) {
        e.O.fa.Rb.prototype.QA.call(this, a, c)
      }
    });
    e.O.fa.Gw = function (a, c) {
      if (c instanceof e.O.fa.Gw) return c;
      e.O.fa.Rb.call(this, a);
      this.set(c)
    };
    e.O.fa.Gw.prototype = $.extend(Object.create(e.O.fa.Rb.prototype), {})
  })(window);
  (function (a) {
    function e(b) {
      return _.isArray(b) ? b.map(e).join(" ") : _.isNumber(b) ? b.toString() : _.escape(String(b))
    }

    function d(b, a, c, d) {
      c !== d && b.writeAttributeString(a, e(c))
    }

    function c(b, a, c) {
      var f = c.br || [];
      c = c.Un || {};
      for (var g = 0; g < f.length; ++g) {
        var h = f[g],
          l = a[h];
        _.isUndefined(a) ? console.warn("Required attribute: " + h + " is undefined") : b.writeAttributeString(h, e(l))
      }
      for (var k in c) c.hasOwnProperty(k) && d(b, k, a[k], c[k])
    }

    function b(b, a, g, h) {
      h = h || "actions";
      var l = Object.keys(a);
      if (0 < l.length) {
        b.writeStartElement(h);
        for (h = 0; h < l.length; ++h) b.writeStartElement("action"), b.writeAttributeString("trigger", _.escape(l[h])), a[l[h]].forEach(function (a) {
          var h = a.name;
          switch (h) {
            case "JavaScript":
              b.writeStartElement("javascript");
              b.writeString(e(a.javascript));
              b.writeEndElement();
              break;
            case "ResetForm":
              b.writeStartElement("reset-form");
              c(b, a, {
                br: ["exclude"]
              });
              a.fields && f(b, a.fields);
              b.writeEndElement();
              break;
            case "SubmitForm":
              b.writeStartElement("submit-form");
              c(b, a, {
                br: ["url", "format"],
                Un: {
                  method: "POST",
                  exclude: !1
                }
              });
              h =
                a.flags.toArray();
              0 < h.length && b.writeAttributeString("flags", e(h));
              a = a.fields;
              0 < a.length && f(b, a);
              b.writeEndElement();
              break;
            case "GoTo":
              b.writeStartElement("goto");
              b.writeStartElement("dest");
              a = a.dest;
              c(b, a, {
                br: ["fit", "page"],
                Un: {
                  zoom: void 0
                }
              });
              var l = g(a.page).inverse(),
                h = a.top || 0,
                k = a.left || 0,
                n = a.bottom || 0,
                q = a.right || 0,
                k = l.W({
                  x: k,
                  y: h
                }),
                l = l.W({
                  x: q,
                  y: n
                }),
                h = _.isUndefined(a.top) ? null : k.y,
                k = _.isUndefined(a.left) ? null : k.x,
                q = _.isUndefined(a.right) ? null : l.x,
                n = _.isUndefined(a.bottom) ? null : l.y;
              d(b, "top", h, null);
              d(b, "left", k, null);
              d(b, "right", q, null);
              d(b, "bottom", n, null);
              b.writeEndElement();
              b.writeEndElement();
              break;
            case "URI":
              b.writeStartElement("uri");
              c(b, a, {
                br: ["uri"]
              });
              b.writeEndElement();
              break;
            case "Hide":
              b.writeStartElement("hide");
              c(b, a, {
                Un: {
                  hide: !0
                }
              });
              f(b, a.fields);
              b.writeEndElement();
              break;
            case "Named":
              b.writeStartElement("named");
              b.writeAttributeString("name", _.escape(a.action));
              b.writeEndElement();
              break;
            default:
              console.warn("Unrecognised action name" + h)
          }
        }), b.writeEndElement();
        b.writeEndElement()
      }
    }

    function f(b, a, c) {
      c || (c = "fields");
      b.writeStartElement(c);
      c = a.length;
      for (var d = 0; d < c; ++d) {
        var e = b,
          f = a[d];
        e.writeStartElement("ffield");
        e.writeAttributeString("name", _.escape(f));
        e.writeEndElement()
      }
      b.writeEndElement()
    }

    function g(b, a, c, e) {
      if (e || !a.CG()) b.writeStartElement(c), d(b, "r", a.R, 0), d(b, "g", a.G, 0), d(b, "b", a.B, 0), d(b, "a", a.A, 1), b.writeEndElement()
    }

    function h(b, a, e) {
      if (a && (0 !== a.size || "" !== a.name || "Type1" !== a.type || !a.dl())) {
        b.writeStartElement("font");
        c(b, a, {
          Un: {
            type: "Type1",
            name: ""
          }
        });
        var f =
          a.size,
          h = e.inverse();
        e = h.W({
          x: 0,
          y: 0
        });
        h = h.W({
          x: f,
          y: 0
        });
        f = e.x - h.x;
        e = e.y - h.y;
        d(b, "size", Math.sqrt(f * f + e * e), 0);
        e = a.fillColor;
        e.dl() || g(b, e, "fill-color", !0);
        a = a.strokeColor;
        a.dl() || g(b, a, "stroke-color", !0);
        b.writeEndElement()
      }
    }

    function l(b, a, c) {
      b.writeStartElement("aappearance");
      b.writeAttributeString("name", a);
      Object.keys(c).forEach(function (a) {
        b.writeStartElement(a);
        b.writeString(e(c[a].data || ""));
        b.writeEndElement()
      });
      b.writeEndElement()
    }
    a.bf = a.bf || {};
    var k = a.bf;
    k.Qh = function (b, a) {
      var c;
      a in b ? c = b[a] :
        (c = {}, b[a] = c);
      return c
    };
    k.parse = function (b, a, c, d) {
      var e = {
          calculationOrder: [],
          widgets: [],
          fields: {},
          pages: [],
          documentActions: {}
        },
        f = b.ua();
      "pdf-info" !== f ? (console.warn("pdf-info missing. found: " + f), c(e)) : (f = b.K("version"), "1" === f ? k.WK.parse(b, a, c, d) : "2" === f ? k.LB.parse(b, a, c, d) : (console.warn("PDFInfo version is incorrect: " + f), c(e)))
    };
    k.tJ = function (b, a, c) {
      if (a)
        for (var f in a) {
          var g = a[f],
            h;
          for (h in g) {
            var l = g[h];
            "objnum" in l && (b.writeStartElement("apref"), d(b, "appearance-state", f, "_DEFAULT"), d(b, "annotation-state",
              h, "Normal"), b.writeAttributeString("gennum", e(l.gennum)), b.writeAttributeString("objnum", e(l.objnum)), l = l.offset, l = c.W({
              x: l.x,
              y: l.y
            }), b.writeAttributeString("x", e(l.x)), b.writeAttributeString("y", e(l.y)), b.writeEndElement())
          }
        }
    };
    k.write = function (a, n, r) {
      a.writeStartElement("pdf-info");
      a.writeAttributeString("xmlns", "http://www.pdftron.com/pdfinfo");
      a.writeAttributeString("version", "2");
      var q = n.calculationOrder;
      _.isArray(q) && 0 < q.length && f(a, q, "calculation-order");
      b(a, n.documentActions, r, "document-actions");
      q = n.pages;
      if (0 < q.length) {
        a.writeStartElement("pages");
        for (var v = 0; v < q.length; ++v) {
          var p = a,
            u = q[v],
            w = r;
          p.writeStartElement("page");
          p.writeAttributeString("number", e(u.number));
          b(p, u.actions, w);
          p.writeEndElement()
        }
        a.writeEndElement()
      }
      v = n.fields;
      p = Object.keys(v);
      for (q = 0; q < p.length; ++q) {
        var u = a,
          A = v[p[q]],
          w = r;
        u.writeStartElement("ffield");
        c(u, A, {
          Un: {},
          br: ["type", "name"]
        });
        var B = A.flags.toArray();
        0 < B.length && u.writeAttributeString("flags", e(B));
        B = A.maxLen; - 1 !== B && u.writeAttributeString("max-len", e(B));
        b(u,
          A.lj(), w);
        (B = A.defaultValue) && u.writeElementString("default-value", e(B));
        h(u, A.font, w(1));
        w = u;
        if ((A = A.options) && 0 < A.length) {
          w.writeStartElement("options");
          for (var B = A.length, z = 0; z < B; ++z) {
            w.writeStartElement("option");
            var x = A[z].displayValue,
              y = A[z].value;
            x === y || _.isUndefined(x) || w.writeAttributeString("display-value", e(x));
            w.writeAttributeString("value", e(y));
            w.writeEndElement()
          }
          w.writeEndElement()
        }
        u.writeEndElement()
      }
      n = n.widgets;
      for (q = 0; q < n.length; ++q) {
        v = a;
        p = n[q];
        u = r;
        v.writeStartElement("widget");
        c(v, p, {
          Un: {
            appearance: "",
            rotation: 0,
            quadding: "Left-justified"
          }
        });
        w = p;
        w = w.zb().widgets.indexOf(w);
        w = e(w);
        "0" !== w && v.writeAttributeString("index", w);
        v.writeAttributeString("field", e(p.zb().name));
        w = p.flags.toArray();
        0 < w.length && v.writeAttributeString("flags", e(w));
        w = p.PageNumber;
        v.writeAttributeString("page", e(w));
        w = u(w).inverse();
        A = v;
        z = p.rect;
        x = w;
        A.writeStartElement("rect");
        B = x.W({
          x: z.x1,
          y: z.y1
        });
        z = x.W({
          x: z.x2,
          y: z.y2
        });
        x = {};
        x.x1 = _.min([B.x, z.x]);
        x.x2 = _.max([B.x, z.x]);
        x.y1 = _.min([B.y, z.y]);
        x.y2 = _.max([B.y,
          z.y
        ]);
        A.writeAttributeString("x1", e(Number(Number(x.x1).toFixed(4))));
        A.writeAttributeString("x2", e(Number(Number(x.x2).toFixed(4))));
        A.writeAttributeString("y1", e(Number(Number(x.y1).toFixed(4))));
        A.writeAttributeString("y2", e(Number(Number(x.y2).toFixed(4))));
        A.writeEndElement();
        A = v;
        !(B = p.border) || B.color.CG() && 1 === B.width && "Solid" === B.style || (A.writeStartElement("border"), d(A, "width", B.width, 1), d(A, "style", B.style, "Solid"), B = B.color, B.dl() || g(A, B, "color", !0), A.writeEndElement());
        g(v, p.backgroundColor,
          "background-color");
        b(v, p.lj(), u);
        k.tJ(v, p.appearances, w);
        w = v;
        A = p.appearances;
        B = Object.keys(A);
        if (z = 0 < B.length) z = A[B[0]], z = 0 === Object.keys(z).length || "Normal" in z && !!z.Normal.data;
        if (z) {
          w.writeStartElement("appearances");
          z = B.length;
          for (x = 0; x < z; ++x) y = B[x], l(w, y, A[y]);
          w.writeEndElement()
        }
        w = v;
        A = p;
        A.SP() && (w.writeStartElement("extra"), h(w, A.font, u(1)), w.writeEndElement());
        u = v;
        p = p.captions;
        w = p.Rollover;
        A = p.Down;
        if (p.Normal || w || A) u.writeStartElement("captions"), d(u, "Normal", p.Normal, ""), d(u, "Rollover",
          p.Rollover, ""), d(u, "Down", p.Down, ""), u.writeEndElement();
        v.writeEndElement()
      }
      a.writeEndElement()
    }
  })(window);
  (function (a) {
    function e(b) {
      var a = [];
      for (b.na(); b.advance();) {
        var c = b.ua();
        "field" === c ? a.push(String(b.K("name"))) : console.warn("unrecognised field list element: " + c)
      }
      b.Aa();
      return a
    }

    function d(b, a) {
      return a ? "false" === b ? !1 : !0 : "true" === b ? !0 : !1
    }

    function c(b, a) {
      var c = b.ua();
      switch (c) {
        case "javascript":
          return {
            name: "JavaScript",
            javascript: b.current.textContent
          };
        case "uri":
          return {
            name: "URI",
            uri: b.K("uri")
          };
        case "goto":
          c = null;
          b.na();
          if (b.advance()) {
            var f = b.K("fit"),
              c = {
                page: b.K("page"),
                fit: f
              };
            if ("0" === c.page) console.warn("null page encountered in dest");
            else {
              var g = a(Number(c.page));
              switch (f) {
                case "Fit":
                case "FitB":
                  break;
                case "FitH":
                case "FitBH":
                  c.top = g.W({
                    x: 0,
                    y: b.K("top") || 0
                  }).y;
                  break;
                case "FitV":
                case "FitBV":
                  c.left = g.W({
                    x: b.K("left") || 0,
                    y: 0
                  }).x;
                  break;
                case "FitR":
                  f = g.W({
                    x: b.K("left") || 0,
                    y: b.K("top") || 0
                  });
                  g = g.W({
                    x: b.K("right") || 0,
                    y: b.K("bottom") || 0
                  });
                  g = new Annotations.Rect(f.x, f.y, g.x, g.y);
                  c.top = g.y1;
                  c.left = g.x1;
                  c.bottom = g.y2;
                  c.right = g.x2;
                  break;
                case "XYZ":
                  f = g.W({
                    x: b.K("left") || 0,
                    y: b.K("top") || 0
                  });
                  c.top = f.y;
                  c.left = f.x;
                  c.zoom = b.K("zoom") || 0;
                  break;
                default:
                  console.warn("unknown dest fit: " +
                    f)
              }
            }
            c = {
              name: "GoTo",
              dest: c
            }
          } else console.KU("missing dest in GoTo action");
          b.Aa();
          return c;
        case "submit-form":
          c = {
            name: "SubmitForm",
            url: b.K("url"),
            format: b.K("format"),
            method: b.K("method") || "POST",
            exclude: d(b.K("exclude"), !1)
          };
          g = b.K("flags");
          c.flags = g ? g.split(" ") : [];
          for (b.na(); b.advance();) switch (g = b.ua(), g) {
            case "fields":
              c.fields = e(b);
              break;
            default:
              console.warn("unrecognised submit-form child: " + g)
          }
          b.Aa();
          return c;
        case "reset-form":
          c = {
            name: "ResetForm",
            exclude: d(b.K("exclude"), !1)
          };
          for (b.na(); b.advance();) switch (g =
            b.ua(), g) {
            case "fields":
              c.fields = e(b);
              break;
            default:
              console.warn("unrecognised reset-form child: " + g)
          }
          b.Aa();
          return c;
        case "hide":
          c = {
            name: "Hide",
            hide: d(b.K("hide"), !0)
          };
          for (b.na(); b.advance();) switch (g = b.ua(), g) {
            case "fields":
              c.fields = e(b);
              break;
            default:
              console.warn("unrecognised hide child: " + g)
          }
          b.Aa();
          return c;
        case "named":
          return {
            name: "Named",
            action: b.K("name")
          };
        default:
          console.warn("Encountered unexpected action type: " + c)
      }
      return null
    }

    function b(b, a, d) {
      var e = {};
      for (b.na(); b.advance();) {
        var f = b.ua();
        switch (f) {
          case "action":
            f = b.K("trigger");
            if (a ? -1 !== a.indexOf(f) : 1) {
              e[f] = [];
              for (b.na(); b.advance();) {
                var g = c(b, d);
                _.isNull(g) || e[f].push(g)
              }
              b.Aa()
            } else console.warn("encountered unexpected trigger on field: " + f);
            break;
          default:
            console.warn("encountered unknown action child: " + f)
        }
      }
      b.Aa();
      return e
    }

    function f(b) {
      return "calculation-order" === b.ua() ? e(b) : []
    }

    function g(b) {
      return new a.Annotations.Color(b.K("r") || 0, b.K("g") || 0, b.K("b") || 0, b.K("a") || 1)
    }

    function h(b, a) {
      var c = b.K("name"),
        d = b.K("type") || "Type1",
        e = b.K("size"),
        f = a.W({
          x: 0,
          y: 0
        }),
        h = a.W({
          x: Number(e),
          y: 0
        }),
        e = f.x - h.x,
        f = f.y - h.y,
        c = {
          name: c,
          type: d,
          size: Math.sqrt(e * e + f * f) || 0,
          strokeColor: [0, 0, 0],
          fillColor: [0, 0, 0]
        };
      for (b.na(); b.advance();) switch (d = b.ua(), d) {
        case "stroke-color":
          c.strokeColor = g(b);
          break;
        case "fill-color":
          c.fillColor = g(b);
          break;
        default:
          console.warn("unrecognised font child: " + d)
      }
      b.Aa();
      return c
    }

    function l(a, c) {
      var d = {
          border: {
            style: "Solid",
            width: 1
          },
          backgroundColor: [],
          fieldName: a.K("field"),
          page: a.K("page"),
          index: a.K("index") || 0,
          rotation: a.K("rotation") ||
            0,
          flags: []
        },
        e = a.K("appearance");
      e && (d.appearance = e);
      (e = a.K("flags")) && (d.flags = e.split(" "));
      for (a.na(); a.advance();) switch (e = a.ua(), e) {
        case "rect":
          var f = a,
            l = c(Number(d.page)),
            e = l.W({
              x: f.K("x1") || 0,
              y: f.K("y1") || 0
            }),
            f = l.W({
              x: f.K("x2") || 0,
              y: f.K("y2") || 0
            }),
            e = new Annotations.Rect(e.x, e.y, f.x, f.y);
          e.normalize();
          d.rect = {
            x1: e.x1,
            y1: e.y1,
            x2: e.x2,
            y2: e.y2
          };
          break;
        case "border":
          e = a;
          f = {
            style: e.K("style") || "Solid",
            width: e.K("width") || 1,
            color: [0, 0, 0]
          };
          for (e.na(); e.advance();) switch (l = e.ua(), l) {
            case "color":
              f.color =
                g(e);
              break;
            default:
              console.warn("unrecognised border child: " + l)
          }
          e.Aa();
          d.border = f;
          break;
        case "background-color":
          d.backgroundColor = g(a);
          break;
        case "actions":
          d.actions = b(a, "E X D U Fo Bl PO PC PV PI".split(" "), c);
          break;
        case "appearances":
          e = a;
          f = q.Qh(d, "appearances");
          for (e.na(); e.advance();)
            if (l = e.ua(), "appearance" === l) {
              var l = e.K("name"),
                k = q.Qh(f, l),
                l = e;
              for (l.na(); l.advance();) {
                var n = l.ua();
                switch (n) {
                  case "Normal":
                    q.Qh(k, "Normal").data = l.current.textContent;
                    break;
                  default:
                    console.warn("unexpected appearance state: ",
                      n)
                }
              }
              l.Aa()
            } else console.warn("unexpected appearances child: " + l);
          e.Aa();
          break;
        case "extra":
          e = a;
          f = c;
          l = {};
          for (e.na(); e.advance();) switch (k = e.ua(), k) {
            case "font":
              l.font = h(e, f(1));
              break;
            default:
              console.warn("unrecognised extra child: " + k)
          }
          e.Aa();
          e = l;
          e.font && (d.font = e.font);
          break;
        case "captions":
          f = a;
          e = {};
          (l = f.K("Normal")) && (e.Normal = l);
          (l = f.K("Rollover")) && (e.Rollover = l);
          (f = f.K("Down")) && (e.Down = f);
          d.captions = e;
          break;
        default:
          console.warn("unrecognised widget child: " + e)
      }
      a.Aa();
      return d
    }

    function k(b) {
      var a = {
        value: b.K("value")
      };
      (b = b.K("display-value")) && (a.displayValue = b);
      return a
    }

    function m(c, d) {
      var e = c.K("name"),
        f = {
          type: c.K("type"),
          quadding: c.K("quadding") || "Left-justified",
          maxLen: c.K("max-len") || -1
        },
        g = c.K("flags");
      _.isString(g) && (f.flags = g.split(" "));
      for (c.na(); c.advance();) switch (g = c.ua(), g) {
        case "actions":
          f.actions = b(c, ["C", "F", "K", "V"], d);
          break;
        case "default-value":
          g = c;
          g.na();
          g.advance();
          var l = g.current.textContent;
          g.Aa();
          f.defaultValue = l;
          break;
        case "font":
          f.font = h(c, d);
          break;
        case "options":
          g =
            c;
          l = [];
          for (g.na(); g.advance();) {
            var n = g.ua();
            switch (n) {
              case "option":
                l.push(k(g));
                break;
              default:
                console.warn("unrecognised options child: " + n)
            }
          }
          g.Aa();
          f.options = l;
          break;
        default:
          console.warn("unknown field child: " + g)
      }
      c.Aa();
      return new a.Annotations.O.fa(e, f)
    }

    function n(b, c) {
      switch (b.type) {
        case "Tx":
          return new a.Annotations.kk(b, c);
        case "Ch":
          return b.flags.get("Combo") ? new a.Annotations.yg(b, c) : new a.Annotations.zi(b, c);
        case "Btn":
          return b.flags.get("PushButton") ? new a.Annotations.Di(b, c) : b.flags.get("Radio") ?
            new a.Annotations.ak(b, c) : new a.Annotations.mh(b, c);
        case "Sig":
          return new a.Annotations.fk(b, c);
        default:
          console.warn("Unrecognised field type: " + b.type)
      }
      return null
    }

    function r(a, c) {
      var d = {
        number: a.K("number")
      };
      for (a.na(); a.advance();) {
        var e = a.ua();
        switch (e) {
          case "actions":
            d.actions = b(a, ["O", "C"], c);
            break;
          default:
            console.warn("unrecognised page child: " + e)
        }
      }
      a.Aa();
      return d
    }
    a.bf = a.bf || {};
    var q = a.bf;
    q.WK = {
      parse: function (c, d, e, g) {
        var h = [],
          k = {};
        c.na();
        var q = [],
          x = {},
          y = [];
        a.busyLoop(function () {
          var a, e;
          if (c.advance()) {
            a =
              c.ua();
            switch (a) {
              case "calculation-order":
                q = f(c);
                break;
              case "document-actions":
                x = b(c, ["Init", "Open"], d);
                break;
              case "pages":
                a = [];
                for (c.na(); c.advance();) switch (e = c.ua(), e) {
                  case "page":
                    a.push(r(c, d));
                    break;
                  default:
                    console.warn("unrecognised page child: " + e)
                }
                c.Aa();
                y = a;
                break;
              case "field":
                a = m(c, d(1));
                k[a.name] = a;
                break;
              case "widget":
                e = l(c, d);
                (a = k[e.fieldName]) ? (a = n(a, e), h.push(a)) : console.warn("ignoring widget with no corresponding field data: " + e.fieldName);
                break;
              default:
                console.warn("Unknown element encountered in PDFInfo: " +
                  a)
            }
            return !0
          }
          return !1
        }, function () {
          c.Aa();
          e({
            calculationOrder: q,
            widgets: h,
            fields: k,
            documentActions: x,
            pages: y
          })
        }, g)
      },
      IR: m,
      KR: l,
      lH: f
    }
  })(window);
  (function (a) {
    function e(b) {
      var a = [];
      for (b.na(); b.advance();) {
        var c = b.ua();
        "ffield" === c ? a.push(String(b.K("name"))) : console.warn("unrecognised field list element: " + c)
      }
      b.Aa();
      return a
    }

    function d(b, a) {
      return a ? "false" === b ? !1 : !0 : "true" === b ? !0 : !1
    }

    function c(b, a) {
      var c = b.ua();
      switch (c) {
        case "javascript":
          return {
            name: "JavaScript",
            javascript: b.current.textContent
          };
        case "uri":
          return {
            name: "URI",
            uri: b.K("uri")
          };
        case "goto":
          c = null;
          b.na();
          if (b.advance()) {
            var f = b.K("fit"),
              c = {
                page: b.K("page"),
                fit: f
              };
            if ("0" === c.page) console.warn("null page encountered in dest");
            else {
              var g = a(Number(c.page));
              switch (f) {
                case "Fit":
                case "FitB":
                  break;
                case "FitH":
                case "FitBH":
                  c.top = g.W({
                    x: 0,
                    y: b.K("top") || 0
                  }).y;
                  break;
                case "FitV":
                case "FitBV":
                  c.left = g.W({
                    x: b.K("left") || 0,
                    y: 0
                  }).x;
                  break;
                case "FitR":
                  f = g.W({
                    x: b.K("left") || 0,
                    y: b.K("top") || 0
                  });
                  g = g.W({
                    x: b.K("right") || 0,
                    y: b.K("bottom") || 0
                  });
                  g = new Annotations.Rect(f.x, f.y, g.x, g.y);
                  c.top = g.y1;
                  c.left = g.x1;
                  c.bottom = g.y2;
                  c.right = g.x2;
                  break;
                case "XYZ":
                  f = g.W({
                    x: b.K("left") || 0,
                    y: b.K("top") || 0
                  });
                  c.top = f.y;
                  c.left = f.x;
                  c.zoom = b.K("zoom") || 0;
                  break;
                default:
                  console.warn("unknown dest fit: " +
                    f)
              }
            }
            c = {
              name: "GoTo",
              dest: c
            }
          } else console.KU("missing dest in GoTo action");
          b.Aa();
          return c;
        case "submit-form":
          c = {
            name: "SubmitForm",
            url: b.K("url"),
            format: b.K("format"),
            method: b.K("method") || "POST",
            exclude: d(b.K("exclude"), !1)
          };
          g = b.K("flags");
          c.flags = g ? g.split(" ") : [];
          for (b.na(); b.advance();) switch (g = b.ua(), g) {
            case "fields":
              c.fields = e(b);
              break;
            default:
              console.warn("unrecognised submit-form child: " + g)
          }
          b.Aa();
          return c;
        case "reset-form":
          c = {
            name: "ResetForm",
            exclude: d(b.K("exclude"), !1)
          };
          for (b.na(); b.advance();) switch (g =
            b.ua(), g) {
            case "fields":
              c.fields = e(b);
              break;
            default:
              console.warn("unrecognised reset-form child: " + g)
          }
          b.Aa();
          return c;
        case "hide":
          c = {
            name: "Hide",
            hide: d(b.K("hide"), !0)
          };
          for (b.na(); b.advance();) switch (g = b.ua(), g) {
            case "fields":
              c.fields = e(b);
              break;
            default:
              console.warn("unrecognised hide child: " + g)
          }
          b.Aa();
          return c;
        case "named":
          return {
            name: "Named",
            action: b.K("name")
          };
        default:
          console.warn("Encountered unexpected action type: " + c)
      }
      return null
    }

    function b(b, a, d) {
      var e = {};
      for (b.na(); b.advance();) {
        var f = b.ua();
        switch (f) {
          case "action":
            f = b.K("trigger");
            if (a ? -1 !== a.indexOf(f) : 1) {
              e[f] = [];
              for (b.na(); b.advance();) {
                var g = c(b, d);
                _.isNull(g) || e[f].push(g)
              }
              b.Aa()
            } else console.warn("encountered unexpected trigger on field: " + f);
            break;
          default:
            console.warn("encountered unknown action child: " + f)
        }
      }
      b.Aa();
      return e
    }

    function f(b) {
      return "calculation-order" === b.ua() ? e(b) : []
    }

    function g(b) {
      return new a.Annotations.Color(b.K("r") || 0, b.K("g") || 0, b.K("b") || 0, b.K("a") || 1)
    }

    function h(b, a, c) {
      var d = p.Qh(a, "appearances"),
        e = b.K("appearance-state") ||
        "_DEFAULT",
        f = b.K("annotation-state") || "Normal";
      a = Number(b.K("objnum"));
      var g = Number(b.K("gennum")),
        h = Number(b.K("x"));
      b = Number(b.K("y"));
      d = p.Qh(d, e);
      f = p.Qh(d, f);
      f.objnum = a;
      f.gennum = g;
      f.offset = c.W({
        x: h,
        y: b
      })
    }

    function l(b, a) {
      var c = b.K("name"),
        d = b.K("type") || "Type1",
        e = b.K("size"),
        f = a.W({
          x: 0,
          y: 0
        }),
        h = a.W({
          x: Number(e),
          y: 0
        }),
        e = f.x - h.x,
        f = f.y - h.y,
        c = {
          name: c,
          type: d,
          size: Math.sqrt(e * e + f * f) || 0,
          strokeColor: [0, 0, 0],
          fillColor: [0, 0, 0]
        };
      for (b.na(); b.advance();) switch (d = b.ua(), d) {
        case "stroke-color":
          c.strokeColor = g(b);
          break;
        case "fill-color":
          c.fillColor = g(b);
          break;
        default:
          console.warn("unrecognised font child: " + d)
      }
      b.Aa();
      return c
    }

    function k(a, c) {
      var d = {
          border: {
            style: "Solid",
            width: 1
          },
          backgroundColor: [],
          fieldName: a.K("field"),
          page: a.K("page"),
          index: a.K("index") || 0,
          rotation: a.K("rotation") || 0,
          quadding: a.K("quadding") || "Left-justified",
          flags: []
        },
        e = a.K("appearance");
      e && (d.appearance = e);
      (e = a.K("flags")) && (d.flags = e.split(" "));
      for (a.na(); a.advance();) switch (e = a.ua(), e) {
        case "rect":
          var f = a,
            k = c(Number(d.page)),
            e = k.W({
              x: f.K("x1") ||
                0,
              y: f.K("y1") || 0
            }),
            f = k.W({
              x: f.K("x2") || 0,
              y: f.K("y2") || 0
            }),
            e = new Annotations.Rect(e.x, e.y, f.x, f.y);
          e.normalize();
          d.rect = {
            x1: e.x1,
            y1: e.y1,
            x2: e.x2,
            y2: e.y2
          };
          break;
        case "border":
          e = a;
          f = {
            style: e.K("style") || "Solid",
            width: e.K("width") || 1,
            color: [0, 0, 0]
          };
          for (e.na(); e.advance();) switch (k = e.ua(), k) {
            case "color":
              f.color = g(e);
              break;
            default:
              console.warn("unrecognised border child: " + k)
          }
          e.Aa();
          d.border = f;
          break;
        case "background-color":
          d.backgroundColor = g(a);
          break;
        case "actions":
          d.actions = b(a, "E X D U Fo Bl PO PC PV PI".split(" "),
            c);
          break;
        case "appearances":
          e = a;
          f = p.Qh(d, "appearances");
          for (e.na(); e.advance();)
            if (k = e.ua(), "aappearance" === k) {
              var k = e.K("name"),
                n = p.Qh(f, k),
                k = e;
              for (k.na(); k.advance();) {
                var m = k.ua();
                switch (m) {
                  case "Normal":
                    p.Qh(n, "Normal").data = k.current.textContent;
                    break;
                  default:
                    console.warn("unexpected appearance state: ", m)
                }
              }
              k.Aa()
            } else console.warn("unexpected appearances child: " + k);
          e.Aa();
          break;
        case "apref":
          h(a, d, c(Number(d.page)));
          break;
        case "extra":
          e = a;
          f = c;
          k = {};
          for (e.na(); e.advance();) switch (n = e.ua(), n) {
            case "font":
              k.font =
                l(e, f(1));
              break;
            default:
              console.warn("unrecognised extra child: " + n)
          }
          e.Aa();
          e = k;
          e.font && (d.font = e.font);
          break;
        case "captions":
          f = a;
          e = {};
          (k = f.K("Normal")) && (e.Normal = k);
          (k = f.K("Rollover")) && (e.Rollover = k);
          (f = f.K("Down")) && (e.Down = f);
          d.captions = e;
          break;
        default:
          console.warn("unrecognised widget child: " + e)
      }
      a.Aa();
      return d
    }

    function m(b, c) {
      var d = b.K("page"),
        e = c(1 + Number(d)),
        d = {
          page: d,
          rect: Annotations.ba.Ct(b.K("rect"), e)
        };
      for (b.na(); b.advance();) {
        var f = b.ua();
        switch (f) {
          case "apref":
            h(b, d, e);
            break;
          default:
            console.warn("unrecognised custom tag: " +
              f)
        }
      }
      b.Aa();
      return new a.Annotations.Po(d)
    }

    function n(b) {
      var a = {
        value: b.K("value")
      };
      (b = b.K("display-value")) && (a.displayValue = b);
      return a
    }

    function r(c, d) {
      var e = c.K("name"),
        f = {
          type: c.K("type"),
          maxLen: c.K("max-len") || -1
        },
        g = c.K("flags");
      _.isString(g) && (f.flags = g.split(" "));
      for (c.na(); c.advance();) switch (g = c.ua(), g) {
        case "actions":
          f.actions = b(c, ["C", "F", "K", "V"], d);
          break;
        case "default-value":
          g = c;
          g.na();
          g.advance();
          var h = g.current.textContent;
          g.Aa();
          f.defaultValue = h;
          break;
        case "font":
          f.font = l(c, d);
          break;
        case "options":
          g = c;
          h = [];
          for (g.na(); g.advance();) {
            var k = g.ua();
            switch (k) {
              case "option":
                h.push(n(g));
                break;
              default:
                console.warn("unrecognised options child: " + k)
            }
          }
          g.Aa();
          f.options = h;
          break;
        default:
          console.warn("unknown field child: " + g)
      }
      c.Aa();
      return new a.Annotations.O.fa(e, f)
    }

    function q(b, c) {
      switch (b.type) {
        case "Tx":
          return new a.Annotations.kk(b, c);
        case "Ch":
          return b.flags.get("Combo") ? new a.Annotations.yg(b, c) : new a.Annotations.zi(b, c);
        case "Btn":
          return b.flags.get("PushButton") ? new a.Annotations.Di(b,
            c) : b.flags.get("Radio") ? new a.Annotations.ak(b, c) : new a.Annotations.mh(b, c);
        case "Sig":
          return new a.Annotations.fk(b, c);
        default:
          console.warn("Unrecognised field type: " + b.type)
      }
      return null
    }

    function v(a, c) {
      var d = {
        number: a.K("number")
      };
      for (a.na(); a.advance();) {
        var e = a.ua();
        switch (e) {
          case "actions":
            d.actions = b(a, ["O", "C"], c);
            break;
          default:
            console.warn("unrecognised page child: " + e)
        }
      }
      a.Aa();
      return d
    }
    a.bf = a.bf || {};
    var p = a.bf;
    p.LB = {
      parse: function (c, d, e, g) {
        var h = [],
          l = [],
          n = {};
        c.na();
        var p = [],
          L = {},
          D = [];
        a.busyLoop(function () {
          var a,
            e;
          if (c.advance()) {
            a = c.ua();
            switch (a) {
              case "calculation-order":
                p = f(c);
                break;
              case "document-actions":
                L = b(c, ["Init", "Open"], d);
                break;
              case "pages":
                a = [];
                for (c.na(); c.advance();) switch (e = c.ua(), e) {
                  case "page":
                    a.push(v(c, d));
                    break;
                  default:
                    console.warn("unrecognised page child: " + e)
                }
                c.Aa();
                D = a;
                break;
              case "ffield":
                a = r(c, d(1));
                n[a.name] = a;
                break;
              case "widget":
                e = k(c, d);
                (a = n[e.fieldName]) ? (a = q(a, e), h.push(a)) : console.warn("ignoring widget with no corresponding field data: " + e.fieldName);
                break;
              case "custom":
                l.push(m(c,
                  d));
                break;
              default:
                console.warn("Unknown element encountered in PDFInfo: " + a)
            }
            return !0
          }
          return !1
        }, function () {
          c.Aa();
          e({
            calculationOrder: p,
            widgets: h,
            fields: n,
            documentActions: L,
            pages: D,
            custom: l
          })
        }, g)
      },
      xW: q,
      IR: r,
      KR: k,
      lH: f,
      WL: h
    }
  })(window);
  (function (a) {
    a.Annotations = a.Annotations || {};
    a.Annotations.O = a.Annotations.O || {};
    a.Annotations.O.ub = a.Annotations.O.ub || {};
    a = a.Annotations.O.ub;
    a.Events = {};
    var e = a.Events;
    e.Event = function (a) {
      this.rc = !0;
      _.isObject(a) && (_.isString(a.name) && Object.defineProperty(this, "name", {
        value: a.name,
        enumerable: !0
      }), _.isString(a.type) && Object.defineProperty(this, "type", {
        value: a.type,
        enumerable: !0
      }))
    };
    e.tn = function (a) {
      var b = String(a.value),
        d = a.change,
        e = b.slice(0, a.selStart),
        h = b.slice(a.selEnd);
      if (_.isObject(a.change)) {
        var l =
          a.selStart;
        a = a.selEnd;
        l === a && ("backspace" === d.type ? e = b.slice(0, l - 1) : "delete" === d.type && (h = b.slice(a + 1)));
        d = ""
      }
      return e + d + h
    };
    var d = {
      Validate: function (a) {
        e.Event.call(this, a);
        var b;
        _.isObject(a) && (b = a.value);
        Object.defineProperty(this, "value", {
          value: b,
          writable: !0,
          enumerable: !0
        })
      },
      Calculate: function (a) {
        e.Event.call(this, a);
        var b, d;
        _.isObject(a) && (b = a.value, d = a.source);
        Object.defineProperties(this, {
          value: {
            value: b,
            writable: !0,
            enumerable: !0
          },
          source: {
            value: d,
            enumerable: !0
          }
        })
      },
      Format: function (a) {
        e.Event.call(this,
          a);
        var b;
        _.isObject(a) && (b = a.value);
        Object.defineProperty(this, "value", {
          value: b,
          writable: !0,
          enumerable: !0
        })
      },
      Keystroke: function (a) {
        e.Event.call(this, a);
        var b, d, g, h, l;
        _.isObject(a) && (b = a.value, d = a.change, g = a.selStart, h = a.selEnd, l = a.willCommit);
        b = "undefined" !== typeof b ? b : "";
        d = "undefined" !== typeof d || _.isString(d) ? d : "";
        h = "undefined" !== typeof h ? h : b.length;
        Object.defineProperties(this, {
          value: {
            value: b,
            writable: !0,
            enumerable: !0
          },
          change: {
            value: d,
            writable: !0,
            enumerable: !0
          },
          selStart: {
            value: "undefined" !== typeof g ?
              g : 0,
            writable: !0,
            enumerable: !0
          },
          selEnd: {
            value: h,
            writable: !0,
            enumerable: !0
          },
          willCommit: {
            value: l || !1,
            enumerable: !0
          }
        })
      },
      "Mouse Enter": function (a) {
        e.Event.call(this, a)
      },
      "Mouse Leave": function (a) {
        e.Event.call(this, a)
      },
      "Mouse Up": function (a) {
        e.Event.call(this, a)
      },
      "Mouse Down": function (a) {
        e.Event.call(this, a)
      },
      Focus: function (a) {
        e.Event.call(this, a)
      },
      Blur: function (a) {
        e.Event.call(this, a);
        var b;
        _.isObject(a) && (b = a.value);
        Object.defineProperty(this, "value", {
          value: b,
          writable: !0,
          enumerable: !0
        })
      },
      Open: function (a) {
        e.Event.call(this,
          a);
        var b;
        _.isObject(a) && (b = a.targetName);
        Object.defineProperty(this, "targetName", {
          value: b || "",
          writable: !0,
          enumerable: !0
        })
      },
      Close: function (a) {
        e.Event.call(this, a)
      }
    };
    e.create = function (a, b) {
      return d[a] ? new d[a](b) : null
    };
    e.fa = {
      create: function (a, b, d) {
        d = $.extend({
          name: a,
          type: "Field",
          value: b.Xa()
        }, d);
        return (a = e.create(a, d)) ? (Object.defineProperties(a, {
            target: {
              value: b,
              writable: !0,
              enumerable: !0
            },
            targetName: {
              value: b.name,
              enumerable: !0
            },
            modifier: {
              value: null,
              enumerable: !0
            },
            shift: {
              value: null,
              enumerable: !0
            }
          }),
          a) : null
      }
    };
    e.rB = {
      create: function (a, b, d) {
        d = $.extend({
          name: a,
          type: "Doc",
          targetName: ""
        }, d);
        return (a = e.create(a, d)) ? (Object.defineProperty(a, "target", {
          value: b,
          writable: !0,
          enumerable: !0
        }), a) : null
      }
    };
    e.Yo = {
      create: function (a, b, d) {
        d = $.extend({
          name: a,
          type: "Page"
        }, d);
        return (a = e.create(a, d)) ? (Object.defineProperty(a, "target", {
          value: b,
          writable: !0,
          enumerable: !0
        }), a) : null
      }
    };
    e.kd = {
      create: function (a, b) {
        return e.create(a, b)
      }
    }
  })(window);
  (function (a) {
    function e(b) {
      this.stringValue = b
    }

    function d(b, a, c) {
      a = a || ",";
      c = c || ".";
      var d = b.split(c),
        e = d[0];
      "-" === b.charAt(0) && (e = e.substr(1));
      for (var f = []; 3 < e.length;) f.push(e.substr(e.length - 3)), e = e.substr(0, e.length - 3);
      0 < e.length && f.push(e);
      e = f.reverse().join(a);
      "-" === b.charAt(0) && (e = "-" + e);
      d[0] = e;
      return d.join(c)
    }

    function c(b, a) {
      var c;
      if (0 === a) return /^-?\d*$/.test(b);
      if (_.isUndefined(a)) return c = /^-?\d*([\.,]\d*)?$/, c.test(b);
      c = new RegExp("^-?\\d*([\\.,]\\d{0," + a.toString() + "})?$");
      return c.test(b)
    }

    function b(b) {
      for (var a = [], c = [], d = -1; - 1 !== (d = b.indexOf(".", d + 1));) a.push(d);
      for (d = -1; - 1 !== (d = b.indexOf(",", d + 1));) c.push(d);
      if (a.length && c.length) {
        if (a[a.length - 1] < c[0]) return !0
      } else if (c.length)
        for (b = b.length - 4, a = c.length - 1; 0 <= a; --a)
          if (c[a] !== b) return !0;
      return !1
    }

    function f(b) {
      return 65 <= b && 90 >= b || 97 <= b && 122 >= b
    }

    function g(b, a) {
      switch (a) {
        case 57:
          return 48 <= b && 57 >= b;
        case 65:
          return f(b);
        case 79:
          return f(b) || 48 <= b && 57 >= b;
        case 88:
          return !0;
        default:
          return b === a
      }
    }

    function h(a) {
      var d = typeof a;
      a = _.isNull(a) ||
        "object" !== d && "string" !== d ? a : String(a).replace(",", b(a) ? "." : "");
      d = parseFloat(a);
      return c(a) && !isNaN(d) ? d : d = "Off" === a || _.isUndefined(a) || _.isNull(a) || "" === a ? 0 : 1
    }

    function l(b, a) {
      var c = String(b);
      if (c.length < a)
        for (var d = a - c.length, e = 0; e < d; ++e) c = "0" + c;
      return c
    }

    function k(b) {
      _.isString(b) && (b = b.replace(/\s+/g, " "), b = b.replace(/[/.]/g, "-"));
      return b
    }

    function m(b) {
      return b.replace(/(mmmm)|(mmm)|(:mm)|(mm)|(:m)|(m)|(dddd)|(ddd)|(dd)|(d)|(yyyy)|(yy)|(HH)|(H)|(hh)|(h)|(MM)|(M)|(ss)|(s)|(tt)|(t)/g, function (b) {
        return {
          mmmm: "MMMM",
          mmm: "MMM",
          ":mm": ":mm",
          mm: "MM",
          ":m": ":m",
          m: "M",
          dddd: "dddd",
          ddd: "ddd",
          dd: "DD",
          d: "D",
          yyyy: "YYYY",
          yy: "YY",
          HH: "HH",
          H: "H",
          hh: "hh",
          h: "h",
          MM: "mm",
          M: "m",
          ss: "ss",
          s: "s",
          tt: "A",
          t: "a"
        } [b] || ""
      })
    }

    function n(b, a) {
      if (!b) return null;
      var c = H.slice(0);
      a && (a = m(a), a = k(a));
      b = k(b);
      a && "d" === a.charAt(0).toLowerCase() ? (J.unshift(a), c = L(b, J, !0)) : (a && c.unshift(a), c = L(b, c, !0));
      return c.isValid() ? c : null
    }

    function r(b, a) {
      return !b || null !== n(b, a)
    }

    function q(b, a) {
      if (N[a]) {
        b = k(b);
        var c;
        c = a && "d" === a.charAt(0).toLowerCase() ? L(b, J, !0) :
          L(b, H, !0);
        if (c.isValid()) return c.format(N[a])
      }
      return null
    }

    function v(b, a) {
      var c = String(b).split(":");
      if (3 < a || 0 > a || !b) return null;
      var d = 0,
        e = 0,
        f = 0;
      c[0] && (d = Number(c[0]));
      c[1] && (e = Number(c[1]));
      c[2] && (f = Number(c[2]));
      if (23 < d || 59 < e || 59 < f || _.isNaN(d) || _.isNaN(e) || _.isNaN(f)) return null;
      var c = 1 === a || 3 === a,
        g;
      c ? (g = 12 <= d && 24 > d ? "PM" : "AM", d %= 12, 0 === d && (d = 12)) : d = l(d, 2);
      e = l(e, 2);
      f = l(f, 2);
      d = d + ":" + e + (2 > a ? "" : ":" + f);
      c && (d += " " + g);
      return d
    }

    function p(b, a) {
      for (var c = 0, d = "", e = 0; e < a.length && c < b.length; ++e) {
        var f = a.charAt(e);
        switch (f) {
          case "9":
            d += b.charAt(c);
            c++;
            break;
          default:
            d += f
        }
      }
      return d
    }

    function u(b, a) {
      this.RL = a;
      this.Ay = !1;
      this.LQ = b;
      b.aU()
    }

    function w(b) {
      return function () {
        console.log("stub: " + b + " called with", arguments)
      }
    }

    function A(b) {
      var a = null;
      if (_.isArray(b)) switch (b[0]) {
        case "T":
          a = [];
          break;
        case "G":
          a = b.slice(1, 2);
          break;
        case "RGB":
          a = b.slice(1, 4);
          break;
        case "CMYK":
          a = b.slice(1, 5)
      }
      return a
    }

    function B(b, a) {
      b.widgets.forEach(function (b) {
        b.backgroundColor = a
      })
    }

    function z(b) {
      this.ZC = {};
      this.JC = b
    }

    function x() {
      var b = this;
      this.YC = {
        Doc: new z(function () {
          return "id"
        }),
        Field: new z(function (b) {
          return b.name
        })
      };
      this.hp = 0;
      this.gs = [];
      this.HL = {
        Doc: function (b) {
          return D.xB(b)
        },
        Color: function (b) {
          return D.Nr(b)
        },
        Field: function (b) {
          b.xj && b.xj() && (b = b.zb());
          return new D.So(b)
        },
        Event: function (a) {
          var c = {
            target: b.pl({
              Field: "Field",
              Page: "Doc",
              Doc: "Doc"
            } [a.type], a.target)
          };
          Object.defineProperties(c, {
            value: {
              get: function () {
                return D.utils.toString(a.value)
              },
              set: function (b) {
                a.value = b
              },
              enumerable: !0
            }
          });
          for (var d in a) a.hasOwnProperty(d) && "target" !==
            d && "value" !== d && function (b) {
              Object.defineProperty(c, b, {
                set: function (c) {
                  a[b] = c
                },
                get: function () {
                  return a[b]
                },
                enumerable: !0
              })
            }(d);
          return c
        }
      }
    }

    function y() {
      x.call(this);
      this.zL = this.OO();
      a.cW = this.zL;
      for (var b in O) O.hasOwnProperty(b) && (b in a || (a[b] = O[b]))
    }

    function F() {
      x.call(this);
      if (C) {
        this.op = $("<iframe />");
        this.op.css({
          display: "none"
        });
        this.op.appendTo("body");
        this.zp = this.op[0].contentWindow;
        var b = this.zp.document;
        b.open();
        b.write("<script>var event = {};\x3c/script>");
        b.write("<script>window.__add_action = function(__script){ return function(){(1,eval)(__script); } }\x3c/script>");
        b.close();
        this.sk = !1;
        for (var a in O) O.hasOwnProperty(a) && (this.zp[a] = O[a])
      }
    }
    a.Annotations = a.Annotations || {};
    a.Annotations.O = a.Annotations.O || {};
    a.Annotations.O.ub = a.Annotations.O.ub || {};
    var L = a.moment,
      D = a.Annotations.O.ub,
      H = "M-D;M-D-YYYY;MM-DD-YY;MM-YY;D-MMM;D-MMM-YY;DD-MMM-YY;YYMM-DD;MMM-YY;MMMM-YY;MMM D, YYYY;MMMM D, YYYY;M-D-YY h:mm A;M-D-YY HH:mm;DD-MMM-YYYY".split(";"),
      J = "D-MMM D-MMM-YY DD-MMM-YY DD-MMM-YYYY DD-MM-YYYY D-M-YYYY".split(" "),
      E = "m/d;m/d/yy;mm/dd/yy;mm/yy;d-mmm;d-mmm-yy;dd-mmm-yy;yymm-dd;mmm-yy;mmmm-yy;mmm d, yyyy;mmmm d, yyyy;m/d/yy h:MM tt;m/d/yy HH:MM;dd-mmm-yyyy".split(";"),
      N = {
        "m/d": "M/D",
        "m/d/yy": "M/D/YYYY",
        "mm/dd/yy": "MM/DD/YY",
        "mm/dd/yyyy": "MM/DD/YYYY",
        "mm/yy": "MM/YY",
        "d-mmm": "D-MMM",
        "d-mmm-yy": "D-MMM-YY",
        "dd-mmm-yy": "DD-MMM-YY",
        "yymm-dd": "YYMM-DD",
        "mmm-yy": "MMM-YY",
        "mmmm-yy": "MMMM-YY",
        "mmm d, yyyy": "MMM D, YYYY",
        "mmmm d, yyyy": "MMMM D, YYYY",
        "m/d/yy h:MM tt": "M/D/YY h:mm A",
        "m/d/yy HH:MM": "M/D/YY HH:mm",
        "dd-mmm-yyyy": "DD-MMM-YYYY"
      };
    D.utils = {
      isNumber: c,
      bY: d,
      KX: h,
      IX: l,
      RW: q,
      tX: r,
      SW: v,
      formatNumber: p,
      toString: function (b) {
        return _.isString(b) ? b : _.isNumber(b) ? String(b) :
          ""
      },
      hY: function (b) {
        var a = b;
        c(b) && "" !== b && (a = h(b));
        return a
      },
      TR: function (b, a) {
        var c = L(a),
          d = m(b);
        return c.format(d)
      },
      UR: function (b) {
        var a = Array.prototype.slice.call(arguments, 1),
          c = 0;
        return b.replace(/%(,\d+)?([+ 0#]+)?(\d+)?(\.\d+)?([dfsx]+)/g, function (b, e, f, g, h, l) {
          b = 0;
          g = ".";
          var k = ",";
          if (e) switch (e.slice(1)) {
            case "0":
              k = ",";
              g = ".";
              break;
            case "1":
              k = "";
              g = ".";
              break;
            case "2":
              k = ".";
              g = ",";
              break;
            case "3":
              k = "", g = ","
          }
          if (f)
            for (e = f.length - 2, f = 1; f < e; ++f);
          h && (b = h.slice(1));
          h = a[c];
          c++;
          e = String(h);
          switch (l) {
            case "f":
              e =
                Number(h).toFixed(b).replace(".", g);
              e = d(e, k, g);
              break;
            case "d":
              e = Number(h).toFixed();
              break;
            case "x":
              e = Number(h).toString(16)
          }
          return e
        })
      },
      VR: function (b, a) {
        for (var d = "", e = 0, g = "", h = b.length, l = 0; l < h; ++l) {
          var k = a,
            n = b[l],
            m = "";
          switch (n) {
            case "?":
              m = "upper" === g ? m + k.charAt(e).toUpperCase() : "lower" === g ? m + k.charAt(e).toLowerCase() : m + k.charAt(e);
              e++;
              break;
            case "X":
              for (; e < k.length;) {
                n = k.charCodeAt(e);
                if (f(n) || 48 <= n && 57 >= n) {
                  m = "upper" === g ? m + k.charAt(e).toUpperCase() : "lower" === g ? m + k.charAt(e).toLowerCase() : m + k.charAt(e);
                  e++;
                  break
                }
                e++
              }
              break;
            case "A":
              for (; e < k.length;) {
                if (f(k.charCodeAt(e))) {
                  m = "upper" === g ? m + k.charAt(e).toUpperCase() : "lower" === g ? m + k.charAt(e).toLowerCase() : m + k.charAt(e);
                  e++;
                  break
                }
                e++
              }
              break;
            case "9":
              for (; e < k.length;) {
                if (c(k.charAt(e))) {
                  m += k.charAt(e);
                  e++;
                  break
                }
                e++
              }
              break;
            case "*":
              m = "lower" === g ? k.slice(e).toLowerCase() : "upper" === g ? k.slice(e).toUpperCase() : k.slice(e);
              e = k.length - 1;
              break;
            case "\\":
              break;
            case ">":
              g = "upper";
              break;
            case "<":
              g = "lower";
              break;
            case "=":
              g = "";
              break;
            default:
              m = n
          }
          d += m
        }
        return d
      },
      nB: function (b,
        c) {
        c = c || b;
        var d = a.Annotations.O.ub.Events.tn(G);
        if (b && d) {
          var e = d.length,
            f = b.length;
          if (G.willCommit && e !== f && 0 !== f) M.Wa().Xd().alert("The value entered does not match the format of the field [ " + c + " ]"), G.rc = !1;
          else if (e && f)
            if (e <= f)
              for (f = 0; f < e; ++f) {
                if (!g(d.charCodeAt(f), b.charCodeAt(f))) {
                  G.rc = !1;
                  M.Wa().Xd().alert("The value entered does not match the format of the field [ " + c + " ]");
                  break
                }
              } else M.Wa().Xd().alert("The value entered does not match the format of the field [ " + c + " ]"), G.rc = !1
        }
      },
      xr: function (b) {
        var a =
          String(G.value);
        a && G.willCommit && !r(a, b) && (G.rc = !1, M.Wa().Xd().alert("Invalid Date/Time: Input should match format " + b))
      }
    };
    Object.getOwnPropertyNames(String.prototype).forEach(function (b) {
      e.prototype[b] = function () {
        return this.stringValue[b].apply(this.stringValue, arguments)
      }
    });
    e.prototype.valueOf = function () {
      this.pG || (this.pG = h(this.stringValue));
      return this.pG
    };
    u.prototype = {
      terminate: function () {
        this.Ay || (this.Ay = !0, this.RL(), this.LQ.hO())
      }
    };
    var G = null,
      M = null,
      O = {
        AFNumber_Format: function (b, a, e, f, g,
          l) {
          e = (e = M.Wa().Xd().zb(G.target.name)) ? e.Xa() : null;
          c(e) && null !== e && "" !== e && (e = h(e), isNaN(e) || (e = e.toFixed(b), 0 === a ? e = d(e) : 2 === a && (e = d(e), b = e.indexOf("."), e = e.split(",").join("."), 0 <= b && (e = e.substr(0, b) + "," + e.substr(b + 1))), G.value = l ? g + e : e + g, G.rc = !0))
        },
        AFPercent_Format: function (b, a) {
          var e = G.value;
          c(e) && (e = h(e), e = (100 * e).toFixed(b), a && (e = d(e)), G.value = e + "%", G.rc = !0)
        },
        AFDate_KeystrokeEx: D.utils.xr,
        AFDate_Keystroke: function (b) {
          b < E.length && D.utils.xr(E[b])
        },
        AFDate_FormatEx: function (b) {
          b = q(String(G.value),
            b);
          _.isNull(b) || (G.value = b, G.rc = !0)
        },
        AFDate_Format: function (b) {
          var a = String(G.value);
          b < E.length && (b = q(a, E[b]), _.isNull(b) || (G.value = b, G.rc = !0))
        },
        AFRange_Validate: function (b, a, c, d) {
          var e = Number(G.value),
            e = (!b || e >= a) && (!c || e <= d);
          if (!e) {
            var f = "Invalid value: must be";
            b && (f += " greater than or equal to " + a);
            b && c && (f += " and");
            c && (f += " less than or equal to " + d);
            M.Wa().Xd().alert(f + ".")
          }
          G.rc = e
        },
        AFTime_Format: function (b) {
          G.value = v(G.value, b);
          G.rc = !0
        },
        AFTime_FormatEx: function (b) {
          b = q(String(G.value), b);
          _.isNull(b) ||
            (G.value = b, G.rc = !0)
        },
        AFTime_Keystroke: function (b) {
          switch (b) {
            case 0:
              b = "HH:MM";
              break;
            case 1:
              b = "h:MM tt";
              break;
            case 2:
              b = "HH:MM:ss";
              break;
            case 3:
              b = "h:MM:ss tt"
          }
          D.utils.xr(b)
        },
        AFTime_KeyStrokeEx: D.utils.xr,
        AFMakeNumber: function (b) {
          return Number(b)
        },
        AFSimple_Calculate: function (b, a) {
          var c = {
            PRD: function (b, a) {
              return b * a
            },
            SUM: function (b, a) {
              return b + a
            },
            MIN: function (b, a) {
              return a < b ? a : b
            },
            MAX: function (b, a) {
              return a > b ? a : b
            }
          } [b];
          c && ("string" === typeof a && (a = a.split(",")), G.value = a.map(function (b) {
            b = G.target.doc.getField(b).value;
            return h(b)
          }).reduce(c), G.rc = !0)
        },
        AFNumber_Keystroke: function (b) {
          G.rc = c(a.Annotations.O.ub.Events.tn(G), b)
        },
        AFPercent_Keystroke: function (b) {
          G.rc = c(a.Annotations.O.ub.Events.tn(G), b + 2)
        },
        AFMergeChange: function (b) {
          return a.Annotations.O.ub.Events.tn(b)
        },
        AFParseDateEx: n,
        AFSpecial_Format: function (b) {
          if (0 === arguments.length) G.rc = !1;
          else {
            var a = G.value,
              c;
            switch (b) {
              case 0:
                c = "99999";
                break;
              case 1:
                c = "99999-9999";
                break;
              case 2:
                c = 10 <= a.length ? "(999) 999-9999" : "999-9999";
                break;
              case 3:
                c = "999-99-9999"
            }
            G.value = p(a,
              c);
            G.rc = !0
          }
        },
        AFSpecial_Keystroke: function (b) {
          var a = "",
            c;
          switch (b) {
            case 0:
              a = "99999";
              c = "Zipcode";
              break;
            case 1:
              a = "999999999";
              c = "Zipcode + 4";
              break;
            case 2:
              a = "9999999999";
              c = "Phone";
              break;
            case 3:
              a = "999999999", c = "Social Security Number"
          }
          D.utils.nB(a, c)
        },
        AFSpecial_KeystrokeEx: D.utils.nB,
        util: {
          printd: D.utils.TR,
          printf: D.utils.UR,
          printx: D.utils.VR
        },
        app: {
          beep: w("app.beep"),
          alert: function (b) {
            if (_.isObject(b)) {
              var a = b.nType || 0;
              b = b.cMsg;
              if (0 === a) return M.Wa().Xd().alert(b), 1;
              b = window.confirm(b);
              return 1 === a ? b ?
                1 : 2 : b ? 4 : 3
            }
            M.Wa().Xd().alert(b);
            return 1
          },
          response: w("app.response"),
          setInterval: function (b, a) {
            var c = M.getDocument().qp;
            b = c.Xm(b);
            var d = G,
              e = window.setInterval(function () {
                c.ho(b, d, M)
              }, a);
            return new u(c, function () {
              window.clearInterval(e)
            })
          },
          clearInterval: function (b) {
            b.terminate()
          },
          setTimeOut: function (b, a) {
            var c = M.getDocument().qp,
              d;
            b = c.Xm(b);
            var e = G,
              f = window.setTimeout(function () {
                c.ho(b, e, M);
                d.terminate()
              }, a);
            return d = new u(c, function () {
              window.clearTimeout(f)
            })
          },
          clearTimeOut: function (b) {
            b.terminate()
          },
          launchURL: w("app.launchURL")
        },
        console: {
          clear: function () {
            console.clear()
          },
          println: function (b) {
            console.log(b)
          }
        },
        alert: function (b) {
          M.Wa().Xd().alert(b)
        },
        print: function () {
          $(window).trigger("documentPrint")
        },
        ADBE: null,
        color: {
          transparent: ["T"],
          black: ["G", 0],
          white: ["G", 1],
          red: ["RGB", 1, 0, 0],
          green: ["RGB", 0, 1, 0],
          blue: ["RGB", 0, 0, 1],
          cyan: ["CMYK", 1, 0, 0, 0],
          magenta: ["CMYK", 0, 1, 0, 0],
          yellow: ["CMYK", 0, 0, 1, 0],
          dkGray: ["G", .25],
          gray: ["G", .5],
          ltGray: ["G", .75]
        },
        border: {
          s: "solid",
          b: "beveled",
          d: "dashed",
          i: "inset",
          iY: "underline"
        },
        style: {
          ch: "check",
          cr: "cross",
          LW: "diamond",
          ci: "circle",
          dY: "start",
          cY: "square"
        },
        display: {
          visible: 0,
          hidden: 1,
          sR: 2,
          tR: 3
        }
      };
    D.So = function (b) {
      this.ma = b
    };
    D.So.prototype = {
      insertItemAt: function (b, a, c) {
        _.isUndefined(a) && (a = b);
        _.isUndefined(c) && (c = 0);
        _.isArray(b) && (b = b[0]);
        _.isArray(a) && (a = a[0]);
        a = {
          displayValue: b,
          value: a
        };
        var d = this.ma.Ug();
        c = -1 === c ? d.length - c : c;
        this.ma.$s(a, c);
        "Ch" !== this.ma.type || this.ma.flags.get("Combo") || this.ma.Db(b)
      },
      getItemAt: function (b, a) {
        a = _.isUndefined(a) ? !0 : !!a;
        var c = this.ma.Ug(),
          c = -1 === b ? c[c.length - 1] : c[b];
        return a ? c.value : c.displayValue
      },
      deleteItemAt: function (b) {
        var a = this.ma.Ug();
        if (_.isUndefined(b)) {
          var c = this.ma.Xa();
          a.forEach(function (a, d) {
            a.value === c && (b = d)
          });
          _.isUndefined(b) || (a.splice(b, 1), 0 === b ? this.ma.Db(a[a.length - 1].value) : this.ma.Db(a[b - 1].value))
        } else a.splice(b, 1)
      },
      clearItems: function () {
        this.ma.fe([]);
        this.ma.Db(null);
        this.ma.mv()
      },
      setItems: function (b) {
        for (var a = [], c = b.length, d = 0; d < c; ++d) {
          var e = b[d];
          _.isString(e) ? a.push({
            value: e
          }) : _.isArray(e) && a.push({
            displayValue: e[0],
            value: e[1] ? e[1] : e[0]
          })
        }
        this.ma.fe(a);
        this.ma.Db(a[0].value || null);
        this.ma.mv()
      },
      setFocus: function () {
        var b;
        if (b = "widgets" in this.ma ? this.ma.widgets[0] : this.ma) this.ma.Sg().bn(b.PageNumber, b.X, b.Y, !0), b.innerElement.trigger("focus")
      },
      isBoxChecked: function (b) {
        return (b = this.ma.widgets[b]) ? b.appearance === b.Ph() ? 1 : 0 : 0
      },
      checkThisBox: function (b, a) {
        _.isUndefined(a) && (a = !0);
        var c = this.ma.widgets[b];
        c && (a ? this.ma.Db(c.Ph()) : this.ma.Xa() === c.Ph() && this.ma.Db("Off"), this.ma.mv())
      },
      buttonSetCaption: function (b) {
        this.ma.widgets.forEach(function (a) {
          a.captions.Normal =
            String(b);
          a.refresh()
        })
      },
      getArray: function () {
        var b = [],
          a = this.ma.Sg().da.Pg;
        this.ma.fB({
          Yz: function () {},
          Vu: function () {},
          Sq: function (c) {
            b.push(new D.So(a.zb(c)))
          }
        }, this.ma.mP());
        return b
      }
    };
    Object.defineProperties(D.So.prototype, {
      name: {
        get: function () {
          return this.ma.name
        },
        enumerable: !0
      },
      doc: {
        get: function () {
          return D.xB(this.ma.Sg())
        },
        enumerable: !0
      },
      value: {
        get: function () {
          var b = this.ma.Xa();
          return "number" === typeof b ? b : c(b) && "" !== b ? "0" === b ? 0 : new e(b) : b || ""
        },
        set: function (b) {
          this.ma.Db(b)
        },
        enumerable: !0
      },
      valueAsString: {
        get: function () {
          var b =
            this.ma.Xa();
          return b ? b.toString() : ""
        }
      },
      fillColor: {
        set: function (b) {
          B(this.ma, A(b))
        },
        get: function () {
          return D.Nr(this.ma.widgets[0].backgroundColor)
        },
        enumerable: !0
      },
      textColor: {
        set: function (b) {
          this.ma.font.fillColor = A(b)
        },
        get: function () {
          return D.Nr(this.ma.font.fillColor)
        },
        enumerable: !0
      },
      bgColor: {
        set: function (b) {
          B(this.ma, A(b))
        },
        get: function () {
          return D.Nr(this.ma.widgets[0].backgroundColor)
        },
        enumerable: !0
      },
      numItems: {
        get: function () {
          return (this.ma.Ug() || []).length
        },
        enumerable: !0
      },
      charLimit: {
        set: function (b) {
          b =
            Number(b);
          _.isNaN(b) || (this.ma.maxLen = b)
        },
        get: function () {
          return this.ma.maxLen
        },
        enumerable: !0
      },
      hidden: {
        set: function (b) {
          this.ma.If(!b)
        },
        get: function () {
          return this.ma.widgets[0].hidden
        },
        enumerable: !0
      },
      display: {
        set: function (b) {
          b === O.display.visible || b === O.display.sR ? this.ma.If(!0) : b !== O.display.hidden && b !== O.display.tR || this.ma.If(!1)
        },
        get: function () {
          return this.ma.widgets[0].hidden
        },
        enumerable: !0
      },
      userName: {
        set: function (b) {
          this.ma.userName = b;
          this.ma.mv()
        },
        get: function () {
          return this.ma.userName
        },
        enumerable: !0
      },
      type: {
        get: function () {
          switch (this.ma.type) {
            case "Tx":
              return "text";
            case "Btn":
              return this.ma.flags.get("PushButton") ? "button" : this.ma.flags.get("Radio") ? "radiobutton" : "checkbox";
            case "Ch":
              return this.ma.flags.get("Combo") ? "combobox" : "listbox";
            case "Sig":
              return "signature"
          }
          return null
        },
        enumerable: !0
      },
      currentValueIndices: {
        get: function () {
          for (var b = this.ma.Ug(), a = this.ma.value, c = 0; c < b.length; ++c)
            if (b[c].value === a) return c;
          return -1
        },
        enumerable: !0
      }
    });
    z.prototype = {
      get: function (b) {
        b = this.JC(b);
        b = this.ZC[b];
        return _.isUndefined(b) ? null : b
      },
      set: function (b) {
        this.ZC[this.JC(b)] = b
      }
    };
    D.Nr = function (b) {
      return b ? 0 !== b.A ? ["RGB", b.R / 255, b.G / 255, b.B / 255] : ["T"] : ["T"]
    };
    D.xB = function (b) {
      var c = b.Wa().Xd(),
        d = {
          getField: function (b) {
            return (b = c.zb(b)) ? new D.So(b) : null
          },
          submitForm: function (c, d, e, f) {
            _.isUndefined(d) && (d = !0);
            (new a.Actions.hk({
              url: c,
              format: d ? "fdf" : "xfdf",
              includeEmpty: !!e,
              fields: f || []
            })).onTriggered(null, null, b)
          },
          resetForm: function (c) {
            (new a.Actions.ck({
              fields: c
            })).onTriggered(null, null, b)
          },
          calculateNow: function () {
            c.Ip(null)
          },
          getNthFieldName: function (b) {
            var a, d = 0;
            c.nn(function (c) {
              d === b && (a = c.name);
              ++d
            });
            return a
          }
        };
      Object.defineProperties(d, {
        calculate: {
          set: function (b) {
            c.vo = !!b
          },
          get: function () {
            return c.vo
          },
          enumerable: !0
        },
        numPages: {
          get: function () {
            return b.Ab()
          },
          enumerable: !0
        },
        pageNum: {
          get: function () {
            return b.rn() - 1
          },
          set: function (a) {
            b.Be(a + 1)
          },
          enumerable: !0
        },
        numFields: {
          get: function () {
            var b = 0;
            c.nn(function () {
              ++b
            });
            return b
          },
          enumerable: !0
        }
      });
      return d
    };
    x.prototype = {
      Xm: function () {},
      ho: function () {},
      Yc: function () {
        this.gs.forEach(function (b) {
          b()
        })
      },
      dB: function (b) {
        return b
      },
      iB: function (b) {
        return b
      },
      Zv: function (b) {
        return b
      },
      rJ: function (b) {
        return b
      },
      sJ: function (b) {
        return b
      },
      qJ: function (b) {
        return b
      },
      pJ: function (b) {
        return b
      },
      Go: function (b) {
        var a = null;
        if (_.isArray(b)) a = this.pJ(b);
        else if (_.isNull(b)) a = null;
        else switch (typeof b) {
          case "object":
            a = this.iB(b);
            break;
          case "function":
            a = this.Zv(b);
            break;
          case "number":
            a = this.rJ(b);
            break;
          case "string":
            a = this.sJ(b);
            break;
          case "boolean":
            a = this.qJ(b);
            break;
          case "undefined":
            a = void 0;
            break;
          default:
            console.warn("unrecognised type: " +
              typeof b)
        }
        return a
      },
      wrap: function (b, a) {
        var c = this.YC[b];
        if (c) {
          var d = c.get(a);
          if (!_.isNull(d)) return d
        }
        d = this.pl(b, a);
        d = this.Go(d);
        c && c.set(d);
        return d
      },
      pl: function (b, a) {
        var c = this.YC[b];
        if (c) {
          var d = c.get(a);
          if (!_.isNull(d)) return d
        }
        if (d = this.HL[b]) return d = d(a), c && c.set(d), d;
        console.warn(b + " is not a valid normalisable PDFJS type", a);
        return {}
      },
      JU: function (b) {
        0 < this.hp ? this.gs.push(b) : b()
      },
      aU: function () {
        this.hp += 1
      },
      hO: function () {
        --this.hp;
        if (0 === this.hp) {
          var b = this.gs;
          this.gs = [];
          b.forEach(function (b) {
            b()
          })
        }
      },
      OO: function () {
        return this.iB($.extend({}, O))
      }
    };
    D.mV = O;
    var K = eval;
    y.prototype = $.extend(Object.create(x.prototype), {
      Bp: function (b) {
        b = this.pl("Doc", b);
        for (var c = Object.keys(b), d = 0; d < c.length; ++d) {
          var e = c[d];
          Object.defineProperty(a, e, Object.getOwnPropertyDescriptor(b, e))
        }
      },
      Xm: function (b) {
        return function (a) {
          G = a;
          K("with(_PDFTRON_JS_API){" + b + "\n}");
          G = null
        }
      },
      ho: function (b, c, d) {
        a.event = c;
        this.sk || (this.Bp(d), this.sk = !0);
        var e = M;
        M = d;
        try {
          b(this.wrap("Event", c), this.wrap("Doc", d))
        } catch (f) {
          console.warn("PDFJS error encountered: " +
            f + " " + b.Cq)
        }
        M = e
      }
    });
    (function () {
      x.call(this);
      this.yh = continuum.vW();
      this.sk = !1;
      for (var b = Object.keys(O), a = 0; a < b.length; ++a) this.yh.global.DB(b[a], this.Go(O[b[a]]))
    }).prototype = $.extend(Object.create(x.prototype), {
      Xm: function (b) {
        return continuum.wW(b)
      },
      Bp: function (b) {
        b = this.pl("Doc", b);
        for (var a = Object.keys(b), c = 0; c < a.length; ++c) this.yh.global.DB(a[c], this.Go(b[a[c]]))
      },
      ho: function (b, a, c) {
        this.sk || (this.Bp(c), this.sk = !0);
        a = this.pl("Event", a);
        c = this.Go(a);
        this.yh.global.DB("event", c);
        G = a;
        this.yh.evaluate(b);
        G = null
      },
      dB: function (b) {
        var a = this;
        if (_.isObject(b)) {
          if (b.vM) return b.vM.map(function (b) {
            return a.dB(b)
          });
          console.warn("object argument: ", b)
        }
        return b
      },
      Zv: function (b) {
        var a = this;
        return continuum.Yx(function () {
          var c = Array.prototype.map.call(arguments, function (b) {
            return a.dB(b)
          });
          return a.Go(b.apply(null, c))
        })
      },
      rJ: function (b) {
        return this.yh.evaluate(JSON.stringify(b))
      },
      sJ: function (b) {
        return this.yh.evaluate(JSON.stringify(b))
      },
      qJ: function (b) {
        return this.yh.evaluate(JSON.stringify(b))
      },
      pJ: function (b) {
        var a =
          this.yh.evaluate("new Array()");
        console.warn("array:", a);
        return b
      },
      iB: function (b) {
        for (var a = this.yh.evaluate("Object.create(null)"), c = Object.keys(b), d = c.length, e = 0; e < d; ++e) {
          var f = c[e],
            g = Object.getOwnPropertyDescriptor(b, f),
            h = {
              Enumerable: g.enumerable,
              Writeable: g.writeable
            };
          _.isUndefined(g.value) || (h.Value = this.Go(g.value));
          _.isUndefined(g.set) || (h.Set = this.Zv(g.set));
          _.isUndefined(g.get) || (h.Get = this.Zv(g.get));
          a.hV(f, h)
        }
        return a
      }
    });
    var C = !0;
    a.o.AN = function () {
      C = !1
    };
    F.prototype = $.extend(Object.create(x.prototype), {
      Xm: function (b) {
        if (C) try {
          var a = this.zp.__add_action(b);
          a.Cq = b;
          return a
        } catch (c) {
          console.warn("Failed to compile PDFJS script")
        }
      },
      Bp: function (b) {
        b = this.pl("Doc", b);
        for (var a = Object.keys(b), c = 0; c < a.length; ++c) {
          var d = a[c];
          Object.defineProperty(this.zp, d, Object.getOwnPropertyDescriptor(b, d))
        }
      },
      Yc: function () {
        x.prototype.Yc.call(this);
        this.op && this.op.remove()
      },
      ho: function (b, a, c) {
        if (C) {
          this.sk || (this.Bp(c), this.sk = !0);
          var d = M;
          M = c;
          a = this.pl("Event", a);
          this.zp.event = a;
          c = G;
          G = a;
          try {
            b()
          } catch (e) {
            console.warn("PDFJS error encountered: ",
              e, b && b.Cq)
          }
          G = c;
          M = d
        }
      }
    });
    D.eV = y;
    D.hN = function () {
      return new F
    }
  })(window);
  (function (a) {
    if (a && a.Worker) {
      var e = a.Worker;
      a.vi = a.vi || [];
      a.vi.TI || (a.vi.TI = function () {
        for (var d = a.vi.length - 1; 0 <= d; d--) a.vi[d].terminate(), delete a.vi[d]
      });
      a.Worker.isFake || (a.Worker = function (d) {
        d = new e(d);
        a.vi.push(d);
        return d
      }, a.aK = function (a) {
        return a instanceof e
      }, a.Worker.isFake = !0)
    }
  })(window);
  window.addEventListener("unload", function () {
    window.vi && window.vi.TI()
  });
  (function (a) {
    a.Annotations = a.Annotations || {};
    var e = a.Annotations,
      d = e.sa || {};
    e.Annotation = function () {
      this.Subject = "Annotation";
      this.cC = 1;
      this.$r = this.bs = this.ds = this.cs = 0;
      this.TB = void 0;
      this.NoRotate = this.NoZoom = this.wV = this.vV = !1;
      this.Printable = !0;
      this.Ki = new e.Color(0, 0, 0);
      this.kC = void 0;
      this.Xw = new Date;
      this.IC = d.QP();
      this.cx = !0;
      this.MC = this.wk = !1;
      this.gD = Promise.resolve();
      this.OC = !0;
      this.Jm = [];
      this.nf = this.Eg = null;
      this.ZB = this.$B = !1
    };
    e.Annotation.prototype = {
      elementName: "annotation",
      selectionModel: e.Or,
      cG: !1,
      LF: function () {
        return null
      },
      draw: function () {},
      render: function () {},
      Tv: function () {},
      xj: function () {
        return !1
      },
      xG: function () {
        return !1
      },
      kl: function () {
        return !this.Hidden && !this.NoView && !this.Wh()
      },
      uI: function (a) {
        var b = new e.Rect(a.x1, a.y1, a.x2, a.y2);
        0 > b.ya() && (a = b.x1, b.x1 = b.x2, b.x2 = a);
        0 > b.xa() && (a = b.y1, b.y1 = b.y2, b.y2 = a);
        this.X = b.x1;
        this.Y = b.y1;
        this.Width = b.ya();
        this.Height = b.xa()
      },
      Gl: function (a) {
        var b = this.we();
        a = new e.Rect(a.x1, a.y1, a.x2, a.y2);
        0 > a.ya() && (a.x1 = b.x1, a.x2 = b.x2);
        0 > a.xa() && (a.y1 = b.y1, a.y2 =
          b.y2);
        this.X = a.x1;
        this.Y = a.y1;
        this.Width = a.ya();
        this.Height = a.xa()
      },
      adjustRect: function () {},
      resize: function (a) {
        this.Gl(a)
      },
      Gn: function () {
        return this.X
      },
      OT: function (a) {
        this.X = parseFloat(a)
      },
      Hn: function () {
        return this.Y
      },
      PT: function (a) {
        this.Y = parseFloat(a)
      },
      ya: function () {
        return this.Width
      },
      AI: function (a) {
        this.Width = parseFloat(a)
      },
      xa: function () {
        return this.Height
      },
      hr: function (a) {
        this.Height = parseFloat(a)
      },
      we: function () {
        return new e.Rect(this.X, this.Y, this.X + this.Width, this.Y + this.Height)
      },
      getRectPadding: function () {
        return 0
      },
      Ac: function () {
        return this.PageNumber
      },
      Kb: function () {
        return "undefined" === typeof this.PageNumber ? void 0 : this.PageNumber - 1
      },
      qI: function (a) {
        this.PageNumber = parseInt(a, 10)
      },
      wn: function () {
        return this.Gn()
      },
      QF: function () {
        return this.wn() + this.Width
      },
      Dn: function () {
        return this.Hn()
      },
      mF: function () {
        return this.Dn() + this.Height
      },
      FO: function () {
        return this.Custom
      },
      RS: function (a) {
        this.Custom = a
      },
      Tk: function () {
        return this.QR
      },
      no: function (a) {
        this.QR = a;
        this.lb(!(this instanceof e.Ja))
      },
      Ax: function (a) {
        if (a.Id)
          for (var b =
              0; b < this.Jm.length; ++b)
            if (this.Jm[b].Id === a.Id) return;
        this.Jm.push(a)
      },
      uN: function (a) {
        a = this.Jm.indexOf(a); - 1 < a && this.Jm.splice(a, 1)
      },
      hu: function () {
        return this.Jm
      },
      Wh: function () {
        return !(_.isUndefined(this.InReplyTo) || _.isNull(this.InReplyTo))
      },
      UH: function () {
        return this.gD
      },
      uf: function () {
        var a = this.appearances && this.appearances._DEFAULT;
        return a && a.Normal
      },
      lb: function (a) {
        this.isImporting || (this.Xw = new Date, a || delete this.appearances);
        this.cx || (this.wk = !0)
      },
      NO: function () {
        var a = [];
        this.Invisible && a.push("invisible");
        this.Hidden && a.push("hidden");
        this.Printable && a.push("print");
        this.NoZoom && a.push("nozoom");
        this.NoRotate && a.push("norotate");
        this.NoView && a.push("noview");
        this.ReadOnly && a.push("readonly");
        this.Locked && a.push("locked");
        this.ToggleNoView && a.push("togglenoview");
        this.LockedContents && a.push("lockedcontents");
        return 0 < a.length ? a.join(",") : null
      },
      aT: function (a) {
        this.CL = a
      },
      VO: function () {
        return this.CL
      },
      serialize: function (c, b) {
        var d = e.ba,
          g = this.we();
        this.Xu && this.Xu.isEqual(g) ? g = this.Yu : (g.cO(), this.Yu &&
          (delete this.Yu, delete this.Xu), g = d.FA(g, b));
        var g = {
            page: this.Kb(),
            rect: g
          },
          h = d.lg(this.Color);
        null !== h && (g.color = h);
        (h = this.NO()) && (g.flags = h);
        !this.XP && this.Id && (g.name = this.Id);
        this.Author && (g.title = this.Author);
        this.Subject && (g.subject = this.Subject);
        (h = this.Rotation) && 0 !== h && (g.rotation = h);
        if (h = this.DateModified) {
          var l;
          this.bA && (h.getTime() === this.dH ? l = this.bA : (delete this.bA, delete this.dH));
          l || (l = d.bB(h));
          g.date = l
        }
        for (var k in g) c.setAttribute(k, g[k]);
        k = this.Tk();
        k === this.bH ? (this.eH && (l = document.createElementNS("",
          "contents-richtext"), d = document.createElementNS("", d.lS), c.WE = this.eH, l.appendChild(d), c.appendChild(l)), this.dA && (l = document.createElementNS("", "contents"), l.textContent = this.dA, c.appendChild(l))) : (delete this.bH, delete this.dA, l = document.createElementNS("", "contents"), l.textContent = k, c.appendChild(l));
        (d = this.appearances) && a.bf.tJ(new a.MB(c), d, b);
        return c
      },
      Eh: function (a) {
        return (a = a.nodeName) && this.elementName ? a.toLowerCase() === this.elementName.toLowerCase() : !1
      },
      deserialize: function (c, b) {
        var d =
          e.ba,
          g = c.getAttribute("page"),
          g = parseInt(g, 10);
        this.PageNumber = g + 1;
        this.Yu = g = c.getAttribute("rect") || "0,0,100,100";
        g = d.Ct(g, b);
        g.normalize();
        this.Gl(g);
        g = c.getAttribute("name");
        this.XP = !g;
        this.Id = g;
        this.Author = c.getAttribute("title");
        this.Subject = c.getAttribute("subject");
        g = (c.getAttribute("flags") || "").split(",");
        this.Invisible = -1 !== g.indexOf("invisible");
        this.Hidden = -1 !== g.indexOf("hidden");
        this.Printable = -1 !== g.indexOf("print");
        this.NoZoom = -1 !== g.indexOf("nozoom");
        this.NoRotate = -1 !== g.indexOf("norotate");
        this.NoView = -1 !== g.indexOf("noview");
        this.ReadOnly = -1 !== g.indexOf("readonly");
        this.Locked = -1 !== g.indexOf("locked");
        this.ToggleNoView = -1 !== g.indexOf("togglenoview");
        this.LockedContents = -1 !== g.indexOf("lockedcontents");
        g = d.hj(c.getAttribute("color"));
        this.Color = null !== g ? g : new e.Color(0, 0, 0, 0);
        (g = c.getAttribute("rotation")) && (this.Rotation = g);
        (g = c.getAttribute("date")) ? (this.bA = g, d = d.gy(g), this.dH = d.getTime(), this.DateModified = d) : this.DateModified = null;
        var d = c.getElementsByTagName("contents-richtext"),
          g = "",
          h = c.getElementsByTagName("contents"),
          l = c.getElementsByTagName("apref"),
          k;
        if (0 < h.length) this.dA = g = h[0].textContent;
        else if (0 < d.length)
          if (k = d[0].getElementsByTagName("body"), 0 < k.length)
            if (h = k[0].getElementsByTagName("span"), 0 < h.length)
              for (k = 0; k < h.length; ++k) g += h[k].textContent;
            else g = k[0].textContent;
        else g = d[0].textContent;
        0 < d.length && (this.eH = d[0].BR);
        for (k = 0; k < l.length; ++k) a.bf.LB.WL(new a.Je(l[k]), this, b);
        this.bH = g;
        this.no(g)
      },
      lh: function (a) {
        var b = {
            x: this.X,
            y: this.Y
          },
          d = {
            x: b.x + this.Width,
            y: b.y +
              this.Height
          },
          b = a.W(b),
          d = a.W(d);
        this.uI({
          x1: b.x,
          y1: b.y,
          x2: d.x,
          y2: d.y
        })
      },
      Dc: function (a, b) {
        var d = a.getAttribute(b);
        _.isUndefined(d) || _.isNull(d) || (this[b] = d)
      },
      kc: function (a, b, d) {
        var e = this[b];
        _.isUndefined(e) || _.isNull(e) || e === d || a.setAttribute(b, e)
      },
      Mj: function () {
        return !1
      },
      Lv: function () {
        this.Yu && !this.Xu && (this.Xu = this.we())
      }
    };
    e.Annotation.prototype = $.extend(Object.create(a.utils.eventHandler), e.Annotation.prototype);
    Object.defineProperties(e.Annotation.prototype, {
      X: {
        get: function () {
          return this.cs
        },
        set: function (a) {
          this.cs = parseFloat(a);
          this.lb(!0);
          if (a = this.uf()) a.offset.x = this.cs
        }
      },
      Y: {
        get: function () {
          return this.ds
        },
        set: function (a) {
          this.ds = parseFloat(a);
          this.lb(!0);
          if (a = this.uf()) a.offset.y = this.ds
        }
      },
      Width: {
        get: function () {
          return this.bs
        },
        set: function (a) {
          a = parseFloat(a);
          window.utils.fCmp(this.bs, a) || (this.bs = a, this.lb())
        }
      },
      Height: {
        get: function () {
          return this.$r
        },
        set: function (a) {
          a = parseFloat(a);
          window.utils.fCmp(this.$r, a) || (this.$r = a, this.lb())
        }
      },
      NoMove: {
        get: function () {
          return this.aC
        },
        set: function (a) {
          this.aC = !0 === a || "true" === a
        }
      },
      NoResize: {
        get: function () {
          return this.bC
        },
        set: function (a) {
          this.bC = !0 === a || "true" === a
        }
      },
      PageNumber: {
        get: function () {
          return this.cC
        },
        set: function (a) {
          this.cC = parseInt(a, 10)
        }
      },
      DateModified: {
        get: function () {
          return this.Xw
        },
        set: function (a) {
          this.Xw = d.uF(a)
        }
      },
      Id: {
        get: function () {
          return this.IC
        },
        set: function (a) {
          this.IC = a
        }
      },
      Author: {
        get: function () {
          return this.kC
        },
        set: function (a) {
          this.kC = a
        }
      },
      IsAdded: {
        get: function () {
          return this.cx
        },
        set: function (a) {
          this.cx = a
        }
      },
      IsModified: {
        get: function () {
          return this.wk
        },
        set: function (a) {
          this.wk = a
        }
      },
      IsDeleted: {
        get: function () {
          return this.MC
        },
        set: function (a) {
          this.MC = a
        }
      },
      Custom: {
        get: function () {
          return this.TB
        },
        set: function (a) {
          this.TB = a
        }
      },
      Listable: {
        get: function () {
          return this.OC
        },
        set: function (a) {
          this.OC = !!a
        }
      },
      Color: {
        get: function () {
          return this.Ki
        },
        set: function (a) {
          a instanceof e.Color && (this.Ki = a, this.lb())
        }
      },
      MaintainAspectRatio: {
        get: function () {
          return this.$B
        },
        set: function (a) {
          this.$B = a
        }
      },
      IsClickableOutsideRect: {
        get: function () {
          return this.ZB
        },
        set: function (a) {
          this.ZB = a
        }
      }
    })
  })(window);
  (function (a) {
    var e = a.Annotations || {};
    e.Ko = function (a) {
      this.ip = new e.Color;
      this.Ck = this.tk = this.Nm = 0;
      this.Cd = null;
      this.set(a)
    };
    e.Ko.prototype = {
      set: function (a) {
        a instanceof e.Ko ? (this.ip = new e.Color(a.ip), this.Nm = a.Nm, this.tk = a.tk, this.Ck = a.Ck, this.Cd = a.Cd) : _.isArray(a) ? 3 === a.length || 4 === a.length ? (_.isUndefined(a[0]) || (this.tk = Number(a[0])), _.isUndefined(a[1]) || (this.Ck = Number(a[1])), _.isUndefined(a[2]) || (this.Nm = Number(a[2])), 4 === a.length && _.isArray(a[3]) && console.warn("dashed borders are currently unsupported")) :
          console.warn("Invalid border specification ", a, " should be 3 or 4 elements long") : _.isObject(a) && (_.isArray(a.border) && this.set(a.border), _.isUndefined(a.color) || (this.ip = new e.Color(a.color)), _.isUndefined(a.width) || (this.Nm = Number(a.width)), _.isUndefined(a.cornerRadius) ? _.isArray(a.cornerRadius) && (this.tk = a.cornerRadius[0] || 0, this.Ck = a.cornerRadius[1] || 0) : this.Ck = this.tk = Number(a.cornerRadius), _.isString(a.style) && (this.Cd = a.style))
      },
      serialize: function (a) {
        var c = e.ba;
        this.iL && a.setAttribute("width",
          this.iL);
        this.Cd && a.setAttribute("style", this.Cd);
        var b = this.color;
        a.setAttribute("BC", [b.R / 255, b.G / 255, b.B / 255].map(c.toFixed).join(","))
      },
      deserialize: function (a) {
        var c = e.ba,
          b = {};
        c.getAttribute(a, "width") ? b.width = parseInt(c.getAttribute(a, "width"), 10) : b.width = 1;
        c.getAttribute(a, "style") && (b.style = c.getAttribute(a, "style"), "beveled" === b.style && (b.style = "bevelled"));
        c.getAttribute(a, "BC") && (b.color = c.getAttribute(a, "BC").split(",").map(Number));
        this.set(b)
      },
      aB: function () {
        var a = _.isNull(this.Cd) ? "solid" :
          this.Cd,
          c = this.Nm,
          b = this.tk.toFixed(6) + "px " + this.Ck.toFixed(6) + "px",
          e = {};
        "underline" === a ? (e["border-bottom-style"] = "solid", e["border-top-style"] = "hidden", e["border-left-style"] = "hidden", e["border-right-style"] = "hidden") : (a = {
          solid: "solid",
          bevelled: "outset",
          inset: "inset"
        } [a], _.isUndefined(a) && (a = "solid"), e["border-style"] = a);
        e["border-color"] = this.ip.toString();
        e["border-width"] = c;
        e["border-top-left-radius"] = b;
        e["border-top-right-radius"] = b;
        e["border-bottom-left-radius"] = b;
        e["border-bottom-right-radius"] =
          b;
        return e
      }
    };
    Object.defineProperties(e.Ko.prototype, {
      color: {
        get: function () {
          return this.ip
        },
        set: function (a) {
          this.set({
            color: a
          })
        }
      },
      width: {
        get: function () {
          return this.Nm
        },
        set: function (a) {
          this.set({
            width: a
          })
        }
      },
      style: {
        get: function () {
          return this.Cd
        },
        set: function (a) {
          this.set({
            style: a
          })
        }
      },
      cornerRadius: {
        get: function () {
          return [this.tk, this.Ck]
        },
        set: function (a) {
          this.set({
            cornerRadius: a
          })
        }
      }
    })
  })(window);
  (function (a) {
    var e = a.Annotations || {},
      d = e.sa || {};
    e.Ag = function (a) {
      this.qk = this.tc = "";
      this._size = 0;
      this.os = new e.Color([0, 0, 0]);
      this.Bk = new e.Color([0, 0, 0]);
      this.Ts = "Type1";
      this.Ni = 0;
      this.XC = 4;
      this.VC = 12;
      this.set(a)
    };
    e.Ag.prototype = {
      set: function (a) {
        _.isObject(a) ? (a.name && (this.tc = String(a.name), this.qk = e.ba.Uq(this.tc), this.Ww = e.ba.oH(this.tc), this.rC = e.ba.nH(this.tc)), a.size && (this._size = Number(a.size)), a.fillColor && (this.os = new e.Color(a.fillColor)), a.strokeColor && (this.Bk = new e.Color(a.strokeColor)),
          a.type && (this.Ts = a.type)) : _.isString(a) && (this.tc = a, this.qk = e.ba.Uq(this.tc), this.Ww = e.ba.oH(this.tc), this.rC = e.ba.nH(this.tc))
      },
      jO: function (a, b, e) {
        if (0 === this._size) {
          var g = b.nu(1);
          if (0 === a.replace(/\s/g, "").length) return this.Ni = Math.min(g / 2, this.VC);
          var h = 20;
          e ? (h = g * d.Xj, b.element ? (b = b.element[0].cloneNode(!0), g = document.getElementsByTagName("body")[0], g.appendChild(b), h = d.aF(a, b.children[0], h) / d.Xj, g.removeChild(b)) : h /= 2) : (b = .95 * b.oz(1), g *= .95, a = d.measureText(a, h, this.qk ? this.qk : void 0, this.Ww),
            h *= Math.min(b / a.width, g / a.height));
          return this.Ni = Math.max(this.XC, Math.min(h, this.VC))
        }
      },
      deserialize: function (a, b) {
        var d = e.ba;
        if (d.getAttribute(a, "FontName")) {
          var g = d.getAttribute(a, "FontName");
          this.tc = g;
          this.qk = e.ba.Uq(g)
        }
        if (d.getAttribute(a, "FontSize")) {
          var g = parseFloat(d.getAttribute(a, "FontSize")),
            d = b.W({
              x: 0,
              y: 0
            }),
            h = b.W({
              x: g,
              y: 0
            }),
            g = d.x - h.x,
            d = d.y - h.y;
          this._size = Math.sqrt(g * g + d * d)
        }
      },
      dl: function () {
        return this.os.dl() && this.Bk.dl()
      },
      aB: function (a) {
        var b = {};
        "" !== this.qk && (b["font-family"] = this.qk,
          b["font-weight"] = this.Ww, b["font-style"] = this.rC);
        b["font-size"] = 0 === this._size && 0 !== this.Ni ? String(this.Ni * a) + "px" : String(this._size * a) + "px";
        b.color = this.os.toString();
        3 > parseFloat(b["font-size"]) && (b["font-size"] = "3px");
        return b
      }
    };
    Object.defineProperties(e.Ag.prototype, {
      name: {
        get: function () {
          return this.tc
        },
        set: function (a) {
          this.set({
            name: a
          })
        }
      },
      size: {
        get: function () {
          return this._size
        },
        set: function (a) {
          this.set({
            size: a
          })
        }
      },
      type: {
        get: function () {
          return this.Ts
        }
      },
      strokeColor: {
        get: function () {
          return this.Bk
        },
        set: function (a) {
          this.set({
            strokeColor: a
          })
        }
      },
      fillColor: {
        get: function () {
          return this.os
        },
        set: function (a) {
          this.set({
            fillColor: a
          })
        }
      },
      calculatedSize: {
        get: function () {
          return 0 === this._size ? this.Ni : this._size
        }
      }
    })
  })(window);
  (function (a) {
    var e = a.Annotations || {};
    e.HTMLAnnotation = function (d) {
      e.Annotation.call(this);
      a.Actions.nh.call(this, d);
      this.Bk = new e.Color(0, 0, 0, 1);
      this.hs = new e.Color;
      this.ks = new e.Ko;
      this.us = !1;
      this.rx = 0;
      this.oe = this.Sf = null;
      this.on("contentRemoved", function () {
        this.oe = this.Sf = null;
        this.Rw = !1
      });
      this.Ss = !0;
      _.isObject(d) && (_.isUndefined(d.border) || this.ks.set(d.border), _.isUndefined(d.backgroundColor) || (this.hs = new e.Color(d.backgroundColor)), _.isUndefined(d.color) || (this.Bk = new e.Color(d.color)), _.isUndefined(d.rect) ||
        (this.rect = new e.Rect(d.rect)));
      var c = this.qq(),
        b = this;
      Object.keys(c).forEach(function (a) {
        var d = c[a];
        $(b).on(d.internal_name, function (c) {
          b.De(a, d.getEvent(b, c))
        })
      })
    };
    e.HTMLAnnotation.prototype = {
      ij: "",
      oz: function (a) {
        return (this.ya() - (this.Ss ? 2 * this.border.width : 0)) * a
      },
      nu: function (a) {
        return (this.xa() - (this.Ss ? 2 * this.border.width : 0)) * a
      },
      KI: function (a) {
        this.Ss = !!a
      },
      serialize: function () {
        this.Hidden = this.hidden;
        e.Annotation.prototype.serialize.apply(this, arguments)
      },
      deserialize: function () {
        e.Annotation.prototype.deserialize.apply(this,
          arguments);
        this.Hidden && (this.hidden = !0, this.Hidden = !1)
      },
      qq: function () {
        return {}
      },
      Ch: function () {},
      Se: function (d) {
        var c = this.rx,
          b = a.utils.getRotationOffsets(c, this.ya(), this.xa()),
          e = b.dx * d,
          b = b.dy * d;
        return $.extend({
          left: this.X * d,
          top: this.Y * d,
          width: this.oz(d),
          height: this.nu(d),
          position: "absolute",
          padding: "0",
          margin: "0",
          "background-color": this.hs.toString(),
          "z-index": "35",
          display: this.us ? "none" : "",
          transform: "translate(" + e + "px," + b + "px) rotate(" + -c + "deg)",
          "transform-origin": "top left",
          "-webkit-transform": "translate(" +
            e + "px," + b + "px) rotate(" + -c + "deg)",
          "-webkit-transform-origin": "top left",
          "-ms-transform": "translate(" + e + "px," + b + "px) rotate(" + -c + "deg)",
          "-ms-transform-origin": "top left",
          "-moz-transform": "translate(" + e + "px," + b + "px) rotate(" + -c + "deg)",
          "-moz-transform-origin": "top left",
          "-webkit-appearance": "none"
        }, this.Ss ? this.ks.aB(d) : {})
      },
      yc: function (a) {
        if (!a) throw Error("no zoom?");
        return {
          position: "absolute",
          "font-size": "inherit",
          "font-family": "inherit",
          "font-weight": "inherit",
          "font-style": "inherit",
          color: "inherit",
          width: this.oz(a),
          height: this.nu(a),
          border: 0,
          padding: 0,
          margin: 0,
          "background-color": "transparent",
          "vertical-align": "top"
        }
      },
      Hp: function (a, c) {
        for (var b in c) {
          var e = c[b];
          "number" === typeof e && (e += "px");
          a.style[b] = e
        }
      },
      If: function (a) {
        this.us = !a;
        this.Sf && (this.Sf[0].style.display = this.us ? "none" : "")
      },
      createInnerElement: function () {
        console.warn("missing inner element");
        return null
      },
      CF: function () {
        return this.oe
      },
      wF: function () {
        return this.Sf
      },
      render: function (a, c, b, e) {
        if (!this.Sf) {
          var g = document.createElement("div");
          g.className = this.ij;
          this.Sf = $(g)
        }
        var g = e ? $(this.Sf[0].cloneNode()) : this.Sf,
          h = this.Se(b, c),
          l = JSON.stringify(h);
        l !== g.Kz && (g.css(h), g.Kz = l);
        if (this.oe = this.oe || this.createInnerElement()) {
          var k = e ? $(this.oe[0].cloneNode(!0)) : this.oe;
          k !== this.oe && (this.refresh && this.refresh(), k[0].value = this.oe[0].value, this.oe[0].checked && (k[0].checked = !0));
          document.activeElement === k[0] && k.trigger("focusout");
          b = this.yc(b);
          l = JSON.stringify(b);
          l !== k.Kz && (this.Hp(k[0], b), k.Kz = l);
          this.Rw || (this.Ch(c), this.Rw = !0)
        }
        if (this.Sf[0].parentNode !==
          a[0])
          for (a[0].appendChild(g[0]), a = 0; a < this.oe.length; ++a) c = 0 === a ? k[0] : e ? this.oe[a].cloneNode(!0) : this.oe[a], g[0].appendChild(c)
      },
      Tv: function () {
        this.Sf && (this.Sf.remove(), this.Rw = !1)
      }
    };
    e.HTMLAnnotation.prototype = $.extend(Object.create(e.Annotation.prototype), e.HTMLAnnotation.prototype, a.Actions.nh.prototype);
    Object.defineProperties(e.HTMLAnnotation.prototype, {
      rect: {
        get: function () {
          return this.we()
        },
        set: function (a) {
          this.Gl(a)
        }
      },
      element: {
        get: function () {
          return this.wF()
        }
      },
      innerElement: {
        get: function () {
          return this.CF()
        }
      },
      hidden: {
        get: function () {
          return this.us
        },
        set: function (a) {
          this.If(!a)
        }
      },
      StrokeColor: {
        get: function () {
          return this.Bk
        },
        set: function (a) {
          this.Bk = new e.Color(a)
        }
      },
      border: {
        get: function () {
          return this.ks
        },
        set: function (a) {
          this.ks.set(a)
        }
      },
      backgroundColor: {
        get: function () {
          return this.hs
        },
        set: function (a) {
          this.hs = new e.Color(a)
        }
      },
      actions: {
        get: function () {
          return this.lj()
        }
      },
      rotation: {
        get: function () {
          return this.rx
        },
        set: function (a) {
          this.rx = Number(a)
        }
      }
    })
  })(window);
  (function (a) {
    var e = a.Annotations || {};
    e.kd = function (a) {
      e.HTMLAnnotation.call(this, a);
      this.Listable = !1
    };
    e.kd.prototype = Object.create(e.HTMLAnnotation.prototype);
    e.kd.prototype.elementName = "link";
    e.kd.prototype.createInnerElement = function () {
      var a = document.createElement("span");
      a.className = "link";
      a.setAttribute("tabindex", 0);
      return $(a)
    };
    e.kd.prototype.Ch = function () {
      e.HTMLAnnotation.prototype.Ch.apply(this, arguments);
      var a = this;
      this.innerElement.on("tap", function () {
        a.trigger("mouseup")
      })
    };
    e.kd.prototype.xG =
      function () {
        return !0
      };
    e.kd.prototype.qq = function () {
      var d = a.Annotations.O.ub.Events;
      return $.extend(e.HTMLAnnotation.prototype.qq.call(this), {
        U: {
          triggers: "tap",
          internal_name: "mouseup",
          getEvent: function () {
            return d.kd.create("Mouse Up")
          }
        }
      })
    };
    e.kd.prototype.Se = function (a, c) {
      var b = e.HTMLAnnotation.prototype.Se.apply(this, arguments),
        f = {};
      if (this.StrokeThickness && this.StrokeColor) {
        var g = this.StrokeStyle,
          h = "border";
        "underline" === g && (h = "border-bottom");
        "solid" !== g && "dashed" !== g && "inset" !== g && (g = "solid");
        var l =
          c.u.Oc(this.Kb());
        f[h] = e.sa.ht(l, this.StrokeThickness) * a + "px " + g + " " + this.StrokeColor.toHexString()
      }
      return $.extend(b, f)
    };
    e.kd.prototype.deserialize = function (a, c, b) {
      e.HTMLAnnotation.prototype.deserialize.call(this, a, c, b);
      var f = e.ba.hj(a.getAttribute("color"));
      f && (this.StrokeColor = f);
      f = a.getAttribute("width");
      "undefined" !== typeof f && null !== f && (this.StrokeThickness = parseFloat(f));
      f = a.getAttribute("style");
      "undefined" !== typeof f && null !== f && (this.StrokeStyle = f);
      this.tD(a, c, b)
    };
    e.kd.prototype.serialize =
      function (a, c) {
        e.HTMLAnnotation.prototype.serialize.call(this, a, c);
        this.StrokeColor && a.setAttribute("color", this.StrokeColor.toHexString());
        "undefined" !== typeof this.StrokeThickness && null !== this.StrokeThickness && a.setAttribute("width", this.StrokeThickness);
        this.StrokeStyle && a.setAttribute("style", this.StrokeStyle);
        this.AS(a, c);
        return a
      }
  })(window);
  (function (a) {
    var e = a.Annotations || {};
    e.$j = function () {
      e.Annotation.call(this);
      this._isOpen = !1;
      this.Id = null;
      this.NoRotate = this.NoZoom = this.Printable = !0;
      this.DateModified = null
    };
    e.$j.prototype = {
      elementName: "popup",
      isOpen: function () {
        return this._isOpen
      },
      pI: function (a) {
        this._isOpen = a
      },
      serialize: function (a) {
        a = e.Annotation.prototype.serialize.apply(this, arguments);
        this.isOpen() && a.setAttribute("open", "yes");
        return a
      },
      deserialize: function (a) {
        this.Printable = !1;
        e.Annotation.prototype.deserialize.apply(this,
          arguments);
        var c = a.getAttribute("open");
        this.pI(c && "yes" === c)
      }
    };
    e.$j.prototype = $.extend(new e.Annotation, e.$j.prototype)
  })(window);
  (function (a) {
    var e = a.Annotations || {},
      d = e.sa || {};
    e.WidgetAnnotation = function (a, b) {
      e.HTMLAnnotation.call(this, b);
      if (!a) throw Error("Please set the field properly in the widget constructor");
      this._value = null;
      this.Ia = a;
      this.ym = null;
      a.hM(this, b ? b.index : void 0);
      this.IsAdded = !1;
      this.gV = new Date;
      this.cD = "Left-justified";
      this.Listable = !1;
      this.iC = "";
      this.Qw = {};
      this.lC = {
        Normal: "",
        Rollover: "",
        Down: ""
      };
      this.ms = !1;
      this.bc = new e.Ii({
        mask: "Invisible Hidden NoPrint NoZoom NoRotate NoView ReadOnly Locked ToggleNoView LockedContents".split(" ")
      });
      this["_xsi:type"] = "Widget";
      this.Subject = this["_xsi:type"];
      this.set(b);
      var d = this;
      this.on("commit", _.bind(this.Vx, this));
      this.on("change", function (b, a) {
        d.jI();
        d.ng(a);
        d.trigger("commit")
      });
      this.on("blur", function () {
        d.fieldFlags.get("ReadOnly") || d.Db(d.Ia.value);
        d.refresh()
      });
      this.on("focus", function () {
        d.fieldFlags.get("ReadOnly") || d.ng(d.Ia.value);
        d.refresh()
      })
    };
    e.WidgetAnnotation.prototype = {
      elementName: "widget",
      Ml: null,
      Eh: function (a) {
        if (!e.Annotation.prototype.Eh.call(this, a) || !this.Ml) return !1;
        a =
          e.ba.getAttribute(a, "FT");
        return this.Ml === a
      },
      Ph: function () {
        for (var a = "", b = Object.keys(this.appearances), d = 0; d < b.length; ++d) {
          var e = b[d];
          if ("Off" !== e) {
            a = e;
            break
          }
        }
        return a
      },
      fg: function (a) {
        this.ng(a)
      },
      jI: function () {
        this.ms = !0
      },
      set: function (a) {
        if (_.isObject(a)) {
          _.isUndefined(a.value) || (this.value = String(a.value));
          _.isUndefined(a.flags) || (this.bc.set(a.flags), this.bc.get("Hidden") && this.If(!1), this.bc.get("NoView") && this.If(!1));
          if (!_.isUndefined(a.captions)) {
            var b = a.captions,
              d = this.lC;
            Object.keys(b).forEach(function (a) {
              d[a] =
                b[a]
            })
          }
          _.isUndefined(a.page) || (this.PageNumber = a.page);
          _.isUndefined(a.quadding) || (this.quadding = a.quadding);
          _.isUndefined(a.appearances) || (this.Qw = a.appearances);
          _.isUndefined(a.appearance) || (this.appearance = a.appearance);
          _.isUndefined(a.rotation) || (this.rotation = a.rotation);
          _.isUndefined(a.font) || (this.font = a.font)
        }
      },
      Se: function (a) {
        var b = e.HTMLAnnotation.prototype.Se.apply(this, arguments),
          b = $.extend(b, this.font.aB(a));
        this.fieldFlags.get("Required") && (b.border = 1.5 * a + "px solid red");
        return $.extend(b,
          this.DO())
      },
      yc: function () {
        var a = e.HTMLAnnotation.prototype.yc.apply(this, arguments);
        return $.extend(a, {
          "text-align": {
            "Left-justified": "left",
            Centered: "center",
            "Right-justified": "right"
          } [this.quadding]
        })
      },
      DO: function () {
        var a = e.WidgetAnnotation.getContainerCustomStyles;
        return a && a(this)
      },
      Vk: function () {
        var a = e.WidgetAnnotation.getCustomStyles;
        return a && a(this)
      },
      CD: function () {
        function a(b) {
          b.scale && 1 !== b.scale && b.preventDefault();
          b.stopPropagation()
        }
        var b = this.oe[0];
        b.addEventListener("touchstart", a, {
          Wq: !1
        });
        b.addEventListener("touchmove", a, {
          Wq: !1
        });
        b.addEventListener("touchend", a, {
          Wq: !1
        });
        b.addEventListener("mousedown", a, {
          Wq: !1
        });
        b.addEventListener("mousemove", a, {
          Wq: !1
        });
        b.addEventListener("mouseup", a, {
          Wq: !1
        })
      },
      xj: function () {
        return !0
      },
      Xa: function () {
        return this._value
      },
      Db: function (c) {
        c = a.Annotations.O.ub.Events.fa.create("Format", this.Ia, {
          value: c
        });
        this.Ia.De("F", c);
        this.ng(c.value)
      },
      If: function (a) {
        this.bc.set("Hidden", !a);
        e.HTMLAnnotation.prototype.If.call(this, a)
      },
      render: function (a, b, f, g) {
        if (!g) {
          d.Xj =
            f;
          var h = !1;
          this.innerElement && this.element || (h = !0)
        }
        e.HTMLAnnotation.prototype.render.apply(this, arguments);
        h && !g && (this.element.attr("id", this.Ia.name), this.refresh())
      },
      ng: function (a) {
        this._value = a;
        this.refresh()
      },
      refresh: function () {
        var a = this.fieldFlags.get("Multiline"),
          b = this._value ? String(this._value) : "";
        this instanceof e.mh || this.font.jO(b, this, a);
        if (a = this.element)
          if (a[0].setAttribute("id", this.Ia.name), b = this.Se(d.Xj), this.Hp(a[0], b), a = this.innerElement) this.Ia && this.Ia.userName && a[0].setAttribute("title",
            this.Ia.userName), b = this.yc(d.Xj), this.Hp(a[0], b)
      },
      Th: function () {
        return null
      },
      deserialize: function (a, b, d) {
        e.HTMLAnnotation.prototype.deserialize.call(this, a, b);
        var g = e.ba;
        this.Ia.xI(g.getAttribute(a, "FT"));
        g.getAttribute(a, "creationdate") ? this.DateCreated = g.gy(g.getAttribute(a, "creationdate")) : this.DateCreated = null;
        this.border.deserialize(a);
        this.fieldFlags.deserialize(a);
        this.font.deserialize(a, b);
        var h = g.qn(a, "V", "value");
        this.fg(h);
        this.Ia.fg(h);
        this.defaultValue = g.qn(a, "DV", "defaultvalue");
        h =
          g.qn(a, "defaultappearance", "defaultappearance");
        h = g.mH(h);
        g.getAttribute(a, "color") ? this.StrokeColor = g.getAttribute(a, "color").split(",") : h.color && (this.StrokeColor = h.color);
        g.getAttribute(a, "BG") && (this.backgroundColor = g.getAttribute(a, "BG").split(","));
        this.rotation = g = (g = g.getAttribute(a, "rotation")) ? parseInt(g, 10) : 0;
        if (90 === g || 270 === g) g = this.Width, this.Width = this.Height, this.Height = g;
        this.tD(a, b, d)
      },
      serialize: function () {},
      zb: function () {
        return this.Ia
      },
      mI: function (a) {
        this.Ia = a;
        this.ng(this.Ia.value)
      },
      mg: function (a) {
        e.HTMLAnnotation.prototype.mg.call(this, a);
        this.Ia && this.Ia.mg(a)
      },
      ZL: function (a, b) {
        this.Ia.Ek(a, b)
      },
      Ek: function (a, b) {
        -1 !== ["K", "V", "F", "C"].indexOf(a) ? this.ZL(a, b) : e.HTMLAnnotation.prototype.Ek.call(this, a, b)
      },
      Vx: function () {
        this.Ia.trigger("commit", this.Xa(), this)
      },
      qq: function () {
        var c = a.Annotations.O.ub.Events,
          b = this;
        return $.extend(e.HTMLAnnotation.prototype.qq.call(this), {
          E: {
            triggers: "mouseenter",
            internal_name: "mouseenter",
            getEvent: function () {
              return c.fa.create("Mouse Enter", b.zb())
            }
          },
          X: {
            triggers: "mouseleave",
            internal_name: "mouseleave",
            getEvent: function () {
              return c.fa.create("Mouse Leave", b.zb())
            }
          },
          D: {
            triggers: "mousedown",
            internal_name: "mousedown",
            getEvent: function () {
              return c.fa.create("Mouse Down", b.zb())
            }
          },
          U: {
            triggers: a.utils.mouseUpEventBug ? "touchend" : "mouseup",
            internal_name: "mouseup",
            getEvent: function () {
              return c.fa.create("Mouse Up", b.zb())
            }
          },
          Bl: {
            triggers: "focusout",
            internal_name: "blur",
            getEvent: function () {
              var a = b.zb();
              return c.fa.create("Blur", a, {
                value: a.value
              })
            }
          },
          Fo: {
            triggers: "focusin",
            internal_name: "focus",
            getEvent: function () {
              return c.fa.create("Focus", b.zb())
            }
          }
        })
      },
      SP: function () {
        return !!this.ym
      },
      Ch: function () {
        e.HTMLAnnotation.prototype.Ch.apply(this, arguments);
        var c = this,
          b = this.innerElement;
        b && (b.on("focusout", function () {
            c.ms && (c.ms = !1, c.trigger("commit"));
            c.trigger("blur")
          }), b.on("focusin", function () {
            c.trigger("focus")
          }), b.on("mouseenter", function () {
            c.trigger("mouseenter")
          }), b.on("mouseleave", function () {
            c.trigger("mouseleave")
          }), b.on("mousedown", function () {
            c.trigger("mousedown")
          }),
          b.on(c.kJ ? "click" : a.utils.mouseUpEventBug ? "touchend" : "mouseup", function () {
            c.trigger("mouseup")
          }))
      }
    };
    e.WidgetAnnotation.prototype = $.extend(Object.create(e.HTMLAnnotation.prototype), e.WidgetAnnotation.prototype);
    Object.defineProperties(e.WidgetAnnotation.prototype, {
      fieldName: {
        get: function () {
          return this.Ia.name
        }
      },
      value: {
        get: function () {
          return this.Xa()
        },
        set: function (a) {
          this.Db(a)
        }
      },
      defaultValue: {
        get: function () {
          return this.Ia.defaultValue
        },
        set: function (a) {
          this.Ia.defaultValue = a
        }
      },
      fieldFlags: {
        get: function () {
          return this.Ia.flags
        }
      },
      flags: {
        get: function () {
          return this.bc
        }
      },
      font: {
        get: function () {
          return this.ym || this.Ia.font
        },
        set: function (c) {
          this.ym = new a.Annotations.Ag(c)
        }
      },
      fieldActions: {
        get: function () {
          return this.Ia.actions
        }
      },
      appearance: {
        get: function () {
          return this.iC
        },
        set: function (a) {
          this.Qw[a] ? this.iC = a : console.log("Unknown appearance: " + a)
        }
      },
      quadding: {
        get: function () {
          return this.cD
        },
        set: function (a) {
          this.cD = a
        }
      },
      appearances: {
        get: function () {
          return this.Qw
        }
      },
      captions: {
        get: function () {
          return this.lC
        }
      }
    })
  })(window);
  (function (a) {
    var e = a.Annotations || {},
      d = e.sa || {};
    e.mc = function (a, b) {
      e.WidgetAnnotation.call(this, a, b)
    };
    e.mc.prototype = {
      Ml: "Btn",
      jt: null,
      Eh: function (a) {
        if (e.WidgetAnnotation.prototype.Eh.call(this, a)) {
          var b = new e.Ii({
              mask: ["PushButton", "Radio"]
            }),
            d = "C";
          b.deserialize(a);
          b.get("PushButton") ? d = "P" : b.get("Radio") && (d = "R");
          return d === this.jt
        }
        return !1
      },
      ZH: function (c) {
        if (a.utils.isSafari && !a.utils.isIOS || a.utils.isFirefox) 16 > c.height || 16 > c.width ? (c.transform = "scale(" + Math.min(c.height, c.width) / 16 + ")", c.transformOrigin =
          "top left") : (c.transform = "", c.transformOrigin = "")
      }
    };
    e.mc.prototype = $.extend(Object.create(e.WidgetAnnotation.prototype), e.mc.prototype);
    e.Di = function (a, b) {
      e.mc.call(this, a, b)
    };
    e.Di.prototype = {
      jt: "P",
      ij: "pButton",
      yc: function () {
        return $.extend(e.mc.prototype.yc.apply(this, arguments), {
          "background-color": "transparent"
        }, this.Vk())
      },
      deserialize: function (a, b, d) {
        var g = e.ba;
        e.mc.prototype.deserialize.call(this, a, b, d);
        (a = g.getAttribute(a, "ButtonLabel")) && (this.captions.Normal = a)
      },
      Th: function () {
        return null
      },
      createInnerElement: function () {
        var a = document.createElement("button");
        a.setAttribute("tabindex", 0);
        $(a).append(this.captions.Normal);
        this.fieldFlags.get("ReadOnly") && (a.disabled = !0);
        return $(a)
      }
    };
    e.Di.prototype = $.extend(!0, Object.create(e.mc.prototype), e.Di.prototype);
    e.mh = function (a, b) {
      e.mc.call(this, a, b);
      this.KI(!1);
      var d = this;
      this.kJ = !0;
      this.on("click", function () {
        "Off" === this.Xa() ? d.trigger("change", d.Ph()) : d.trigger("change", "Off")
      })
    };
    e.mh.prototype = {
      jt: "C",
      ij: "checkBox",
      refresh: function () {
        e.WidgetAnnotation.prototype.refresh.call(this);
        var a = this.innerElement;
        a && (a.prop("checked", this.Xa() === this.Ph()), a.css(this.yc(d.Xj)))
      },
      ng: function (a) {
        a === this.Ph() ? (this.appearance = a, e.mc.prototype.ng.call(this, a)) : (this.appearance = "Off", e.mc.prototype.ng.call(this, "Off"))
      },
      yc: function () {
        var a = e.mc.prototype.yc.apply(this, arguments);
        a.left = Math.round(a.left);
        a.top = Math.round(a.top);
        this.ZH(a);
        return $.extend(a, {
          border: "none",
          margin: 0
        }, this.Vk())
      },
      Th: function () {
        var a = this.innerElement;
        if (a) return a.prop("checked") ? this.Ph() : "Off"
      },
      createInnerElement: function () {
        var a =
          document.createElement("input");
        a.type = "checkbox";
        a.setAttribute("tabindex", 0);
        this.fieldFlags.get("ReadOnly") && (a.disabled = !0);
        var b = this,
          a = $(a);
        a.on("click", function () {
          b.trigger("click")
        });
        return a
      },
      deserialize: function (a, b, d) {
        var g = e.ba.getAttribute(a, "N");
        g && (this.appearances.Off = {}, this.appearances[g] = {});
        e.mc.prototype.deserialize.call(this, a, b, d)
      }
    };
    e.mh.prototype = $.extend(!0, Object.create(e.mc.prototype), e.mh.prototype);
    Object.defineProperties(e.mh.prototype, {
      buttonName: {
        set: function (a) {
          this.jL =
            a
        },
        get: function () {
          return this.jL
        }
      }
    });
    e.ak = function (a, b) {
      e.mc.call(this, a, b);
      this.KI(!1);
      var d = this;
      this.kJ = !0;
      this.on("click", function () {
        "Off" === this.Xa() ? d.trigger("change", d.Ph()) : d.trigger("change", "Off")
      })
    };
    e.ak.prototype = {
      jt: "R",
      ij: "radioButton",
      Th: function () {
        return this.Ph()
      },
      refresh: function () {
        var a = this.innerElement;
        a && (a.prop("checked", this.Ia.Xa() === this.Th()), a.css(this.yc(d.Xj)))
      },
      yc: function () {
        var a = e.mc.prototype.yc.apply(this, arguments);
        a.left = Math.round(a.left);
        a.top = Math.round(a.top);
        this.ZH(a);
        return $.extend(a, {
          border: "none",
          margin: 0
        }, this.Vk())
      },
      ng: function (a) {
        "Off" !== a && -1 !== Object.keys(this.appearances).indexOf(a) ? (this.appearance = a, e.mc.prototype.ng.call(this, a)) : (this.appearance = "Off", e.mc.prototype.ng.call(this, "Off"))
      },
      createInnerElement: function () {
        var a = document.createElement("input");
        a.type = "radio";
        a.setAttribute("tabindex", 0);
        this.fieldFlags.get("ReadOnly") && (a.disabled = !0);
        var b = this;
        $(a).on("click", function () {
          b.trigger("click")
        });
        return $(a)
      },
      deserialize: function (a,
        b, d) {
        var g = e.ba.getAttribute(a, "N");
        g && (this.appearances.Off = {}, this.appearances[g] = {});
        e.mc.prototype.deserialize.call(this, a, b, d)
      }
    };
    e.ak.prototype = $.extend(!0, Object.create(e.mc.prototype), e.ak.prototype)
  })(window);
  (function (a) {
    var e = a.Annotations || {},
      d = e.sa || {},
      c, b;
    e.ra = function () {
      e.Annotation.call(this);
      this.Pf = new e.Color(0, 0, 0, 0);
      this._opacity = this.Li = 1;
      this.sC = new Date;
      this.Ms = null
    };
    e.ra.prototype = {
      Ec: function (b, a) {
        null !== this.Opacity && (b.globalAlpha = this.Opacity);
        null !== this.FillColor && (b.fillStyle = this.FillColor.toString());
        null !== this.StrokeColor && (b.strokeStyle = this.StrokeColor.toString());
        b.lineWidth = 0 === this.StrokeThickness ? .001 : this.mj(a)
      },
      TT: function () {
        var a = this.X + this.ya() + 2 * this.StrokeThickness +
          100,
          d = this.Y + this.xa() + 2 * this.StrokeThickness + 100;
        c = c || document.createElement("canvas").getContext("2d");
        c.canvas.width = a;
        c.canvas.height = d;
        b = b || document.createElement("canvas").getContext("2d");
        b.canvas.width = a;
        b.canvas.height = d
      },
      RN: function (a, d) {
        this.TT();
        this.Ec(c, d);
        c.globalAlpha = 1;
        this.Lh(c);
        c.stroke();
        this.Ec(b, d);
        b.globalAlpha = 1;
        this.Lh(b);
        b.fill();
        c.globalCompositeOperation = "source-out";
        c.drawImage(b.canvas, 0, 0);
        this.Ec(a, d);
        a.globalCompositeOperation = "source-over";
        a.drawImage(c.canvas, 0,
          0);
        this.Lh(a);
        a.stroke()
      },
      qy: function (b, a) {
        b.beginPath();
        1 !== this.Opacity && null !== this.Opacity ? this.RN(b, a) : (this.Ec(b, a), this.Lh(b), b.fill(), b.stroke())
      },
      Lh: function () {},
      LF: function () {
        return this.Ms
      },
      sI: function (b) {
        this.Ms = b
      },
      mj: function (b) {
        return e.sa.ht(b, this.StrokeThickness)
      },
      serialize: function (b, a) {
        var c = e.Annotation.prototype.serialize.apply(this, arguments),
          d = e.ba,
          k = {},
          m = d.lg(this.FillColor);
        null !== m && (k["interior-color"] = m);
        _.isUndefined(this.StrokeThickness) || _.isNull(this.StrokeThickness) ||
          (m = this.StrokeThickness, 1 !== m && (k.width = m));
        _.isUndefined(this.Opacity) || _.isNull(this.Opacity) || 1 === this.Opacity || (k.opacity = this.Opacity);
        (m = this.fringe) && !m.DG() && (k.fringe = e.ba.EA(this.fringe, a));
        if (m = this.DateCreated) {
          var n;
          this.aA && (m.getTime() === this.cH ? n = this.aA : (delete this.aA, delete this.cH));
          n || (n = d.bB(m));
          k.creationdate = n
        }
        this.kc(c, "style", "solid");
        this.kc(c, "dashes", "3");
        this.kc(c, "IT");
        this.kc(c, "inreplyto");
        this.kc(c, "replyType");
        for (var r in k) c.setAttribute(r, k[r]);
        !this.Ms || this instanceof
        e.Ja || (d = document.createElementNS("", "popup"), d = this.Ms.serialize(d, a), c.appendChild(d));
        return c
      },
      deserialize: function (b, a, c) {
        e.Annotation.prototype.deserialize.apply(this, arguments);
        var d = e.ba,
          k = b.getAttribute("opacity");
        this.Opacity = "undefined" !== typeof k && null !== k ? parseFloat(k) : 1;
        k = b.getAttribute("width");
        if (null !== this.StrokeThickness || "undefined" !== typeof k && null !== k) this.Li = parseFloat(k || "1");
        this.Dc(b, "style");
        this.Dc(b, "dashes");
        this.Dc(b, "IT");
        this.Dc(b, "inreplyto");
        this.Dc(b, "replyType");
        this.cA = k = b.getAttribute("fringe");
        "undefined" !== typeof k && null !== k && (this.fringe = d.xE(k, a));
        k = d.hj(b.getAttribute("interior-color"));
        null !== k ? this.FillColor = k : null !== this.FillColor && (this.FillColor = new e.Color(0, 0, 0, 0));
        (k = b.getAttribute("creationdate")) ? (this.aA = k, d = d.gy(k), this.cH = d.getTime(), this.DateCreated = d) : this.DateCreated = null;
        d = b.getElementsByTagName("popup");
        0 < d.length && (k = new e.$j, k.deserialize(d[0], a, c), this.sI(k))
      },
      selectionModel: e.oa,
      cG: !0
    };
    e.ra.prototype = $.extend(!0, new e.Annotation,
      e.ra.prototype);
    Object.defineProperties(e.ra.prototype, {
      FillColor: {
        get: function () {
          return this.Pf
        },
        set: function (b) {
          b instanceof e.Color && (this.Pf = b, this.lb())
        }
      },
      StrokeColor: {
        get: function () {
          return this.Ki
        },
        set: function (b) {
          b instanceof e.Color && (this.Ki = b, this.lb())
        }
      },
      StrokeThickness: {
        get: function () {
          return this.Li
        },
        set: function (b) {
          this.Li = parseFloat(b);
          this.lb();
          this.adjustRect()
        }
      },
      Opacity: {
        get: function () {
          return this._opacity
        },
        set: function (b) {
          this._opacity = parseFloat(b);
          this.lb()
        }
      },
      DateCreated: {
        get: function () {
          return this.sC
        },
        set: function (b) {
          this.sC = d.uF(b)
        }
      }
    })
  })(window);
  (function (a) {
    var e = a.Annotations || {};
    e.yg = function (d, c) {
      var b = this;
      b.on("change", function (c, d) {
        var e = a.Annotations.O.ub.Events.fa.create("Keystroke", b.Ia, {
          value: d,
          change: "",
          willCommit: !1,
          selStart: -1,
          selEnd: -1
        });
        b.Ia.De("K", e)
      });
      e.WidgetAnnotation.call(this, d, c)
    };
    e.yg.FORCE_SELECT = !1;
    e.yg.prototype = {
      Ml: "Ch",
      ij: "choice",
      Ch: function () {
        e.WidgetAnnotation.prototype.Ch.apply(this, arguments);
        this.CD()
      },
      Eh: function (a) {
        if (e.WidgetAnnotation.prototype.Eh.call(this, a)) {
          var c = new e.Ii({
            mask: ["Combo"]
          });
          c.deserialize(a);
          if (c.get("Combo")) return !0
        }
        return !1
      },
      deserialize: function (a, c, b) {
        e.WidgetAnnotation.prototype.deserialize.call(this, a, c, b);
        c = e.ba;
        c.getAttribute(a, "Opt") && (a = c.getAttribute(a, "Opt"), this.Ia.options = a.split(",").map(function (b) {
          return {
            value: b,
            displayValue: b
          }
        }), this.zb().fg(this.Xa()), this.fg(this.zb().Xa()))
      },
      Se: function () {
        return $.extend(e.WidgetAnnotation.prototype.Se.apply(this, arguments), {
          "overflow-y": "visible",
          "overflow-x": "hide",
          "z-index": "36"
        })
      },
      yc: function (a) {
        return $.extend(e.WidgetAnnotation.prototype.yc.apply(this,
          arguments), {
          resize: "none",
          "min-height": "",
          height: this.nu(a)
        }, this.Vk())
      },
      refresh: function () {
        e.WidgetAnnotation.prototype.refresh.apply(this, arguments);
        var a = this.innerElement,
          c = this.Xa();
        a && a.val(c)
      },
      Th: function () {
        var a = this.innerElement;
        if (a) return a.val()
      },
      createInnerElement: function () {
        function d() {
          c(50, h.length);
          l.off("mousedown", null, d);
          l.off("touchend", null, d)
        }

        function c(b, a) {
          for (var c = document.createDocumentFragment(), d = b; d < a; ++d) {
            var e = h[d],
              g = document.createElement("OPTION");
            g.text = _.isUndefined(e.displayValue) ?
              e.value : e.displayValue;
            g.value = e.value;
            c.appendChild(g)
          }
          f.appendChild(c)
        }
        var b, f, g = this;
        !g.fieldFlags.get("Edit") || a.utils.isSafari || 9 === a.utils.ie || e.yg.FORCE_SELECT ? f = b = document.createElement("select") : (b = document.createElement("input"), b.setAttribute("list", g.fieldName + "_list"), $(b).on("focus", function () {
          this.value = ""
        }), f = document.createElement("datalist"), f.id = g.fieldName + "_list");
        g.fieldFlags.get("ReadOnly") && (b.disabled = !0);
        var h = g.options,
          l = f === b ? $(b) : $([b, f]);
        50 < h.length ? (c(0, 50), l.on("mousedown",
          d), l.on("touchend", d)) : c(0, h.length);
        l.on("change", function () {
          g.trigger("change", [g.Th()])
        });
        return l
      }
    };
    e.yg.prototype = $.extend(Object.create(e.WidgetAnnotation.prototype), e.yg.prototype);
    Object.defineProperties(e.yg.prototype, {
      options: {
        get: function () {
          return this.Ia.options
        }
      }
    })
  })(window);
  (function (a) {
    var e = a.Annotations || {};
    e.zi = function (a, c) {
      e.WidgetAnnotation.call(this, a, c)
    };
    e.zi.prototype = {
      Ml: "Ch",
      ij: "list",
      refresh: function () {
        e.WidgetAnnotation.prototype.refresh.apply(this, arguments);
        var a = this.innerElement;
        a && (a[0].value = this.Xa())
      },
      Eh: function (a) {
        if (e.WidgetAnnotation.prototype.Eh.call(this, a)) {
          var c = new e.Ii({
            mask: "Combo"
          });
          c.deserialize(a);
          if (!c.get("Combo")) return !0
        }
        return !1
      },
      deserialize: function (a, c, b) {
        e.WidgetAnnotation.prototype.deserialize.call(this, a, c, b);
        c = e.ba;
        c.getAttribute(a,
          "Opt") && (a = c.getAttribute(a, "Opt"), this.Ia.options = a.split(",").map(function (b) {
          return {
            value: b,
            displayValue: b
          }
        }), this.zb().fg(this.Xa()), this.fg(this.zb().Xa()))
      },
      Se: function () {
        return $.extend(e.WidgetAnnotation.prototype.Se.apply(this, arguments), {
          "overflow-y": "auto",
          "overflow-x": "hidden"
        })
      },
      Th: function () {
        var a = this.innerElement;
        return a ? a.val() : null
      },
      yc: function () {
        return $.extend(e.WidgetAnnotation.prototype.yc.apply(this, arguments), {
          "overflow-y": "scroll",
          "overflow-x": "hidden"
        }, this.Vk())
      },
      createInnerElement: function () {
        var a =
          document.createElement("select");
        a.name = this.fieldName.replace(/\.|\s/g, "_");
        a.setAttribute("size", this.options.length);
        this.options.forEach(function (b) {
          var c = _.isUndefined(b.displayValue) ? b.value : b.displayValue,
            e = document.createElement("option");
          e.value = b.value;
          e.innerHTML = c;
          a.appendChild(e)
        });
        this.fieldFlags.get("ReadOnly") && (a.disabled = !0);
        this.fieldFlags.get("MultiSelect") && (a.multiple = !0);
        var c = this;
        $(a).on("change", function () {
          c.trigger("change", [c.Th()])
        });
        return $(a)
      }
    };
    e.zi.prototype = $.extend(Object.create(e.WidgetAnnotation.prototype),
      e.zi.prototype);
    Object.defineProperties(e.zi.prototype, {
      options: {
        get: function () {
          return this.Ia.options
        }
      }
    })
  })(window);
  (function (a) {
    var e = a.Annotations || {};
    e.fk = function (a, c) {
      e.WidgetAnnotation.call(this, a, c)
    };
    e.fk.prototype = {
      Ml: "Sig",
      ij: "signature",
      deserialize: function (a, c, b) {
        e.WidgetAnnotation.prototype.deserialize.call(this, a, c, b);
        a = a.getElementsByTagName("imagedata");
        0 < a.length && (this.appearances._DEFAULT = {
          Normal: a[0].textContent
        }, this.appearance = "_DEFAULT")
      },
      yc: function () {
        var a = e.WidgetAnnotation.prototype.yc.apply(this, arguments);
        return $.extend(a, {
          width: a.width,
          height: a.height
        }, this.Vk())
      },
      createInnerElement: function () {
        var a =
          new Image,
          c = this.appearances[this.appearance];
        c && (c = c.Normal, a.src = c && c.data || "");
        return $(a)
      }
    };
    e.fk.prototype = $.extend(Object.create(e.WidgetAnnotation.prototype), e.fk.prototype)
  })(window);
  (function (a) {
    var e = a.Annotations || {},
      d = e.sa || {};
    e.kk = function (a, b) {
      e.WidgetAnnotation.call(this, a, b);
      this.fieldFlags.$p(["Multiline", "DoNotScroll", "Password"]);
      this.ms = !1;
      this.mf = this.Ia.maxLen
    };
    e.kk.prototype = {
      Ml: "Tx",
      ij: "text",
      Ch: function () {
        e.WidgetAnnotation.prototype.Ch.apply(this, arguments);
        this.CD()
      },
      refresh: function (a) {
        e.WidgetAnnotation.prototype.refresh.call(this);
        var b = this.innerElement;
        if (b)
          if (this.fieldFlags.get("ReadOnly")) b[0].innerHTML = this.value;
          else {
            var d, g;
            a && (d = this.innerElement[0].selectionStart,
              g = this.innerElement[0].selectionEnd);
            this.innerElement[0].value = this.value || "";
            a && this.innerElement[0].setSelectionRange(d, g)
          }
      },
      Se: function () {
        return e.WidgetAnnotation.prototype.Se.apply(this, arguments)
      },
      yc: function () {
        var a = e.WidgetAnnotation.prototype.yc.apply(this, arguments),
          b = {
            "word-wrap": "break-word",
            resize: "none",
            "background-color": "transparent",
            "overflow-y": this.fieldFlags.get("Multiline") ? "auto" : "hidden",
            "overflow-x": "hidden"
          };
        if (this.fieldFlags.get("Comb")) {
          var f = e.WidgetAnnotation.prototype.Se.apply(this,
              arguments),
            f = d.DP("1", f["font-size"] + " " + f["font-family"]),
            g = a.width / this.mf;
          b["margin-left"] = .2 * g + "px";
          b["letter-spacing"] = g - f + "px"
        }
        return $.extend(a, b, this.Vk())
      },
      Hp: function (a, b) {
        e.WidgetAnnotation.prototype.Hp.apply(this, arguments);
        if (this.Fz() && b["font-size"] && a.value) {
          var d = a.style.overflowY;
          a.style.overflowY = "hidden";
          a.offsetHeight;
          a.style.overflowY = d
        }
      },
      Fz: function () {
        return 0 === this.font.size
      },
      yQ: function () {
        return this.Fz() && this.font.Ni === this.font.XC
      },
      Th: function () {
        var a = this.innerElement;
        if (a) return this.fieldFlags.get("ReadOnly") ? a.text() : a.val()
      },
      TO: function (a, b) {
        if (a !== b) {
          for (var d = 0; a.charAt(d) === b.charAt(d);) d++;
          for (var e = 0; a.charAt(a.length - 1 - e) === b.charAt(b.length - 1 - e) && e + d < a.length && e + d < b.length;) e++;
          var h, l = 0;
          a.length !== d + e && (l = a.length - e - d, h = "");
          b.length !== d + e && (h = b.slice(d, b.length - e));
          return {
            result: h,
            start: d,
            end: d + l
          }
        }
      },
      createInnerElement: function () {
        function c() {
          setTimeout(function () {
            g.refresh(!0)
          }, 0)
        }

        function b(b) {
          return g.Fz() && (!g.yQ() || b)
        }

        function e(b, a) {
          b.preventDefault();
          a.value = g.Xa();
          a.style.overflowY = "hidden";
          a.offsetHeight;
          a.style.overflowY = "auto"
        }
        var g = this,
          h = this.fieldFlags,
          l = h.get("Multiline"),
          k = h.get("ReadOnly"),
          m = h.get("DoNotScroll"),
          n;
        k ? (n = document.createElement("div"), n.className = "text") : (l ? n = document.createElement("textarea") : (n = document.createElement("input"), n.type = "text"), 0 < this.mf && n.setAttribute("maxlength", this.mf));
        d.VN(n, function (h) {
          var k = 0,
            v = 0,
            p = h.change,
            u = g.Xa() || "";
          if (!h.wG) {
            v = g.TO(u, p);
            if (!v) return;
            h.change = v.result;
            k = v.start;
            v = v.end
          }
          p = a.Annotations.O.ub.Events;
          k = p.fa.create("Keystroke", g.zb(), {
            value: h.wG ? "" : u,
            change: h.change,
            selStart: k,
            selEnd: v,
            willCommit: !1
          });
          g.Ia.De("K", k);
          k.rc ? (k = p.tn(k), u = null !== g._value && k.length < g._value.length, v = !0, m ? l ? b(u) ? c() : n.scrollHeight - 1 >= Math.ceil($(n).innerHeight()) && (v = !1) : u ? (v = !0, b(u) && c()) : b(u) ? c() : v = d.measureText(k || " ", n.parentNode.style.fontSize, n.parentNode.style.fontFamily, n.parentNode.style.fontWeight).width < $(n).width() : b(u) && c(), 0 < g.mf && (v = v && k.length <= g.mf), v ? (g._value = k, document.activeElement === n ? g.jI() : g.trigger("commit")) :
            e(h, n)) : e(h, n)
        }, !l);
        return $(n)
      }
    };
    e.kk.prototype = $.extend(Object.create(e.WidgetAnnotation.prototype), e.kk.prototype)
  })(window);
  (function (a) {
    var e = a.Annotations || {};
    e.Ii = function (a) {
      this.Ah = {};
      this.Fm = null;
      this.xp = 0;
      _.isObject(a) && _.isArray(a.mask) && this.$p(a.mask)
    };
    e.Ii.prototype = {
      xi: {
        ReadOnly: 1,
        Required: 2,
        NoExport: 4,
        Multiline: 4096,
        Password: 8192,
        NoToggleToOff: 16384,
        Radio: 32768,
        PushButton: 65536,
        Combo: 131072,
        Edit: 262144,
        DoNotScroll: 8388608,
        RadiosInUnison: 33554432
      },
      clear: function () {
        this.Ah = {}
      },
      $p: function (a) {
        _.isNull(this.Fm) && (this.Fm = {});
        for (var c = a.length, b = 0; b < c; ++b) {
          var e = a[b];
          this.Fm[e] = this.xi[e] || 0
        }
      },
      rN: function (a) {
        var c = [],
          b = this.Fm || this.xi;
        Object.keys(b).forEach(function (e) {
          0 !== (a & b[e]) && (a &= ~b[e], c.push(e))
        });
        return {
          result: c,
          sU: a
        }
      },
      get: function (a) {
        return !!this.Ah[a]
      },
      oU: function () {
        var a = 0,
          c;
        for (c in this.Ah) this.Ah.hasOwnProperty(c) && !0 === this.Ah[c] && (a |= this.xi[c]);
        return a | this.xp
      },
      toArray: function () {
        var a = this;
        return Object.keys(this.Ah).filter(function (c) {
          return a.Ah[c]
        })
      },
      deserialize: function (a) {
        a = e.ba.getAttribute(a, "Ff");
        this.set(parseInt(a, 10))
      },
      serialize: function (a) {
        a.setAttribute("Ff", String(this.oU()))
      },
      set: function (a, c) {
        if (_.isArray(a))
          for (var b = a.length, e = 0; e < b; ++e) this.set(a[e]);
        else _.isNumber(a) ? (b = this.rN(a), this.xp |= b.sU, this.set(b.result)) : _.isString(a) && (b = !0, _.isUndefined(c) || (b = !!c), this.Fm ? _.isUndefined(this.Fm[a]) ? this.xp |= this.xi[a] || 0 : this.Ah[a] = b : this.Ah[a] = b)
      }
    }
  })(window);
  (function (a) {
    var e = a.Annotations || {};
    e.No = function () {
      e.ra.call(this);
      this["_xsi:type"] = "Caret";
      this.Subject = e.sa.wc("caret");
      this.StrokeThickness = 0;
      this.Pf = null
    };
    e.No.prototype = {
      elementName: "caret",
      draw: function (d, c) {
        this.Ec(d, c);
        var b = this.Width,
          f = this.Height,
          g = Number(this.Rotation);
        if (90 === g || 270 === g) g = b, b = f, f = g;
        d.translate(this.X, this.Y);
        d.rotate(-this.Rotation * Math.PI / 180);
        g = a.utils.getRotationOffsets((360 - this.Rotation) % 360, this.Width, this.Height);
        d.translate(-g.dx, -g.dy);
        d.translate(-this.X,
          -this.Y);
        d.beginPath();
        d.fillStyle = this.StrokeColor.toString();
        b = new e.Rect(this.X, this.Y, this.X + b, this.Y + f);
        g = (b.x1 + b.x2) / 2;
        f = b.y1 + 3 * f / 4;
        d.moveTo(g, b.y1);
        d.quadraticCurveTo(g, f, b.x1, b.y2);
        d.lineTo(b.x2, b.y2);
        d.quadraticCurveTo(g, f, g, b.y1);
        d.closePath();
        d.fill();
        d.stroke()
      },
      selectionModel: e.oa,
      deserialize: function (a) {
        e.ra.prototype.deserialize.apply(this, arguments);
        var c = Number(this.Rotation);
        if (90 === c || 270 === c) c = this.Width, this.Width = this.Height, this.Height = c;
        this.StrokeThickness = 0;
        this.Dc(a, "symbol")
      },
      serialize: function (a) {
        var c = Number(this.Rotation),
          b;
        if (90 === c || 270 === c) b = this.Width, this.Width = this.Height, this.Height = b;
        e.ra.prototype.serialize.apply(this, arguments);
        if (90 === c || 270 === c) b = this.Width, this.Width = this.Height, this.Height = b;
        this.kc(a, "symbol");
        a.removeAttribute("width");
        return a
      }
    };
    e.No.prototype = $.extend(new e.ra, e.No.prototype)
  })(window);
  (function (a) {
    var e = a.Annotations || {};
    e.Wl = function () {
      e.ra.call(this);
      this["_xsi:type"] = "Ellipse";
      this.Subject = e.sa.wc("ellipse");
      var a = this.getRectPadding();
      this.fringe = new e.Rect(a, a, a, a)
    };
    e.Wl.prototype = {
      elementName: "circle",
      draw: function (a, c) {
        this.qy(a, c)
      },
      Lh: function (a) {
        var c = this.X + this.fringe.x1,
          b = this.Y + this.fringe.y1,
          e = this.ya() - this.fringe.x1 - this.fringe.x2,
          g = this.xa() - this.fringe.y1 - this.fringe.y2,
          h = Math.min(e, g);
        a.lineWidth >= h && (a.lineWidth = h - 1);
        a.lineWidth *= 2;
        h = e / g;
        isNaN(h) || Infinity ===
          h || (a.save(), a.translate(c + (1 - h) * e / 2, b), a.scale(h, 1), a.beginPath(), a.arc(.5 * e, .5 * g, Math.max(.5 * g, 0), 0, 2 * Math.PI, !1), a.closePath(), a.restore(), a.clip())
      },
      getRectPadding: function () {
        return 0
      },
      selectionModel: e.oa
    };
    e.Wl.prototype = $.extend(new e.ra, e.Wl.prototype)
  })(window);
  (function (a) {
    var e = a.Annotations || {};
    e.FreeHandAnnotation = function () {
      e.ra.call(this);
      this.Ga = [];
      this.LeftMost = Infinity;
      this.RightMost = 0;
      this.TopMost = Infinity;
      this.BottomMost = 0;
      this.Za = {
        x: 0,
        y: 0
      };
      this.wb = {
        x: 0,
        y: 0
      };
      this.ys = !1;
      this["_xsi:type"] = "Free Hand";
      this.Subject = e.sa.wc("freeHand");
      this.Fg = this.Pf = null
    };
    e.FreeHandAnnotation.opacityCap = .7;
    e.FreeHandAnnotation.oc = {
      InkHighlight: "InkHighlight"
    };
    e.FreeHandAnnotation.prototype = {
      elementName: "ink",
      shouldSimplifyPath: !1,
      dc: function (a, c, b) {
        "undefined" ===
        typeof b && (b = 0);
        if (b === this.Ga.length) this.Ga.push([]);
        else if (b > this.Ga.length) {
          console.warn("FreeHandAnnotation addPathPoint: pathIndex out of bounds.");
          return
        }
        this.LeftMost = Math.min(this.LeftMost, a);
        this.RightMost = Math.max(this.RightMost, a);
        this.TopMost = Math.min(this.TopMost, c);
        this.BottomMost = Math.max(this.BottomMost, c);
        var f = this.getRectPadding();
        this.cs = this.LeftMost - f;
        this.ds = this.TopMost - f;
        this.bs = this.RightMost - this.LeftMost + 2 * f;
        this.$r = this.BottomMost - this.TopMost + 2 * f;
        this.Ga[b].push(new e.Point(a,
          c))
      },
      Hf: function (a, c, b, e) {
        "undefined" === typeof e && (e = 0);
        var g;
        this.Ga.length > e ? (g = this.Ga[e], g.length > a ? (g[a].x = c, g[a].y = b, this.adjustRect()) : g.length === a && this.dc(c, b, e)) : this.Ga.length === e ? this.dc(c, b, e) : console.warn("FreeHandAnnotation setPathPoint: pathIndex out of bounds.")
      },
      Rh: function (a, c) {
        "undefined" === typeof c && (c = 0);
        return this.Ga && this.Ga.length > c && this.Ga[c].length > a ? this.Ga[c][a] : null
      },
      Jj: function (a) {
        "undefined" === typeof a && (a = 0);
        var c = null;
        this.Ga.length > a && (c = this.Ga[a].pop(), this.adjustRect());
        return c
      },
      getPath: function (a) {
        "undefined" === typeof a && (a = 0);
        return this.Ga.length > a ? this.Ga[a] : null
      },
      setPath: function (a, c) {
        "undefined" === typeof c && (c = 0);
        this.Ga.length < c ? console.warn("FreeHandAnnotation setPath: pathIndex out of bounds.") : this.Ga.length > c ? this.Ga[c] = a : this.Ga.length === c && this.Ga.push(a);
        this.adjustRect()
      },
      UN: function () {
        this.Ga = []
      },
      finish: function () {
        this.ys || (this.lb(), this.ys = !0)
      },
      resize: function (a) {
        var c = a.x1,
          b = a.y1,
          e = a.ya(),
          g = a.xa();
        a = b - this.Y;
        if (!(0 === c - this.X && 0 === a && e === this.Width &&
            g === this.Height || 1 > e || 1 > g)) {
          var h = a = 1;
          "undefined" !== typeof e && "undefined" !== typeof g && (a = g / this.Height, h = e / this.Width, this.Width = e, this.Height = g);
          for (e = 0; e < this.Ga.length; e++)
            for (g = 0; g < this.Ga[e].length; g++) this.Ga[e][g].x = (this.Ga[e][g].x - this.X) * h + c, this.Ga[e][g].y = (this.Ga[e][g].y - this.Y) * a + b;
          this.X = c;
          this.Y = b
        }
      },
      draw: function (a, c) {
        this.Ec(a, c);
        this.Fg === e.FreeHandAnnotation.oc.InkHighlight && a.globalAlpha > e.FreeHandAnnotation.opacityCap && (a.globalAlpha = e.FreeHandAnnotation.opacityCap);
        a.beginPath();
        for (var b = this.Yk(), f = 0; f < b.length; f++) this.Lh(a, b[f]);
        a.lineCap = "round";
        a.lineJoin = "round";
        a.stroke()
      },
      Yk: function () {
        return this.Ga
      },
      XT: function (a, c) {
        if (this.shouldSimplifyPath)
          for (var b = 0; b < this.Ga.length; b++) {
            var e = window.simplify(this.getPath(b), a, c);
            this.setPath(e, b)
          }
      },
      Lh: function (a, c) {
        var b = "undefined" === typeof c ? 0 : c.length;
        if (3 <= b) {
          a.moveTo(c[0].x, c[0].y);
          for (b = 1; b < c.length - 2; b++) a.quadraticCurveTo(c[b].x, c[b].y, (c[b].x + c[b + 1].x) / 2, (c[b].y + c[b + 1].y) / 2);
          b + 1 < c.length && a.quadraticCurveTo(c[b].x,
            c[b].y, c[b + 1].x, c[b + 1].y)
        } else 2 === b && (a.moveTo(c[0].x, c[0].y), a.lineTo(c[1].x, c[1].y))
      },
      rotate: function (d, c) {
        this.Ga.forEach(function (b) {
          for (var e = 0; e < b.length; ++e) b[e] = a.Td.Math.xS(b[e], d, c)
        });
        this.adjustRect()
      },
      lh: function (a) {
        e.Annotation.prototype.lh.apply(this, arguments);
        this.Ga.forEach(function (c) {
          for (var b = 0; b < c.length; ++b) c[b] = a.W(c[b])
        })
      },
      adjustRect: function () {
        if (0 !== this.Ga.length) {
          this.Za = {
            x: Number.MAX_VALUE,
            y: Number.MAX_VALUE
          };
          this.wb = {
            x: -Number.MAX_VALUE,
            y: -Number.MAX_VALUE
          };
          var a, c;
          for (a = 0; a < this.Ga.length; a++)
            for (c = 0; c < this.Ga[a].length; c++)
              if (null !== this.Ga[a][c]) {
                var b = this.Ga[a][c].x,
                  e = this.Ga[a][c].y;
                b > this.wb.x && (this.wb.x = b);
                e > this.wb.y && (this.wb.y = e);
                b < this.Za.x && (this.Za.x = b);
                e < this.Za.y && (this.Za.y = e)
              } a = this.getRectPadding();
          this.X = this.Za.x - a;
          this.Y = this.Za.y - a;
          this.Width = Math.max(0, this.wb.x - this.Za.x) + 2 * a;
          this.Height = Math.max(0, this.wb.y - this.Za.y) + 2 * a;
          this.Lv()
        }
      },
      getRectPadding: function () {
        return this.StrokeThickness
      },
      serialize: function (a, c) {
        for (var b = e.ra.prototype.serialize.apply(this,
            arguments), f = document.createElementNS("", "inklist"), g = this.Yk(), h = 0; h < g.length; h++)
          if (!(1 > g[h].length)) {
            var l = e.ba.mo(g[h], c),
              k = document.createElementNS("", "gesture");
            k.textContent = l;
            f.appendChild(k)
          } b.appendChild(f);
        this.Fg && (b.setAttribute("IT", this.Fg), this.Fg === e.FreeHandAnnotation.oc.InkHighlight && 0 !== this.Opacity && this.Opacity > e.FreeHandAnnotation.opacityCap && b.setAttribute("opacity", e.FreeHandAnnotation.opacityCap));
        return b
      },
      deserialize: function (a, c) {
        e.ra.prototype.deserialize.apply(this,
          arguments);
        var b = this;
        b.Ga = [];
        a.querySelectorAll("inklist gesture").forEach(function (a) {
          a = e.ba.Kk(a.textContent, c);
          a = b.shouldSimplifyPath ? window.simplify(a, .5) : a;
          b.Ga.push(a)
        });
        this.uf() || this.adjustRect();
        this.Fg = a.getAttribute("IT");
        this.Pf = null;
        this.Subject === e.sa.wc("signature") && (this.MaintainAspectRatio = !0)
      },
      selectionModel: e.oa
    };
    e.FreeHandAnnotation.prototype = $.extend(new e.ra, e.FreeHandAnnotation.prototype);
    Object.defineProperties(e.FreeHandAnnotation.prototype, {
      Intent: {
        get: function () {
          return this.Fg
        },
        set: function (a) {
          this.Fg = a;
          this.lb()
        }
      }
    })
  })(window);
  (function (a) {
    var e = a.Annotations || {};
    e.Rd = function () {
      e.ra.call(this);
      this.la = [];
      this.Za = {
        x: 0,
        y: 0
      };
      this.wb = {
        x: 0,
        y: 0
      }
    };
    e.Rd.prototype = {
      dc: function (a, c) {
        var b = this.getRectPadding();
        this.la.push(new e.Point(a, c));
        1 === this.la.length ? (this.Za = {
          x: a,
          y: c
        }, this.wb = {
          x: a,
          y: c
        }, this.X = a - b, this.Y = c - b) : (a > this.wb.x && (this.Width = a - this.Za.x + 2 * b, this.wb.x = a), c > this.wb.y && (this.Height = c - this.Za.y + 2 * b, this.wb.y = c), a < this.Za.x && (this.Width = this.wb.x - a + 2 * b, this.X = a - b, this.Za.x = a), c < this.Za.y && (this.Height = this.wb.y - c +
          2 * b, this.Y = c - b, this.Za.y = c))
      },
      lh: function (a) {
        e.Annotation.prototype.lh.apply(this, arguments);
        for (var c = this.la, b = 0; b < c.length; ++b) c[b] = a.W(c[b])
      },
      Hf: function (a, c, b) {
        this.la && this.la.length > a ? (this.la[a].x = c, this.la[a].y = b, this.adjustRect()) : this.la && this.la.length === a && this.dc(c, b);
        this.lb()
      },
      Rh: function (a) {
        return this.la && this.la.length > a ? this.la[a] : null
      },
      Jj: function () {
        var a = this.la.pop();
        this.adjustRect();
        return a
      },
      getPath: function () {
        return this.la
      },
      setPath: function (a) {
        this.la = a;
        this.adjustRect()
      },
      getRectPadding: function () {
        return this.StrokeThickness
      },
      adjustRect: function () {
        if (0 !== this.la.length) {
          this.Za = {
            x: Number.MAX_VALUE,
            y: Number.MAX_VALUE
          };
          this.wb = {
            x: -Number.MAX_VALUE,
            y: -Number.MAX_VALUE
          };
          for (var a = 0; a < this.la.length; a++)
            if (null !== this.la[a]) {
              var c = this.la[a].x,
                b = this.la[a].y;
              c > this.wb.x && (this.wb.x = c);
              b > this.wb.y && (this.wb.y = b);
              c < this.Za.x && (this.Za.x = c);
              b < this.Za.y && (this.Za.y = b)
            } a = this.getRectPadding();
          this.X = this.Za.x - a;
          this.Y = this.Za.y - a;
          this.Width = Math.max(0, this.wb.x - this.Za.x) + 2 *
            a;
          this.Height = Math.max(0, this.wb.y - this.Za.y) + 2 * a;
          this.Lv()
        }
      },
      selectionModel: e.fm
    };
    e.Rd.prototype = $.extend(new e.ra, e.Rd.prototype)
  })(window);
  (function (a) {
    var e = a.Annotations || {},
      d = e.sa || {};
    e.Ja = function (a) {
      e.Rd.call(this);
      this.la = [];
      this.Za = {
        x: 0,
        y: 0
      };
      this.wb = {
        x: 0,
        y: 0
      };
      this.ef = null;
      this["_xsi:type"] = "FreeText";
      this.StrokeThickness = 1;
      this.oo(a);
      this.Au = "left";
      this.hC = new e.Color(255, 0, 0);
      this.VB = "Helvetica";
      this.WB = "9pt";
      this.gC = "left";
      this.eC = 0;
      this.rm = 2;
      this.Subject = a !== e.Ja.oc.FreeTextCallout ? e.sa.wc("freetext") : e.sa.wc("callout")
    };
    e.Ja.EXPORT_CALCULATED_FONT_SIZE = !0;
    e.Ja.oc = {
      FreeText: "FreeText",
      FreeTextCallout: "FreeTextCallout",
      FreeTextTypeWriter: "FreeTextTypeWriter"
    };
    e.Ja.prototype = {
      elementName: "freetext",
      Oh: function () {
        return this.intent
      },
      oo: function (a) {
        this.intent = a || e.Ja.oc.FreeText;
        a !== e.Ja.oc.FreeTextCallout ? this.selectionModel = e.To : (this.Kj("OpenArrow"), this.selectionModel = e.Dr)
      },
      Kj: function (a) {
        this.Vi = a
      },
      Sh: function () {
        return this.Vi
      },
      dc: function (a, b) {
        5 > this.la.length && e.Rd.prototype.dc.call(this, a, b)
      },
      adjustRect: function () {
        this.Oh() === e.Ja.oc.FreeTextCallout && e.Rd.prototype.adjustRect.apply(this, arguments)
      },
      resize: function (a) {
        if (this.Oh() === e.Ja.oc.FreeTextCallout) {
          var b =
            a.y1 - this.Y,
            d = a.ya() / this.Width,
            g = a.xa() / this.Height;
          if (0 !== a.x1 - this.X || 0 !== b || 1 !== d || 1 !== g) {
            var h = this;
            this.la.forEach(function (b) {
              b.x = (b.x - h.X) * d + a.x1;
              b.y = (b.y - h.Y) * g + a.y1
            });
            this.adjustRect()
          }
        } else this.Gl(a), b = this.getRectPadding(), this.qo(new e.Rect(b, b, b, b))
      },
      getRectPadding: function () {
        return this.Oh() === e.Ja.oc.FreeTextCallout ? this.StrokeThickness / 2 : 0
      },
      qo: function (a) {
        var b = 0;
        this.Oh() === e.Ja.oc.FreeTextCallout && (b += this.rm + 1);
        this.la[b] = new e.Point(this.X + a.x1, this.Y + a.y2);
        this.la[b + 1] = new e.Point(this.X +
          this.Width - a.x2, this.Y + this.Height - a.y1)
      },
      Xy: function () {
        var a = this.la.slice(-2),
          b = a[0],
          a = a[1];
        return new e.Rect(b.x - this.X, this.Y + this.Height - a.y, this.X + this.Width - a.x, b.y - this.Y)
      },
      Ry: function () {
        return this.FontSize.slice(-2) || "px"
      },
      Qy: function () {
        var a = parseFloat(this.FontSize),
          b = this.Ry(a);
        0 === a && this.RB && e.Ja.EXPORT_CALCULATED_FONT_SIZE && (a = this.RB, b = "px");
        "px" === b && (a *= .75);
        return a
      },
      QU: function (a, b, d, e, h, l, k) {
        for (var m, n = e, r = a.measureText(".").width || 1, r = 2 * Math.ceil(h / r), q = b.split("\n"), v = 0; v <
          q.length; v++) {
          for (var p = q[v].split(" "), u = "", w = 0; w < p.length; w++) {
            b = p[w];
            m = a.measureText(b);
            if (m.width > h) {
              for (var A = 1, B = r, z; A <= B;)
                if (z = Math.floor((B + A) / 2), m = a.measureText(b.slice(0, z), a), m.width < h) A = z + 1;
                else if (m.width > h) B = z - 1;
              else break;
              b = b.slice(0, Math.max(1, B))
            }
            p[w] !== b && (p.splice(w + 1, 0, p[w].substr(b.length)), p[w] = b);
            b = u + p[w];
            m = a.measureText(b);
            if (m.width > h && 0 < w) {
              a.fillText(u, d, e);
              u = p[w] + " ";
              if (e - n >= l) return;
              e += k
            } else u = b + " "
          }
          a.fillText(u.slice(0, -1), d, e);
          if (e - n >= l) break;
          e += k
        }
      },
      oQ: function () {
        this.ef =
          document.createElement("textarea");
        this.ef.className = "freetext";
        this.ef.style.visibility = "hidden";
        this.ef.style.position = "absolute";
        this.ef.style.top = "-9001px";
        document.getElementsByTagName("body")[0].appendChild(this.ef)
      },
      AF: function (a) {
        return {
          OR: a + 5 + .55 * (a - 9),
          css: 1 + 5 / a
        }
      },
      draw: function (a, b) {
        this.ef || this.oQ();
        var d;
        this.Ec(a, b);
        this.Oh() === e.Ja.oc.FreeTextCallout ? (this.LN(a, b), d = this.la.length === this.rm + 3) : d = 2 === this.la.length;
        if (d) {
          d = this.CP();
          this.QN(a, d);
          var g = this.Tk();
          "undefined" !== typeof g &&
            this.PN(a, b, g, d)
        }
      },
      LN: function (a, b) {
        a.lineJoin = "miter";
        var e = this.mj(b);
        0 === e && (e = a.lineWidth = 1);
        for (var g = Math.min(this.rm + 1, this.la.length), h = 0; h < g; h++) {
          var l = this.la[h];
          0 === h ? (a.beginPath(), a.moveTo(l.x, l.y)) : a.lineTo(l.x, l.y)
        }
        1 < this.la.length && d.ky(a, this.la[0], this.la[1], e)
      },
      QN: function (a, b) {
        var d = b.x,
          e = b.y,
          h = b.width,
          l = b.height;
        a.save();
        0 < this.StrokeThickness && (a.beginPath(), a.lineWidth *= 2, a.rect(d, e, h, l), a.clip(), a.stroke());
        a.beginPath();
        a.rect(d + a.lineWidth / 2, e + a.lineWidth / 2, h - a.lineWidth,
          l - a.lineWidth);
        a.closePath();
        a.fill();
        a.restore()
      },
      PN: function (a, b, e, g) {
        var h = g.x,
          l = g.y,
          k = g.width,
          m = g.height;
        a.textBaseline = "top";
        a.fillStyle = this.TextColor.toString();
        var n = a.lineWidth;
        g = 0 + n;
        a.save();
        a.beginPath();
        a.rect(h + n, l + n, Math.max(k - 2 * n, 0), Math.max(m - 2 * n));
        a.clip();
        a.textAlign = this.TextAlign;
        if (this.Rotation) {
          a.translate(h, l);
          a.rotate(-(Math.PI / 180 * this.Rotation));
          a.translate(-h, -l);
          if (90 === this.Rotation || 270 === this.Rotation) n = k, k = m, m = n;
          90 === this.Rotation ? a.translate(-k, 0) : 270 === this.Rotation ?
            a.translate(0, -m) : 180 === this.Rotation && a.translate(-k, -m)
        }
        var n = k - 2 * g,
          m = Math.round(m - 2 * g),
          r = this.AO(b);
        b = r.lO;
        r = r.mO;
        if (0 === b) {
          this.ef.style.width = n + "px";
          this.ef.style.height = m + "px";
          this.ef.style.fontFamily = this.Font;
          e = e.replace(/\s+$/g, "");
          this.ef.value = e;
          var q = this;
          b = d.aF(e, this.ef, m, function (a) {
            return q.AF(a).css
          });
          r = "px";
          this.RB = b
        }
        var v = this.AF(b).OR,
          p = h + g;
        "center" === this.TextAlign ? p = h + k / 2 : "right" === this.TextAlign && (p = h + k - g);
        a.font = b + r + " " + this.Font;
        this.QU(a, e, p, l + g, n, m, v);
        a.restore()
      },
      AO: function (a) {
        a =
          e.sa.ht(a, parseFloat(this.FontSize));
        var b = this.Ry();
        "pt" === b && (a *= .75);
        return {
          lO: a,
          mO: b
        }
      },
      CP: function () {
        var a = this.la.slice(-2),
          b = a[0],
          a = a[1];
        return {
          x: b.x,
          y: b.y,
          width: a.x - b.x,
          height: a.y - b.y
        }
      },
      serialize: function (a, b) {
        var d = e.ra.prototype.serialize.apply(this, arguments),
          g = this.getPath(),
          h = {},
          l = e.ba.lg(this.FillColor);
        null !== l ? h.color = l : d.removeAttribute("color");
        d.removeAttribute("interior-color");
        var l = this.Qy(),
          k, m = this.Xy();
        this.$z && this.$z.isEqual(m) ? k = this.cA : (this.cA && (delete this.cA, delete this.$z),
          m.DG() || (k = e.ba.EA(m, b)));
        k && d.setAttribute("fringe", k);
        this.originalTextAlignCalculated !== this.TextAlign || this.originalTextColorCalculated !== e.ba.lg(this.TextColor) || this.originalStrokeColorCalculated !== e.ba.lg(this.StrokeColor) || this.originalFontSizeCalculated !== this.FontSize || this.originalFontCalculated !== this.Font ? (m = this.StrokeColor.nU() + " " + e.ba.HS(this.Font, l), k = e.ba.GS(this)) : (m = this.originalDefaultAppearance, k = this.originalDefaultStyle);
        var n = document.createElementNS("", "defaultappearance");
        n.textContent = m;
        d.appendChild(n);
        m = document.createElementNS("", "defaultstyle");
        m.textContent = k;
        d.appendChild(m);
        this.Au && "left" !== this.Au && (h.justification = this.Au);
        k = e.ba.lg(this.TextColor);
        null !== k && d.setAttribute("TextColor", k);
        d.setAttribute("FontSize", l);
        l = this.Oh();
        l === e.Ja.oc.FreeTextCallout && (g = e.ba.mo(g.slice(0, -2), b, ",", ","), h.callout = g, h.head = this.Sh(), d.setAttribute("IT", l));
        for (var r in h) a.setAttribute(r, h[r]);
        return d
      },
      deserialize: function (a, b) {
        this.TextColor = new e.Color(0, 0, 0);
        var d =
          e.ba;
        e.ra.prototype.deserialize.apply(this, arguments);
        null !== d.hj(a.getAttribute("color")) ? this.FillColor = this.StrokeColor : this.FillColor = new e.Color(0, 0, 0, 0);
        var g = d.qn(a, "defaultappearance", "defaultappearance"),
          h = d.qn(a, "defaultstyle", "defaultstyle"),
          l = d.mH(g);
        l.color && (this.StrokeColor = d.hj(l.color));
        l.font && (this.Font = l.font.name, this.FontSize = l.font.size);
        l = d.HR(h);
        l.font && (this.Font = l.font.name, this.FontSize = l.font.size);
        l.textAlign && (this.TextAlign = l.textAlign);
        l.color && (this.TextColor = d.hj(l.color));
        this.originalStrokeColorCalculated = d.lg(this.StrokeColor);
        this.originalTextAlignCalculated = this.TextAlign;
        this.originalTextColorCalculated = l.color ? l.color : d.lg(this.TextColor);
        this.originalFontSizeCalculated = this.FontSize;
        this.originalFontCalculated = this.Font;
        this.originalDefaultStyle = a;
        this.originalDefaultAppearance = g;
        this.originalDefaultStyle = h;
        if ((g = a.getAttribute("IT") || a.getAttribute("it")) && g === e.Ja.oc.FreeTextCallout) {
          if (this.oo(e.Ja.oc.FreeTextCallout), this.Kj(a.getAttribute("head") || "OpenArrow"),
            h = a.getAttribute("callout"))
            for (g = d.Kk(h, b), 3 > g.length && (h = d.Kk(h, b, ",", ","), 4 > h.length && (g = h, this.rm = g.length - 1)), h = this.getPath(), l = 0; l < g.length; l++) h[l] = new e.Point(parseFloat(g[l].x), parseFloat(g[l].y))
        } else this.oo(e.Ja.oc.FreeText);
        this.fringe ? this.qo(this.fringe) : this.qo(new e.Rect(0, 0, 0, 0));
        if (g = a.getAttribute("justification")) this.Au = g;
        d = d.hj(a.getAttribute("TextColor"));
        null !== d && (this.TextColor = d);
        d = a.getAttribute("FontSize");
        _.isUndefined(d) || _.isNull(d) || (this.FontSize = d + "pt");
        (d = a.getAttribute("rotation")) &&
        (this.Rotation = parseInt(d, 10));
        this.uf() || this.adjustRect();
        this.$z = this.Xy()
      },
      selectionModel: e.To
    };
    e.Ja.prototype = $.extend(new e.Rd, e.Ja.prototype);
    Object.defineProperties(e.Ja.prototype, {
      CalloutLineCount: {
        get: function () {
          return this.rm
        },
        set: function (a) {
          this.rm = a;
          this.lb()
        }
      },
      TextColor: {
        get: function () {
          return this.hC
        },
        set: function (a) {
          this.hC = a;
          this.lb()
        }
      },
      FontSize: {
        get: function () {
          return this.WB
        },
        set: function (a) {
          this.WB = a;
          this.lb()
        }
      },
      Font: {
        get: function () {
          return this.VB
        },
        set: function (a) {
          this.VB = a;
          this.lb()
        }
      },
      TextAlign: {
        get: function () {
          return this.gC
        },
        set: function (a) {
          this.gC = a;
          this.lb()
        }
      },
      Rotation: {
        get: function () {
          return this.eC
        },
        set: function (a) {
          this.eC = a;
          this.lb()
        }
      }
    })
  })(window);
  (function (a) {
    var e = a.Annotations || {},
      d = e.sa || {};
    e.ke = function () {
      e.ra.call(this);
      this["_xsi:type"] = "Line";
      this.Subject = e.sa.wc("line");
      this.Vi = this.xm = this.End = this.Start = this.Pf = null
    };
    e.ke.prototype = {
      elementName: "line",
      resize: function (a) {
        var b = a.x1;
        a = a.y1;
        var d = b - this.X,
          e = a - this.Y;
        if (0 !== d || 0 !== e) this.Start.x += d, this.Start.y += e, this.End.x += d, this.End.y += e, this.X = b, this.Y = a
      },
      adjustRect: function () {
        if (!_.isNull(this.Start) || !_.isNull(this.End)) {
          var a = this.getRectPadding();
          this.X = Math.min(this.Start.x,
            this.End.x) - a;
          this.Y = Math.min(this.Start.y, this.End.y) - a;
          this.Width = Math.abs(this.Start.x - this.End.x) + 2 * a;
          this.Height = Math.abs(this.Start.y - this.End.y) + 2 * a;
          this.Lv()
        }
      },
      getRectPadding: function () {
        return this.StrokeThickness
      },
      NA: function (a, b) {
        this.Start = new e.Point(a, b)
      },
      AP: function () {
        return this.Start
      },
      setEndPoint: function (a, b) {
        this.End = new e.Point(a, b)
      },
      JO: function () {
        return this.End
      },
      Kj: function (a) {
        this.Vi = a
      },
      Sh: function () {
        return this.Vi || "None"
      },
      gr: function (a) {
        this.xm = a
      },
      sn: function () {
        return this.xm ||
          "None"
      },
      draw: function (a, b) {
        this.Ec(a, b);
        if (this.Start && this.End) {
          a.beginPath();
          a.moveTo(this.Start.x, this.Start.y);
          a.lineTo(this.End.x, this.End.y);
          var e = !1;
          _.isNull(this.Vi) || "None" === this.Vi || (d.ky(a, this.Start, this.End, this.mj(b)), e = !0);
          _.isNull(this.xm) || "None" === this.xm || (d.ky(a, this.End, this.Start, this.mj(b)), e = !0);
          e || a.stroke()
        } else a.beginPath(), a.moveTo(0, 0), a.lineTo(this.ya(), this.xa()), a.stroke()
      },
      lh: function (a) {
        e.Annotation.prototype.lh.apply(this, arguments);
        this.Start = a.W(this.Start);
        this.End = a.W(this.End)
      },
      serialize: function (a, b) {
        a = e.ra.prototype.serialize.apply(this, arguments);
        var d = new e.Point(this.End.x, this.End.y),
          g = e.ba;
        a.setAttribute("start", g.Bv(new e.Point(this.Start.x, this.Start.y), b));
        a.setAttribute("end", g.Bv(d, b));
        "None" !== this.Sh() && a.setAttribute("head", this.Sh());
        "None" !== this.sn() && a.setAttribute("tail", this.sn());
        this.kc(a, "leaderLength");
        this.kc(a, "leaderExtend");
        this.kc(a, "leader-offset");
        this.kc(a, "caption");
        this.kc(a, "caption-style");
        this.kc(a, "caption-offset-h");
        this.kc(a, "caption-offset-v");
        return a
      },
      deserialize: function (a, b) {
        e.ra.prototype.deserialize.apply(this, arguments);
        var d = e.ba,
          g = d.yE(a.getAttribute("start"), b);
        null !== g ? this.NA(g.x, g.y) : this.NA(this.X, this.Y);
        d = d.yE(a.getAttribute("end"), b);
        null !== d ? this.setEndPoint(d.x, d.y) : this.setEndPoint(this.X + this.Width, this.Y + this.Height);
        this.Kj(a.getAttribute("head") || "None");
        this.gr(a.getAttribute("tail") || "None");
        this.Dc(a, "leaderLength");
        this.Dc(a, "leaderExtend");
        this.Dc(a, "leader-offset");
        this.Dc(a, "caption");
        this.Dc(a, "caption-style");
        this.Dc(a, "caption-offset-h");
        this.Dc(a, "caption-offset-v");
        this.uf() || this.adjustRect()
      },
      selectionModel: e.Vo
    };
    e.ke.prototype = $.extend(new e.ra, e.ke.prototype)
  })(window);
  (function (a) {
    var e = a.Annotations || {};
    e.Ci = function () {
      e.ra.call(this);
      this.la = [];
      this.ys = !1;
      this.Cd = "solid";
      this.uk = 2;
      this["_xsi:type"] = "Polygon";
      this.Subject = e.sa.wc("polygon");
      this.Za = {
        x: 0,
        y: 0
      };
      this.wb = {
        x: 0,
        y: 0
      }
    };
    e.Ci.prototype = {
      elementName: "polygon",
      resize: function (a) {
        var c = a.x1;
        a = a.y1;
        var b = c - this.X,
          e = a - this.Y;
        if (0 !== b || 0 !== e) {
          for (var g = 0; g < this.la.length; g++) this.la[g].x += b, this.la[g].y += e;
          this.X = c;
          this.Y = a
        }
      },
      finish: function () {
        a.Td.Math.sH(this.la) && (this.la[this.la.length] = {
          x: this.la[0].x,
          y: this.la[0].y
        });
        this.adjustRect()
      },
      draw: function (a, c) {
        this.qy(a, c)
      },
      Lh: function (a) {
        if ("cloudy" === this.Style) e.sa.GE(this, a, this.getPath());
        else
          for (var c = 0; c < this.la.length; c++) {
            var b = this.la[c];
            0 === c ? (a.beginPath(), a.moveTo(b.x, b.y)) : a.lineTo(b.x, b.y)
          }
        1 < this.la.length && (a.closePath(), a.lineJoin = "round")
      },
      oo: function (a) {
        this.Intent = a
      },
      Oh: function () {
        return this.Intent
      },
      serialize: function (a, c) {
        var b = e.ra.prototype.serialize.apply(this, arguments);
        "cloudy" === this.Style && (b.setAttribute("style", this.Style), b.setAttribute("intensity",
          this.Intensity));
        var f = this.getPath();
        if (f && 0 < f.length) {
          var g = document.createElementNS("", "vertices");
          g.textContent = e.ba.mo(f, c);
          b.appendChild(g)
        }
        return b
      },
      deserialize: function (a, c) {
        e.ra.prototype.deserialize.apply(this, arguments);
        var b = a.getElementsByTagName("vertices");
        0 < b.length && (this.la = e.ba.Kk(b[0].textContent, c));
        this.Cd = a.getAttribute("style");
        this.uk = parseInt(a.getAttribute("intensity") || 0, 10);
        this.Fg = a.getAttribute("IT");
        this.uf() || this.adjustRect()
      },
      selectionModel: e.Aw
    };
    e.Ci.prototype =
      $.extend(new e.Rd, e.Ci.prototype);
    Object.defineProperties(e.Ci.prototype, {
      Intensity: {
        get: function () {
          return this.uk
        },
        set: function (a) {
          this.uk = a;
          this.lb()
        }
      },
      Style: {
        get: function () {
          return this.Cd
        },
        set: function (a) {
          this.Cd = a;
          this.lb()
        }
      },
      Intent: {
        get: function () {
          return this.Fg
        },
        set: function (a) {
          this.Fg = a;
          this.lb()
        }
      }
    })
  })(window);
  (function (a) {
    var e = a.Annotations || {};
    e.gm = function () {
      e.ra.call(this);
      this.la = [];
      this.ys = !1;
      this["_xsi:type"] = "Polyline";
      this.Subject = e.sa.wc("polyline");
      this.Za = {
        x: 0,
        y: 0
      };
      this.wb = {
        x: 0,
        y: 0
      };
      this.Pf = null
    };
    e.gm.prototype = {
      elementName: "polyline",
      resize: function (a) {
        var c = a.x1;
        a = a.y1;
        var b = c - this.X,
          e = a - this.Y;
        if (0 !== b || 0 !== e) {
          for (var g = 0; g < this.la.length; g++) this.la[g].x += b, this.la[g].y += e;
          this.X = c;
          this.Y = a
        }
      },
      finish: function () {
        this.adjustRect()
      },
      draw: function (a, c) {
        this.Ec(a, c);
        for (var b = 0; b < this.la.length; b++) {
          var e =
            this.la[b];
          0 === b ? (a.beginPath(), a.moveTo(e.x, e.y)) : a.lineTo(e.x, e.y)
        }
        1 < this.la.length && (a.lineJoin = "round", a.stroke())
      },
      Kj: function (a) {
        this.Vi = a
      },
      Sh: function () {
        return this.Vi || "None"
      },
      gr: function (a) {
        this.xm = a
      },
      sn: function () {
        return this.xm || "None"
      },
      serialize: function (a, c) {
        var b = e.ra.prototype.serialize.apply(this, arguments),
          f = this.getPath();
        if (f && 0 < f.length) {
          var g = document.createElementNS("", "vertices");
          g.textContent = e.ba.mo(f, c);
          b.appendChild(g)
        }
        b.setAttribute("head", this.Sh());
        b.setAttribute("tail",
          this.sn());
        return b
      },
      deserialize: function (a, c) {
        e.ra.prototype.deserialize.apply(this, arguments);
        var b = a.getElementsByTagName("vertices");
        0 < b.length && (this.la = e.ba.Kk(b[0].textContent, c));
        this.Kj(a.getAttribute("head") || "None");
        this.gr(a.getAttribute("tail") || "None");
        this.uf() || this.adjustRect()
      },
      selectionModel: e.fm
    };
    e.gm.prototype = $.extend(new e.Rd, e.gm.prototype)
  })(window);
  (function (a) {
    var e = a.Annotations || {};
    e.bk = function () {
      e.ra.call(this);
      this["_xsi:type"] = "Rectangle";
      this.Subject = e.sa.wc("rectangle");
      var a = this.getRectPadding();
      this.fringe = new e.Rect(a, a, a, a);
      this.uk = 2;
      this.Cd = "solid"
    };
    e.bk.prototype = {
      elementName: "square",
      draw: function (a, c) {
        this.qy(a, c)
      },
      Lh: function (a) {
        var c = this.we();
        c.x1 += this.fringe.x1;
        c.y1 += this.fringe.y1;
        c.x2 -= this.fringe.x2;
        c.y2 -= this.fringe.y2;
        "cloudy" === this.Style ? (e.sa.GE(this, a, [new e.Point(c.x1, c.y1), new e.Point(c.x2, c.y1), new e.Point(c.x2,
          c.y2), new e.Point(c.x1, c.y2), new e.Point(c.x1, c.y1)]), a.closePath(), a.lineJoin = "round") : (a.lineWidth *= 2, a.beginPath(), a.moveTo(c.x1, c.y1), a.lineTo(c.x2, c.y1), a.lineTo(c.x2, c.y2), a.lineTo(c.x1, c.y2), a.closePath(), a.clip())
      },
      getRectPadding: function () {
        return 0
      },
      serialize: function () {
        var a = e.ra.prototype.serialize.apply(this, arguments);
        "cloudy" === this.Style && (a.setAttribute("style", this.Style), a.setAttribute("intensity", this.Intensity));
        return a
      },
      deserialize: function (a) {
        e.ra.prototype.deserialize.apply(this,
          arguments);
        this.Cd = a.getAttribute("style");
        this.uk = a.getAttribute("intensity")
      }
    };
    e.bk.prototype = $.extend(new e.ra, e.bk.prototype);
    Object.defineProperties(e.bk.prototype, {
      Intensity: {
        get: function () {
          return this.uk
        },
        set: function (a) {
          this.uk = a;
          this.lb()
        }
      },
      Style: {
        get: function () {
          return this.Cd
        },
        set: function (a) {
          this.Cd = a;
          this.lb()
        }
      }
    })
  })(window);
  (function (a) {
    var e, d = a.Annotations || {};
    d.gk = function () {
      d.ra.call(this);
      this["_xsi:type"] = "Stamp";
      this.Subject = d.sa.wc("stamp");
      this.Icon = "Draft";
      this.Li = this.Ki = this.Pf = null;
      this.Ln = 1;
      this.tN = "bold italic " + this.UI + "px Verdana"
    };
    d.gk.prototype = {
      elementName: "stamp",
      padding: 20,
      UI: 30,
      ay: 10,
      draw: function (c, b) {
        this.Ec(c, b);
        c.translate(this.X, this.Y);
        c.rotate(-this.Rotation * Math.PI / 180);
        var d = a.utils.getRotationOffsets((360 - this.Rotation) % 360, this.Width, this.Height);
        c.translate(-d.dx, -d.dy);
        if (this.image) {
          var d =
            this.Width,
            e = this.Height;
          if (this.Rotation && (90 === Number(this.Rotation) || 270 === Number(this.Rotation))) var h = d,
            d = e,
            e = h;
          1 !== this.Ln && (c.globalAlpha = 1);
          c.drawImage(this.image, 0, 0, d, e)
        } else if ("SHAccepted" === this.Icon) c.lineWidth = .2 * Math.min(this.Width, this.Height), c.strokeStyle = "#426922", c.beginPath(), c.moveTo(.05 * this.Width, .5 * this.Height), c.lineTo(.4 * this.Width, .85 * this.Height), c.lineTo(.95 * this.Width, .05 * this.Height), c.stroke();
        else if ("SBRejected" === this.Icon) c.lineWidth = .2 * Math.min(this.Width, this.Height),
          c.strokeStyle = "#8F110F", c.beginPath(), c.moveTo(.05 * this.Width, .05 * this.Height), c.lineTo(.95 * this.Width, .95 * this.Height), c.moveTo(.95 * this.Width, .05 * this.Height), c.lineTo(.05 * this.Width, .95 * this.Height), c.stroke();
        else {
          d = this.CO();
          c.fillStyle = d.fill;
          c.strokeStyle = d.Hu;
          c.lineWidth = 1;
          e = this.ay;
          if (this.ya() <= 2 * this.ay || this.xa() <= 2 * this.ay) e = Math.min(this.ya() / 2, this.xa() / 2);
          this.NN(c, 0, 0, this.ya(), this.xa(), e);
          c.font = this.tN;
          c.fillStyle = d.Hu;
          d = this.OI.toUpperCase();
          e = c.measureText(d).width + 2 * this.padding;
          c.save();
          e = this.ya() / e;
          h = this.xa() / (1.5 * this.UI);
          c.scale(e, h);
          c.textBaseline = "middle";
          c.textAlign = "center";
          c.fillText(d, this.ya() / (2 * e), this.xa() / (2 * h));
          c.restore()
        }
      },
      HP: function () {
        var a = this.Icon;
        if (this.Tc[a]) return this.Tc[a];
        if (0 === a.indexOf("SB") || 0 === a.indexOf("SH")) {
          var b = this.Tc[a.substring(2)];
          if (b) return b
        }
        return a
      },
      CO: function () {
        var a = _.isUndefined(this.opacity) ? 1 : parseFloat(this.opacity),
          b = {
            Hu: "rgba(145, 15, 5, " + a + ")",
            fill: "rgba(242, 230, 227, " + .7 * a + ")"
          },
          d = {
            Hu: "rgba(65, 106, 28, " + a +
              ")",
            fill: "rgba(215, 226, 207, " + .7 * a + ")"
          },
          a = {
            Hu: "rgba(24, 37, 100, " + a + ")",
            fill: "rgba(224, 235, 246, " + .7 * a + ")"
          };
        switch (this.OI) {
          case this.Tc.Approved:
          case this.Tc.Completed:
          case this.Tc.Final:
            return d;
          case this.Tc.Asis:
          case this.Tc.Confidential:
          case this.Tc.Departmental:
          case this.Tc.Draft:
          case this.Tc.Experimental:
          case this.Tc.ForComment:
          case this.Tc.ForPublicRelease:
          case this.Tc.NotForPublicRelease:
          case this.Tc.Sold:
          case this.Tc.TopSecret:
            return a;
          case this.Tc.Expired:
          case this.Tc.NotApproved:
          case this.Tc.Void:
            return b;
          default:
            return a
        }
      },
      Tc: {
        Approved: "Approved",
        AsIs: "As Is",
        Completed: "Completed",
        Confidential: "Confidential",
        Departmental: "Departmental",
        Draft: "Draft",
        Experimental: "Experimental",
        Expired: "Expired",
        Final: "Final",
        ForComment: "For Comment",
        ForPublicRelease: "For Public Release",
        InformationOnly: "Information Only",
        NotApproved: "Not Approved",
        NotForPublicRelease: "Not For Public Release",
        PreliminaryResults: "Preliminary Results",
        Sold: "Sold",
        TopSecret: "Top Secret",
        Void: "Void"
      },
      NN: function (a, b, d, e, h, l) {
        a.beginPath();
        a.moveTo(b + l, d);
        a.lineTo(b + e - l, d);
        a.quadraticCurveTo(b + e, d, b + e, d + l);
        a.lineTo(b + e, d + h - l);
        a.quadraticCurveTo(b + e, d + h, b + e - l, d + h);
        a.lineTo(b + l, d + h);
        a.quadraticCurveTo(b, d + h, b, d + h - l);
        a.lineTo(b, d + l);
        a.quadraticCurveTo(b, d, b + l, d);
        a.closePath();
        a.fill();
        a.stroke()
      },
      jJ: function (a) {
        e = e || document.createElement("canvas");
        e.width = this.image.width;
        e.height = this.image.height;
        var b = e.getContext("2d");
        b.drawImage(this.image, 0, 0);
        for (var d = b.getImageData(0, 0, this.image.width, this.image.height), g = d.data, h = g.length,
            l = 3; l < h; l += 4) g[l] = 255 * a;
        b.putImageData(d, 0, 0);
        return e.toDataURL()
      },
      serialize: function () {
        var a = d.ra.prototype.serialize.apply(this, arguments);
        this.aH && this.Icon === this.aH || a.setAttribute("icon", this.Icon);
        if (this.image) {
          var b = document.createElementNS("", "imagedata");
          b.textContent = this.image.src.split("%0A").join("");
          1 === this.Ln && this.Opacity !== this.Ln && (b.textContent = this.jJ(this.Opacity));
          a.appendChild(b)
        }
        return a
      },
      deserialize: function (a) {
        d.ra.prototype.deserialize.apply(this, arguments);
        var b = a.getAttribute("icon");
        b ? this.Icon = b : this.Subject && (this.Icon = this.Subject);
        b || (this.aH = this.Icon);
        b = a.getElementsByTagName("imagedata");
        0 < b.length && (this.ImageData = b[0].textContent, this.Ln = this.Opacity)
      }
    };
    d.gk.prototype = $.extend(new d.ra, d.gk.prototype, a.utils.eventHandler);
    Object.defineProperties(d.gk.prototype, {
      Icon: {
        get: function () {
          return this.gL
        },
        set: function (a) {
          this.gL = a;
          this.OI = this.HP();
          this.lb()
        }
      },
      ImageData: {
        get: function () {
          return this.image.src
        },
        set: function (a) {
          this.image || (this.image = new Image);
          if (this.image.src !==
            a) {
            var b = this;
            this.gD = new Promise(function (d) {
              b.image.onload = d;
              b.image.onerror = d;
              b.image.src = a;
              b.lb()
            })
          }
        }
      },
      Opacity: {
        get: function () {
          return Object.getOwnPropertyDescriptor(d.ra.prototype, "Opacity").get.call(this)
        },
        set: function (a) {
          Object.getOwnPropertyDescriptor(d.ra.prototype, "Opacity").set.call(this, a);
          if (this.image && 1 > this.Ln) {
            this.Ln = 1;
            var b = this;
            this.UH().then(function () {
              b.ImageData = b.jJ(1)
            })
          }
        }
      }
    })
  })(window);
  (function (a) {
    var e = a.Annotations || {};
    e.Po = function (a) {
      e.Annotation.call(this);
      this["_xsi:type"] = "Custom";
      this.Subject = e.sa.wc("custom");
      this.Opacity = 1;
      if (_.isObject(a) && (_.isUndefined(a.page) || (this.PageNumber = parseInt(a.page, 10) + 1), _.isUndefined(a.appearances) || (this.appearances = a.appearances), !_.isUndefined(a.rect))) {
        var c = new e.Rect(a.rect.x1, a.rect.y1, a.rect.x2, a.rect.y2);
        0 > c.ya() && (a = c.x1, c.x1 = c.x2, c.x2 = a);
        0 > c.xa() && (a = c.y1, c.y1 = c.y2, c.y2 = a);
        this.X = c.x1;
        this.Y = c.y1;
        this.__width = c.ya();
        this.__height =
          c.xa()
      }
    };
    e.Po.prototype = {
      elementName: "custom",
      draw: function () {},
      serialize: function (a, c) {
        return e.Annotation.prototype.serialize.apply(this, arguments)
      },
      deserialize: function (a, c) {
        e.Annotation.prototype.deserialize.apply(this, arguments)
      }
    };
    e.Po.prototype = $.extend(new e.Annotation, e.Po.prototype)
  })(window);
  (function (a) {
    var e = a.Annotations || {};
    e.Fi = function () {
      e.ra.call(this);
      this["_xsi:type"] = "Sticky";
      this.Subject = e.sa.wc("stickyNote");
      this.Height = this.Width = 20;
      this.IsClickableOutsideRect = this.NoRotate = this.NoZoom = this.NoResize = !0;
      this.Pf = this.Li = null;
      this.Ki = new e.Color(255, 255, 0);
      this.Icon = "Comment";
      this.XB = null
    };
    e.Fi.prototype = {
      SIZE: 31,
      elementName: "text",
      uf: function () {
        return null
      },
      draw: function (d, c, b) {
        if (!this.Wh()) {
          var e = this.SIZE,
            g = this.SIZE;
          c = e < g ? e : g;
          var h = .75 * c,
            l = .48 * c,
            k = .29 * c,
            m = .19 * c,
            n = c - m;
          d.strokeStyle =
            "rgb(0, 0, 0)";
          d.fillStyle = this.StrokeColor.toString();
          d.globalAlpha = 0 === this.Opacity ? 0 : this.Opacity || 1;
          b = b || 0;
          d.rotate(-b * Math.PI / 180);
          b = a.utils.getRotationOffsets((360 - b) % 360, e, g);
          d.translate(-b.dx, -b.dy);
          d.beginPath();
          d.moveTo(7, 2);
          d.lineTo(c - 5 - 2, 2);
          d.quadraticCurveTo(c - 2, 2, c - 2, 7);
          d.lineTo(c - 2, h - 5);
          d.quadraticCurveTo(c - 2, h, c - 5 - 2, h);
          d.lineTo(l, h);
          d.lineTo(k, c - 2);
          d.lineTo(k, h);
          d.lineTo(7, h);
          d.quadraticCurveTo(2, h, 2, h - 5);
          d.lineTo(2, 7);
          d.quadraticCurveTo(2, 2, 7, 2);
          d.fill();
          d.moveTo(m, .25 * c);
          d.lineTo(n,
            .25 * c);
          d.moveTo(m, .41 * c);
          d.lineTo(n, .41 * c);
          d.moveTo(m, .57 * c);
          d.lineTo(.68 * c, .57 * c);
          d.stroke()
        }
      },
      serialize: function () {
        var a = e.ra.prototype.serialize.apply(this, arguments),
          c = {};
        this.Icon && (c.icon = this.Icon);
        null !== this.InReplyTo && (c.inreplyto = this.InReplyTo);
        for (var b in c) a.setAttribute(b, c[b]);
        this.kc(a, "state");
        this.kc(a, "statemodel");
        return a
      },
      deserialize: function (a) {
        e.ra.prototype.deserialize.apply(this, arguments);
        this.Pf = null;
        this.Icon = a.getAttribute("icon");
        var c = a.getAttribute("inreplyto");
        c && (this.InReplyTo = c);
        this.Dc(a, "state");
        this.Dc(a, "statemodel");
        this.NoRotate = this.NoZoom = !0;
        this.Height = this.Width = 20;
        this.Lv()
      },
      selectionModel: e.ep
    };
    e.Fi.prototype = $.extend(!0, new e.ra, e.Fi.prototype);
    Object.defineProperties(e.Fi.prototype, {
      InReplyTo: {
        get: function () {
          return this.XB
        },
        set: function (a) {
          this.XB = a;
          this.lb()
        }
      }
    })
  })(window);
  (function (a) {
    var e = a.Annotations || {},
      d = e.sa || {};
    e.Hb = function () {
      e.ra.call(this);
      this.Pf = null;
      this.Ki = new e.Color(255, 0, 0);
      this.Li = null;
      this.aC = !0;
      this.bC = !1;
      this.gb = [];
      this.Rf = !1;
      this.SurroundingTexts = this.TextIndices = null;
      this["_xsi:type"] = "Text Markup";
      this.Subject = this["_xsi:type"]
    };
    e.Hb.prototype = {
      Jv: function (a) {
        if (!a || "undefined" === typeof a.length || 0 === a.length) throw Error("Argument quads requires an array of at least one element");
        this.gb = a;
        for (var b = Infinity, d = Infinity, e = 0, h = 0, l = 0; l < this.gb.length; l++) a =
          this.gb[l], b = Math.min(b, a.x1, a.x2, a.x3, a.x4), d = Math.min(d, a.y1, a.y2, a.y3, a.y4), e = Math.max(e, a.x1, a.x2, a.x3, a.x4), h = Math.max(h, a.y1, a.y2, a.y3, a.y4);
        this.X = b;
        this.Y = d;
        this.Width = e - b;
        this.Height = h - d
      },
      Re: function () {
        return this.gb
      },
      lh: function (a) {
        e.Annotation.prototype.lh.apply(this, arguments);
        var b = [];
        this.gb.forEach(function (d) {
          var g = {
              x: d.x1,
              y: d.y1
            },
            h = {
              x: d.x2,
              y: d.y2
            },
            l = {
              x: d.x3,
              y: d.y3
            };
          d = {
            x: d.x4,
            y: d.y4
          };
          g = a.W(g);
          h = a.W(h);
          l = a.W(l);
          d = a.W(d);
          b.push(new e.bb(g.x, g.y, h.x, h.y, l.x, l.y, d.x, d.y))
        });
        this.Jv(b)
      },
      serialize: function (c, b) {
        var f = e.ra.prototype.serialize.apply(this, arguments),
          g, h = [];
        for (g = 0; g < this.Quads.length; g++) {
          var l = this.Quads[g];
          h.push(new e.Point(l.x4, l.y4));
          h.push(new e.Point(l.x3, l.y3));
          h.push(new e.Point(l.x1, l.y1));
          h.push(new e.Point(l.x2, l.y2))
        }
        0 < this.Quads.length && (g = e.ba.mo(h, b, ",", ","), f.setAttribute("coords", g));
        this.kc(c, "inreplyto");
        this.kc(c, "replyType");
        if (d.aq) {
          h = {};
          this.TextIndices ? h.selidxs = e.ba.JS(this.TextIndices) : a.utils.warn("annot_extra_selectors", "Annotations.TextMarkupAnnotation.serialize: no idxs to serialize.");
          if (this.SurroundingTexts)
            for (l = e.ba.IS(this.SurroundingTexts), g = 0; g < l.length; g++) h["surrtxts_" + g + "_0"] = l[g][0], h["surrtxts_" + g + "_1"] = l[g][1];
          else a.utils.warn("annot_extra_selectors", "Annotations.TextMarkupAnnotation.serialize: no surrtxts to serialize.");
          for (var k in h) f.setAttribute(k, h[k])
        }
        return f
      },
      deserialize: function (c, b, f) {
        e.ra.prototype.deserialize.apply(this, arguments);
        this.gb = [];
        this.Dc(c, "inreplyto");
        this.Dc(c, "replyType");
        for (var g = c.getAttribute("coords"), g = e.ba.Kk(g, b, ",", ","), h = 0; h +
          3 < g.length; h += 4) {
          if (a.Td.Math.QQ(g[h], g[h + 3], g[h + 1], g[h + 2])) {
            var l = g[h + 2];
            g[h + 2] = g[h + 3];
            g[h + 3] = l
          }
          this.gb.push(new e.bb(g[h + 3].x, g[h + 3].y, g[h + 2].x, g[h + 2].y, g[h + 1].x, g[h + 1].y, g[h].x, g[h].y))
        }
        f ? e.sa.xN(this, c, f) : (this instanceof e.Hb && a.utils.warn("annot_extra_selectors", "Annotations.TextMarkupAnnotation.deserialize: no annotManager provided; could not attempt to deserialize extra selector data."), this.Rf = !1);
        var k = function (b) {
          var c = !1,
            d;
          if (this.nf && this.gb.length === this.nf.length)
            for (c = !0, h = 0; h < this.gb.length; h++)
              for (d =
                0; 8 > d; d++)
                if (5 <= Math.abs(this.gb[h].Gy()[d] - this.nf[h][d])) {
                  c = !1;
                  h = this.gb.length;
                  break
                } var f = !1;
          if (this.Eg && this.gb.length === this.Eg.length)
            for (f = !0, h = 0; h < this.gb.length; h++)
              for (d = 0; 8 > d; d++)
                if (5 <= Math.abs(this.gb[h].Gy()[d] - this.Eg[h][d])) {
                  f = !1;
                  h = this.gb.length;
                  break
                } c || a.utils.warn("annot_extra_selectors", "Annotations.TextMarkupAnnotation.deserialize: absolute position selector DOES NOT agree with surrtxt selector.");
          f || a.utils.warn("annot_extra_selectors", "Annotations.TextMarkupAnnotation.deserialize: absolute position selector DOES NOT agree with index-based selector.");
          d = null !== this.Eg && (0 < this.Eg.length || 0 === this.gb.length && 0 === this.Eg.length);
          var g = null !== this.nf && (0 < this.nf.length || 0 === this.gb.length && 0 === this.nf.length),
            l = [],
            k = Array(8);
          if (d && g)
            if (c || f) a.utils.warn("annot_extra_selectors", "Annotations.TextMarkupAnnotation.deserialize: using absolute coordinates.");
            else {
              for (h = 0; h < this.nf.length; h++) {
                for (d = 0; 8 > d; d++) k[d] = Math.round(this.nf[h][d]);
                l.push(new e.bb(k[0], k[1], k[2], k[3], k[4], k[5], k[6], k[7]))
              }
              this.gb = l
            }
          else if (d)
            if (f) a.utils.warn("annot_extra_selectors",
              "Annotations.TextMarkupAnnotation.deserialize: using absolute coordinates.");
            else {
              for (h = 0; h < this.Eg.length; h++) {
                for (d = 0; 8 > d; d++) k[d] = Math.round(this.Eg[h][d]);
                l.push(new e.bb(k[0], k[1], k[2], k[3], k[4], k[5], k[6], k[7]))
              }
              this.gb = l
            }
          else if (g)
            if (c) a.utils.warn("annot_extra_selectors", "Annotations.TextMarkupAnnotation.deserialize: using absolute coordinates.");
            else {
              for (h = 0; h < this.nf.length; h++) {
                for (d = 0; 8 > d; d++) k[d] = Math.round(this.nf[h][d]);
                l.push(new e.bb(k[0], k[1], k[2], k[3], k[4], k[5], k[6], k[7]))
              }
              this.gb =
                l
            }
          else a.utils.warn("annot_extra_selectors", "Annotations.TextMarkupAnnotation.deserialize: using absolute coordinates.");
          f = c = 9007199254740991;
          for (h = k = l = 0; h < this.gb.length; h++) d = this.gb[h].Gy(), d[0] < c && (c = d[0]), d[7] < f && (f = d[7]), d[2] > l && (l = d[2]), d[3] > k && (k = d[3]);
          this.uI(new e.Rect(c, f, l, k));
          b.Zb(this);
          this.trigger("extraSelectorsUsedForAdjustments");
          this.jp = !0
        }.bind(this);
        if (d.aq && this.Rf && f)
          if (this.dD) k(f);
          else this.one("quadsCalculatedFromExtraSelectors", function () {
            k(f)
          });
        else a.utils.warn("annot_extra_selectors",
          "Annotations.TextMarkupAnnotation.deserialize: NOT taking extra selectors path.")
      },
      Mj: function () {
        return !0
      },
      selectionModel: e.jk
    };
    e.Hb.prototype = $.extend(new e.ra, e.Hb.prototype);
    Object.defineProperties(e.Hb.prototype, {
      Quads: {
        get: function () {
          return this.gb
        },
        set: function (a) {
          this.Jv(a)
        }
      }
    })
  })(window);
  (function (a) {
    var e = a.Annotations || {},
      d = e.sa || {};
    e.rh = function () {
      e.Hb.call(this);
      this.Ki = new e.Color(255, 255, 0);
      this["_xsi:type"] = "Highlight";
      this.Subject = e.sa.wc("highlight");
      this.Opacity = 1
    };
    e.rh.opacityCap = .3;
    e.rh.prototype = {
      elementName: "highlight",
      uf: function () {
        return null
      },
      draw: function (a, b) {
        var f = function () {
          this.Ec(a, b);
          if (_.isUndefined(this.Opacity) || _.isNull(this.Opacity) || this.Opacity > e.rh.opacityCap) a.globalAlpha = e.rh.opacityCap;
          a.fillStyle = this.StrokeColor.toString();
          for (var d, f = 0; f < this.Quads.length; f++) d =
            this.Quads[f], a.beginPath(), a.moveTo(d.x1, d.y1), a.lineTo(d.x2, d.y2), a.lineTo(d.x3, d.y3), a.lineTo(d.x4, d.y4), a.closePath(), a.fill()
        }.bind(this);
        if (d.aq && this.Rf)
          if (this.jp) f();
          else this.one("extraSelectorsUsedForAdjustments", function () {
            f()
          });
        else f()
      }
    };
    e.rh.prototype = $.extend(new e.Hb, e.rh.prototype)
  })(window);
  (function (a) {
    var e = a.Annotations || {},
      d = e.sa || {};
    e.nm = function () {
      e.Hb.call(this);
      this["_xsi:type"] = "Squiggly";
      this.Subject = e.sa.wc("squiggly")
    };
    e.nm.prototype = {
      elementName: "squiggly",
      draw: function (a, b) {
        var e = function () {
          var d, e, f, k, m, n, r;
          this.Ec(a, b);
          for (var q = 0; q < this.gb.length; q++) {
            e = this.gb[q];
            d = Math.sqrt((e.x1 - e.x2) * (e.x1 - e.x2) + (e.y1 - e.y2) * (e.y1 - e.y2));
            var v = 5 / 3,
              p = d / 10;
            a.save();
            a.translate(e.x1, e.y1 - 1.25);
            a.rotate(Math.atan2(e.y2 - e.y1, e.x2 - e.x1));
            e = Math.abs(e.y1 - e.y4);
            a.beginPath();
            a.rect(0, -e,
              d, e + 1.25 + 1);
            a.clip();
            a.beginPath();
            for (var u = 0; u < 2 * p; u += 2) r = 5 * u, m = 5 * u + v / 2, n = v, f = 5 * (u + 1) - v / 2, k = v, d = 5 * (u + 1), e = 0, a.moveTo(r, 0), a.bezierCurveTo(m, n, f, k, d, e), m = 5 * (u + 1) + v / 2, n = -v, f = 5 * (u + 2) - v / 2, k = -v, d = 5 * (u + 2), e = 0, a.bezierCurveTo(m, n, f, k, d, e);
            a.stroke();
            a.restore()
          }
        }.bind(this);
        if (d.aq && this.Rf)
          if (this.jp) e();
          else this.one("extraSelectorsUsedForAdjustments", function () {
            e()
          });
        else e()
      }
    };
    e.nm.prototype = $.extend(new e.Hb, e.nm.prototype)
  })(window);
  (function (a) {
    var e = a.Annotations || {},
      d = e.sa || {};
    e.om = function () {
      e.Hb.call(this);
      this["_xsi:type"] = "Strikeout";
      this.Subject = e.sa.wc("strikeout")
    };
    e.om.prototype = {
      elementName: "strikeout",
      draw: function (a, b) {
        var e = function () {
          this.Ec(a, b);
          0 === this.StrokeThickness && (a.lineWidth = 1);
          for (var d, e = 0; e < this.gb.length; e++) {
            d = this.gb[e];
            var f = (d.x1 + d.x4) / 2,
              k = (d.y1 + d.y4) / 2,
              m = (d.x2 + d.x3) / 2;
            d = (d.y2 + d.y3) / 2;
            a.beginPath();
            a.moveTo(f, k);
            a.lineTo(m, d);
            a.stroke()
          }
        }.bind(this);
        if (d.aq && this.Rf)
          if (this.jp) e();
          else this.one("extraSelectorsUsedForAdjustments",
            function () {
              e()
            });
        else e()
      }
    };
    e.om.prototype = $.extend(new e.Hb, e.om.prototype)
  })(window);
  (function (a) {
    var e = a.Annotations || {},
      d = e.sa || {};
    e.pm = function () {
      e.Hb.call(this);
      this["_xsi:type"] = "Underline";
      this.Subject = e.sa.wc("underline")
    };
    e.pm.prototype = {
      elementName: "underline",
      draw: function (a, b) {
        var e = function () {
          this.Ec(a, b);
          for (var d, e = 0; e < this.gb.length; e++) d = this.gb[e], a.beginPath(), a.moveTo(d.x1, d.y1), a.lineTo(d.x2, d.y2), a.closePath(), a.stroke()
        }.bind(this);
        if (d.aq && this.Rf)
          if (this.jp) e();
          else this.one("extraSelectorsUsedForAdjustments", function () {
            e()
          });
        else e()
      }
    };
    e.pm.prototype = $.extend(new e.Hb,
      e.pm.prototype)
  })(window);
  (function (a) {
    var e = a.Annotations || {};
    e.Ur = function () {
      e.Hb.call(this);
      this["_xsi:type"] = "Redact";
      this.Subject = e.sa.wc("redact");
      this.Opacity = 1
    };
    e.Ur.prototype = {
      elementName: "redact",
      draw: function () {},
      serialize: function () {
        var a = e.Hb.prototype.serialize.apply(this, arguments);
        this.kc(a, "overlay-text");
        this.kc(a, "overlay-text-repeat");
        this.kc(a, "justification");
        this.kc(a, "defaultappearance");
        return a
      },
      deserialize: function (a) {
        e.Hb.prototype.deserialize.apply(this, arguments);
        this.Dc(a, "overlay-text");
        this.Dc(a,
          "overlay-text-repeat");
        this.Dc(a, "justification");
        this.defaultappearance = e.ba.qn(a, "defaultappearance", "defaultappearance")
      }
    };
    e.Ur.prototype = $.extend(new e.Hb, e.Ur.prototype)
  })(window);
  (function (a) {
    function e() {}

    function d(b) {
      this.size = b;
      this.gc = Array(this.size);
      for (b = 0; b < this.size; b++) this.gc[b] = {
        Og: a.o.za.pk(1, 1, 1),
        Zu: a.o.za.pk(1, 1, 1),
        Um: null,
        bi: [],
        uq: !1
      }
    }

    function c(a) {
      var b = a.width;
      a.width = 1;
      a.width = b
    }
    var b = {
      Wr: "ViewportCanvas",
      zw: "PageCanvas"
    };
    d.prototype = {
      pj: function (a, b, c) {
        return c && 1 < b ? 0 === a ? 0 : Math.floor((a + 1) / b) : Math.floor(a / b)
      },
      $t: function (a, b, c) {
        b = this.pj(a, b, c);
        c = null;
        for (var d = 0; d < this.size; d++) {
          if (this.gc[d].Um === b) return -1 === this.gc[d].bi.indexOf(a) && this.gc[d].bi.push(a),
            this.gc[d].uq = !0, this.gc[d];
          this.gc[d].uq || (c = this.gc[d])
        }
        return c ? (c.Um = b, c.bi.push(a), c.uq = !0, c) : null
      },
      KO: function (a, b, c) {
        b = this.pj(a, b, c);
        for (c = 0; c < this.size; c++)
          if (this.gc[c].Um === b) return -1 === this.gc[c].bi.indexOf(a) && this.gc[c].bi.push(a), this.gc[c].uq = !0, this.gc[c];
        return null
      },
      $n: function (a) {
        for (var b = 0; b < this.size; b++) {
          var c = this.gc[b].bi,
            d = c.indexOf(a),
            e = !1; - 1 < d && (c.splice(d, 1), e = !0);
          if (e && 0 === c.length) {
            this.XD(this.gc[b]);
            break
          }
        }
      },
      Yq: function () {
        for (var a = 0; a < this.size; a++) this.XD(this.gc[a])
      },
      XD: function (a) {
        a.Um = null;
        a.uq = !1;
        $(a.Og).removeAttr("style").removeClass();
        $(a.Zu).removeAttr("style").removeClass();
        c(a.Og);
        a.Og.getContext("2d").clearRect(0, 0, a.Og.width, a.Og.height);
        a.bi = []
      },
      gU: function (a, b, c) {
        a = this.$t(a, c, this.On);
        _.isNull(b) && (b = a.Zu);
        a.Zu = a.Og;
        a.Og = b
      }
    };
    e.prototype = {
      Nj: !1,
      hI: function () {},
      init: function () {
        var b = a.innerWidth,
          c = a.innerHeight;
        this.gc = new d(3);
        this.Qm = new d(3);
        this.fh = this.pk(b, c, 1);
        this.Gj = 1
      },
      Ox: function () {},
      pj: function (a) {
        return this.Qm.pj(a, this.Gj, this.On)
      },
      Iv: function (a,
        b) {
        this.Gj = a;
        this.On = b
      },
      Rx: function () {
        this.fh.getAttribute("style");
        this.fh.removeAttribute("style")
      },
      zv: function (a, b) {
        this.gc.gU(a, b, this.Gj)
      },
      $n: function (a) {
        this.gc.$n(a);
        this.Qm.$n(a)
      },
      Yq: function () {
        this.gc.Yq();
        this.Qm.Yq()
      },
      Km: function (b, c, d) {
        var e = $(b);
        c = Math.floor(c);
        d = Math.floor(d);
        var f = "" === b.style.height || 1 < Math.abs(parseInt(b.style.height, 10) - d);
        if ("" === b.style.width || 1 < Math.abs(parseInt(b.style.width, 10) - c) || f) {
          var f = a.utils.getCanvasMultiplier(),
            g = Math.floor(d * f);
          b.setAttribute("width",
            Math.floor(c * f));
          b.setAttribute("height", g);
          e.css("width", c);
          e.css("height", d)
        }
      },
      pk: function (a, b, c, d) {
        if ("undefined" === typeof d || null === d) d = document.createElement("canvas");
        this.Km(d, a, b);
        return "undefined" === typeof d.getContext("2d") ? null : d
      },
      qL: function (a, b, c, d) {
        var e = 1,
          f = null,
          g = a;
        if (1 >= a * c || 1 >= b * c) f = this.pk(1, 1, 1);
        if (4E6 > a * b) return this.pk(a, b, c);
        var v = a / b;
        64E6 < a * b && (b = Math.sqrt(64E6 / v), e = v * b / a, a = v * b);
        v = null;
        for ("undefined" === typeof d && (d = .25); null === f;) {
          var v = this.pk(Math.ceil(a * e), Math.ceil(b *
              e), c, v),
            p = v.getContext("2d");
          p.fillStyle = "white";
          p.fillRect(v.width - 1, v.height - 1, 1, 1);
          p = !(1 > window.devicePixelRatio) && (v.width < parseFloat(v.style.width) || v.height < parseFloat(v.style.height));
          if (null !== v && 0 < this.vL(v) && !p) f = v;
          else if (e -= d, 0 >= e) return console.error("No canvas could be created"), null
        }
        1 > e && (a = "scale(" + g / parseFloat(f.style.width) + ")", $(f).css({
          transform: a,
          "transform-origin": "top left",
          "ms-transform": a,
          "ms-transform-origin": "top left",
          "-moz-transform": a,
          "-moz-transform-origin": "top left",
          "-webkit-transform-origin": "top left",
          "-webkit-transform": a,
          "-o-transform": a,
          "-o-transform-origin": "top left"
        }));
        $(f).css("position", "absolute");
        f.getContext("2d").clearRect(f.width - 1, f.height - 1, 1, 1);
        return f
      },
      vL: function (a) {
        return a.getContext("2d").getImageData(a.width - 1, a.height - 1, 1, 1).data[3]
      },
      Op: function (a, b, c) {
        if (!a) throw Error("Canvas not defined");
        b = b || a.width;
        c = c || a.height;
        a.getContext("2d").clearRect(0, 0, b, c)
      },
      zF: function (b, c, d, e, f, g) {
        if (b !== this.fh) throw Error("Canvas drawing error");
        var q =
          this.gc.$t(c, this.Gj, this.On);
        b = q.Og;
        this.Km(b, parseFloat(this.fh.style.width), parseFloat(this.fh.style.height));
        q = q.bi.sort(function (a, b) {
          return a - b
        });
        c <= q[0] && (b.width = b.width);
        c = a.utils.getCanvasMultiplier();
        d = a.jd(d, e, g, f, !0, c);
        e = b.getContext("2d");
        e.save();
        e.transform(d.m_a, d.m_b, d.m_c, d.m_d, d.m_h, d.m_v);
        e.fillStyle = "white";
        e.fillRect(0, 0, g.width, g.height);
        e.restore();
        e.drawImage(this.fh, 0, 0);
        this.Rx();
        return b
      },
      so: function (b, c, d, e, f, r, q) {
        if (q) return g.so.apply(g, arguments);
        this.Km(this.fh, a.innerWidth,
          a.innerHeight);
        var v = a.utils.getCanvasMultiplier(),
          v = a.jd(c, d, b, e, !0, v),
          p = this.fh.getContext("2d");
        p.restore();
        p.save();
        p.transform(v.m_a, v.m_b, v.m_c, v.m_d, v.m_h, v.m_v);
        a.utils.canvasClipBug || (p.beginPath(), p.rect(0, 0, b.width, b.height), p.clip());
        return {
          canvas: this.fh,
          ctx: p,
          t: v
        }
      },
      Gp: function (a, b) {
        var c = document.getElementById("pageContainer" + b);
        if (!c) return null;
        var d = $(a);
        d.css({
          "z-index": "20"
        });
        d.addClass("hacc canvas" + b);
        return c.parentNode
      },
      BL: function (a, b, c, d) {
        a = d ? this.Qm.$t(a, this.Gj, this.On) :
          this.Qm.KO(a, this.Gj, this.On);
        if (!a) return null;
        d = d ? a.Og : a.Zu;
        this.Km(d, b, c);
        return d
      },
      uo: function (b, c, d, e, f, g, q) {
        g = b[0].getContext("2d");
        g.restore();
        g.save();
        var v = a.utils.getCanvasMultiplier();
        if (1 === q || 3 === q) c = {
          width: c.height,
          height: c.width
        };
        d = a.jd(d, (e + q || 0) % 4, c, f, !0, v);
        g.setTransform(d.m_a, d.m_b, d.m_c, d.m_d, d.m_h, d.m_v);
        a.utils.canvasClipBug || (g.beginPath(), g.rect(0, 0, c.width, c.height), g.clip());
        return b[0]
      },
      Rk: function (a, b, c, d, e, f, g) {
        a = $("#pageContainer" + a).parent().find(".auxiliary");
        return 0 ===
          a.length ? null : this.uo(a, b, c, d, e, f, g)
      },
      Zm: function (b, c, d, e, f) {
        var g = a.innerWidth,
          q = this.BL(b, g, a.innerHeight, f);
        if (!q) return null;
        b = $(q);
        b.addClass("auxiliary");
        b.css({
          "z-index": "30",
          position: "absolute",
          display: ""
        });
        f = q.getContext("2d");
        d *= parseFloat(q.style.width) / g;
        g = a.utils.getCanvasMultiplier();
        c = a.jd(d, e, c, null, !0, g);
        f.transform(c.m_a, c.m_b, c.m_c, c.m_d, c.m_h, c.m_v);
        return b[0]
      },
      et: function (a, b, d, e) {
        var f = document.getElementById("pageContainer" + a);
        if (!f) return null;
        f = $(f).parent();
        0 < f.find(".auxiliary").length ?
          (b = this.Qm.$t(a, this.Gj, this.On), d = b.bi.sort(function (a, b) {
            return a - b
          }), a <= d[0] && c(b.Og)) : (a = this.Zm(a, b, d, e, !0), f.append(a))
      },
      nv: function (b, c, d) {
        if (b = document.querySelector("#pageContainer" + b).parentNode.querySelector(".auxiliary")) a.o.za.Op(b, d.width, d.height), d = b.getContext("2d"), d.setTransform(1, 0, 0, 1, 0, 0), d.drawImage(c, 0, 0)
      },
      XF: function (a) {
        return $("#pageContainer" + a).parent()
      },
      rz: function (a) {
        return $("#pageWidgetContainer" + a)
      }
    };
    var f = new e,
      g = new e;
    $.extend(g, {
      Nj: !0,
      hI: function (a) {
        this.Nj = 1 <
          a
      },
      init: function () {
        this.Hk = {}
      },
      Ox: function (a) {
        this.Hk[a] && (this.Hk[a].width = 0, this.Hk[a].height = 0);
        delete this.Hk[a]
      },
      pj: function (a) {
        return a
      },
      Iv: function () {},
      Rx: function () {},
      zv: function () {},
      $n: function () {},
      Yq: function () {},
      Op: function (a) {
        if (!a) throw Error("Canvas not defined");
        var b = a.getContext("2d");
        b.save();
        b.setTransform(1, 0, 0, 1, 0, 0);
        b.clearRect(0, 0, a.width, a.height);
        b.restore()
      },
      zF: function (a) {
        return a
      },
      so: function (b, c, d, e, f, g) {
        var q = !1;
        if (d === a.o.Sa.Qe || d === a.o.Sa.Zf) q = !0;
        (e = !_.isUndefined(g)) ?
        (f = (q ? g.y2 - g.y1 : g.x2 - g.x1) * c, q = (q ? g.x2 - g.x1 : g.y2 - g.y1) * c) : (f = q ? b.height * c : b.width * c, q = q ? b.width * c : b.height * c);
        var v, q = this.pk(f, q, c);
        v = parseFloat(q.style.width);
        var p = a.utils.getCanvasMultiplier();
        b = a.jd(v / f * c, d, e ? g : b, {
          x: 0,
          y: 0
        }, !0, p);
        c = q.getContext("2d");
        a.By || (q.style.backgroundColor = "white");
        c.transform(b.m_a, b.m_b, b.m_c, b.m_d, b.m_h, b.m_v);
        return {
          canvas: q,
          ctx: c,
          t: b
        }
      },
      Gp: function (a, b, c) {
        var d = document.getElementById("pageContainer" + b);
        if (!d) return null;
        var e = $(d).find(".canvas" + b);
        e.remove();
        0 < e.length &&
          e[0] === c && (e[0].width = 0, e[0].height = 0);
        var f = a.YX;
        a = $(a);
        a.css({
          "z-index": "20",
          position: "absolute"
        });
        a.addClass("hacc canvas" + b);
        _.isUndefined(f) || a.css("top", function (a) {
          return a * f
        });
        $(d).append(a);
        return d
      },
      FC: function (a) {
        return {
          width: a.x2 - a.x1,
          height: a.y2 - a.y1
        }
      },
      hD: function (b, c) {
        var d = !1;
        if (c === a.o.Sa.Qe || c === a.o.Sa.Zf) d = !0;
        return {
          width: d ? b.height : b.width,
          height: d ? b.width : b.height
        }
      },
      uo: function (b, c, d, e, f, g, q) {
        if (g) {
          var v = b[0].getContext("2d");
          v.restore();
          v.save();
          var p = a.utils.getCanvasMultiplier(),
            u = this.hD(this.FC(g), e),
            w = Math.round(u.width * d),
            u = Math.round(u.height * d),
            A = parseFloat(b.css("width")),
            B = parseFloat(b.css("height"));
          b.css({
            left: f.x,
            top: f.y
          });
          (1 < Math.abs(A - w) || 1 < Math.abs(B - u)) && b.attr({
            width: w * p,
            height: u * p
          }).css({
            width: w,
            height: u
          });
          if (g && q) {
            f = c.width;
            w = c.height;
            if (1 === q || 3 === q) f = c.height, w = c.width;
            c = a.jd(1, q, {
              width: f,
              height: w
            }, null, !1).inverse();
            g = a.utils.normalizeRect(c.W({
              x: g.x1,
              y: g.y1
            }), c.W({
              x: g.x2,
              y: g.y2
            }))
          }
          d = a.jd(d, (e + (q || 0)) % 4, g, null, !0, p);
          v.setTransform(d.m_a, d.m_b, d.m_c, d.m_d,
            d.m_h, d.m_v)
        } else b.css({
          top: "",
          left: ""
        });
        return b[0]
      },
      Rk: function (a, b, c, d, e, f, g) {
        a = $("#pageContainer" + a).find(".auxiliary");
        return 0 < a.length ? this.uo(a, b, c, d, e, f, g) : null
      },
      Zm: function (b, c, d, e, f, g) {
        var q;
        f ? (q = this.FC(f), f = q.width, q = q.height) : (f = c.width, q = c.height);
        q = this.hD({
          width: f,
          height: q
        }, e);
        f = q.width * d;
        var v = q.height * d;
        !g && this.Hk[b] ? (q = this.Hk[b], this.Km(q, f, v), q.getContext("2d").setTransform(1, 0, 0, 1, 0, 0)) : q = this.qL(f, v, d, .2);
        g || (this.Hk[b] = q);
        b = $(q);
        b.addClass("auxiliary");
        b.css({
          "z-index": "30",
          position: "absolute"
        });
        b = q.getContext("2d");
        b.clearRect(0, 0, q.width, q.height);
        c = a.jd(parseFloat(q.style.width) / f * d, e, c);
        b.transform(c.m_a, c.m_b, c.m_c, c.m_d, c.m_h, c.m_v);
        return q
      },
      et: function (a, b, c, d, e) {
        var f = document.getElementById("pageContainer" + a);
        if (!f) return null;
        f = $(f);
        0 < f.find(".auxiliary").length || (a = this.Zm(a, b, c, d, e, !0), f.prepend(a))
      },
      nv: function (b, c) {
        var d = document.querySelector("#pageContainer" + b + " .auxiliary");
        d && (a.o.za.Op(d), d.width = c.width, d.height = c.height, d.style.width = c.style.width,
          d.style.height = c.style.height, d.style.top = c.style.top, d.style.left = c.style.left, d = d.getContext("2d"), d.setTransform(1, 0, 0, 1, 0, 0), d.drawImage(c, 0, 0))
      },
      XF: function (a) {
        return $("#pageContainer" + a)
      },
      rz: function (a) {
        return $("#pageWidgetContainer" + a)
      }
    });
    a.o.RK = function (c) {
      if (c === b.Wr) a.o.za = f;
      else if (c === b.zw) a.o.za = g;
      else throw Error("Invalid Canvas Manager type");
      a.o.lE = c;
      a.o.za.init()
    };
    a.o.Vl = b;
    a.o.lE = b.zw;
    a.o.za = g;
    a.o.za.init()
  })(window);
  (function (a) {
    function e(b, e, g, h) {
      for (var l = e.password || e.p, k = e.type.toUpperCase(), m = d.length, n, r = 0; r < m; r++) d[r].done && (n = d[r]);
      !n && 4 > m && (n = {
        done: !1,
        worker: new Worker(a.o.rj() + "DecryptWorker.js"),
        callback: h
      }, d[m] = n, n.worker.addEventListener("message", function (a) {
        if (a.data.error) throw e.error && e.error(a.data.error), Error(a.data.error);
        n.callback(a.data);
        0 < c.length ? (a = c[0], c.shift(), n.done = !1, n.callback = a.callback, n.worker.postMessage({
          data: a.data,
          password: a.password,
          partName: a.tl,
          type: k
        })) : (n.callback =
          null, n.done = !0)
      }));
      n ? (n.done = !1, n.callback = h, n.worker.postMessage({
        data: b,
        password: l,
        partName: g,
        type: k
      })) : c.push({
        data: b,
        password: l,
        tl: g,
        type: k,
        callback: h
      })
    }
    var d = [],
      c = [];
    a.o = a.o || {};
    a.o.oh = a.o.oh || {};
    a.o.oh.decrypt = function (b, c, d, h) {
      b = a.oj(b);
      e(b, c, d, h)
    };
    a.o.oh.tE = function (b, c, d) {
      b = a.oj(b);
      var e = c.password || c.p;
      switch (c.type.toUpperCase()) {
        case "AES":
          b = a.sE(b, e, d);
          break;
        default:
          b = a.sE(b, e, d)
      }
      if (b.error) throw c.error && c.error(b.error), Error(b.error);
      return b
    }
  })(window);
  (function (a) {
    a.sE = function (a, d, c) {
      for (var b = [], f = 0; 16 > f; ++f) {
        b[f] = f;
        f < d.length && (b[f] |= d.charCodeAt(f));
        var g = c.length + f - 16;
        0 <= g && (b[f] |= c.charCodeAt(g))
      }
      d = [];
      for (c = 0; 16 > c; ++c) d.push(a.charCodeAt(c));
      a = a.slice(16);
      b = forge.aes.startDecrypting(b, d);
      b.update(forge.util.createBuffer(a));
      return b.finish() ? b.output.data : {
        error: "Bad password or file corrupt"
      }
    }
  })(self);
  (function (a) {
    var e, d, c = {},
      b = a.o;
    b.lT = function (a) {
      a.indexOf("/") !== a.length - 1 && (a += "/");
      d = a
    };
    b.Vy = function () {
      return d || b.rj() + "office/"
    };
    b.Jy = function () {
      return c.Hx
    };
    b.vH = function (d, g, h) {
      _.isUndefined(h) && (h = {});
      b.xf().Qu && d === b.Jy() || (h.workerId = "office_pnacl_module", h.pnaclWorkerPath = window.o.Vy() + (a.Nv ? "WebOfficeWorkerSubzero.nmf" : "WebOfficeWorker.nmf"), h.emsWorkerPath = window.o.Vy() + "OfficeWorker.js", h.hB = c, e = b.xH(d, g, h))
    };
    b.qS = function (a) {
      e = Promise.resolve(a);
      b.kr({
        office: null
      })
    };
    b.uG = function () {};
    b.nG = function (c, d, h) {
      e || b.xf().Qu || b.vH(c, d);
      b.Yt() || b.nI(h);
      h = h || b.Yt();
      if (!b.xf().Qu) {
        var l;
        c = Promise.all([b.DF(h), e]).then(function (c) {
          var d = c[0],
            e = c[1];
          if (null === d) throw c = Error("A license key for WebViewer is required. You can get a demo license key by downloading the trial from pdftron.com."), c.userMessage = "A license key for WebViewer is required. You can get a demo license key by downloading the trial from pdftron.com.", c;
          return new Promise(function (c, f) {
            b.wM(function () {
              f(new a.lk("The worker has encountered an error",
                a.utils.ie ? "error.EmsWorkerErrorIE" : "error.EmsWorkerError"))
            });
            l = new b.nK(e, b.rP(), {
              l: d
            });
            l.gB.then(function () {
              c(l)
            }, function (a) {
              f(a)
            })
          })
        });
        b.kr({
          office: c
        })
      }
      return b.xf().Qu
    }
  })("undefined" === typeof window ? this : window);
  (function (a) {
    a.GetPageMatrix = a.jd;
    a.CoreControls = function () {};
    a.CoreControls.setWorkerPath = a.o.NT;
    a.CoreControls.getWorkerPath = a.o.rj;
    a.CoreControls.setPDFWorkerPath = a.o.oT;
    a.CoreControls.getPDFWorkerPath = a.o.Wy;
    a.CoreControls.setPDFResourcePath = a.o.nT;
    a.CoreControls.getPDFResourcePath = a.o.fu;
    a.CoreControls.setPDFAsmPath = a.o.mT;
    a.CoreControls.getPDFAsmPath = a.o.dP;
    a.CoreControls.setLocalWorkerPath = a.o.hT;
    a.CoreControls.getLocalWorkerPath = a.o.Ty;
    a.CoreControls.setOfficeWorkerPath = a.o.lT;
    a.CoreControls.getOfficeWorkerPath =
      a.o.Vy;
    a.CoreControls.setResourcesPath = a.o.BT;
    a.CoreControls.getResourcesPath = a.o.Zk;
    a.CoreControls.setAdvancedImageScaling = a.o.LS;
    a.CoreControls.setProgressiveTime = a.o.yT;
    a.CoreControls.preloadPDFWorker = a.o.wH;
    a.CoreControls.initPDFWorkerTransports = a.o.qu;
    a.CoreControls.getDefaultBackendType = a.o.Ky;
    a.CoreControls.getDefaultPdfBackendType = a.o.Ky;
    a.CoreControls.getCurrentPDFBackendType = a.o.tF;
    a.CoreControls.getCurrentOfficeBackendType = a.o.Jy;
    a.CoreControls.resetWorker = a.o.rS;
    a.CoreControls.resetOfficeWorker =
      a.o.qS;
    a.CoreControls.isDemoMode = a.o.uG;
    a.CoreControls.setEmscriptenHeapSize = a.o.TS;
    a.CoreControls.setCustomFontURL = a.o.Cv;
    a.CoreControls.disableEmbeddedJavaScript = a.o.AN;
    a.CoreControls.enableSubzero = a.o.XN;
    a.CoreControls.isSubzeroEnabled = a.o.BG;
    a.CoreControls.enableFullPDF = a.o.WN;
    a.CoreControls.isFullPDFEnabled = a.o.zq;
    a.CoreControls.preloadOfficeWorker = a.o.vH;
    a.CoreControls.initOfficeWorkerTransports = a.o.nG;
    a.CoreControls.setWorkerTransportPromise = a.o.kr;
    a.CoreControls.BlackBoxAnnotationManager =
      a.o.Tl;
    a.CoreControls.BlackBoxAnnotationManager.prototype.initiateCollaboration = a.o.Tl.prototype.qQ;
    a.CoreControls.BlackBoxAnnotationManager.prototype.disableCollaboration = a.o.Tl.prototype.iy;
    a.CoreControls.BlackBoxAnnotationManager.prototype.preloadAnnotations = a.o.Tl.prototype.SR;
    a.XODText = XODText;
    a.XODText.ResultCode = XODText.ac;
    a.XODText.ResultCode.e_done = XODText.ac.Mk;
    a.XODText.ResultCode.e_page = XODText.ac.It;
    a.XODText.ResultCode.e_found = XODText.ac.Wp;
    a.XODText.Quad = XODText.bb;
    a.XODText.Quad.prototype.getPoints =
      XODText.bb.prototype.Vg;
    a.XODText.Quad.prototype.getNormalizedPoints = XODText.bb.prototype.bP;
    a.XODText.Matrix2D = XODText.Ca;
    a.XODText.Matrix2D.prototype.initMatrix = XODText.Ca.prototype.al;
    a.XODText.Matrix2D.prototype.initCoordinates = XODText.Ca.prototype.Ha;
    a.XODText.Matrix2D.prototype.mult = XODText.Ca.prototype.W;
    a.XODText.Point2D = XODText.xd;
    a.CoreControls.Encryption = a.o.oh;
    a.CoreControls.Encryption.decrypt = a.o.oh.decrypt;
    a.CoreControls.Encryption.decryptSynchronous = a.o.oh.tE;
    a.CoreControls.PartRetrievers =
      function () {};
    a.CoreControls.PartRetrievers.PartRetriever = a.o.V.cf;
    a.CoreControls.PartRetrievers.PartRetriever.prototype.setErrorCallback = a.o.V.cf.prototype.US;
    a.CoreControls.PartRetrievers.PartRetriever.prototype.setCustomHeaders = a.o.V.cf.prototype.El;
    a.CoreControls.PartRetrievers.PartRetriever.prototype.setWithCredentials = a.o.V.cf.prototype.Kv;
    a.CoreControls.PartRetrievers.CacheHinting = a.o.V.wi;
    a.CoreControls.PartRetrievers.CacheHinting.NEVER_CACHE = a.o.V.wi.Mr;
    a.CoreControls.PartRetrievers.CacheHinting.CACHE =
      a.o.V.wi.pB;
    a.CoreControls.PartRetrievers.CacheHinting.NO_HINT = a.o.V.wi.fK;
    a.CoreControls.PartRetrievers.LocalPartRetriever = a.o.V.wB;
    a.CoreControls.PartRetrievers.HttpPartRetriever = a.o.V.Wj;
    a.CoreControls.PartRetrievers.HttpPartRetriever.prototype.requestDocument = a.o.V.cf.prototype.yl;
    a.CoreControls.PartRetrievers.HttpPartRetriever.prototype.request = a.o.V.cf.prototype.request;
    a.CoreControls.PartRetrievers.ExternalHttpPartRetriever = a.o.V.rw;
    a.CoreControls.PartRetrievers.ExternalPdfPartRetriever = a.o.V.Ir;
    a.CoreControls.PartRetrievers.ExternalPdfPartRetriever.prototype.setCustomHeaders = a.o.V.Ir.prototype.El;
    a.CoreControls.PartRetrievers.ExternalPdfPartRetriever.prototype.getFileData = a.o.V.Ir.prototype.getFileData;
    a.CoreControls.PartRetrievers.ArrayBufferPdfPartRetriever = a.o.V.BJ;
    a.CoreControls.PartRetrievers.LocalPdfPartRetriever = a.o.V.cK;
    a.CoreControls.PartRetrievers.StreamingPartRetriever = a.o.V.JB;
    a.CoreControls.PartRetrievers.RangeStreamingPartRetriever = a.o.V.CK;
    a.CoreControls.PartRetrievers.BlackBoxPartRetriever =
      a.o.V.Br;
    a.CoreControls.PartRetrievers.BlackBoxPartRetriever.prototype.setCustomHeaders = a.o.V.Br.prototype.El;
    a.CoreControls.PartRetrievers.BlackBoxPartRetriever.prototype.getFileData = a.o.V.Br.prototype.getFileData;
    a.CoreControls.PartRetrievers.BlackBoxPartRetriever.prototype.setWithCredentials = a.o.V.Br.prototype.Kv;
    a.CoreControls.PartRetrievers.WebDBPartRetriever = a.o.V.fp;
    a.CoreControls.PartRetrievers.AndroidContentPartRetriever = a.o.V.AJ;
    a.CoreControls.PartRetrievers.AzurePartRetriever = a.o.V.EJ;
    a.CoreControls.PartRetrievers.IOSPartRetriever = a.o.V.Uo;
    a.CoreControls.PartRetrievers.IOSPartRetriever.partSuccess = a.o.V.Uo.hA;
    a.CoreControls.PartRetrievers.IOSPartRetriever.partFail = a.o.V.Uo.gA;
    a.CoreControls.PartRetrievers.WinRTPartRetriever = a.o.V.gp;
    a.CoreControls.PartRetrievers.WinRTPartRetriever.partSuccess = a.o.V.gp.hA;
    a.CoreControls.PartRetrievers.WinRTPartRetriever.partFail = a.o.V.gp.gA;
    a.CoreControls.CanvasMode = a.o.Vl;
    a.CoreControls.CanvasMode.ViewportCanvas = a.o.Vl.Wr;
    a.CoreControls.CanvasMode.PageCanvas =
      a.o.Vl.zw;
    a.CoreControls.SetCanvasMode = a.o.RK;
    a.CoreControls.Bookmark = a.o.Xe;
    a.CoreControls.Bookmark.prototype.getName = a.o.Xe.prototype.getName;
    a.CoreControls.Bookmark.prototype.getVPos = a.o.Xe.prototype.JP;
    a.CoreControls.Bookmark.prototype.getHPos = a.o.Xe.prototype.QO;
    a.CoreControls.Bookmark.prototype.getPageNumber = a.o.Xe.prototype.Ac;
    a.CoreControls.Bookmark.prototype.getURL = a.o.Xe.prototype.IP;
    a.CoreControls.Bookmark.prototype.getParent = a.o.Xe.prototype.getParent;
    a.CoreControls.Bookmark.prototype.getChildren =
      a.o.Xe.prototype.qF;
    a.CoreControls.Bookmark.prototype.isValid = a.o.Xe.prototype.isValid;
    a.CoreControls.Document = a.o.Document;
    a.CoreControls.Document.prototype.getMetadata = a.o.Document.prototype.getMetadata;
    a.CoreControls.Document.prototype.getBookmarks = a.o.Document.prototype.Sk;
    a.CoreControls.Document.prototype.getLayers = a.o.Document.prototype.YW;
    a.CoreControls.Document.prototype.getLinks = a.o.Document.prototype.xn;
    a.CoreControls.Document.prototype.loadThumbnailAsync = a.o.Document.prototype.zj;
    a.CoreControls.Document.prototype.includesThumbnails =
      a.o.Document.prototype.vj;
    a.CoreControls.Document.prototype.loadPageText = a.o.Document.prototype.XQ;
    a.CoreControls.Document.prototype.refreshTextData = a.o.Document.prototype.eS;
    a.CoreControls.Document.prototype.getTextPosition = a.o.Document.prototype.jz;
    a.CoreControls.Document.prototype.extractXFDF = a.o.Document.prototype.Nh;
    a.CoreControls.Document.prototype.loadCanvasAsync = a.o.Document.prototype.$g;
    a.CoreControls.Document.prototype.pauseLoadCanvas = a.o.Document.prototype.fv;
    a.CoreControls.Document.prototype.resumeLoadCanvas =
      a.o.Document.prototype.yv;
    a.CoreControls.Document.prototype.cancelLoadCanvas = a.o.Document.prototype.Fh;
    a.CoreControls.Document.prototype.cancelLoadThumbnail = a.o.Document.prototype.bj;
    a.CoreControls.Document.prototype.unloadCanvasResources = a.o.Document.prototype.Ao;
    a.CoreControls.Document.prototype.getPageInfo = a.o.Document.prototype.zc;
    a.CoreControls.Document.prototype.getPageMatrix = a.o.Document.prototype.Oc;
    a.CoreControls.Document.prototype.getPageCount = a.o.Document.prototype.Ab;
    a.CoreControls.Document.prototype.getPDFCoordinates =
      a.o.Document.prototype.eu;
    a.CoreControls.Document.prototype.getXODCoordinates = a.o.Document.prototype.ou;
    a.CoreControls.Document.prototype.getViewerCoordinates = a.o.Document.prototype.pz;
    a.CoreControls.Document.prototype.loadAsync = a.o.Document.prototype.Bf;
    a.CoreControls.Document.prototype.unloadResources = a.o.Document.prototype.$b;
    a.CoreControls.Document.prototype.initOfflineDB = a.o.Document.prototype.bl;
    a.CoreControls.Document.prototype.storeOffline = a.o.Document.prototype.yo;
    a.CoreControls.Document.prototype.isDownloaded =
      a.o.Document.prototype.wj;
    a.CoreControls.Document.prototype.getOfflineModeEnabled = a.o.Document.prototype.yn;
    a.CoreControls.Document.prototype.setOfflineModeEnabled = a.o.Document.prototype.po;
    a.CoreControls.Document.prototype.cancelOfflineModeDownload = a.o.Document.prototype.Tm;
    a.CoreControls.Document.prototype.getPrintablePDF = a.o.Document.prototype.Cn;
    a.CoreControls.Document.prototype.getDownloadLink = a.o.Document.prototype.hq;
    a.CoreControls.Document.prototype.submitRedactions = a.o.Document.prototype.Mv;
    a.CoreControls.Document.prototype.getFileData = a.o.Document.prototype.getFileData;
    a.CoreControls.Document.prototype.onJSCompletion = a.o.Document.prototype.wR;
    a.CoreControls.Document.prototype.insertPages = a.o.Document.prototype.Nn;
    a.CoreControls.Document.prototype.getPDFDoc = a.o.Document.prototype.zn;
    a.CoreControls.Document.prototype.getLayersArray = a.o.Document.prototype.vn;
    a.CoreControls.Document.prototype.setLayersArray = a.o.Document.prototype.Ev;
    a.CoreControls.Document.prototype.setOverprintPreviewMode =
      a.o.Document.prototype.Gv;
    a.CoreControls.Document.prototype.extractPDFNetLayersContext = a.o.Document.prototype.ln;
    a.CoreControls.Document.prototype.insertBlankPages = a.o.Document.prototype.vq;
    a.CoreControls.Document.prototype.removePages = a.o.Document.prototype.ao;
    a.CoreControls.Document.prototype.movePages = a.o.Document.prototype.Lq;
    a.CoreControls.Document.prototype.rotatePages = a.o.Document.prototype.fo;
    a.CoreControls.Document.prototype.extractPages = a.o.Document.prototype.mn;
    a.CoreControls.Document.prototype.cropPages =
      a.o.Document.prototype.an;
    a.CoreControls.Document.prototype.print = a.o.Document.prototype.print;
    a.CoreControls.Document.prototype.documentCompletePromise = a.o.Document.prototype.hc;
    a.CoreControls.Document.prototype.setWatermark = a.o.Document.prototype.Hl;
    a.CoreControls.Document.prototype.requirePage = a.o.Document.prototype.zl;
    a.CoreControls.Document.prototype.supportsExtraSelectorPositioning = a.o.Document.prototype.Mj;
    a.CoreControls.Document.prototype.getOfficeDocInfo = a.o.Document.prototype.ZW;
    a.CoreControls.Document.prototype.getOfficeResources =
      a.o.Document.prototype.$W;
    a.CoreControls.Document.prototype.enableColorSeparations = a.o.Document.prototype.Kt;
    a.CoreControls.Document.prototype.getColorSeparations = a.o.Document.prototype.Xt;
    a.CoreControls.Document.prototype.enableSeparation = a.o.Document.prototype.Lt;
    a.CoreControls.PageRotation = a.o.Sa;
    a.CoreControls.PageRotation.e_0 = a.o.Sa.Mh;
    a.CoreControls.PageRotation.e_90 = a.o.Sa.Qe;
    a.CoreControls.PageRotation.e_180 = a.o.Sa.Vp;
    a.CoreControls.PageRotation.e_270 = a.o.Sa.Zf;
    a.CoreControls.OverprintPreviewMode =
      a.o.Xo;
    a.CoreControls.OverprintPreviewMode.OFF = a.o.Xo.hK;
    a.CoreControls.OverprintPreviewMode.ON = a.o.Xo.jK;
    a.CoreControls.OverprintPreviewMode.PDFX_ON = a.o.Xo.AK;
    a.CoreControls.SaveOptions = a.o.ek;
    a.CoreControls.SaveOptions.INCREMENTAL = a.o.ek.XJ;
    a.CoreControls.SaveOptions.REMOVE_UNUSED = a.o.ek.BK;
    a.CoreControls.SaveOptions.HEX_STRINGS = a.o.ek.SJ;
    a.CoreControls.SaveOptions.OMIT_XREF = a.o.ek.iK;
    a.CoreControls.SaveOptions.LINEARIZED = a.o.ek.bK;
    a.CoreControls.SaveOptions.COMPATIBILITY = a.o.ek.FJ;
    a.CoreControls.DocumentViewer =
      a.o.aa;
    a.CoreControls.DocumentViewer.prototype.loadAsync = a.o.aa.prototype.Bf;
    a.CoreControls.DocumentViewer.prototype.dispose = a.o.aa.prototype.Yc;
    a.CoreControls.DocumentViewer.prototype.FitMode = function () {};
    a.CoreControls.DocumentViewer.prototype.FitMode.FitWidth = a.o.aa.prototype.zg.vw;
    a.CoreControls.DocumentViewer.prototype.FitMode.FitPage = a.o.aa.prototype.zg.uB;
    a.CoreControls.DocumentViewer.prototype.FitMode.Zoom = a.o.aa.prototype.zg.Zoom;
    a.CoreControls.DocumentViewer.prototype.displayLastPage = a.o.aa.prototype.GN;
    a.CoreControls.DocumentViewer.prototype.displayFirstPage = a.o.aa.prototype.FN;
    a.CoreControls.DocumentViewer.prototype.setCurrentPage = a.o.aa.prototype.Be;
    a.CoreControls.DocumentViewer.prototype.getCurrentPage = a.o.aa.prototype.rn;
    a.CoreControls.DocumentViewer.prototype.setRightToLeftPages = a.o.aa.prototype.CT;
    a.CoreControls.DocumentViewer.prototype.getRightToLeftPages = a.o.aa.prototype.fz;
    a.CoreControls.DocumentViewer.prototype.getZoom = a.o.aa.prototype.Wg;
    a.CoreControls.DocumentViewer.prototype.getPageCount =
      a.o.aa.prototype.Ab;
    a.CoreControls.DocumentViewer.prototype.setFitMode = a.o.aa.prototype.JA;
    a.CoreControls.DocumentViewer.prototype.getFitMode = a.o.aa.prototype.MO;
    a.CoreControls.DocumentViewer.prototype.zoomTo = a.o.aa.prototype.mB;
    a.CoreControls.DocumentViewer.prototype.zoomToMouse = a.o.aa.prototype.aV;
    a.CoreControls.DocumentViewer.prototype.setToolMode = a.o.aa.prototype.PA;
    a.CoreControls.DocumentViewer.prototype.getToolMode = a.o.aa.prototype.mu;
    a.CoreControls.DocumentViewer.prototype.getToolModeMap = a.o.aa.prototype.FP;
    a.CoreControls.DocumentViewer.prototype.getTool = a.o.aa.prototype.nz;
    a.CoreControls.DocumentViewer.prototype.rotateClockwise = a.o.aa.prototype.vS;
    a.CoreControls.DocumentViewer.prototype.rotateCounterClockwise = a.o.aa.prototype.wS;
    a.CoreControls.DocumentViewer.prototype.textSearchInit = a.o.aa.prototype.ZA;
    a.CoreControls.DocumentViewer.prototype.SearchMode = function () {};
    a.CoreControls.DocumentViewer.prototype.SearchMode.e_case_sensitive = XODText.ib.LE;
    a.CoreControls.DocumentViewer.prototype.SearchMode.e_whole_word =
      XODText.ib.PE;
    a.CoreControls.DocumentViewer.prototype.SearchMode.e_search_up = XODText.ib.sy;
    a.CoreControls.DocumentViewer.prototype.SearchMode.e_page_stop = XODText.ib.NE;
    a.CoreControls.DocumentViewer.prototype.SearchMode.e_highlight = XODText.ib.ME;
    a.CoreControls.DocumentViewer.prototype.SearchMode.e_ambient_string = XODText.ib.KE;
    a.CoreControls.DocumentViewer.prototype.SearchMode.e_wild_card = XODText.ib.QE;
    a.CoreControls.DocumentViewer.prototype.SearchMode.e_regex = XODText.ib.OE;
    a.CoreControls.DocumentViewer.prototype.displayBookmark =
      a.o.aa.prototype.EN;
    a.CoreControls.DocumentViewer.prototype.displayPageLocation = a.o.aa.prototype.bn;
    a.CoreControls.DocumentViewer.prototype.getDocument = a.o.aa.prototype.getDocument;
    a.CoreControls.DocumentViewer.prototype.getSelectedText = a.o.aa.prototype.lu;
    a.CoreControls.DocumentViewer.prototype.getSelectedTextQuads = a.o.aa.prototype.hz;
    a.CoreControls.DocumentViewer.prototype.setTextHighlightColor = a.o.aa.prototype.JT;
    a.CoreControls.DocumentViewer.prototype.setSearchHighlightColors = a.o.aa.prototype.ET;
    a.CoreControls.DocumentViewer.prototype.displaySearchResult = a.o.aa.prototype.jy;
    a.CoreControls.DocumentViewer.prototype.displayAdditionalSearchResult = a.o.aa.prototype.DN;
    a.CoreControls.DocumentViewer.prototype.setActiveSearchResult = a.o.aa.prototype.KS;
    a.CoreControls.DocumentViewer.prototype.clearSearchResults = a.o.aa.prototype.UM;
    a.CoreControls.DocumentViewer.prototype.getColorSeparationsAtPoint = a.o.aa.prototype.BO;
    a.CoreControls.DocumentViewer.prototype.scrollViewUpdated = a.o.aa.prototype.FS;
    a.CoreControls.DocumentViewer.prototype.closeDocument =
      a.o.aa.prototype.aE;
    a.CoreControls.DocumentViewer.prototype.setOptions = a.o.aa.prototype.fe;
    a.CoreControls.DocumentViewer.prototype.recalculateLayout = a.o.aa.prototype.DH;
    a.CoreControls.DocumentViewer.prototype.refreshAll = a.o.aa.prototype.cS;
    a.CoreControls.DocumentViewer.prototype.refreshPage = a.o.aa.prototype.dS;
    a.CoreControls.DocumentViewer.prototype.getAnnotationsLoadedPromise = a.o.aa.prototype.vO;
    a.CoreControls.DocumentViewer.prototype.printCurrentDocument = a.o.aa.prototype.SX;
    a.CoreControls.DocumentViewer.prototype.getRenderingPipeline =
      a.o.aa.prototype.OF;
    a.CoreControls.DocumentViewer.prototype.setWatermark = a.o.aa.prototype.Hl;
    a.CoreControls.DocumentViewer.prototype.getWatermark = a.o.aa.prototype.WF;
    a.CoreControls.DocumentViewer.prototype.getViewer = a.o.aa.prototype.Qc;
    a.CoreControls.DocumentViewer.prototype.getViewerElement = a.o.aa.prototype.VF;
    a.CoreControls.DocumentViewer.prototype.setViewerElement = a.o.aa.prototype.zI;
    a.CoreControls.DocumentViewer.prototype.getScrollView = a.o.aa.prototype.Mb;
    a.CoreControls.DocumentViewer.prototype.getScrollViewElement =
      a.o.aa.prototype.iu;
    a.CoreControls.DocumentViewer.prototype.setScrollViewElement = a.o.aa.prototype.wI;
    a.CoreControls.RenderingPipeline = a.o.jm;
    a.CoreControls.RenderingPipeline.PipelineManager = a.o.jm.ap;
    a.CoreControls.RenderingPipeline.PipelineManager.prototype.registerHandlers = a.o.jm.ap.prototype.GH;
    a.CoreControls.RenderingPipeline.PipelineManager.prototype.pushChange = a.o.jm.ap.prototype.hi;
    a.CoreControls.RenderingPipeline.PipelineManager.prototype.hasPipeline = a.o.jm.ap.prototype.WP;
    a.CoreControls.SetCachingLevel =
      a.o.Fw;
    a.CoreControls.SetPreRenderLevel = a.o.GB;
    a.CoreControls.DocumentViewer.prototype.getMargin = a.o.aa.prototype.bu;
    a.CoreControls.DocumentViewer.prototype.setMargin = a.o.aa.prototype.iT;
    a.CoreControls.DocumentViewer.prototype.updateView = a.o.aa.prototype.Ll;
    a.CoreControls.DocumentViewer.prototype.updateVisiblePages = a.o.aa.prototype.Co;
    a.CoreControls.DocumentViewer.prototype.stopPageRender = a.o.aa.prototype.xo;
    a.CoreControls.DocumentViewer.prototype.setPagesPerCanvas = a.o.aa.prototype.Iv;
    a.CoreControls.DocumentViewer.prototype.returnCanvas =
      a.o.aa.prototype.zv;
    a.CoreControls.DocumentViewer.prototype.drawSelection = a.o.aa.prototype.py;
    a.CoreControls.DocumentViewer.prototype.clearSelection = a.o.aa.prototype.Qp;
    a.CoreControls.DocumentViewer.prototype.removeContent = a.o.aa.prototype.ki;
    a.CoreControls.DocumentViewer.prototype.select = a.o.aa.prototype.select;
    a.CoreControls.DocumentViewer.prototype.getPageHeight = a.o.aa.prototype.nd;
    a.CoreControls.DocumentViewer.prototype.getPageWidth = a.o.aa.prototype.od;
    a.CoreControls.DocumentViewer.prototype.setPageZoom =
      a.o.aa.prototype.Hv;
    a.CoreControls.DocumentViewer.prototype.getPageZoom = a.o.aa.prototype.tb;
    a.CoreControls.DocumentViewer.prototype.getRotation = a.o.aa.prototype.$d;
    a.CoreControls.DocumentViewer.prototype.setRotation = a.o.aa.prototype.DT;
    a.CoreControls.DocumentViewer.prototype.getCompleteRotation = a.o.aa.prototype.ue;
    a.CoreControls.DocumentViewer.prototype.getPageRotations = a.o.aa.prototype.jP;
    a.CoreControls.DocumentViewer.prototype.setPageRotations = a.o.aa.prototype.qT;
    a.CoreControls.DocumentViewer.prototype.getAnnotationManager =
      a.o.aa.prototype.Wa;
    a.CoreControls.DocumentViewer.prototype.setAnnotationImportOptions = a.o.aa.prototype.NS;
    a.CoreControls.DocumentViewer.prototype.setInternalAnnotationsTransform = a.o.aa.prototype.bT;
    a.CoreControls.DocumentViewer.prototype.setPagesUpdatedInternalAnnotationsTransform = a.o.aa.prototype.vT;
    a.CoreControls.DocumentViewer.prototype.setPageVisibilityCallback = a.o.aa.prototype.uT;
    a.CoreControls.DocumentViewer.prototype.getDisplayModeManager = a.o.aa.prototype.Wk;
    a.CoreControls.DocumentViewer.prototype.setViewportRenderMode =
      a.o.aa.prototype.RA;
    a.CoreControls.DocumentViewer.prototype.getViewportRegionRect = a.o.aa.prototype.KP;
    a.CoreControls.DocumentViewer.prototype.setRenderBatchSize = a.o.aa.prototype.vI;
    a.CoreControls.DisplayMode = a.o.vd;
    a.CoreControls.DisplayMode.prototype.setParameters = a.o.vd.prototype.wT;
    a.CoreControls.DisplayMode.prototype.isContinuous = a.o.vd.prototype.Gz;
    a.CoreControls.DisplayMode.prototype.windowToPage = a.o.vd.prototype.Oj;
    a.CoreControls.DisplayMode.prototype.windowToPageNoRotate = a.o.vd.prototype.OU;
    a.CoreControls.DisplayMode.prototype.pageToWindow = a.o.vd.prototype.Ff;
    a.CoreControls.DisplayMode.prototype.pageToWindowNoRotate = a.o.vd.prototype.DR;
    a.CoreControls.DisplayMode.prototype.getSelectedPages = a.o.vd.prototype.ku;
    a.CoreControls.DisplayMode.prototype.getVisiblePages = a.o.vd.prototype.be;
    a.CoreControls.DisplayMode.prototype.getPageTransform = a.o.vd.prototype.Bn;
    a.CoreControls.DisplayMode.prototype.getPageOffset = a.o.vd.prototype.Yy;
    a.CoreControls.DisplayMode.prototype.createPageSections = a.o.vd.prototype.uW;
    a.CoreControls.DisplayMode.prototype.setCustomFunctions = a.o.vd.prototype.SS;
    a.CoreControls.DisplayModes = a.o.wd;
    a.CoreControls.DisplayModes.Single = a.o.wd.HB;
    a.CoreControls.DisplayModes.Continuous = a.o.wd.Oo;
    a.CoreControls.DisplayModes.Facing = a.o.wd.sB;
    a.CoreControls.DisplayModes.FacingContinuous = a.o.wd.uw;
    a.CoreControls.DisplayModes.Cover = a.o.wd.Er;
    a.CoreControls.DisplayModes.CoverFacing = a.o.wd.Fr;
    a.CoreControls.DisplayModes.Custom = a.o.wd.Nf;
    a.CoreControls.DisplayModeManager = a.o.Ro;
    a.CoreControls.DisplayModeManager.prototype.setDisplayMode =
      a.o.Ro.prototype.kI;
    a.CoreControls.DisplayModeManager.prototype.getDisplayMode = a.o.Ro.prototype.ic;
    a.CoreControls.AnnotationManager = a.o.ka;
    a.CoreControls.AnnotationManager.prototype.addAnnotation = a.o.ka.prototype.Lg;
    a.CoreControls.AnnotationManager.prototype.addAnnotations = a.o.ka.prototype.Bh;
    a.CoreControls.AnnotationManager.prototype.deleteAnnotation = a.o.ka.prototype.gj;
    a.CoreControls.AnnotationManager.prototype.deleteAnnotations = a.o.ka.prototype.cy;
    a.CoreControls.AnnotationManager.prototype.selectAnnotation =
      a.o.ka.prototype.jo;
    a.CoreControls.AnnotationManager.prototype.selectAnnotations = a.o.ka.prototype.CA;
    a.CoreControls.AnnotationManager.prototype.deselectAnnotation = a.o.ka.prototype.Tp;
    a.CoreControls.AnnotationManager.prototype.deselectAllAnnotations = a.o.ka.prototype.Gd;
    a.CoreControls.AnnotationManager.prototype.isAnnotationSelected = a.o.ka.prototype.cl;
    a.CoreControls.AnnotationManager.prototype.getSelectedAnnotations = a.o.ka.prototype.ae;
    a.CoreControls.AnnotationManager.prototype.updateCopiedAnnotations =
      a.o.ka.prototype.wU;
    a.CoreControls.AnnotationManager.prototype.pasteCopiedAnnotations = a.o.ka.prototype.MR;
    a.CoreControls.AnnotationManager.prototype.getAnnotationCopy = a.o.ka.prototype.Fy;
    a.CoreControls.AnnotationManager.prototype.drawAnnotations = a.o.ka.prototype.Hd;
    a.CoreControls.AnnotationManager.prototype.redrawAnnotation = a.o.ka.prototype.Zb;
    a.CoreControls.AnnotationManager.prototype.drawAnnotationsFromList = a.o.ka.prototype.gn;
    a.CoreControls.AnnotationManager.prototype.updateAnnotation = a.o.ka.prototype.gJ;
    a.CoreControls.AnnotationManager.prototype.jumpToAnnotation = a.o.ka.prototype.MQ;
    a.CoreControls.AnnotationManager.prototype.hasAnnotation = a.o.ka.prototype.sj;
    a.CoreControls.AnnotationManager.prototype.getAnnotationsList = a.o.ka.prototype.Qg;
    a.CoreControls.AnnotationManager.prototype.setNoteContents = a.o.ka.prototype.LA;
    a.CoreControls.AnnotationManager.prototype.getCurrentUser = a.o.ka.prototype.Uk;
    a.CoreControls.AnnotationManager.prototype.setCurrentUser = a.o.ka.prototype.IA;
    a.CoreControls.AnnotationManager.prototype.getIsAdminUser =
      a.o.ka.prototype.WO;
    a.CoreControls.AnnotationManager.prototype.setIsAdminUser = a.o.ka.prototype.cT;
    a.CoreControls.AnnotationManager.prototype.setReadOnly = a.o.ka.prototype.zT;
    a.CoreControls.AnnotationManager.prototype.getReadOnly = a.o.ka.prototype.NF;
    a.CoreControls.AnnotationManager.prototype.canModify = a.o.ka.prototype.Dd;
    a.CoreControls.AnnotationManager.prototype.canModifyContents = a.o.ka.prototype.Kx;
    a.CoreControls.AnnotationManager.prototype.setPermissionCheckCallback = a.o.ka.prototype.xT;
    a.CoreControls.AnnotationManager.prototype.setSubmitFormActionCallback =
      a.o.ka.prototype.IT;
    a.CoreControls.AnnotationManager.prototype.getAnnotCommand = a.o.ka.prototype.Ut;
    a.CoreControls.AnnotationManager.prototype.importAnnotCommand = a.o.ka.prototype.Mn;
    a.CoreControls.AnnotationManager.prototype.exportAnnotations = a.o.ka.prototype.UE;
    a.CoreControls.AnnotationManager.prototype.importAnnotations = a.o.ka.prototype.hQ;
    a.CoreControls.AnnotationManager.prototype.importAnnotationsAsync = a.o.ka.prototype.lG;
    a.CoreControls.AnnotationManager.prototype.useFreeTextEditing = a.o.ka.prototype.GU;
    a.CoreControls.AnnotationManager.prototype.disableFreeTextEditing = a.o.ka.prototype.BN;
    a.CoreControls.AnnotationManager.prototype.registerAnnotationType = a.o.ka.prototype.fS;
    a.CoreControls.AnnotationManager.prototype.deregisterAnnotationType = a.o.ka.prototype.wN;
    a.CoreControls.AnnotationManager.prototype.getRegisteredAnnotationTypes = a.o.ka.prototype.vP;
    a.CoreControls.AnnotationManager.prototype.getAnnotationFromPopup = a.o.ka.prototype.tO;
    a.CoreControls.AnnotationManager.prototype.getAnnotationByMouseEvent =
      a.o.ka.prototype.pn;
    a.CoreControls.AnnotationManager.prototype.getAnnotationById = a.o.ka.prototype.nj;
    a.CoreControls.AnnotationManager.prototype.getRootAnnotation = a.o.ka.prototype.pq;
    a.CoreControls.AnnotationManager.prototype.createAnnotationReply = a.o.ka.prototype.fN;
    a.CoreControls.AnnotationManager.prototype.hideAnnotation = a.o.ka.prototype.bQ;
    a.CoreControls.AnnotationManager.prototype.hideAnnotations = a.o.ka.prototype.gG;
    a.CoreControls.AnnotationManager.prototype.showAnnotation = a.o.ka.prototype.VT;
    a.CoreControls.AnnotationManager.prototype.showAnnotations = a.o.ka.prototype.JI;
    a.CoreControls.AnnotationManager.prototype.setRedrawThrottle = a.o.ka.prototype.AT;
    a.CoreControls.AnnotationManager.prototype.getFieldManager = a.o.ka.prototype.Xd;
    a.CoreControls.AnnotationManager.prototype.getEditBoxManager = a.o.ka.prototype.My;
    a.CoreControls.AnnotationManager.prototype.setAnnotationStyles = a.o.ka.prototype.OS;
    a.CoreControls.AnnotationManager.prototype.setAnnotationDisplayAuthorMap = a.o.ka.prototype.gI;
    a.CoreControls.AnnotationManager.prototype.getDisplayAuthor =
      a.o.ka.prototype.HO;
    a.Actions = a.Actions;
    a.Actions.GoTo = a.Actions.$e;
    a.Actions.GoTo.Dest = a.Actions.$e.Qo;
    a.Actions.GoToR = a.Actions.$l;
    a.Actions.URI = a.Actions.Hi;
    a.Actions.Named = a.Actions.em;
    a.Actions.JavaScript = a.Actions.bm;
    a.Actions.ResetForm = a.Actions.ck;
    a.Actions.SubmitForm = a.Actions.hk;
    a.Actions.Hide = a.Actions.am;
    a.Annotations = a.Annotations;
    a.Annotations.Color = a.Annotations.Color;
    a.Annotations.Color.prototype.toHexString = a.Annotations.Color.prototype.toHexString;
    a.Annotations.Forms = a.Annotations.O;
    a.Annotations.Forms.FieldManager = a.Annotations.O.yi;
    a.Annotations.Forms.FieldManager.prototype.getField = a.Annotations.O.yi.prototype.zb;
    a.Annotations.Forms.FieldManager.prototype.addField = a.Annotations.O.yi.prototype.Ys;
    a.Annotations.Forms.FieldManager.prototype.forEachField = a.Annotations.O.yi.prototype.nn;
    a.Annotations.Forms.FieldManager.prototype.setAlertHandler = a.Annotations.O.yi.prototype.MS;
    a.Annotations.Forms.Field = a.Annotations.O.fa;
    a.Annotations.Forms.Field.prototype.getValue = a.Annotations.O.fa.prototype.Xa;
    a.Annotations.Forms.Field.prototype.setValue = a.Annotations.O.fa.prototype.Db;
    a.Annotations.Forms.Field.prototype.setVisible = a.Annotations.O.fa.prototype.If;
    a.Annotations.Forms.Field.prototype.on = a.Annotations.O.fa.prototype.on;
    a.Annotations.Forms.Field.prototype.off = a.Annotations.O.fa.prototype.off;
    a.Annotations.Forms.Field.prototype.trigger = a.Annotations.O.fa.prototype.trigger;
    a.Annotations.Forms.Field.prototype.getActions = a.Annotations.O.fa.prototype.lj;
    a.Annotations.HTMLAnnotation = a.Annotations.HTMLAnnotation;
    a.Annotations.HTMLAnnotation.prototype.addAction = a.Annotations.HTMLAnnotation.prototype.Ek;
    a.Annotations.HTMLAnnotation.prototype.getActions = a.Annotations.HTMLAnnotation.prototype.lj;
    a.Annotations.HTMLAnnotation.prototype.triggerAction = a.Annotations.HTMLAnnotation.prototype.De;
    a.Annotations.HTMLAnnotation.prototype.getInnerElement = a.Annotations.HTMLAnnotation.prototype.CF;
    a.Annotations.HTMLAnnotation.prototype.getElement = a.Annotations.HTMLAnnotation.prototype.wF;
    a.Annotations.WidgetAnnotation = a.Annotations.WidgetAnnotation;
    a.Annotations.WidgetAnnotation.prototype.setValue = a.Annotations.WidgetAnnotation.prototype.Db;
    a.Annotations.WidgetAnnotation.prototype.getValue = a.Annotations.WidgetAnnotation.prototype.Xa;
    a.Annotations.WidgetAnnotation.prototype.addAction = a.Annotations.WidgetAnnotation.prototype.Ek;
    a.Annotations.WidgetAnnotation.prototype.getField = a.Annotations.WidgetAnnotation.prototype.zb;
    a.Annotations.WidgetAnnotation.prototype.setField = a.Annotations.WidgetAnnotation.prototype.mI;
    a.Annotations.WidgetAnnotation.prototype.on =
      a.Annotations.WidgetAnnotation.prototype.on;
    a.Annotations.WidgetAnnotation.prototype.off = a.Annotations.WidgetAnnotation.prototype.off;
    a.Annotations.WidgetAnnotation.prototype.trigger = a.Annotations.WidgetAnnotation.prototype.trigger;
    a.Annotations.TextWidgetAnnotation = a.Annotations.kk;
    a.Annotations.ChoiceWidgetAnnotation = a.Annotations.yg;
    a.Annotations.ListWidgetAnnotation = a.Annotations.zi;
    a.Annotations.ButtonWidgetAnnotation = a.Annotations.mc;
    a.Annotations.PushButtonWidgetAnnotation = a.Annotations.Di;
    a.Annotations.CheckButtonWidgetAnnotation = a.Annotations.mh;
    a.Annotations.RadioButtonWidgetAnnotation = a.Annotations.ak;
    a.Annotations.SignatureWidgetAnnotation = a.Annotations.fk;
    a.Annotations.Annotation = a.Annotations.Annotation;
    a.Annotations.Annotation.prototype.getPageNumber = a.Annotations.Annotation.prototype.Ac;
    a.Annotations.Annotation.prototype.setPageNumber = a.Annotations.Annotation.prototype.qI;
    a.Annotations.Annotation.prototype.getX = a.Annotations.Annotation.prototype.Gn;
    a.Annotations.Annotation.prototype.setX =
      a.Annotations.Annotation.prototype.OT;
    a.Annotations.Annotation.prototype.getY = a.Annotations.Annotation.prototype.Hn;
    a.Annotations.Annotation.prototype.setY = a.Annotations.Annotation.prototype.PT;
    a.Annotations.Annotation.prototype.getTop = a.Annotations.Annotation.prototype.Dn;
    a.Annotations.Annotation.prototype.getBottom = a.Annotations.Annotation.prototype.mF;
    a.Annotations.Annotation.prototype.getLeft = a.Annotations.Annotation.prototype.wn;
    a.Annotations.Annotation.prototype.getRight = a.Annotations.Annotation.prototype.QF;
    a.Annotations.Annotation.prototype.getWidth = a.Annotations.Annotation.prototype.ya;
    a.Annotations.Annotation.prototype.setWidth = a.Annotations.Annotation.prototype.AI;
    a.Annotations.Annotation.prototype.getHeight = a.Annotations.Annotation.prototype.xa;
    a.Annotations.Annotation.prototype.setHeight = a.Annotations.Annotation.prototype.hr;
    a.Annotations.Annotation.prototype.getCustom = a.Annotations.Annotation.prototype.FO;
    a.Annotations.Annotation.prototype.setCustom = a.Annotations.Annotation.prototype.RS;
    a.Annotations.Annotation.prototype.draw =
      a.Annotations.Annotation.prototype.draw;
    a.Annotations.Annotation.prototype.serialize = a.Annotations.Annotation.prototype.serialize;
    a.Annotations.Annotation.prototype.deserialize = a.Annotations.Annotation.prototype.deserialize;
    a.Annotations.Annotation.prototype.setRect = a.Annotations.Annotation.prototype.Gl;
    a.Annotations.Annotation.prototype.getRect = a.Annotations.Annotation.prototype.we;
    a.Annotations.Annotation.prototype.getRectPadding = a.Annotations.Annotation.prototype.getRectPadding;
    a.Annotations.Annotation.prototype.adjustRect =
      a.Annotations.Annotation.prototype.adjustRect;
    a.Annotations.Annotation.prototype.setContents = a.Annotations.Annotation.prototype.no;
    a.Annotations.Annotation.prototype.getContents = a.Annotations.Annotation.prototype.Tk;
    a.Annotations.Annotation.prototype.isReply = a.Annotations.Annotation.prototype.Wh;
    a.Annotations.Annotation.prototype.getReplies = a.Annotations.Annotation.prototype.hu;
    a.Annotations.Annotation.prototype.isWidget = a.Annotations.Annotation.prototype.xj;
    a.Annotations.Annotation.prototype.isVisible =
      a.Annotations.Annotation.prototype.kl;
    a.Annotations.Annotation.prototype.getInternal = a.Annotations.Annotation.prototype.VO;
    a.Annotations.Annotation.prototype.selectionModel = a.Annotations.Annotation.prototype.selectionModel;
    a.Annotations.Annotation.prototype.elementName = a.Annotations.Annotation.prototype.elementName;
    a.Annotations.Point = a.Annotations.Point;
    a.Annotations.Quad = a.Annotations.bb;
    a.Annotations.Border = a.Annotations.Ko;
    a.Annotations.Font = a.Annotations.Ag;
    a.Annotations.Rect = a.Annotations.Rect;
    a.Annotations.Rect.prototype.getWidth = a.Annotations.Rect.prototype.ya;
    a.Annotations.Rect.prototype.getHeight = a.Annotations.Rect.prototype.xa;
    a.Annotations.Rect.prototype.translate = a.Annotations.Rect.prototype.translate;
    a.Annotations.Rect.prototype.fitTo = a.Annotations.Rect.prototype.Pt;
    a.Annotations.Rect.prototype.normalize = a.Annotations.Rect.prototype.normalize;
    a.Annotations.Link = a.Annotations.kd;
    a.Annotations.PopupAnnotation = a.Annotations.$j;
    a.Annotations.PopupAnnotation.prototype.isOpen = a.Annotations.$j.prototype.isOpen;
    a.Annotations.PopupAnnotation.prototype.setOpen = a.Annotations.$j.prototype.pI;
    a.Annotations.MarkupAnnotation = a.Annotations.ra;
    a.Annotations.MarkupAnnotation.prototype.setStyles = a.Annotations.ra.prototype.Ec;
    a.Annotations.MarkupAnnotation.prototype.selectionModel = a.Annotations.ra.prototype.selectionModel;
    a.Annotations.MarkupAnnotation.prototype.getPopup = a.Annotations.ra.prototype.LF;
    a.Annotations.MarkupAnnotation.prototype.setPopup = a.Annotations.ra.prototype.sI;
    a.Annotations.IPathAnnotation = a.Annotations.Rd;
    a.Annotations.IPathAnnotation.prototype.addPathPoint = a.Annotations.Rd.prototype.dc;
    a.Annotations.IPathAnnotation.prototype.setPathPoint = a.Annotations.Rd.prototype.Hf;
    a.Annotations.IPathAnnotation.prototype.getPathPoint = a.Annotations.Rd.prototype.Rh;
    a.Annotations.IPathAnnotation.prototype.popPath = a.Annotations.Rd.prototype.Jj;
    a.Annotations.IPathAnnotation.prototype.getPath = a.Annotations.Rd.prototype.getPath;
    a.Annotations.LineAnnotation = a.Annotations.ke;
    a.Annotations.LineAnnotation.prototype.setStartPoint =
      a.Annotations.ke.prototype.NA;
    a.Annotations.LineAnnotation.prototype.getStartPoint = a.Annotations.ke.prototype.AP;
    a.Annotations.LineAnnotation.prototype.setEndPoint = a.Annotations.ke.prototype.setEndPoint;
    a.Annotations.LineAnnotation.prototype.getEndPoint = a.Annotations.ke.prototype.JO;
    a.Annotations.LineAnnotation.prototype.setStartStyle = a.Annotations.ke.prototype.Kj;
    a.Annotations.LineAnnotation.prototype.getStartStyle = a.Annotations.ke.prototype.Sh;
    a.Annotations.LineAnnotation.prototype.setEndStyle =
      a.Annotations.ke.prototype.gr;
    a.Annotations.LineAnnotation.prototype.getEndStyle = a.Annotations.ke.prototype.sn;
    a.Annotations.RectangleAnnotation = a.Annotations.bk;
    a.Annotations.EllipseAnnotation = a.Annotations.Wl;
    a.Annotations.FreeHandAnnotation = a.Annotations.FreeHandAnnotation;
    a.Annotations.FreeHandAnnotation.prototype.addPathPoint = a.Annotations.FreeHandAnnotation.prototype.dc;
    a.Annotations.FreeHandAnnotation.prototype.setPathPoint = a.Annotations.FreeHandAnnotation.prototype.Hf;
    a.Annotations.FreeHandAnnotation.prototype.getPathPoint =
      a.Annotations.FreeHandAnnotation.prototype.Rh;
    a.Annotations.FreeHandAnnotation.prototype.popPath = a.Annotations.FreeHandAnnotation.prototype.Jj;
    a.Annotations.FreeHandAnnotation.prototype.getPath = a.Annotations.FreeHandAnnotation.prototype.getPath;
    a.Annotations.FreeHandAnnotation.prototype.setPath = a.Annotations.FreeHandAnnotation.prototype.setPath;
    a.Annotations.FreeHandAnnotation.prototype.getPaths = a.Annotations.FreeHandAnnotation.prototype.Yk;
    a.Annotations.FreeHandAnnotation.prototype.shouldSimplifyPath =
      a.Annotations.FreeHandAnnotation.prototype.shouldSimplifyPath;
    a.Annotations.TextMarkupAnnotation = a.Annotations.Hb;
    a.Annotations.TextMarkupAnnotation.prototype.setQuads = a.Annotations.Hb.prototype.Jv;
    a.Annotations.TextMarkupAnnotation.SurroundingTexts = a.Annotations.Hb.EV;
    a.Annotations.TextMarkupAnnotation.TextIndices = a.Annotations.Hb.FV;
    a.Annotations.TextHighlightAnnotation = a.Annotations.rh;
    a.Annotations.TextUnderlineAnnotation = a.Annotations.pm;
    a.Annotations.TextStrikeoutAnnotation = a.Annotations.om;
    a.Annotations.TextSquigglyAnnotation = a.Annotations.nm;
    a.Annotations.CaretAnnotation = a.Annotations.No;
    a.Annotations.StickyAnnotation = a.Annotations.Fi;
    a.Annotations.StampAnnotation = a.Annotations.gk;
    a.Annotations.PolylineAnnotation = a.Annotations.gm;
    a.Annotations.PolygonAnnotation = a.Annotations.Ci;
    a.Annotations.FreeTextAnnotation = a.Annotations.Ja;
    a.Annotations.FreeTextAnnotation.prototype.getPadding = a.Annotations.Ja.prototype.Xy;
    a.Annotations.FreeTextAnnotation.prototype.setPadding = a.Annotations.Ja.prototype.qo;
    a.Annotations.FreeTextAnnotation.prototype.getIntent = a.Annotations.Ja.prototype.Oh;
    a.Annotations.FreeTextAnnotation.prototype.setIntent = a.Annotations.Ja.prototype.oo;
    a.Annotations.FreeTextAnnotation.prototype.addPathPoint = a.Annotations.Ja.prototype.dc;
    a.Annotations.FreeTextAnnotation.prototype.setStartStyle = a.Annotations.Ja.prototype.Kj;
    a.Annotations.FreeTextAnnotation.prototype.getStartStyle = a.Annotations.Ja.prototype.Sh;
    a.Annotations.FreeTextAnnotation.Intent = a.Annotations.Ja.oc;
    a.Annotations.ControlHandle =
      a.Annotations.ControlHandle;
    a.Annotations.ControlHandle.prototype.testSelection = a.Annotations.ControlHandle.prototype.testSelection;
    a.Annotations.BoxControlHandle = a.Annotations.He;
    a.Annotations.LineControlHandle = a.Annotations.cm;
    a.Annotations.PathControlHandle = a.Annotations.Cg;
    a.Annotations.TextControlHandle = a.Annotations.ik;
    a.Annotations.SelectionModel = a.Annotations.SelectionModel;
    a.Annotations.SelectionModel.prototype.testSelection = a.Annotations.SelectionModel.prototype.testSelection;
    a.Annotations.SelectionModel.prototype.testControlHandles =
      a.Annotations.SelectionModel.prototype.mr;
    a.Annotations.SelectionModel.prototype.getControlHandles = a.Annotations.SelectionModel.prototype.EO;
    a.Annotations.SelectionModel.prototype.canModify = a.Annotations.SelectionModel.prototype.Dd;
    a.Annotations.SelectionModel.prototype.draw = a.Annotations.SelectionModel.prototype.draw;
    a.Annotations.BoxSelectionModel = a.Annotations.oa;
    a.Annotations.LineSelectionModel = a.Annotations.Vo;
    a.Annotations.PathSelectionModel = a.Annotations.fm;
    a.Annotations.TextSelectionModel =
      a.Annotations.jk;
    a.Annotations.StickySelectionModel = a.Annotations.ep;
    a.Annotations.XfdfUtils = a.Annotations.ba;
    a.Annotations.XfdfUtils.serializePoint = a.Annotations.ba.Bv;
    a.Annotations.XfdfUtils.deserializePoint = a.Annotations.ba.Bv;
    a.Annotations.XfdfUtils.serializePointArray = a.Annotations.ba.mo;
    a.Annotations.XfdfUtils.deserializePointArray = a.Annotations.ba.Kk;
    a.Annotations.XfdfUtils.serializeRect = a.Annotations.ba.FA;
    a.Annotations.XfdfUtils.deserializeRect = a.Annotations.ba.Ct;
    a.Annotations.XfdfUtils.serializeFringeRect =
      a.Annotations.ba.EA;
    a.Annotations.XfdfUtils.deserializeFringeRect = a.Annotations.ba.xE;
    a.Annotations.XfdfUtils.toXmlDate = a.Annotations.ba.bB;
    a.Annotations.SelectionAlgorithm = a.Annotations.pc;
    a.Annotations.SelectionAlgorithm.boundingRectTest = a.Annotations.pc.Rm;
    a.Annotations.SelectionAlgorithm.canvasVisibilityTest = a.Annotations.pc.Mp;
    a.Annotations.SelectionAlgorithm.textQuadTest = a.Annotations.pc.XI;
    a.Annotations.Utilities = a.Annotations.sa;
    a.Annotations.Utilities.setExtraSelectors = a.Annotations.sa.WS;
    a.Annotations.Utilities.setAnnotationSubjectHandler = a.Annotations.sa.PS;
    a.Tool = a.Tool;
    a.Tools = a.ia;
    a.Tools.Tool = a.ia.Tool;
    a.Tools.Tool.prototype.getDocumentViewer = a.ia.Tool.prototype.Sg;
    a.Tools.Tool.prototype.getMouseLocation = a.ia.Tool.prototype.bg;
    a.Tools.Tool.prototype.setStyles = a.ia.Tool.prototype.Ec;
    a.Tools.Tool.prototype.setName = a.ia.Tool.prototype.jT;
    a.Tools.AnnotationSelectTool = a.ia.AnnotationSelectTool;
    a.Tools.TextTool = a.ia.Sb;
    a.Tools.GenericAnnotationCreateTool = a.ia.Fb;
    a.Tools.PanTool = a.ia.$o;
    a.Tools.TextSelectTool = a.ia.lm;
    a.Tools.AnnotationEditTool = a.ia.Tj;
    a.Tools.LineCreateTool = a.ia.dm;
    a.Tools.ArrowCreateTool = a.ia.fw;
    a.Tools.RectangleCreateTool = a.ia.Bw;
    a.Tools.EllipseCreateTool = a.ia.qw;
    a.Tools.FreeHandCreateTool = a.ia.FreeHandCreateTool;
    a.Tools.SignatureCreateTool = a.ia.SignatureCreateTool;
    a.Tools.SignatureCreateTool.setTextHandler = a.ia.SignatureCreateTool.OA;
    a.Tools.SignatureCreateTool.prototype.setSignatureCanvas = a.ia.SignatureCreateTool.prototype.GT;
    a.Tools.SignatureCreateTool.prototype.clearSignatureCanvas =
      a.ia.SignatureCreateTool.prototype.WM;
    a.Tools.SignatureCreateTool.prototype.initDefaultSignature = a.ia.SignatureCreateTool.prototype.mG;
    a.Tools.SignatureCreateTool.prototype.hasDefaultSignature = a.ia.SignatureCreateTool.prototype.RP;
    a.Tools.SignatureCreateTool.prototype.addDefaultSignature = a.ia.SignatureCreateTool.prototype.YL;
    a.Tools.SignatureCreateTool.prototype.openSignature = a.ia.SignatureCreateTool.prototype.zR;
    a.Tools.SignatureCreateTool.prototype.addSignature = a.ia.SignatureCreateTool.prototype.AD;
    a.Tools.SignatureCreateTool.prototype.isEmptySignature = a.ia.SignatureCreateTool.prototype.vG;
    a.Tools.StickyCreateTool = a.ia.Hw;
    a.Tools.TextAnnotationCreateTool = a.ia.le;
    a.Tools.TextHighlightCreateTool = a.ia.Jw;
    a.Tools.TextUnderlineCreateTool = a.ia.Mw;
    a.Tools.TextStrikeoutCreateTool = a.ia.Lw;
    a.Tools.TextSquigglyCreateTool = a.ia.Kw;
    a.Tools.PolylineCreateTool = a.ia.hm;
    a.Tools.PolygonCreateTool = a.ia.Zj;
    a.Tools.PolygonCloudCreateTool = a.ia.bp;
    a.Tools.CalloutCreateTool = a.ia.CalloutCreateTool;
    a.Tools.FreeTextCreateTool =
      a.ia.Zl;
    a.Tools.FreeTextCreateTool.setTextHandler = a.ia.Zl.OA;
    a.Tools.StampCreateTool = a.ia.cp
  })(window);
  (function () {
    function a(a, c, b) {
      function f(a, b) {
        var c = b << 1;
        return 128 > b ? a * (c + (a * (255 - c) >> 8)) >> 8 : a * (511 - c) + Math.sqrt(a << 8) * (c - 255) >> 8
      }

      function g(a, b) {
        return 128 > a ? a * b >> 7 : 255 - ((255 - b) * (255 - a) >> 7)
      }

      function h(a, b) {
        return 255 == b && 0 == a ? 255 : Math.min(255, (a << 8) / (255 - b))
      }

      function l(a, b) {
        return 255 == b && 0 == a ? 0 : 255 - Math.min(255, (255 - a << 8) / b)
      }

      function k(a, b, c) {
        return {
          r: .299 * a + .587 * b + .114 * c,
          g: -.1687 * a - .3313 * b + .5 * c,
          b: .5 * a - .4187 * b - .0813 * c
        }
      }

      function m(a, b, c) {
        return {
          r: a + 1.402 * c,
          g: a - .3441 * b - .7141 * c,
          b: a + 1.772 * b
        }
      }

      function n(a,
        b, c) {
        a = k(a, b, c);
        return {
          yf: Math.atan2(a.g, a.b),
          s: Math.sqrt(a.g * a.g + a.b * a.b),
          mJ: a.r
        }
      }

      function r(a, b, c) {
        return m(c, b * Math.sin(a), b * Math.cos(a))
      }
      var q = {},
        v;
      for (v in e) e.hasOwnProperty(v) && (q[v] = b && b[v] || e[v]);
      "auto" == q.width && (q.width = this.canvas.width);
      "auto" == q.height && (q.height = this.canvas.height);
      q.width = Math.min(q.width, this.canvas.width - q.MI, a.canvas.width - q.x);
      q.height = Math.min(q.height, this.canvas.height - q.NI, a.canvas.height - q.y);
      v = this.getImageData(q.MI, q.NI, q.width, q.height);
      b = a.getImageData(q.x,
        q.y, q.width, q.height);
      v = v.data;
      for (var p = b.data, u, w, A = p.length, B, z, x, y, F, L, D, H, J, E, N, G, M, O, K = 0; K < A; K += 4)
        if (u = v[K + 3] / 255, w = p[K + 3] / 255, D = u + w - u * w, p[K + 3] = 255 * D, 0 != u)
          if (0 == w) p[K] = v[K], p[K + 1] = v[K + 1], p[K + 2] = v[K + 2];
          else {
            H = p[K];
            J = p[K + 1];
            E = p[K + 2];
            N = v[K];
            G = v[K + 1];
            M = v[K + 2];
            B = N / 255 * u;
            y = H / 255 * w;
            z = G / 255 * u;
            F = J / 255 * w;
            x = M / 255 * u;
            L = E / 255 * w;
            O = 255 / D;
            D = w * u;
            var C = w - D,
              R = u - D;
            switch (c) {
              case "normal":
              case "src-over":
                p[K] = (B + y - y * u) * O;
                p[K + 1] = (z + F - F * u) * O;
                p[K + 2] = (x + L - L * u) * O;
                break;
              case "screen":
                p[K] = (B + y - B * y) * O;
                p[K + 1] = (z + F - z * F) *
                  O;
                p[K + 2] = (x + L - x * L) * O;
                break;
              case "multiply":
                p[K] = (B * y + B * (1 - w) + y * (1 - u)) * O;
                p[K + 1] = (z * F + z * (1 - w) + F * (1 - u)) * O;
                p[K + 2] = (x * L + x * (1 - w) + L * (1 - u)) * O;
                break;
              case "difference":
                p[K] = (B + y - 2 * Math.min(B * w, y * u)) * O;
                p[K + 1] = (z + F - 2 * Math.min(z * w, F * u)) * O;
                p[K + 2] = (x + L - 2 * Math.min(x * w, L * u)) * O;
                break;
              case "src-in":
                D = u * w;
                O = 255 / D;
                p[K] = B * w * O;
                p[K + 1] = z * w * O;
                p[K + 2] = x * w * O;
                p[K + 3] = 255 * D;
                break;
              case "plus":
              case "add":
                p[K] = Math.min(B + y, 1) * O;
                p[K + 1] = Math.min(z + F, 1) * O;
                p[K + 2] = Math.min(x + L, 1) * O;
                break;
              case "overlay":
                p[K] = D * g(H, N) + C * H + R * N;
                p[K + 1] = D * g(J,
                  G) + C * J + R * G;
                p[K + 2] = D * g(E, M) + C * E + R * M;
                break;
              case "hard-light":
                p[K] = D * g(N, H) + C * H + R * N;
                p[K + 1] = D * g(G, J) + C * J + R * G;
                p[K + 2] = D * g(M, E) + C * E + R * M;
                break;
              case "color-dodge":
              case "dodge":
                p[K] = D * h(H, N) + C * H + R * N;
                p[K + 1] = D * h(J, G) + C * J + R * G;
                p[K + 2] = D * h(E, M) + C * E + R * M;
                break;
              case "color-burn":
              case "burn":
                p[K] = D * l(H, N) + C * H + R * N;
                p[K + 1] = D * l(J, G) + C * J + R * G;
                p[K + 2] = D * l(E, M) + C * E + R * M;
                break;
              case "darken":
              case "darker":
                p[K] = D * (H < N ? H : N) + C * H + R * N;
                p[K + 1] = D * (J < G ? J : G) + C * J + R * G;
                p[K + 2] = D * (E < M ? E : M) + C * E + R * M;
                break;
              case "lighten":
              case "lighter":
                p[K] = (B < y ?
                  y : B) * O;
                p[K + 1] = (z < F ? F : z) * O;
                p[K + 2] = (x < L ? L : x) * O;
                break;
              case "exclusion":
                p[K] = (y + B - 2 * y * B) * O;
                p[K + 1] = (F + z - 2 * F * z) * O;
                p[K + 2] = (L + x - 2 * L * x) * O;
                break;
              case "soft-light":
                p[K] = D * f(H, N) + C * H + R * N;
                p[K + 1] = D * f(J, G) + C * J + R * G;
                p[K + 2] = D * f(E, M) + C * E + R * M;
                break;
              case "luminosity":
                u = k(H, J, E);
                w = k(N, G, M);
                u = m(w.r, u.g, u.b);
                p[K] = D * u.r + C * H + R * N;
                p[K + 1] = D * u.g + C * J + R * G;
                p[K + 2] = D * u.b + C * E + R * M;
                break;
              case "color":
                u = k(H, J, E);
                w = k(N, G, M);
                u = m(u.r, w.g, w.b);
                p[K] = D * u.r + C * H + R * N;
                p[K + 1] = D * u.g + C * J + R * G;
                p[K + 2] = D * u.b + C * E + R * M;
                break;
              case "hue":
                u = n(H, J, E);
                w = n(N, G,
                  M);
                u = r(w.yf, u.s, u.mJ);
                p[K] = D * u.r + C * H + R * N;
                p[K + 1] = D * u.g + C * J + R * G;
                p[K + 2] = D * u.b + C * E + R * M;
                break;
              case "saturation":
                u = n(H, J, E);
                w = n(N, G, M);
                u = r(u.yf, w.s, u.mJ);
                p[K] = D * u.r + C * H + R * N;
                p[K + 1] = D * u.g + C * J + R * G;
                p[K + 2] = D * u.b + C * E + R * M;
                break;
              case "lighter-color":
                u = 0 < 2.623 * (H - N) + 5.15 * (J - G) + E - M ? {
                  r: H,
                  g: J,
                  b: E
                } : {
                  r: N,
                  g: G,
                  b: M
                };
                p[K] = D * u.r + C * H + R * N;
                p[K + 1] = D * u.g + C * J + R * G;
                p[K + 2] = D * u.b + C * E + R * M;
                break;
              case "darker-color":
                u = 0 > 2.623 * (H - N) + 5.15 * (J - G) + E - M ? {
                  r: H,
                  g: J,
                  b: E
                } : {
                  r: N,
                  g: G,
                  b: M
                };
                p[K] = D * u.r + C * H + R * N;
                p[K + 1] = D * u.g + C * J + R * G;
                p[K + 2] = D * u.b + C * E + R * M;
                break;
              default:
                H = K / 4 % this.canvas.width, J = Math.floor(K / 4 / this.canvas.width), H = 4 > H % 8 && 4 > J % 8 || 3 < H % 8 && 3 < J % 8, p[K] = p[K + 3] = 255, p[K + 1] = H ? 255 : 0, p[K + 2] = H ? 0 : 255
            }
          } a.putImageData(b, q.x, q.y)
    }
    var e = {
      x: 0,
      y: 0,
      MI: 0,
      NI: 0,
      width: "auto",
      height: "auto"
    };
    (function (d) {
      if (!d || "function" !== typeof d.getImageData) return console.error("context blender called without a valid context prototype");
      Object.defineProperty(d, "bO", {
        value: a
      });
      for (var c = a.fY = "normal src-over screen multiply difference src-in plus add overlay hardlight colordodge dodge colorburn burn darken darker lighten lighter exclusion softlight luminosity color hue saturation lightercolor darkercolor".split(" "),
          b = a.supports = {}, e = c.length; e--;) b[c[e]] = !0;
      a.gW = {
        "src-over": "normal",
        Zn: "add",
        NW: "colordodge",
        kW: "colorburn",
        HW: "darken",
        vX: "lighten"
      };
      return d
    })(CanvasRenderingContext2D && CanvasRenderingContext2D.prototype)
  })();
  ("undefined" === typeof window ? this : window).QW = 0;
  (function (a) {
    a.Lr = function (e, d) {
      this.name = e;
      this.Wm = d;
      this.GM = 1;
      this.xl = !0;
      this.Dh = {};
      var c = this.Vs = {};
      this.VL = {};
      this.Nu = null;
      c.console_log = [function (b) {
        a.utils.log(b)
      }];
      c.console_error = [function (b) {
        a.utils.error(b)
      }];
      c.workerLoaded = [function () {}];
      d.addEventListener("message", this.aG.bind(this))
    };
    a.Lr.prototype = {
      on: function (e, d, c) {
        var b = this.Vs;
        b[e] && a.utils.error('There is already an actionName called "' + e + '"');
        b[e] = [d, c]
      },
      replace: function (a, d, c) {
        this.Vs[a] = [d, c]
      },
      send: function (a, d) {
        this.postMessage({
          action: a,
          data: d
        })
      },
      mq: function () {
        return this.GM++
      },
      Ua: function (a, d, c) {
        var b = this.mq();
        a = {
          action: a,
          data: d,
          callbackId: b,
          priority: c
        };
        d = createPromiseCapability();
        this.Dh[b] = d;
        try {
          this.postMessage(a)
        } catch (f) {
          d.reject(f)
        }
        return d.promise
      },
      Av: function (a, d, c) {
        var b = this.mq();
        a = {
          action: a,
          data: d,
          callbackId: b,
          priority: c
        };
        d = createPromiseCapability();
        this.Dh[b] = d;
        try {
          this.postMessage(a)
        } catch (f) {
          d.reject(f)
        }
        return {
          promise: d.promise,
          FM: b
        }
      },
      DA: function (a, d) {
        if (a.message || a.aO) {
          a.message && a.message.message && (a.message = a.message.message);
          var c = a.aO;
          a = {
            type: a.type ? a.type : "JavascriptError",
            message: a.message
          };
          if (c)
            for (var b in c) c.hasOwnProperty(b) && (a[b] = c[b])
        }
        this.postMessage({
          isReply: !0,
          callbackId: d,
          error: a
        })
      },
      cz: function (e) {
        if (e in this.Dh) return this.Dh[e];
        a.utils.error("Cannot get promise for callback " + e)
      },
      SD: function (e) {
        if (e in this.Dh) {
          var d = this.Dh[e];
          delete this.Dh[e];
          d.reject({
            type: "Cancelled",
            message: "Request has been cancelled."
          });
          this.postMessage({
            action: "actionCancel",
            data: {
              callbackId: e
            }
          })
        } else a.utils.warn("Cannot cancel callback " +
          e)
      },
      postMessage: function (a) {
        if (this.xl) {
          var d = this.GP(a);
          this.Wm.postMessage(a, d)
        } else this.Wm.postMessage(a)
      },
      GF: function (a, d) {
        if ("object" === typeof a)
          if (a instanceof Uint8Array) d.push(a.buffer);
          else if (a instanceof ArrayBuffer) d.push(a);
        else
          for (var c in a) a.hasOwnProperty(c) && this.GF(a[c], d)
      },
      GP: function (a) {
        var d = [];
        this.GF(a, d);
        return 0 === d.length ? void 0 : d
      },
      aG: function (e) {
        var d = this,
          c = e.data,
          b = this.Vs,
          f = this.VL;
        e = this.Dh;
        var g;
        c.isReply ? (b = c.callbackId, b in e ? (f = e[b], delete e[b], "error" in c ? f.reject(c.error) :
          f.resolve(c.data)) : a.utils.warn("Cannot resolve callback " + b)) : c.action in b ? (g = b[c.action], c.callbackId ? Promise.resolve().then(function () {
          return g[0].call(g[1], c.data)
        }).then(function (a) {
          d.postMessage({
            isReply: !0,
            callbackId: c.callbackId,
            data: a
          })
        }, function (a) {
          d.DA(a, c.callbackId)
        }) : g[0].call(g[1], c.data)) : c.action in f ? (g = f[c.action], c.callbackId ? g[0].call(g[1], c).then(function (a) {
          d.postMessage({
            isReply: !0,
            callbackId: c.callbackId,
            data: a
          });
          d.Nu()
        }, function (a) {
          d.DA(a, c.callbackId);
          d.Nu()
        }) : g[0].call(g[1],
          c).then(function () {
          d.Nu()
        }, function () {
          d.Nu()
        })) : a.utils.error("Unknown action from worker: " + c.action)
      }
    }
  })("undefined" === typeof window ? this : window);
  var na = this;
  na.YK = function () {
    function a(a, d, c) {
      var b = this;
      this.Ej = [];
      this.kn = {};
      this.hn = {};
      createPromiseCapability();
      this.gB = new Promise(function (f, g) {
        if ("undefined" !== typeof Worker) try {
          var h = new na.Lr("main", a);
          h.xl = d;
          b.pa = h;
          h.on("test", function (a) {
            a && a.supportTypedArray ? (a.supportTransfers || (h.xl = !1), b.RT(h), f()) : g(new na.lk("Typed arrays are not supported. Can't start a worker.", "error.WorkerInitError"))
          });
          var l = {
            array: new Uint8Array([255])
          };
          try {
            l.options = c ? c : {}, l.options.chunkMax = na.HJ, h.send("test", l)
          } catch (k) {
            na.utils.log("Cannot use postMessage transfers"),
              h.xl = !1, l.array[0] = 0, h.send("test", l)
          }
          return
        } catch (k) {
          g(new na.lk("The worker has been disabled. This may be the result of using PNaCl on an unsupported browser.", "error.PNaClSupportError"))
        }
        g(new na.lk("Can't start a worker", "error.WorkerInitError"))
      })
    }
    a.prototype = {
      co: 0,
      WI: 1,
      ed: 2,
      eg: 3,
      RT: function (a) {
        this.pa = a;
        a.on("event", this.YH, this)
      },
      YH: function (a) {
        var d = a.docId;
        if (this.kn[d]) this.kn[d](a);
        else d in this.hn ? this.hn[d].push(a) : this.hn[d] = [a]
      },
      addEventListener: function (a, d) {
        if (this.kn[a]) na.utils.error("Event listener already set for " +
          a);
        else if (this.kn[a] = d, a in this.hn) {
          for (var c = this.hn[a], b = 0; b < c.length; ++b) this.YH(c[b]);
          delete this.hn[a]
        }
      },
      QM: function (a) {
        delete this.kn[a]
      },
      dO: function (a) {
        return this.pa.Ua("NewDoc", a, this.eg)
      },
      YQ: function (a, d) {
        var c = {
          array: a,
          workerPath: na.o.rj()
        };
        d && (c.l = d);
        return this.pa.Ua("LoadRes", c, this.eg)
      },
      ZQ: function (a, d) {
        var c = {
          path: a
        };
        d && (c.l = d);
        return this.pa.Ua("LoadResFromPath", c, this.eg)
      },
      yO: function (a, d, c, b, f, g, h, l) {
        return "undefined" === typeof l ? this.pa.Av("GetCanvas", {
          docId: a,
          pageIndex: d,
          width: c,
          height: b,
          rotation: f,
          layers: g,
          overprintMode: h
        }, this.co) : this.pa.Av("GetCanvasPartial", {
          docId: a,
          pageIndex: d,
          width: c,
          height: b,
          rotation: f,
          layers: g,
          bbox: [l.x1, l.y1, l.x2, l.y2],
          overprintMode: h
        }, this.co)
      },
      zO: function (a, d, c, b, f, g, h, l, k) {
        return "undefined" === typeof l ? this.pa.Av("GetCanvas", {
          docId: a,
          pageIndex: d,
          width: c,
          height: b,
          rotation: f,
          layers: g,
          filePath: k,
          overprintMode: h
        }, this.co) : this.pa.Av("GetCanvasPartial", {
          docId: a,
          pageIndex: d,
          width: c,
          height: b,
          rotation: f,
          layers: g,
          bbox: [l.x1, l.y1, l.x2, l.y2],
          filePath: k,
          overprintMode: h
        }, this.co)
      },
      pF: function (a, d) {
        return "undefined" !== typeof d ? this.pa.Ua("GetCanvasProgressive", {
          callbackId: a,
          filePath: d
        }, this.co) : this.pa.Ua("GetCanvasProgressive", {
          callbackId: a
        }, this.co)
      },
      Kd: function (a, d) {
        return this.pa.Ua("LoadText", {
          docId: a,
          pageIndex: d
        }, this.WI)
      },
      TQ: function (a) {
        return this.pa.Ua("LoadBookmarks", {
          docId: a
        }, this.eg)
      },
      RQ: function (a, d) {
        var c = {
          docId: a
        };
        d && (c.pages = d);
        return this.pa.Ua("LoadAnnotations", c, this.eg)
      },
      Kq: function (a, d) {
        return this.pa.Ua("MergeXFDF", {
            docId: a,
            xfdf: d
          },
          this.ed)
      },
      CS: function (a) {
        return this.pa.Ua("SaveDoc", a, this.ed)
      },
      BS: function (a) {
        return this.pa.Ua("SaveDocFromFixedElements", a, this.ed)
      },
      DS: function (a) {
        return this.pa.Ua("SaveDocAs", a, this.ed)
      },
      BU: function (a, d) {
        return this.pa.Ua("UpdatePassword", {
          docId: a,
          password: d
        }, this.eg)
      },
      vq: function (a, d, c, b) {
        return this.pa.Ua("InsertBlankPages", {
          docId: a,
          width: c,
          height: b,
          pageArray: d
        }, this.ed)
      },
      Nn: function (a, d, c, b, f) {
        return this.pa.Ua("InsertPages", {
          docId: a,
          doc: d,
          pageArray: c,
          destPos: b,
          insertBookmarks: f
        }, this.ed)
      },
      Lq: function (a, d, c) {
        return this.pa.Ua("MovePages", {
          docId: a,
          pageArray: d,
          destPos: c
        }, this.ed)
      },
      ao: function (a, d) {
        return this.pa.Ua("RemovePages", {
          docId: a,
          pageArray: d
        }, this.ed)
      },
      fo: function (a, d, c) {
        return this.pa.Ua("RotatePages", {
          docId: a,
          pageArray: d,
          rotation: c
        }, this.ed)
      },
      zn: function (a) {
        return this.pa.Ua("GetPDFDoc", {
          docId: a
        }, this.ed)
      },
      mn: function (a, d, c) {
        return this.pa.Ua("ExtractPages", {
          docId: a,
          pageArray: d,
          xfdfString: c
        }, this.ed)
      },
      an: function (a, d, c, b, f, g) {
        return this.pa.Ua("CropPages", {
          docId: a,
          pageArray: d,
          topMargin: c,
          botMargin: b,
          leftMargin: f,
          rightMargin: g
        }, this.ed)
      },
      Dl: function (a, d) {
        return this.pa.Ua("DownloaderHint", {
          docId: a,
          hint: d
        }, this.ed)
      },
      xQ: function (a) {
        return this.pa.Ua("IsLinearized", {
          docId: a
        }, this.ed)
      },
      vn: function (a) {
        return this.pa.Ua("GetLayers", {
          docId: a
        }, this.ed)
      },
      ln: function (a, d) {
        return this.pa.Ua("ExtractPDFNetLayersContext", {
          docId: a,
          layers: d
        }, this.ed)
      },
      mq: function () {
        return this.pa.mq()
      },
      ey: function (a) {
        return this.pa.Ua("DeleteDocument", {
          docId: a
        }, this.ed)
      },
      HA: function (a) {
        return this.pa.Ua("SetColorManagement", {
          value: a
        }, this.eg)
      },
      Cv: function (a) {
        return this.pa.Ua("SetCustomFontURL", {
          fontURL: a
        }, this.eg)
      },
      getWorkerType: function () {
        return this.pa.Wm && "function" === typeof this.pa.Wm.getWorkerType ? this.pa.Wm.getWorkerType() : na.aK(this.pa.Wm) ? "ems" : "pnacl"
      },
      zl: function (a, d) {
        return this.pa.Ua("RequirePage", {
          docId: a,
          pageNum: d
        }, this.eg)
      },
      sendWithPromise: function (a, d, c) {
        return this.pa.Ua(a, d, c)
      },
      nt: function (a) {
        this.pa.SD(a)
      },
      Wt: function (a, d) {
        return this.pa.Ua("GetAnnotationAppearances", {
          docId: a,
          references: d
        }, this.WI)
      }
    };
    return a
  }();
  (function (a) {
    function e() {
      var a = document.createElement("embed");
      a.type = "application/pdf";
      a.style.position = "fixed";
      a.style.width = "9px";
      a.style.height = "9px";
      a.style.top = "-9990px;";
      a.style.left = "-999px";
      return a
    }

    function d(a, c) {
      for (var d = !1, e = 0, l = navigator.plugins; e < l.length; ++e) {
        var k = l[e].name;
        if ("Chrome PDF Viewer" === k || "Chromium PDF Viewer" === k) {
          d = !0;
          break
        }
      }
      d ? a() : c()
    }
    var c;
    a.isPDFiumSupported = function () {
      c || (c = new Promise(function (a) {
        d(function () {
          a(!0)
        }, function () {
          a(!1)
        })
      }));
      return c
    };
    a.pdfiumPrint =
      function (a) {
        var c = {
          jn: null,
          gv: "",
          handleEvent: function () {
            var a = c;
            window.removeEventListener("focus", a);
            a.jn && a.jn.remove();
            a.gv && URL.revokeObjectURL(a.gv)
          }
        };
        c.gv = URL.createObjectURL(a);
        c.jn = e();
        c.jn.src = c.gv;
        c.jn.addEventListener("message", function () {
          console.log("I actually got a message")
        });
        document.body.appendChild(c.jn);
        window.addEventListener("focus", c)
      }
  })(window);
  (function (a) {
    function e(d, c) {
      a.Lr.call(this, d, c);
      this.Kh = {};
      this.ar = {};
      this.ei = []
    }
    e.prototype = {
      Zs: function (a) {
        this.ei.push(a)
      },
      yx: function (a, c) {
        a in this.Kh ? this.Kh[a].push(c) : this.Kh[a] = [c];
        a in this.ar && delete this.ar[a]
      },
      pv: function (a) {
        a in this.Kh && delete this.Kh[a];
        this.ar[a] = a;
        this.ei = []
      },
      aG: function (d) {
        var c = this,
          b = d.data,
          e = this.Vs;
        d = this.Dh;
        if ("object" === typeof b) {
          if ("type" in b && 0 < this.ei.length && "onloaddocument" === b.type)
            for (; 0 < this.ei.length;) this.yx(b.data.docId, this.ei.shift());
          if ("callbackId" in
            b)
            if (e = b.callbackId, e in d) {
              var g = d[e];
              delete d[e];
              "type" in b && "error" === b.type ? g.reject(b) : g.resolve(b.data)
            } else a.utils.warn("Cannot resolve callback " + e);
          else if (b.action in e) {
            var h = e[b.action];
            b.callbackId ? Promise.resolve().then(function () {
              return h[0].call(h[1], b.data)
            }).then(function (a) {
              c.postMessage({
                isReply: !0,
                callbackId: b.callbackId,
                data: a
              })
            }, function (a) {
              c.DA(a)
            }) : h[0].call(h[1], b.data)
          } else if (b.type)
            if ("page" === b.type) d = b.meta.docId, this.Kh[d] ? this.Kh[d].forEach(function (a) {
                a(b)
              }) : 0 < this.ei.length &&
              !(d in this.ar) ? this.ei.forEach(function (a) {
                a(b)
              }) : a.utils.warn("load", "No doc listeners for this docId: " + JSON.stringify(b));
            else {
              if ("documentComplete" === b.type || "error" === b.type) d = b.docId, this.Kh[d] ? this.Kh[d].forEach(function (a) {
                a(b)
              }) : 0 < this.ei.length && !(d in this.ar) ? this.ei.forEach(function (a) {
                a(b)
              }) : a.utils.warn("load", "No doc listeners for this docId: " + JSON.stringify(b))
            }
          else a.utils.error("Unknown action from worker: " + b.action)
        }
      }
    };
    e.prototype = $.extend(Object.create(a.Lr.prototype), e.prototype);
    a.mK = e
  })("undefined" === typeof window ? this : window);
  (function (a) {
    function e(d, c, b) {
      var e = this;
      this.Ej = [];
      this.kn = {};
      createPromiseCapability();
      this.gB = new Promise(function (g, h) {
        if ("undefined" !== typeof Worker) try {
          if (e.pa) g();
          else {
            var l = new a.mK("main", d);
            l.xl = c;
            e.pa = l;
            l.on("test", function (b) {
              if (b.ready) {
                var c = b && b.supportTypedArray;
                b && b.info && a.utils.log("load", "Office worker info: " + b.info);
                c ? (b.supportTransfers || (l.xl = !1), g()) : h(new a.lk("Typed arrays are not supported. Can't start a worker.", "error.WorkerInitError"))
              } else h("License Key Error: " + b.license)
            });
            var k = {
              array: new Uint8Array([255])
            };
            try {
              b && (k = $.extend({}, k, b)), l.send("test", k)
            } catch (m) {
              l.xl = !1, k.array[0] = 0, l.send("test", k)
            }
          }
          return
        } catch (m) {
          h(new a.lk("The worker has been disabled. This may be the result of using PNaCl on an unsupported browser.", "error.PNaClSupportError"))
        }
        h(new a.lk("Can't start a worker", "error.WorkerInitError"))
      })
    }
    e.prototype = {
      KG: function (a) {
        return this.pa.Ua("loadDocument", a, this.eg)
      },
      Zs: function (a) {
        this.pa.Zs(a)
      },
      yx: function (a, c) {
        this.pa.yx(a, c)
      },
      pv: function (a) {
        this.pa.pv(a)
      },
      ey: function (a) {
        this.pa.pv(a);
        return this.pa.Ua("unloadDocument", {
          docId: a
        }, this.ed)
      },
      nt: function (a) {
        this.pa.SD(a)
      },
      IO: function (a) {
        return this.pa.Ua("getDocBuffer", {
          docId: a
        }, this.eg)
      }
    };
    a.o.nK = e
  })("undefined" === typeof window ? this : window);
  (function (a) {
    function e(a) {
      this.Tu = !1;
      this.sb = [];
      this.nr = {};
      this.it = {};
      this.At = {};
      this.Tt = [];
      this.fq = {};
      this.Ta = {};
      this.ze = a
    }

    function d() {}

    function c(a, c) {
      this.Df = a;
      this.Ta = {};
      this.qb = null;
      this.La = c
    }
    d.prototype = {
      iF: function (a) {
        var c = this;
        c.functions = [];
        a.forEach(function (a) {
          c.functions.push(new Function("c", "t", a))
        });
        this.index = 0
      },
      run: function (a, c, d) {
        var e = this.functions[this.index];
        d && this.index++;
        return e ? (e(a, c), !1) : !0
      },
      clone: function () {
        var a = new d;
        a.functions = this.functions;
        a.index = 0;
        return a
      },
      Rq: function () {
        return Promise.resolve()
      },
      cancel: function () {}
    };
    e.prototype = {
      kz: function (a, c) {
        var e = a + 1;
        if (e in this.sb) {
          var e = this.sb[e],
            h = $.extend({}, e);
          if (!e.qb) {
            var l = new d;
            l.iF(e.Cq);
            e.qb = l
          }
          h.qb = e.qb.clone();
          c(null, h)
        } else c(Error("The page " + e + " does not exist yet."))
      },
      Zy: function (b, c, e) {
        b += 1;
        if (b in this.sb) {
          c = this.sb[b];
          b = $.extend({}, c);
          if (!c.qb) {
            var h = new d;
            h.iF(c.Cq);
            c.qb = h
          }
          b.qb = c.qb.clone();
          b.Ta = $.extend(!0, {}, b.Ta);
          for (var l in b.Ta)
            if (c = b.Ta[l], "jpg" === c.type) b.Ta[l].data = a.o.Uy(c.data.type,
              c.data.data);
            else {
              if (a.cq) h = a.o.Uy(c.data.type, c.data.data), h = new a.Ze.FontFace(c.name, "", "sfnt", h);
              else {
                for (var h = "", k = new Uint8Array(c.data.data), m = k.byteLength, n = 0; n < m; n++) h += String.fromCharCode(k[n]);
                h = new a.Ze.FontFace(c.name, h, "sfnt", void 0)
              }
              this.ze.Hz(c.name) || h.insert();
              b.Ta[l].data = h
            } e(null, b)
        } else e(Error("The page " + b + " does not exist yet."))
      },
      bM: function (a) {
        var d = a.meta.page,
          e = new c(d, this),
          h = a.img,
          l = a.text_structure,
          k = {},
          m = "",
          n;
        for (m in h) h[m] && h[m].data ? (n = {
            data: h[m],
            type: "jpg",
            name: m
          },
          k[m] = n, this.Ta[m] = n) : k[m] = this.Ta[m];
        h = a.embeddedFonts;
        for (m in h)(n = h[m]) && n.data ? (n = {
          data: n,
          type: "font",
          name: m
        }, k[m] = n, this.Ta[m] = n) : k[m] = this.Ta[m];
        e.Cq = a.js;
        e.Ta = k;
        e.text = l;
        this.sb[d] = e
      },
      Lp: function () {}
    };
    _(e.prototype).extend(Backbone.Events);
    a.o.lK = e
  })(window);
  (function (a) {
    function e() {}
    var d = a.o;
    d.Pr = function (c) {
      this.pf = [];
      this.Ed = [];
      this.ce = {};
      this.J = [];
      this.bv = {};
      this.Uh = {};
      this.he = {};
      this.bq = {};
      this.ja = null;
      this.Im = new a.af.Rr;
      this.id = c;
      this.Vz = []
    };
    d.Pr.prototype = Object.create(d.Ke.prototype);
    d.Pr.prototype.constructor = d.ph;
    $.extend(d.Pr.prototype, {
      aM: function (c) {
        this.La.bM(c);
        var b = new a.Zo(c.meta.width, c.meta.height);
        b.eb = new XODText.Ca;
        b.eb.Ha(1, 0, 0, -1, 0, c.meta.height);
        b.rotation = 0;
        this.J.push(b);
        this.Jq = this.Kp();
        c = c.fonts;
        for (var d in c) {
          var e =
            c[d];
          d in this.bq ? b = this.bq[d] : (b = new XODText.Ag, b.hr(-e.ascent, e.descent), b.yI(500), this.bq[d] = b);
          for (var e = e.charX, h = e.length, l = 0; l < h; l += 3) b.Xs(e[l], e[l + 1], e[l + 2])
        }
      },
      Bf: function (c, b, e) {
        var g = this;
        this.Va = c;
        this.J = [];
        g.ce = {};
        var h = e.annotsLoadedCallback;
        g.hc = new Promise(function (a) {
          g.bind("documentComplete", function () {
            g.unbind("documentComplete");
            a()
          })
        });
        var l = e.workerTransportPromise;
        c.getFileData(function (e) {
          g.bind("documentReady", b);
          var f = {
            outputFormat: "canvasCommands"
          };
          c.file ? (f.type = "file",
            f.value = {
              bytes: e.buffer,
              name: c.file.name
            }, g.Ot = c.file.name) : c.url ? (f.type = "file", f.value = {
            bytes: e.buffer,
            name: c.filename || c.url
          }, g.Ot = f.value.name) : (f.type = "array", f.value = e.buffer, g.Ot = "");
          g.La = new d.lK(g.Im);
          var n = !1;
          l.then(function (c) {
            g.Ba = c;
            a.utils.log("load", "Worker Initialized");
            g.Ba.Zs(function (c) {
              switch (c.type) {
                case "page":
                  var d = 150,
                    e = function () {
                      var a;
                      13 < g.Bj.length ? a = g.Bj.splice(0, 13) : (a = g.Bj, g.Bj = []);
                      return a
                    },
                    f = function () {
                      for (var c = e(), l = 0; l < c.length; ++l) a.utils.log("load", "page " + c[l].meta.page +
                        ": " + c[l].meta.elapsedTime + "ms"), g.aM(c[l]);
                      for (l = 0; l < c.length; ++l)
                        if (c[l].Yf)
                          for (var k = 0; k < c[l].Yf.length; ++k) {
                            var m = c[l].Yf[k],
                              m = new Annotations.kd({
                                actions: {
                                  U: [{
                                    name: "URI",
                                    uri: m.Hi
                                  }]
                                },
                                rect: {
                                  x1: parseInt(m.x1, 10),
                                  y1: parseInt(m.y1, 10),
                                  x2: parseInt(m.x2, 10),
                                  y2: parseInt(m.y2, 10)
                                }
                              });
                            m.PageNumber = c[l].zX.page;
                            g.Vz.push(m)
                          }
                      g.hc.then(function (a) {
                        g.kj({
                          type: "officeAnnotationsUpdated",
                          data: a
                        })
                      }.bind(null, g.Vz));
                      g.Vz = [];
                      n || (n = !0, b(), h && h('<?xml version="1.0" encoding="UTF-8"?><xfdf xmlns="http://ns.adobe.com/xfdf/" xml:space="preserve">  <pdf-info version="2" xmlns="http://www.pdftron.com/pdfinfo" /></xfdf>'));
                      g.kj({
                        type: "pagesUpdated",
                        data: g.J.slice()
                      });
                      a.utils.log("load", "processed " + c.length + " pages, " + g.Bj.length + " remaining");
                      0 < g.Bj.length ? (g.Jn = setTimeout(f, d), d = 30) : (g.Jn = null, g.HN && g.trigger("documentComplete"))
                    };
                  g.Bj ? (g.Bj.push(c), g.Jn || (g.Jn = setTimeout(f, d), d = 30)) : (a.utils.log("load", "Received first page data"), g.Bj = [c], f());
                  break;
                case "error":
                  n ? console.error(c.message) : b(c);
                  break;
                case "documentComplete":
                  g.Jn ? g.HN = !0 : g.trigger("documentComplete")
              }
            });
            g.Ba.KG(f).then(function (b) {
              g.ja = b.docId;
              a.utils.log("load",
                "Document initialized")
            })["catch"](function (a) {
              b(a)
            })
          })
        })
      },
      Kd: function (a, b) {
        var d = this;
        this.J[a].text ? b(this.J[a].text) : this.La.kz(a, function (e, h) {
          if (!e && "undefined" !== typeof h.text) {
            var l = new XODText.df,
              k = new XODText.Ca;
            k.Ha(1, 0, 0, 1, 0, 0);
            var m = new XODText.km(d.bq),
              n = h.qb.clone(),
              r = !1;
            try {
              do r = n.run(m, k, !0); while (!r)
            } catch (q) {
              console.warn("Custom Canvas has encountered an error: " + q.message);
              return
            }
            l.bN(h.text, m);
            d.J[a].text = l;
            b(l)
          }
        })
      },
      il: function () {
        return !1
      },
      bl: e,
      yo: e,
      wj: function () {
        return !1
      },
      Nh: function () {
        return null
      },
      Tm: e,
      yn: function () {
        return !1
      },
      po: e,
      WA: e,
      xn: function () {
        return []
      },
      Ab: function () {
        return this.J.length
      },
      zc: function (a) {
        var b = {};
        b.width = this.J[a].width;
        b.height = this.J[a].height;
        return b
      },
      $b: function () {
        d.Ke.prototype.$b.call(this);
        clearTimeout(this.Jn);
        this.La = this.Jn = null;
        this.Ba && this.ja && this.Ba.ey(this.ja)
      },
      ls: function () {},
      jw: function (c) {
        var b = new a.Zo(c.width, c.height);
        b.eb = new XODText.Ca;
        c = c.matrix;
        b.eb.Ha(c[0], c[1], c[2], c[3], c[4], c[5]);
        c = this.aj(b.eb);
        b.eb = this.yA({
          w: b.width,
          yf: b.height
        });
        b.rotation =
          c;
        return b
      },
      Sk: function () {
        return Promise.resolve([])
      },
      TL: function () {
        var a = this,
          b = {
            outputFormat: "binaryStream"
          };
        a.Ot ? (b.type = "file", b.value = {
          bytes: null,
          name: a.Ot
        }) : (b.type = "array", b.value = null);
        var d = 0,
          e = [];
        return new Promise(function (h, l) {
          a.hc.then(function () {
            a.Ba.pv(a.ja);
            a.Ba.Zs(function (a) {
              switch (a.type) {
                case "page":
                  "binaryStream" === a.format && a.bytes || l("Expected binaryStream data");
                  e.push(new Uint8Array(a.bytes));
                  d += a.bytes.byteLength;
                  break;
                case "error":
                  console.error(a.message);
                  l(a.message);
                  break;
                case "documentComplete":
                  a = new Uint8Array(d);
                  for (var b = 0, c = 0; c < e.length; ++c) a.set(e[c], b), b += e[c].length, e[c] = null;
                  h(a);
                  break;
                default:
                  l("Unable to export data")
              }
            });
            a.Ba.KG(b).then(function (b) {
              a.ja = b.docId
            })
          })
        })
      },
      getFileData: function (a) {
        var b = "pdf" === a.downloadType;
        if (this.Ba && this.ja) {
          var e = this.ja;
          return b ? (b = d.qu(d.Jy(), {}), Promise.all([b, this.TL()]).then(function (b) {
            var d = b[0];
            a.bytes = b[1].buffer;
            return d.BS(a).then(function (a) {
              return a.fileData && 0 !== a.fileData.byteLength ? Promise.resolve(a.fileData) :
                Promise.reject("Failed to convert document to PDF")
            }, function (a) {
              console.error(a);
              return Promise.resolve(a)
            })
          })) : this.Ba.IO(this.ja).then(function (a) {
            return a && "array" === a.type && e === a.docId ? a.value : Promise.reject()
          })
        }
        return Promise.reject()
      },
      vj: function () {
        return !1
      },
      KF: function (a) {
        return this.J[a].links
      },
      Mj: function () {
        return !0
      }
    })
  })(window);
  (function (a) {
    function e(a) {
      return new Promise(function (b, d) {
        var e = indexedDB.open("wasm-cache", a);
        e.onerror = d.bind(null, "Error opening wasm cache database");
        e.onsuccess = function () {
          b(e.result)
        };
        e.onupgradeneeded = function (a) {
          var b = e.result;
          b.objectStoreNames.contains("wasm-cache") && (console.log("Clearing out version " + a.oldVersion + " wasm cache"), b.deleteObjectStore("wasm-cache"));
          console.log("Creating version " + a.newVersion + " wasm cache");
          b.createObjectStore("wasm-cache")
        }
      })
    }

    function d(a, b) {
      return new Promise(function (d,
        e) {
        var h = a.transaction(["wasm-cache"]).objectStore("wasm-cache").get(b);
        h.onsuccess = function () {
          h.result ? d(h.result) : e("Module " + b + " was not found in wasm cache")
        };
        h.onerror = e.bind(null, "Error getting wasm module " + b)
      })
    }
    a.HQ = function (a) {
      return e(a).then(function (a) {
        return d(a, "PDFNetCWasm.wasm").then(function () {
          return !0
        })
      })["catch"](function () {
        return !1
      })
    };
    a.mX = function (c, b, f, g) {
      function h(a, c) {
        var d = a.transaction(["wasm-cache"], "readwrite").objectStore("wasm-cache").put(c, b);
        d.onerror = function (a) {
          console.log("Failed to store in wasm cache: " +
            a)
        };
        d.onsuccess = function () {
          console.log("Successfully stored " + b + " in wasm cache")
        }
      }

      function l(c) {
        m = m || Date.now();
        return c ? (a.utils.log("load", "Try instantiateStreaming"), WebAssembly.sQ(fetch(a.TW(b)), f)["catch"](function (c) {
          a.utils.log("load", "instantiateStreaming Failed " + b + " message " + c.message);
          return l(!1)
        })) : a.wX(b, g, !0, !0).then(function (b) {
          k = Date.now();
          a.utils.log("load", "Request took " + (k - m) + " ms");
          return WebAssembly.Cz(b, f)
        })
      }
      var k, m;
      return e(c).then(function (c) {
        return d(c, b).then(function (c) {
          a.utils.log("Found " +
            b + " in wasm cache");
          return WebAssembly.Cz(c, f)
        }, function (b) {
          a.utils.log(b);
          return l(!!WebAssembly.sQ).then(function (b) {
            try {
              a.utils.log("load", "WASM compilation took " + (Date.now() - (k || m)) + " ms"), h(c, b.CX)
            } catch (d) {}
            return b.instance
          })
        })
      }, function (a) {
        console.log(a);
        return l().then(function (a) {
          return a.instance
        })
      })
    }
  })(this);
  (function (a) {
    function e() {
      this.Tq = this.Vh = null;
      this.zoom = 0;
      this.gQ = !0;
      this.Uu = 0;
      this.kh = null
    }

    function d(a, b) {
      this.Df = a;
      this.Ta = {};
      this.text = this.qb = null;
      this.La = b;
      this.Kl = this.Vh = null
    }

    function c(a, b, c, d) {
      this.w = b;
      this.yf = c;
      this.Cb = a;
      this.ri = d;
      this.Jo = {}
    }

    function b(a, b) {
      var c = b.split(".").slice(-2, -1)[0].split("_");
      return {
        url: b,
        ri: a,
        rv: (5 < c.length ? parseInt(c[5], 10) : 1) / parseInt(c[0], 10),
        vJ: parseInt(c[1], 10),
        yJ: parseInt(c[2], 10),
        uJ: parseInt(c[3], 10),
        xJ: parseInt(c[4], 10),
        getName: function () {
          return "tile_" +
            b.substring(b.lastIndexOf("/") + 1)
        },
        JE: function (a) {
          var b = this.rv * this.ri * this.uJ,
            c = this.rv * this.ri * this.xJ,
            d = this.rv * this.vJ,
            e = this.rv * this.yJ,
            f = this.getName();
          a.NU = !0;
          a.oR = !0;
          a.pR = !0;
          a.fQ = "high";
          a.eQ = !0;
          window.ci[f] && a.I(window.ci[f], 0, 0, this.vJ, this.yJ, b, c, d, e)
        }
      }
    }

    function f() {}
    d.prototype = {
      clone: function () {
        var a = new d(this.Df, this.La);
        a.Ta = JSON.parse(JSON.stringify(this.Ta));
        a.qb = this.qb.clone();
        a.Kl = this.Kl;
        return a
      }
    };
    c.prototype = {
      XM: function () {
        this.Jo = {}
      },
      fM: function (a, b) {
        var c = Math.ceil(1 * this.w *
          b / this.ri) | 0;
        this.Jo[b] = this.Jo[b] || [];
        for (var d = this.Jo[b], e = 0; e < a.length; e++) d[a[e].xJ * c + a[e].uJ] = a[e]
      },
      EP: function (a, b) {
        var c = Math.max(Math.min(30, Math.round(3 * b) | 0), 1),
          d = c / b,
          e = Math.ceil(1 * this.w * c / this.ri) | 0,
          f;
        if (!(c in this.Jo)) return null;
        var g = [],
          h = {
            tiles: g,
            p: this.Cb,
            z: c,
            missing: 0
          },
          u = Math.floor(a[0] * d / this.ri) | 0,
          w = Math.ceil(a[2] * d / this.ri) | 0,
          A = Math.ceil(a[3] * d / this.ri) | 0,
          c = this.Jo[c];
        for (f = Math.floor(a[1] * d / this.ri) | 0; f < A; f++)
          for (d = u; d < w; d++) c[f * e + d] ? g.push(c[f * e + d]) : h.missing += 1;
        return h
      }
    };
    e.prototype = {
      create: function (a, b, c, d, e) {
        this.Vh = b;
        this.Tq = c;
        this.Cb = a;
        this.or = d;
        this.Fq = e;
        this.Qq = this.kh;
        this.Uu = this.zoom;
        this.nl = this.kh = null;
        this.gl = !1
      },
      LT: function (a) {
        this.kh = a
      },
      run: function (a, b) {
        var c = this;
        if (c.gl) return !0;
        this.zoom = b.m_a;
        var d = 0,
          e = this.zoom.toFixed(5) === this.Uu.toFixed(5);
        if (!c.kh) {
          a.S();
          a.NU = !0;
          a.oR = !0;
          a.pR = !0;
          a.fQ = "high";
          a.eQ = !0;
          a.I(window.ci[this.Vh], 0, 0, this.Tq.width, this.Tq.height);
          a.r();
          if (this.Qq)
            for (d = 0; d < this.Qq.length; d++) this.Qq[d].JE(a, b, e ? "rgba(0, 0, 255, 0.5)" :
              "rgba(255, 0, 0, 0.5)");
          if (d = this.or && this.Fq) {
            var e = [-b.m_h, -b.m_v, a.canvas.width - b.m_h, a.canvas.height - b.m_v],
              f = c.Fq,
              g = c.or;
            c.Fq = null;
            c.or = null;
            this.nl = createPromiseCapability();
            var h = function () {
              c.gl || c.nl && c.nl.resolve()
            };
            g(c.Cb, c.zoom, e, 960).then(function (a) {
              !c.gl && a && f(a, c, h)
            })
          }
          return !d
        }
        if (this.kh && this.kh.length)
          for (d = 0; d < this.kh.length; d++) this.kh[d].JE(a, b, "rgba(0, 255, 0, 0.5)");
        return !0
      },
      clone: function () {
        var a = new e;
        a.Vh = this.Vh;
        a.Tq = this.Tq;
        a.Cb = this.Cb;
        a.or = this.or;
        a.Fq = this.Fq;
        a.kh = this.kh;
        a.Qq = this.Qq;
        a.zoom = this.zoom;
        a.Uu = this.Uu;
        return a
      },
      Rq: function () {
        return this.nl ? this.nl.promise : Promise.resolve()
      },
      cancel: function () {
        this.gl = !0;
        this.nl && this.nl.resolve()
      }
    };
    var g = a.o;
    g.Ar = function (b) {
      this.pf = [];
      this.Ed = {};
      this.ce = {};
      this.bv = {};
      this.Uh = {};
      this.he = {};
      this.bq = {};
      this.ja = null;
      this.Im = this.ze = new a.af.Rr;
      this.id = b;
      this.La = this;
      this.sb = [];
      this.$A = [];
      this.pg = {};
      this.tH = this.J = [];
      this.page = [];
      this.te = null;
      this.Dj = {};
      this.sr = createPromiseCapability();
      this.dv = createPromiseCapability();
      this.Wn =
        null;
      this.hv = [];
      this.Sp = null;
      this.Pv = this.Ov = !0;
      this.OQ = 0;
      this.mU = 1;
      this.Fp = null;
      this.FE = this.XA = !1;
      this.sv = []
    };
    g.Ar.prototype = Object.create(g.Ke.prototype);
    g.Ar.prototype.constructor = g.ph;
    var h = {
      Ed: !0,
      $b: !0,
      zj: !0,
      bj: !0,
      Cn: !0,
      hq: !0,
      getFileData: !0,
      Nh: !0,
      wo: !0,
      Qk: !0,
      An: !0,
      nq: !0
    };
    $.extend(g.Ar.prototype, {
      ZP: function (a) {
        return a.ZF().then(function (a) {
          return Promise.resolve(!!a.url)
        })
      },
      kN: function (a) {
        return a.pS()
      },
      bj: function (a) {
        2 === this.pg[a] ? (delete this.pg[a], this.Lp(0, a)) : this.pg[a] && delete this.pg[a]
      },
      zj: function (a, b) {
        if (!this.J || this.J.length < a) throw Error("Document is not initialized!");
        var c = this,
          d = c,
          e, f = null;
        c.$A[a] ? f = Promise.resolve(c.$A[a]) : this.ej || (f = c.te.uv(a));
        f ? (e = c.iE(), d.pg[e] = 1, f.then(function (f) {
          var g = new Image;
          c.$A[a] = f;
          g.onload = function () {
            URL.revokeObjectURL(f.url);
            d.pg[e] && (b(g), delete d.pg[e]);
            g = g.onload = null
          };
          g.src = f.url
        })) : (c = this.ej, f = c.J[a], e = c.$g({
          pageIndex: a,
          zoom: f.width > f.height ? 450 / f.width : 450 / f.height,
          drawComplete: function (a) {
            a.style.backgroundColor = "white";
            d.pg[e] &&
              (c.Ao(e), b(a), delete d.pg[e])
          },
          pageCanvas: !0
        }), d.pg[e] = 2);
        return e
      },
      TA: function () {
        return this.Pv && (a.utils.ie || !this.Ov || a.utils.isMobileDevice)
      },
      HM: function () {
        return !a.utils.isMobileDevice
      },
      SI: function (b) {
        function c(g) {
          h[g] || ("function" === typeof b[g] ? (a.utils.log("load", "Redirected function name " + g), q[g] = f(g)) : (a.utils.log("load", "Redirected property name " + g), Object.defineProperty(q, g, {
            get: d(g),
            set: e(g)
          })))
        }

        function d(a) {
          return function () {
            return q.ej[a]
          }
        }

        function e(a) {
          return function (b) {
            q.ej[a] =
              b
          }
        }

        function f(a) {
          return function () {
            return q.ej[a].apply(q.ej, arguments)
          }
        }
        if (null === b) return a.utils.log("load", "Not switching backends because the server gave us nothing to use"), !1;
        var q = this,
          v = this.TA();
        a.utils.log("load", "Switching backend XOD: " + v);
        var p = v ? g.Ke.prototype : g.ph.prototype;
        q.XA = v;
        if (q.Wn && q.XA && (v = q.Wn.Sg().Wa().Qg())) {
          q.tH = q.J;
          q.hv = [];
          for (var u = 0; u < v.length; ++u) q.hv.push(v[u])
        }
        q.ej = b;
        for (var w in b)(b.hasOwnProperty(w) || p.hasOwnProperty(w)) && c(w);
        q.Uv();
        b.AR = b.kA;
        b.kA = function (a) {
          if ("pagesUpdated" ===
            a.type) {
            var c = a.data.pageDimensions;
            Object.keys(c).forEach(function (a) {
              var b = parseInt(a, 10) - 1;
              a = c[a];
              a.id = "" + b;
              a.contentChanged &= !q.sv[b];
              q.sv[b] = 0
            })
          }
          b.AR(a)
        };
        b.Nt = q.Nt;
        try {
          localStorage.setItem("isCached", !0)
        } catch (A) {
          a.utils.log("load", "Couldn't add the loaded marker to localStorage")
        }
        return !0
      },
      nY: function () {
        return Promise.resolve(a.WebAssembly ? a.HQ(a.LP()) : !0)
      },
      UT: function (a) {
        return this.TA() ? this.ZP(a) : a.rF().then(function (a) {
          return Promise.resolve(a.unhealthy)
        })
      },
      fE: function (b, c, d) {
        function e(a,
          b) {
          return new Promise(function (c, e) {
            b.Bf(a, function (a) {
              a ? e(a) : c(b)
            }, d)
          })
        }
        var f = c.GO(),
          h = {
            withCredentials: c.NP(),
            useDownloader: !0
          };
        if (this.TA()) {
          var v = function (c) {
            if (c.flat || !c.url) return Promise.resolve(null);
            c = new a.o.V.Wj(c.url, h);
            c.El(f);
            var d = new g.Ke(b);
            return e(c, d)
          };
          return d.eG ? v(d.eG) : this.kN(c).then(v)
        }
        if (!this.HM()) return Promise.resolve(null);
        var p = g.Ky().then(function (a) {
          return g.qu(a, d.workerHandlers ? d.workerHandlers : {}, d.l)
        });
        return Promise.all([c.RH(), p]).then(function (a) {
          a = new g.V.Ir(a[0].url,
            h);
          a.El(f);
          var b = new g.ph;
          d.workerTransportPromise = p;
          d.extension = "pdf";
          return e(a, b)
        })
      },
      cM: function (a) {
        if (0 !== a.length) {
          for (var b = 0; b < a.length; ++b)
            for (var c = a[b], d = Math.min(this.J.length, c.i - 1), e = c.i + c.n - 2; e >= d; --e) {
              var f = this.jw(c);
              this.J[e] = f
            }
          this.Jq = this.Kp();
          this.kj({
            type: "pagesUpdated",
            data: this.J.slice()
          })
        }
      },
      XL: function (a) {
        function b(a) {
          var c = [];
          a.children.forEach(function (a) {
            c.push(b(a))
          });
          return new g.Xe(c, a.name, a.pageNumber, a.parent, a.verticalOffset, a.horizontalOffset, a.url)
        }
        for (var c = 0; c <
          a.length; ++c) this.pf.push(b(a[c]))
      },
      Bf: function (b, c, d) {
        var e = this;
        e.te = e.Va = b;
        e.J = [];
        e.La = e;
        a.utils.log("load", "Request Document");
        e.te.gT(function () {
          e.tQ()
        }, null);
        e.te.rF().then(function (f) {
          e.Ov &= f.hasPDF;
          e.Pv &= f.hasXOD;
          "tileScale" in f && (e.mU = f.tileScale);
          e.te.yl(d.extension).then(function (f) {
            a.utils.log("load", "Document response received.");
            f && ("pages" in f && e.cM(f.pages), "bookmarks" in f && (e.pf = [], e.XL(f.bookmarks)));
            e.Fp = e.te.lF();
            e.UT(b).then(function (f) {
              a.utils.log("load", "Should we use client side rendering? " +
                f);
              if (f) "object" === typeof f && (d.eG = f), e.fE(e.id, b, d).then(function (a) {
                e.SI(a);
                e.Uv().then(function () {
                  e.Wn = c();
                  e.dv.resolve(e.Wn)
                })
              });
              else {
                e.Uv().then(function () {
                  e.Wn = c();
                  e.dv.resolve(e.Wn)
                });
                if (e.Ov || e.Pv) a.utils.log("load", "Load client side document"), e.sr.resolve(!0), e.sr.promise.then(function () {
                  e.fE(e.id, b, d).then(function (a) {
                    var b = e.J[0].height,
                      c;
                    e.SI(a) && e.dv.promise.then(function (a) {
                      if (a = a.Sg()) {
                        for (var d = 0; d < e.J.length; d++) e.J[d].mg(a);
                        for (var f = !1, g = (e.J[0].height | 0) === (b | 0), h = b / e.J[0].height,
                            l = a.N.be(), d = 0; d < l.length; d++) !g && a.N.fP(l[d].Ra - 1) && (f = !0, a.N.Hv(l[d].Ra - 1, l[d].zoom * h), a.Rk(l[d].Ra - 1)), (c = a.Fa.Nc(l[d].id)) && c.rd && (c.rd = null);
                        g || a.N.pi(a.N.dg * h);
                        f || g || (a.ki(), a.ea.qg());
                        a.trigger("backendSwitch")
                      }
                    })
                  })
                });
                e.hc = new Promise(function (a) {
                  e.bind("documentComplete", function () {
                    e.unbind("documentComplete");
                    a()
                  })
                })
              }
            })
          }, function (a) {
            c(a)
          })
        }, function (a) {
          c(a)
        })
      },
      Kd: function (a, b) {
        a in this.sb && this.sb[a].text ? b(this.sb[a].text) : this.kz(a, b)
      },
      Jh: function (a) {
        return a
      },
      Zy: function (f, g, h) {
        if (f in
          this.J) {
          var n = this;
          n.OQ = f;
          this.sb[f] = this.sb[f] || new d(f, this);
          var r = this.sb[f],
            q = null,
            v = null;
          r.qb ? q = Promise.resolve(r) : (a.utils.log("load", "blackbox(pgi: " + f + ") request image"), q = (0 !== f ? n.sr.promise.then(function () {
            return n.te.uv(f)
          }) : n.te.uv(f)).then(function (a) {
            r.Kl = new c(f, n.J[f].width, n.J[f].height, 960);
            n.J[f].Vh = a.name;
            r.qb = new e;
            r.Ta[n.J[f].Vh] = {
              data: a.url,
              type: "jpg",
              name: n.J[f].Vh
            };
            return r
          }, function (b) {
            v = b;
            a.utils.log("load", "blackbox(pgi " + f + ") error requesting image: " + b);
            r.Ta.img_error = {
              data: "",
              type: "jpg",
              name: "img_error"
            };
            r.qb = new e;
            r.qb.create(f, "img_error", n.J[f], null, null);
            return r
          }));
          var p = function (a, c, d, e) {
            var f = r.Kl.EP(d, c);
            return f && 0 === f.missing ? Promise.resolve(f) : n.te ? n.te.oS(a, c, d, e).then(function (a) {
              for (var c = a.tiles, d = 0; d < c.length; d++) c[d] = b(a.size, c[d]);
              return Promise.resolve(a)
            }) : Promise.resolve(null)
          };
          q.then(function (b) {
            a.utils.log("load", "blackbox(pg " + f + ") has image URL");
            var c = null,
              d = n.sv[f];
            n.sv[f] = d ? d + 1 : 1;
            b.qb.create(f, n.J[f].Vh, n.J[f], p, function (d, e, f) {
              if (g in
                n.Ed && !b.qb.gl) {
                var h, l, m = d.tiles,
                  q = n.Ed[g].Cf,
                  p = !("missing" in d),
                  r = [],
                  v = 0;
                for (; v < m.length; v++) l = m[v], h = l.getName(), c.Ta[h] || (l = {
                  data: l.url,
                  type: "jpg",
                  name: h
                }, r.push(l), c.Ta[h] = l);
                p && b.Kl.fM(m, d.z);
                b.Ta = JSON.parse(JSON.stringify(c.Ta));
                e.LT(m);
                b.qb = e.clone();
                q.Qz(function () {
                  n.sr.resolve();
                  f()
                }, r, !0);
                p && a.utils.log("load", "Server took " + d.runTime + "ms to generate " + m.length + " tiles")
              }
            });
            c = b.clone();
            n.Dj[g] = c.qb;
            a.utils.log("load", "blackbox(pg " + f + ") calling resource load callback");
            h(v, c)
          }, function (a) {
            console.warn("Error creating resources for page: " +
              a);
            h(a)
          })
        } else h(Error("The page " + (f + 1) + " does not exist."))
      },
      kz: function (a, b) {
        var c = this;
        if (a in this.J) {
          this.sb[a] = this.sb[a] || new d(a, this);
          var e = this.sb[a],
            f = null,
            f = e.text ? Promise.resolve(e) : c.te.nS(a).then(function (b) {
              var d = new XODText.df;
              d.ev({
                Ya: b.struct,
                Qa: b.str,
                Xb: b.offsets,
                Ea: b.quads,
                jc: !0
              });
              c.J[a].text = d;
              c.xt(a, d);
              e.text = d;
              return e
            }, function (b) {
              console.warn("Error retrieving text for page: " + b);
              b = new XODText.df;
              b.ev({
                Ya: [],
                Qa: "",
                Xb: [],
                Ea: [],
                jc: !0
              });
              c.J[a].text = b;
              e.text = b;
              return e
            });
          f.then(function (a) {
            b(a.text)
          })
        } else b(Error("The page " +
          (a + 1) + " does not exist."))
      },
      Lp: function (a, b) {
        b in this.Dj && (this.sr.resolve(), this.Dj[b].cancel(), delete this.Dj[b])
      },
      mW: function () {
        for (var a = _.keys(this.Dj), b = 0; b < a.length; b++) this.Lp(0, a[b])
      },
      tQ: function () {
        this.sb && _.each(this.sb, function (a) {
          a.Kl && a.Kl.XM()
        })
      },
      il: function () {
        return !1
      },
      bl: f,
      yo: f,
      wj: function () {
        return !1
      },
      Nh: function () {
        var a = this;
        return a.Uv().then(function () {
          return a.Fp.then(function (b) {
            return {
              xfdfString: b,
              pages: _.range(1, a.J.length + 1)
            }
          })
        })
      },
      Uv: function () {
        var b = this;
        b.Fp || (b.Fp = b.te.lF());
        return b.Fp.then(function (c) {
          if (b.XA && !b.FE) {
            c = a.Annotations.ba.sq(c);
            b.PC(c);
            var d = [];
            b.hv.forEach(function (a) {
              var c = a.IsModified,
                e = a.Ac() - 1;
              if (!d[e]) {
                var f = b.tH[e].eb;
                d[e] = new XODText.Ca;
                d[e].al(b.J[e].eb);
                d[e].concat(f.inverse())
              }
              a.lh(d[e]);
              a.IsModified = c
            });
            b.hv = [];
            b.FE = !0
          }
        })
      },
      Tm: f,
      yn: function () {
        return !1
      },
      po: f,
      WA: f,
      xn: function () {
        return []
      },
      Ab: function () {
        return this.J.length
      },
      zc: function (a) {
        var b = {};
        b.width = this.J[a].width;
        b.height = this.J[a].height;
        return b
      },
      cj: function (a) {
        a in this.Ed && this.Ed[a] &&
          delete this.Ed[a];
        a in this.Dj && delete this.Dj[a]
      },
      $b: function () {
        for (var b in a.ci)(b.startsWith("tile_t") || b.startsWith("pageimg")) && delete a.ci[b];
        g.Ke.prototype.$b.call(this);
        this.sb = [];
        this.pg = {};
        this.Dj = {};
        this.La = null;
        this.ej && this.ej.$b()
      },
      ls: function () {},
      jw: function (b) {
        var c = new a.Zo(b.w, b.h),
          d = b.mtx;
        c.eb = new XODText.Ca;
        c.eb.Ha(d[0], d[1], d[2], d[3], d[4], d[5]);
        var e = this.aj(c.eb);
        c.eb = this.qU(d, {
          w: b.w,
          yf: b.h
        });
        c.rotation = e;
        return c
      },
      qU: function (a, b) {
        var c = new XODText.Ca;
        c.Ha(a[0], a[1], a[2],
          a[3], a[4], a[5]);
        var d = this.Jp(c, b);
        c.Ha(1, 0, 0, -1, -d.x1, d.y2);
        return c
      },
      Sk: function () {
        return Promise.resolve(this.pf)
      },
      getFileData: function (a) {
        if (this.Sp) return this.Sp.promise;
        var b = this.Sp = createPromiseCapability(),
          c = this,
          d = {};
        a.xfdfString && (d.annots = a.xfdfString);
        this.Ly(d).then(function (a) {
          var d = new XMLHttpRequest;
          d.open("GET", a.url, !0);
          d.withCredentials = !0;
          d.responseType = "arraybuffer";
          d.setRequestHeader("Cache-Control", "no-cache");
          d.setRequestHeader("X-Requested-With", "XMLHttpRequest");
          d.onreadystatechange =
            function () {
              if (4 === d.readyState) {
                c.Sp = null;
                try {
                  200 === d.status ? b.resolve(d.response) : b.reject("Unable to download PDF data: " + d.status)
                } catch (a) {
                  b.reject("Unable to download PDF data: " + a)
                }
              }
            };
          d.send()
        }, function (a) {
          b.reject("Unable to download PDF data: " + a)
        });
        return b.promise
      },
      Cn: function () {
        return this.Ly({
          print: !0
        })
      },
      hq: function (a) {
        a = a || {};
        return this.Ly(a).then(function (b) {
          var c = a.downloadName || a.filename,
            d = b.url.lastIndexOf(".pdf");
          b.url = b.url.substring(0, 0 < d ? d : b.url.length) + "?attach=pdf" + (c ? "&dlname=" +
            encodeURIComponent(c) : "");
          return Promise.resolve(b)
        })
      },
      Qk: function (a) {
        a = a.length;
        for (var b = Array(a), c = 0; c < a; ++c) b[c] = Promise.reject("BlackBoxDocument does not support appearances");
        return b
      },
      Ly: function (a) {
        var b = this;
        return this.dv.promise.then(function (c) {
          var d = c.Sg();
          return d.WF().then(function (e) {
            var f = createPromiseCapability(),
              g = createPromiseCapability();
            if (e) {
              e = c.zc(0);
              var h = document.createElement("canvas");
              h.width = e.width;
              h.height = e.height;
              var u = h.getContext("2d");
              u.rect(0, 0, e.width, e.height);
              u.fillStyle = "rgba(255, 255, 255, 0.0);";
              u.fill();
              b.ry(h, 0);
              h.gY(function (a) {
                f.resolve(a)
              })
            } else f.resolve(null);
            e = d.Wa();
            e = a.annots || (e ? e.UE() : null);
            a.annots = null;
            g.resolve(e);
            return Promise.all([g.promise, f.promise]).then(function (c) {
              var d = JSON.parse(JSON.stringify(a || {}));
              d.annots = c[0];
              d.watermark = c[1];
              return b.te.EF(d)
            })
          })
        })
      },
      Mv: function (a) {
        a = JSON.parse(JSON.stringify(a || {}));
        a.redactions = a.redactPart;
        return this.te.EF(a)
      },
      vj: function () {
        return !1
      },
      KF: function (a) {
        return this.J[a].links
      },
      Mj: function () {
        return !0
      }
    })
  })(window);
}).call(window);
